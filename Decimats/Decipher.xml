Decipher support: SurveySupport@forsta.com



https://survey-d.dynata.com/apps/portal#/projects/list
ADMIN ACCT:
jayeduard.paglinawan@dynata.com
!Password001!


SHELL ACCOUNT
jayeduard.paglinawan@dynata.com
7mmy4s6v


PUTTY CONFIGURATION
Host Name:
	jayeduard.paglinawan@rn.decipherinc.com
Port:
	22
SSH:
	ON
Only on clean exit:
	ON

Click Open
Click YES
Enter Password:
  7mmy4s6v
New Password:
	!Password00!






afhurt1e



NORMAL ACCT:
jayeduard.paglinawan@surveysampling.com
!Password01!




DIRECT XML-EDIT:
https://survey-d.dynata.com/apps/lumos/53b/XXXXXX:xmledit



LIVE TEMP VIEW:
https://survey-d.dynata.com/apps/lumos/53b/XXXXXX/temp-view:xmledit





https://survey-ca.dynata.com/apps/portal#/projects/list
jayeduard.paglinawan@surveysampling.com
!Password08!




Decipher notes:
file:///C:/j.a.y/Decipher%20NewCodes/index.html#code2



++BROWSER SWIPE
++DECIPHER THEME / SWIPE:
C:\j.a.y\Decipher NewCodes
  unzip folder "Plugin Port v1"

Go to: chrome://extensions
  click Developer mode
  Load unpacked
  search folder C:\j.a.y\Decipher NewCodes named "Plugin Port v2" folder "rnd_helper_chome_extension"
  is ok now


++SALES LINKS:
https://confluence.dynata.com/display/RT/Sales+Useful+Links


Info Page	! Make Survey Comment
Single	! Make Radio
Multi		! Make Checkbox
Rating	! Make Rating
Dropdown	! Make Select
Single Text	! Make Text
Text Area	! Make Textarea
Numeric	! Make Number


++DGUST Template
v2.2 (!!!USE THIS!!!): DGUST my:favorite
dgust/10000220


++Dstar template:
https://survey-d.dynata.com/apps/portal/#/projects/detail/selfserve/53b/dstar/100041
	OK RA WAI CHECK

++Editing a Live survey:
https://support.focusvision.com/Decipher/0003_Build/012_Advanced_Setup/120_Editing_a_Live_Survey

++Verifying the Datamap:
https://support.focusvision.com/Decipher/0004_Test/050_Report_Testing/070_Verifying_the_Datamap

++Lightbox: click popup text tool
++Lightbox popup css:
<style name="question.after"><![CDATA[
<style>
	.grid.grid-table-mode .row-legend {text-align: center;}
	.ui-dialog{ // popup dialog box
	    height: 700px !important;
	    width: 800px !important;
	    top: 0px !important;
	    left: 210px !important;
	    overflow: scroll !important;
	}
</style>
]]></style>

	.ui-dialog img{ // image inside - popup dialog box
		min-height: 900px;
		min-width: 900px;
	}



++EMAIL TRAIL STANDARD FORMAT NAMING SUBJECT LINE
Confirmit/Decipher/CMIX# | ORD# | ClientName | ProjectName



Sublime Theme Color: http://tinyurl.com/decipherChaomein
	C:\j.a.y\Decipher NewCodes
After download- go to " chrome://extensions/ "
Then Enable Developer Mode
Click Load unpacked
Then locate folder(unzipped file)gg



++NAMING CONVENTIONS:
vQ# - virtual question – hidden question for reports only
hQ# - hidden question - dummy questions that aren’t needed in the data – for programming purposes.
dQ# - data question – hidden question that should be included in the data




++CHANGE STYLE SHEET TO: AUTO OPEN PRINT BOX
<style cond="1" name="respview.client.css"><![CDATA[
    <style>

        /* your code goes here */
        div.survey-info{
            display: block!important
        }

    </style>
<style type="text/css">
	.autosave-restart { display: none; }
	.grid.grid-table-mode .col-legend { vertical-align: bottom; }</style>
]]></style>


++MULTI QUESTION SET:
qbrandspick.r2.val = 1 # qbrandspick choice 2 is now selected

++SINGLE QUESTION SET:
qbrandspick.val = qbrandspick.r2.index # qbrandspick choice 2 is now selected

++CHECK IF SINGLE IS SELECTED:
dQ2.selected.text # '0-17' '18-25' '26-35'
dQ2.selected.label # r1 r2 r3


++NOTES:
Q2.val = 0 -- assigns to the first answer choice

++ADD ASCII: &amp;#91;
++ADD UNICODE: &amp;#91;
https://www.browserling.com/tools/html-encode



++INFO PAGE:
<html label="qintro" where="survey">Thank you for agreeing to take our survey.   This survey will take you about 5 minutes to complete.  Please click "Continue" to begin.</html>
<suspend/>

++SINGLE:
<radio label="Q1">
  <title>Are you…</title>
  <comment>Select one</comment>
  <row label="r1" value="1">Male</row>
  <row label="r2" value="2">Female</row>
</radio>
<suspend/>

++NUMERIC:
<number label="Q2" size="3" optional="0">
  <title>How old are you?</title>
  <comment>Please enter a whole number</comment>
</number>
<suspend/>

++MULTI:
<checkbox label="Q6" atleast="1">
<checkbox label="Q6" atmost="3">
<checkbox label="Q6" exactly="3">
  <title>Which <b><u>one</u></b> of these brands would you most likely purchase next?</title>
  <comment>Select all that apply</comment>
  <row label="r1">Brand 1</row>
  <row label="r2">Brand 2</row>
  <row label="r3">Brand 3</row>
  <row label="r4">Brand 4</row>
  <row label="r5" exclusive="1" randomize="0">None of the above</row>
</checkbox>
<suspend/>

++OPEN END:
<textarea label="Q7" optional="0">
  <title>Why would that be your next purchased brand?</title>
  <comment>Please be as specific as possible</comment>
</textarea>
<suspend/>

++GRID:
++3D-GRID:
<radio label="Q8" type="rating">
  <title>How would you rate each brand overall on the following scale?</title>
  <comment>Select one</comment>
  <row label="c1" value="1">Excellent</row>
  <row label="c2" value="2">Very Good</row>
  <row label="c3" value="3">Good</row>
  <row label="c4" value="4">Fair</row>
  <row label="c5" value="5">Poor</row>

  <col label="r1">Brand 1</row>
  <col label="r2">Brand 2</row>
  <col label="r3">Brand 3</row>
  <col label="r4">Brand 4</row>
</radio>
<suspend/>

++3D-GRID:
<radio label="Q8" type="rating">
  <title>How would you rate each brand overall on the following scale?</title>
  <comment>Select one</comment>
  <col label="c1" value="1">Excellent</col>
  <col label="c2" value="2">Very Good</col>
  <col label="c3" value="3">Good</col>
  <col label="c4" value="4">Fair</col>
  <col label="c5" value="5">Poor</col>

  <row label="r1">Brand 1</row>
  <row label="r2">Brand 2</row>
  <row label="r3">Brand 3</row>
  <row label="r4">Brand 4</row>
</radio>
<suspend/>

++DROP DOWN GRID:
++UNIQUE ANSWER PER ROW: unique="rows" minRanks="1"
++UNIQUE ANSWER PER COLUMN: unique="cols" minRanks="1"
++UNIQUE ANSWER PER ROW+COLUMN: unique="rows,cols" minRanks="1"
++RANKING:
uses="ranksort.4"
<select label="Q9" optional="0" unique="rows" minRanks="1" uses="ranksort.4"
  ranksort:bucketCSS="height:80px"
  ranksort:cardCSS="height:80px"
  >
  <title>Please rank the following brands from most favorite to least favorite?</title>
  <choice label="ch1">1 - Most favorite</choice>
  <choice label="ch2">2</choice>
  <choice label="ch3">3</choice>
  <choice label="ch4">4 - Least Favorite</choice>

  <row label="r1">Brand 1</row>
  <row label="r2">Brand 2</row>
  <row label="r3">Brand 3</row>
  <row label="r4">Brand 4</row>
</select>
<suspend/>

++DISABLE DRAG
for r2:
$("#sq-ranksort-card-r2").draggable({ disabled: true });





++EXCEL SHOW FORMULA
CTRL + ~







++FAVORITE HARD CODE (no verification logic):
++XML STYLES:
<checkbox
  label="Q53"  grouping="cols" atleast="1">
  <title>Please select one an is it your favorite?</title>
  <comment>Select one</comment>
  <row label="r1" value="1">Brand 1</row>
  <row label="r2" value="2">Brand 2</row>
  <row label="r3" value="3">Brand 3</row>
  <row label="r4" value="4">Brand 4</row>
  <row label="r5" value="5">Brand 5</row>

  <col label="c1">Aware</col>
  <col label="c2" optional="1">Favorite</col>


<style name='el.checkbox'>	<![CDATA[
\@if col.index==0
	<input type="checkbox" name="$(name)" id="$(id)" value="1" $(checked) class="${flags.CSS} input checkbox" $(extra)/>
\@else
	<input type="radio" name="${name.split('.')[0]}.${col.index}.0" value="$(value)" id=$(id) $(checked) class="input radio" $(extra)/>
\@endif
]]>
</style>

</checkbox>

TIP:
name="${name.split('.')[0]}.${col.index}.0"
Example Name = "ans7049.1.0"
	we split name to get "ans7049.{1,2,3..}" for all columns
	we then add 0 at the end to make it a single punch



2. 1 checkbox question, Brand 1-9 and Store Brand as rows. Only 1 should be selected for Brands 1-9 and Store Brand could be selected with the other brands.
<checkbox
  label="Q49b" atleast="1">
  <title>Please select one an is it your favorite?</title>
  <comment>Select many</comment>
  <row label="r1" value="1">Brand 1</row>
  <row label="r2" value="2">Brand 2</row>
  <row label="r3" value="3">Brand 3</row>
  <row label="r4" value="4">Brand 4</row>
  <row label="r5" value="5">Brand 5</row>
  <row label="r6" value="6">Brand 6</row>
  <row label="r7" value="7">Brand 7</row>
  <row label="r8" value="8">Brand 8</row>
  <row label="r9" value="9">Brand 9</row>
  <row label="r10" value="10">Store Brand</row>


<style name='el.checkbox'> <![CDATA[
\@if row.index>=0 and row.index<=8
	<input type="radio" name="${name.split('.')[0]}.0.0" value="$(value)" id=$(id) $(checked) class="input radio" $(extra)/>
\@else
	<input type="checkbox" name="$(name)" id="$(id)" value="1" $(checked) class="${flags.CSS} input checkbox" $(extra)/>
\@endif
]]></style>

</checkbox>

<suspend/>






++CSS STYLE FOR THIS QUESTION ONLY:
<style name="question.after" cond="1">	<![CDATA[
	<style>
	.nopad{padding-left: 0;}
	</style>
]]>
</style>
</closing>







++PIPE: OTHER
  <row label="r6" alt="Other from Q5">${Q5.r6.open}</row>



++DRAG AND DROP:
<select label="Q12" optional="1" shuffle="rows" minRanks="5" unique="none,cols" uses="ranksort.4">
  <title>Please rank the following fruits with 1 being the one you "Most Enjoy" and 5 being the one you "Least Enjoy"</title>
  <choice label="c1">5 - Least Enjoy</choice>
  <choice label="c2">4</choice>
  <choice label="c3">3</choice>
  <choice label="c4">2</choice>
  <choice label="c5">1 - Most Enjoy</choice>
  <row label="r1">Oranges</row>
  <row label="r2">Grapes</row>
  <row label="r3">Peaches</row>
  <row label="r4">Plums</row>
  <row label="r5">Cherries</row>
</select>
<suspend/>





++RANKING with basis:
[ONLY SHOW BRANDS SELECTED IN Q4]
<exec>
Q9.minRanks = Q4.count
</exec>


<exec>
</exec>


++RANKING CHOICECOND:
[Based in Q5i]
<exec when="init">
def chCond(CHOICE):
    if CHOICE.index lt Q5i.count:
		return True
    else:
        return False
</exec>

choiceCond="chCond(choice)"




++SHUFFLE:
 shuffle="rows"
 shuffle="cols"
 shuffle="rows,cols"
 shuffle="rows" shuffleBy="Q4" # same order as Q4
 shuffle="rows" rowShuffle="rotate" # rotated rows
 shuffle="rows" rowShuffle="flip" # flip rows

shuffle="rows,groups"



++TEST JUMP TO:
?start-at=Q10
https://survey-d.dynata.com/survey/selfserve/53b/g038/1902105?start-at=Q10


++CHANGE ERROR MESSAGES TEXT:
++CHANGE CONTINUE BUTTON TEXT:
Go to More Tools > Language Manager > System Survey Resources
	search: Language (English)
	search: what you want to change (example "continue")
Go to HTML Editor
	add the following before <samplesources
	<res label="sys_continue">Next</res>
	"sys_continue" == "sys_" + RES name of what you want to change
	[res.sys_continue]

++QUESTION VALIDATION:
Add <validate></validate> tag before question closing tag
For custom error message add <res label=""></res> tag before <samplesources

Example:
<res label="Q2Error">You are not allowed, you party too much.  Enter a different age!</res>

<number label="Q2" size="3" optional="0">
  <title>How old are you?</title>
  <comment>Please enter a whole number</comment>
<validate>
if Q2.val==21:
	error(res.Q2Error)
</validate>
</number>
<suspend/>


++TERMINATES:
<term cond="">: selected r () </term>
	Add after <suspend/>

Example:
<suspend/>
<term cond="not Q2.check('12-56')">Q2: Age not between 12 to 56</term>
	<term cond="Q2.val lt 12 or Q2.val gt 56">Q2: Age not between 12 to 56</term> #same as above

Simple Example:
	<term cond="Q3.r5 or Q3.r6 or Q3.r7">Q3: Market research/advertising/public relations || Television or broadcasting || Weather forecasting</term>

CAREFUL IN SURVEY TAG [Term]: DOES NOT READ NEGATED CONDITION (NOT)



++VERIFY RANGE:
for instructions like: [ONLY ALLOW ANSWERS 1-100]
add this in the question tag
	verify="range(1, 100)"


++HIDDEN QUESTIONS: hQ1
++DUMMY DUMMIES QUESTIONS: dQ1
training:
	where="execute"
add this in the question tag
	 optional="1" where="execute,survey,report" translateable="0"


++TO POPULATE HIDDEN QUESTIONS:
++TO POPULATE DUMMY QUESTIONS:
++TERNARY OPERATOR
Add <exec></exec> before the hidden question

Example:
<exec>
for eachRow in dQ2.rows:
    agerange = "65-100" if eachRow.label=='r7' else eachRow.text #TERNARY operator
    if Q2.check(agerange):
        dQ2.val = eachRow.index #assign the value to the dummy
        break
</exec>





<res label="Q9x1">fintech</res>
<res label="Q9x2">insurtech</res>

${res.Q9x1 if Q8.r1 else res.Q9x2}




++SAME VARIABLE RANDOMIZATION:
Add in question tag:
	shuffleBy="Q4"


++MASKING: Rows
++SHUFFLE: Rows
[ONLY SHOW BRANDS SELECTED IN Q4]
Add in question tag:
	 rowCond="Q4[row]"
rowCond -- AUTOMATICALLY AUTOCODES

rowCond="not Q110.choices[row.index]"

++MASKING: Rows
IF YOU DO NOT WANT TO AUTOCODE:
Add in <exec>: when="init"

Example:
<exec when="init">
def Q6RowCond(ROW):
	if ROW.label!="r5":
		if Q4.rows[ROW.index]:
			return True
		else:
			return False
	else:
		return True
</exec>

<checkbox label="Q6" atleast="1" shuffle="rows" rowCond="Q6RowCond(row)">



Example Q5:
[KEEP ORDER SAME AS Q4] [ONLY SHOW BRANDS SELECTED IN Q4]
[SAME ORDER AS Q4]

<checkbox label="Q4" atleast="1" randomize="1" shuffle="rows">
  <title>Which of the following brands have you heard of?</title>
  <comment>Select all that apply</comment>
  <row label="r1">Brand 1</row>
  <row label="r2">Brand 2</row>
  <row label="r3">Brand 3</row>
  <row label="r4">Brand 4</row>
</checkbox>
<suspend/>

<checkbox label="Q5" atleast="1" shuffle="rows" shuffleBy="Q4" rowCond="Q4[row]">
  <title>Which of the following brands have you tried?</title>
  <comment>Select all that apply</comment>
  <row label="r1">Brand 1</row>
  <row label="r2">Brand 2</row>
  <row label="r3">Brand 3</row>
  <row label="r4">Brand 4</row>
</checkbox>
<suspend/>




++MASKING: Rows WITH NONE OF THESE (always shown)
++SHUFFLE: Rows WITH NONE OF THESE (always shown)
Add <exce></exec> before the question
Add cond="1" in the row that is always shown
Add in question tag: rowCond="Q4[row]"

Example Q6:
[KEEP ORDER SAME AS Q4] [ONLY SHOW BRANDS SELECTED IN Q4]

<exec>
Q6.rows.order = Q4.rows.order
</exec>

<checkbox label="Q6" atleast="1" shuffle="rows" rowCond="Q4[row]">
  <title>Which <b><u>one</u></b> of these brands would you most likely purchase next?</title>
  <comment>Select all that apply</comment>
  <row label="r1">Brand 1</row>
  <row label="r2">Brand 2</row>
  <row label="r3">Brand 3</row>
  <row label="r4">Brand 4</row>
  <row label="r5" exclusive="1" randomize="0" cond="True">None of the above</row>
</checkbox>
<suspend/>


++SORT ROWS IN ALPHABETICAL ORDER:
 sortRows="asc,survey"



++RANDOMIZE Rows to Columns:
Add <exec></exec> before question tag
<exec>
Q10.cols.order = Q4.rows.order
</exec>



++MASKING: Question
Add in question tag:
	cond="not Q6.r5"



++PIPE IN:
Replace piped in text:
	<title>Why would [pipe:Q6] be your next purchased brand?</title>
OR - you can use string functions here:
	<title>Why would ${Q6.selected.text} be your next purchased brand?</title>


++OPTIONAL:
Add in row tag or question tag:
	 optional="1"

++VERIFY EMAIL:
Add in row tag or question tag:
	 verify="email"





++MULTI LANGUAGE:
++TRANSLATION TRANSLATE
Go to Build > More Tools > Language Manager > Add Language
	Specify the languages you want to add

	Click Export button per language Language
	Settings:
		Would you like to export?
			> All Resources
		Collapse duplicates?
			> Yes - if XML
			> No - if XLS
		What format would you like?
			> XLS / XML
		Omit blank resources?
			> Yes

If translated file arrives:
Go to More Tools > Language Manager
	Click on the specified language > Import (^)
	Check the numbers, Missing and Outdated should be zero
		Identical not equal to zero is fine
	Check the text below if Translation is indeed in its translated language
		You can change languages using the box Translation: [    ]

	Send to QA for language overlay testing
Once QA approved
	Change dTrack *optional
	Save to Live


++EXPORT TRANSLATION:
if CHANGES - Collapse duplicate: No [if xls]







++SAMPLE SOURCE:
Copy+Paste <samplesource></samplesource> to create a new sample
	replace: <samplesource list="0"> to incremental values
	<title>Client Sample </title> to Sample Name




++CLIENT SAMPLE: CLIENT LIST:
  autosaveKey="rnid,psid,cid"

  <samplesource disableBrowserDupes="1" list="3">
    <title>Client Sample</title>
    <invalid>You are missing information in the URL. Please verify the URL with the original invite.</invalid>
    <completed>It seems you have already entered this survey.</completed>
    <var filename="clientID.dat" name="cid" unique="1"/>
    <exit cond="terminated">Thank you for taking our survey.</exit>
    <exit cond="qualified">Thank you for taking our survey. Your efforts are greatly appreciated!</exit>
    <exit cond="overquota">Thank you for your participation, however this survey is now closed.</exit>
  </samplesource>



++Client sample questions:
 - is there a specific client sample list to only allow specific respondents?
 - will we capture an id?
 - will we turn off Quality Score?
 - will they count towards the quotas?


++TO REDIRECT:
in <samplesource> add in <exit cond="##">:
	url="link.com"
	timeout="3" -- will redirect after 3 seconds


++CAPTURE FROM LINK:
in <samplesource> add:
	<var name="c" values="us,uk,de" required="1" />
		name is what will be appended in the link
		values are what values to be passed, "blank" if no specific
additional options:
	required="1" -- makes variable required
	unique="1" -- makes variable required and must be unique
assign to dummy:
if c=='us':
	dcountry.val = dcountry.r1.index


++MASKING ROW PER CAPTURE LINK:
in this case per country:
  <row label="r1" cond="c=='uk'" mls="uk">Brand 1</row>
  <row label="r2" cond="c in ['uk','de']" mls="uk,german">Brand 2</row>
mls values MUST be based in otherLanguages found at the top most <survey> tag
	THIS IS REQUIRED DO NOT FORGET TO INCLUDE THIS

FOR LIVE PROJECT: c IS ALREADY IN DSTAR TEMPLATE

IN TEST DATA GENERATION ADD THIS IN THE TEXTBOX:
c: us uk de
c: 2,3,5 # for DSTAR
list: 3,4 # if sample source='3' or '4'
decLang: english # to cancel mls in testing



++QUOTAS: https://support.focusvision.com/Decipher/0003_Build/Quotas
after suspend
<quota overquota="noqual" sheet="Brands" cond="1"/>
STRICTLY create quota.xls
rename Sheet1 as "defines"
rename Sheet2 as desired name

in "[Sheet2]":
column 1 - #= "Quota title" (self made)
column 1 - Quota point (must be defined in "defines")
column 2 - inf means infinite [no limit]

#=Overall
Total	inf

#=Country
UK	inf
US	inf
DE	inf

#=Gender
Male	inf
Female	inf

#=Age
dQ2_r1	inf
dQ2_r2	inf
dQ2_r3	inf
dQ2_r4	inf
dQ2_r5	inf
dQ2_r6	inf
dQ2_r7	inf


in "defines":
column 1 = variable name (self name - variable name style)
column 2 = location in data (using Python style)
column 3 = variable Alias (what you want to see in quota information)

Total	plus
UK	c in ['uk']	UK
US	c in ['us']	US
DE	c in ['de']	DE
Male	Q1.r1	Male
Female	Q1.r2	Female
dQ2_r1	dQ2.r1	1-17
dQ2_r2	dQ2.r2	18-24
dQ2_r3	dQ2.r3	25-34
dQ2_r4	dQ2.r4	35-44
dQ2_r5	dQ2.r5	45-54
dQ2_r6	dQ2.r6	55-64
dQ2_r7	dQ2.r7	65 and above


!!! IMPORTANT !!!
IF MULTIPLE RESPONSE QUOTAS: ALWAYS ADD #cells:[maximum number of possible responses]=Questionid
#cells:1=Questionid
  --IF NO CELLS: MATIK 1
#cells:4=Questionid


++2D-QUOTA: ONLY FOR THOSE WITH THE SAME TOTAL
#=CountryxGender	Male	Female
UK	inf	inf
US	inf	inf
DE	inf	inf

#=COUNTRYxAGE	dAger1	dAger2
UK	inf	inf
US	inf	inf
DE	inf	inf




++3D-QUOTA: ONLY FOR THOSE WITH THE SAME TOTAL
#=CountryxAgexGender	#	Male	Female
UK	dQ2_r1	inf	inf
	dQ2_r2	inf	inf
	dQ2_r3	inf	inf
	dQ2_r4	inf	inf
	dQ2_r5	inf	inf
	dQ2_r6	inf	inf
	dQ2_r7	inf	inf
US	dQ2_r1	inf	inf
	dQ2_r2	inf	inf
	dQ2_r3	inf	inf
	dQ2_r4	inf	inf
	dQ2_r5	inf	inf
	dQ2_r6	inf	inf
	dQ2_r7	inf	inf
DE	dQ2_r1	inf	inf
	dQ2_r2	inf	inf
	dQ2_r3	inf	inf
	dQ2_r4	inf	inf
	dQ2_r5	inf	inf
	dQ2_r6	inf	inf
	dQ2_r7	inf	inf


TIP:
Single Quotas, when added/changed : Markers are automatically updated during LIVE
	This includes 2D... multi-D quotas
Multi Quotas - needs to be manually updated using Excel Import Data





++ONLY MOBILE DEVICE:
mobileDevices='smartphone'
++ONLY DESKTOP
mobile="noMobile"



if gv.request.device.isMobileDevice() or gv.request.device.isSmartphone() or gv.request.device.isTablet() or gv.request.device.isIpad():




d = gv.request.device
if d.isMobileDevice() or d.isSmartphone() or d.isTablet() or d.isIpad() :






++MARKERS:
Use this inside <exec></exec> tag

print p.marker # prints the markers for the respondent

hasMarker("Girl") # returns true if respondent has marker "Girl" (comma separated)
Example use:
	Show "Law" for Girls only
	<row label="r4" value="4" cond="hasMarker("Girl")">Law</row>

setMarker("Girl") # appends the specified marker text in marker variable (comma separated)
Example use:
	BACKFILLING QUOTA
	setMarker("/Demos_2D/%s/%s" %(c.upper(),Q1.selected.text))
      setMarker("/Demos_2D/dQ2_%s/%s" %(dQ2.selected.label,c.upper()))
      setMarker("/Demos_2D/dQ2_%s/%s" %(dQ2.selected.label,Q1.selected.text))

      setMarker("/Demos_3D/%s/dQ2_%s/%s" %(c.upper(),dQ2.selected.label,Q1.selected.text))

removeMarker("Girl") # removes "Girl" in marker variable

!!! IMPORTANT NOTE !!!
WHEN BACKFILLING AND RECODING QUOTAS; ALSO BACKFILL AND RECODE MARKERS

++IMPORT/UPLOAD MARKERS FOR BACKFILL/RECODE:
Go to Report > Data Downloads > Excel
	Open Exported Data
	Copy only uuid and markers
	Alter Markers with updated markers
Go to Responses > View/Edit Responses
	Click Import Data
	Click Choose a File...
	Select your xls / xlsx file
	Click Load Data File
	Select uuid as Key Variable
	Click Import Data


++AUTOPICKER:
in Quota file > Quota title [#=Brands]
	use the following: #cells:4=Brands
	which Random picks 4, automatically adjusts if less than 4
QUESTION: is this automatic least filled? Yes

####start picker code
for eachRow in dQ3.rows:
    if hasMarker('/BrandPicker/brand%s' %eachRow.label):
        #eachRow.val=1 #multi
        #hPosition1.val=eachRow.index #single
####end picker code


++AUTOCODE:
If Q4 has only 1 respose chosen, Q9 is autocoded to ch1

<exec>
Q9.minRanks = Q4.count
</exec>

<select
  label="Q9"
  minRanks="4"
  optional="1"
  rowCond="Q4[row]"
  shuffle="rows"
  shuffleBy="Q4"
  unique="rows,cols">
  <title>Please rank the following brands from most favorite to least favorite?</title>
  <choice label="ch1">1 - Most favorite</choice>
  <choice label="ch2" cond="Q4.count gt 1">2</choice>
  <choice label="ch3" cond="Q4.count gt 2">3</choice>
  <choice label="ch4" cond="Q4.count gt 3">4 - Least Favorite</choice>
  <row label="r1" mls="uk">Brand 1</row>
  <row label="r2" mls="german,uk">Brand 2</row>
  <row label="r3">Brand 3</row>
  <row label="r4">Brand 4</row>
</select>




++VIRTUAL QUESTIONS:
Automatically populates when created
ONLY found in reports, NOT seen in survey and test

Example:
Code below is when Brand quota is changed to be split by country

vTempmarker. Virtual Marker


<textarea
  label="vTempmarker"
  optional="0">

  <virtual>
tempmarkers = markers[:] # HARD COPY of markers value

for eachRow in dqbrandaware.rows:
	if eachRow:
		t = "/Brands/%s/%s" %(eachRow.text,c.upper()) # temp variable that holds the new marker
		tempmarkers.append(t) # appends the new markers to the current marker
		vTempmarker.val = ",".join(tempmarkers) # converts a comma separated list to string

  </virtual>

  <title>Virtual Marker</title>
</textarea>
<suspend/>



++USUAL BACKFILL MARKERS
    #asset
    for eachAsset in S7new.rows:
      if ("/asset/QCODE_%s/S7new_%s" % (eachCode.label, eachAsset.label)) in tempMarkers: # CHECK DUPLICATES
        tempMarkers.remove("/asset/QCODE_%s/S7new_%s" % (eachCode.label, eachAsset.label)) # REMOVE DUPLICATES
      if eachAsset:
        tempMarkers.append("/asset/QCODE_%s/S7new_%s" % (eachCode.label, eachAsset.label)) # APPLY MARKERS








++BLOCKS:
<block label="Q17_Q19_block" cond="1">


<block label="Q17_Q19_block" cond="Q1.r1" randomize="1">
</block>

Highlight what belongs to the same block
	NoteTab > CONTROL ELEMENTS > ! Block Tag
What to Edit:
	<block label="Qstart_Qend_block"
	if block members are randomized add in <block>: randomizeChildren="1"
		also add in each member question tag that is randomized: randomize="1"
Notes:
	randomizeChildren="1" :: used for containers - <loop> <block>
	randomize="1" :: used for container members - value "1" means included in randomization
		order for


++LOOPS:
Highlight what belongs to the same block
	NoteTab > CONTROL ELEMENTS > ! Loop Tag
What to Edit:
	<loop label="Qstart_Qend_loop"
	<block label="Qstart_Qend_block"
For each member question, Edit label:
	<radio label="Q11_[loopvar:label]">

Manually add LOOP ITERATIONS:
	<looprow label="1" cond="Q10.r1">
		<loopvar name="brandname">Brand 1</loopvar>
	</looprow>
	<looprow label="2" cond="Q10.r2">
		<loopvar name="brandname">Brand 2</loopvar>
	</looprow>

Match vars with specified <loopvar name="" above
	<loop label="Qstart_Qend_loop" vars="brandname, brandimage(not in above)"



++RANDOMIZE LOOP
 randomizeChildren="1"


++LOOPS SAME ORDER AS Q4:
Add in <loop tag: randomizeChildren="1"
Add in <block tag: randomize="1"

Add before <loop>:
<exec>
Q11_Q15_loop_expanded.order = Q4.rows.order # _expanded is always added for calling loop tag name ; FOR LOOP ONLY
</exec>

Use to PIPE IN questions:
	[loopvar:brandname]

PIPE IN image (not in code above):
	> Upload banana.jpg in System Files
	<looprow label="1" cond="Q10.r1">
		<loopvar name="brandname">Brand 1</loopvar>
		<loopvar name="brandimage">[image banana.jpg]</loopvar>
	</looprow>
	> to call: [loopvar:brandimage]



++SAMPLE: MAIN and BOOST/OVERSAMPLE
Create Quota sheets for "Main" and "Boost"

<exec>
cells = gv.survey.root.quota.getQuotaCells() # confirmit function to get {'QuotaMarker' : (qualified_cnt, limit, overquota)}
print cells
current, limit, overquota = cells["/Main/"+Q1.selected.text+"/dQ2_"+dQ2.selected.label][:-1] # in this example, quota is GENDERxAGE; current=qualified_cnt; limit=limit
print current, limit, overquota

if current lt limit:
	dQsample.val = dQsample.r1.index # set Main
else:
	dQsample.val = dQsample.r2.index # set Boost

</exec>

<!-- DUMMY FOR SAMPLE -->
<radio
  label="dQsample" where="execute,survey,report" translateable="0">
  <title>Sample</title>
  <row label="r1" value="1">Main</row>
  <row label="r2" value="2">Boost</row>
</radio>
<suspend/>

<quota overquota="noqual" sheet="Main" cond="dQsample.r1"/> <!-- ONLY COUNT IN MAIN QUOTA IF MAIN IN DUMMY -->
<quota overquota="noqual" sheet="Boost" cond="dQsample.r2"/> <!-- ELSE COUNT IN BOOST -->



++PERSISTENT VARIABLES:
<exec>
p.poip = Q6.selected.text
</exec>

<textarea
  label="Q7"
  cond="not Q6.r5"
  optional="0">
  <title>Why would [poip] be your next purchased brand?</title>
  <comment>Please be as specific as possible</comment>
</textarea>
<suspend/>

<exec>
del p.poip
</exec>

TIP:
ALWAYS delete persistent variables after using - to free up space




++PRETEXT / POSTTEXT:
<res label="currency">$</res>

    <number
    label="Q15_[loopvar:label]"
    optional="0"
    size="3"
    ss:preText="${res.currency}" ss:postText=""
    >
      <title>How much would you pay for [loopvar:brandname]?</title>
      <comment>Please enter a whole number</comment>
      <noanswer label="n1">Don't Know</noanswer>
    </number>
    <suspend/>

TIP:
Best Practice - ALWAYS add preText and postText even if empty (for translation purposes)




++3D-GRID 3D GRID 3DGRID:
<question_tag... grouping="cols" -- validation becomes by column {"rows"}
<question_tag... rightOf="Qbase" -- makes question show at the right of Qbase {leftOf="Qbase"}

<row_tag... colLegend="both" -- shows Legend in left & right side of grid {colLegend="left" colLegend="right"} {colLegend="3,7" Labels before rows 3 and 7}
<col_tag... rowLegend="both" -- shows Legend in left & right side of grid {rowLegend="left" rowLegend="right"}

<row_tag... rightLegend="Text right" -- "Text right" specified as Legend in right side {leftLegend} ! NOT TRANSLATED
	BEST PRACTICE: use <res>
	<res label="Legend1">Legend 1</res>
	<row_tag... rightLegend="${res.Legend1}"




++TURN OFF MOBILE FRIENDLY MODE:
<question_tag... ss:listDisplay="0" surveyDisplay="desktop"




++FOR JQUERY TARGETING: use CLASS
<question_tag... ss:rowClassNames="rClass1 rClass2" {ss:colClassNames="" ss:questionClassNames="" ss:commentClassNames="" ss:groupClassNames=""}


++DISABLE CUSTOM CSS:
<question_tag... fir="off"



++JQUERY:
++ALTERNATE ROW BORDERS:
<radio
  label="q50"
  averages="cols"
  shuffle="rows"
  type="rating">
  <title>How would you rate each brand overall on the following scale?</title>
  <comment>Select one</comment>
  <col label="c1" value="1">Excellent</col>
  <col label="c2" value="2">Very Good</col>
  <col label="c3" value="3">Good</col>
  <col label="c4" value="4">Fair</col>
  <col label="c5" value="5">Poor</col>
  <row label="r1">Brand 1</row>
  <row label="r2">Brand 2</row>
  <row label="r3">Brand 3</row>
  <row label="r4">Brand 4</row>

<style name="question.after">
<![CDATA[
	<script>

    $ ("tr:even").css("background-color", "black");

  </script>
]]>
</style>

</radio>
<suspend/>



++3D-GRID 3D GRID 3DGRID: CHECKBOX+TEXT
<checkbox
  label="Q51a"
  atleast="1">
  <title>Select your preference:</title>
  <comment>Select one</comment>
  <row label="r1" ss:rowClassNames="p1">Preference 1</row>
  <row label="r2" ss:rowClassNames="p2">Preference 2</row>
  <row label="r3" ss:rowClassNames="p3">Preference 3</row>
  <row label="r4" ss:rowClassNames="p4">Preference 4</row>
  <row label="r5" ss:rowClassNames="p5">Preference 5</row>
  <col label="c1"/>
  <style name="question.after"><![CDATA[
<script>

    	$ ("tr:even").css("background-color", "black");

    	$ (':text').each(function(){
    		$ (this).hide()
    	})
    $ (':checkbox').on('change',function(){

	var cbox = $ (this).is(':checked');
	var tbox = $ (this).closest('tr').find(':text')

	if(cbox){
		tbox.prop('disabled', false)
		tbox.show()
		tbox.val('')
	}else{
		tbox.prop('disabled', true)
		tbox.hide()
		tbox.val('')
	}

})

    </script>
]]></style>

</checkbox>

<text
  label="Q51b"
  rightOf="Q51a">
  <title>Select your preference:</title>
  <comment>Select one</comment>
  <row label="r1" ss:rowClassNames="p1" value="1">Preference 1</row>
  <row label="r2" ss:rowClassNames="p2" value="2">Preference 2</row>
  <row label="r3" ss:rowClassNames="p3" value="3">Preference 3</row>
  <row label="r4" ss:rowClassNames="p4" value="4">Preference 4</row>
  <row label="r5" ss:rowClassNames="p5" value="5">Preference 5</row>
  <col label="c1">But Why?</col>
</text>
<suspend/>



++DATE PICKER:
<text
  label="Q52"
  optional="0"
  size="10">
  <title>Pick your Valentines Date</title>
  <comment>Please pinpoint in point-blank accuracy</comment>
  <style cond="1" name="question.after"><![CDATA[
<script>
$ (":text").datepicker();
</script>

<link rel="stylesheet" type="text/css" href="[rel datepicker.css]" />
<link rel="stylesheet" type="text/css" href="[rel normalize.css]" />

]]></style>
</text>
<suspend/>




++3D-GRID 3D GRID 3DGRID: CHECKBOX WITH FAVORITE
<checkbox
  label="Q53"  grouping="cols" atleast="1">
  <title>Please select one an is it your favorite?</title>
  <comment>Select one</comment>
  <row label="r1" value="1">Brand 1</row>
  <row label="r2" value="2">Brand 2</row>
  <row label="r3" value="3">Brand 3</row>
  <row label="r4" value="4">Brand 4</row>
  <row label="r5" value="5">Brand 5</row>
  <col label="c1">Aware</col>
  <col label="c2" favorite="1" optional="1">Favorite</col>
</checkbox>

<suspend/>



++VERSION == dTrack


++DYNAMIC QUESTION VERSIONING:
https://decipher.zendesk.com/hc/en-us/articles/360010274373-Dynamic-Question-Versioning




++XML STYLE SYSTEMS:
https://decipher.zendesk.com/hc/en-us/articles/360010161114-XML-Style-System




++ZIPCODE TO STATE/REGION FROM KB
C:\j.a.y

<block label="ZIPINFO_BLOCK">
  <exec when="init">
ZipFile= File("zip.dat", "zipcode")
  </exec>

  <text
   label="D2
   optional="0"
   size="5"
   verify="zipcode">
    <title>Please specify your zip code.</title>
  </text>

  <suspend/>

  <exec>
zipInfo = ZipFile.get(D2.val)
print D2.val
print zipInfo

HP_cityName.val = None
HP_state.val=None
HP_region4.val=None

if zipInfo:
    HP_state.val = HP_state.attr("r%s" % zipInfo["stateabbr"]).index
    if zipInfo["censusregion"] not in (None, ''):
         HP_region4.val = HP_region4.attr("r%s" % zipInfo["censusregion"]).index
    else:
    HP_region4.val = HP_region4.r99.index
    HP_cityName.val = zipInfo["cityname"]
else:
  HP_region4.val = HP_region4.r99.index
  HP_state.val = HP_state.rXX.index
  </exec>

  <text
   label="HP_cityName"
   where="execute,survey,report">
    <title>Hidden Question.  City name from the zipcode entered in D2.</title>
  </text>

  <select
   label="HP_state"
   optional="1"
   where="execute,survey,report">
    <title>State Name</title>
    <choice label="rAL" value="1">Alabama</choice>
    <choice label="rAK" value="2">Alaska</choice>
    <choice label="rAZ" value="3">Arizona</choice>
    <choice label="rAR" value="4">Arkansas</choice>
    <choice label="rCA" value="5">California</choice>
    <choice label="rCO" value="6">Colorado</choice>
    <choice label="rCT" value="7">Connecticut</choice>
    <choice label="rDE" value="8">Delaware</choice>
    <choice label="rDC" value="9">Washington, D.C.</choice>
    <choice label="rFL" value="10">Florida</choice>
    <choice label="rGA" value="11">Georgia</choice>
    <choice label="rHI" value="12">Hawaii</choice>
    <choice label="rID" value="13">Idaho</choice>
    <choice label="rIL" value="14">Illinois</choice>
    <choice label="rIN" value="15">Indiana</choice>
    <choice label="rIA" value="16">Iowa</choice>
    <choice label="rKS" value="17">Kansas</choice>
    <choice label="rKY" value="18">Kentucky</choice>
    <choice label="rLA" value="19">Louisiana</choice>
    <choice label="rME" value="20">Maine</choice>
    <choice label="rMD" value="21">Maryland</choice>
    <choice label="rMA" value="22">Massachusetts</choice>
    <choice label="rMI" value="23">Michigan</choice>
    <choice label="rMN" value="24">Minnesota</choice>
    <choice label="rMS" value="25">Mississippi</choice>
    <choice label="rMO" value="26">Missouri</choice>
    <choice label="rMT" value="27">Montana</choice>
    <choice label="rNE" value="28">Nebraska</choice>
    <choice label="rNV" value="29">Nevada</choice>
    <choice label="rNH" value="30">New Hampshire</choice>
    <choice label="rNJ" value="31">New Jersey</choice>
    <choice label="rNM" value="32">New Mexico</choice>
    <choice label="rNY" value="33">New York</choice>
    <choice label="rNC" value="34">North Carolina</choice>
    <choice label="rND" value="35">North Dakota</choice>
    <choice label="rOH" value="36">Ohio</choice>
    <choice label="rOK" value="37">Oklahoma</choice>
    <choice label="rOR" value="38">Oregon</choice>
    <choice label="rPA" value="39">Pennsylvania</choice>
    <choice label="rRI" value="40">Rhode Island</choice>
    <choice label="rSC" value="41">South Carolina</choice>
    <choice label="rSD" value="42">South Dakota</choice>
    <choice label="rTN" value="43">Tennessee</choice>
    <choice label="rTX" value="44">Texas</choice>
    <choice label="rUT" value="45">Utah</choice>
    <choice label="rVT" value="46">Vermont</choice>
    <choice label="rVA" value="47">Virginia</choice>
    <choice label="rWA" value="48">Washington</choice>
    <choice label="rWV" value="49">West Virginia</choice>
    <choice label="rWI" value="50">Wisconsin</choice>
    <choice label="rWY" value="51">Wyoming</choice>
    <choice label="rXX" value="99">Not in the US</choice>
  </select>

  <radio
   label="HP_region4"
   optional="1"
   translateable="0"
   where="execute,survey,report">
    <title>Hidden Question.  Region 4 mapping from the zipcode entered in D2.</title>
    <row label="r1" value="1">Northeast</row>
    <row label="r2" value="2">Midwest</row>
    <row label="r3" value="3">South</row>
    <row label="r4" value="4">West</row>
    <row label="r99" value="99">Not in the US</row>
  </radio>

  <suspend/>
</block>




















++FILE HANDLING example:
++FILE ACCESSING example:
++FILE UPLOAD example [specifically ZIP]:
<res label="QZIPERROR">Zip not found in US zip list.</res>

<block label="Q3_dQ3_block" cond="1" sst="0">

<exec when="init">
zipfile = File("USzips.dat","ZIP") #load the file and store inside variable 'zipfile'
</exec>

<text
  label="Q3"
  cond="c=='us'"
  mls="english"
  optional="0"
  size="40"
  verify="zipcode">
  <title>What is your 5 digit zip code?</title>
  <comment>Please be as specific as possible</comment>
  <validate>
zipid = zipfile.get(Q3.val)

if not zipid: #check if zip returns something or not
	error(res.QZIPERROR)
  </validate>

</text>

<suspend/>

<exec when="init">
zipfile = File("USzips.dat","ZIP") #load the file and store inside variable 'zipfile'
</exec>

<exec>
zipid = zipfile.get(Q3.val) #get uniqueid from question 'Q3', and store to variable 'zipid'

print Q3.val

zipRegion = zipid['cregion'] #get value for 'STATE - converted to lower case' and store in variable 'zipState'

print zipRegion #print state for checking what is returned

for eachRow in dQ3.rows:
	if eachRow.label.replace('r','') == zipRegion:
		dQ3.val = eachRow.index
		break
</exec>

<radio
  label="dQ3"
  optional="1"
  translateable="0"
  where="execute,survey,report">
  <title>Hidden: US Regions</title>
  <comment>Select one</comment>
  <row label="r1" value="1">West</row>
  <row label="r2" value="2">Midwest</row>
  <row label="r3" value="3">Northeast</row>
  <row label="r4" value="4">South</row>
</radio>

<suspend/>

</block>




++IMAGE UPLOAD:
<image label="Q9" optional="0" uses="imgupload.1">
 <title>Please upload a picture that best describes how you felt when wearing this garment.  This picture could be a "selfie" or any photo that you think best depicts your feelings about wearing the garment that you tested.<br/>
<br/>
<small>Please note: If you have any issues taking a photo, please leave the survey, take the photo, return to the survey, and upload from your photo library/gallery.</small>
</title>
</image>
<suspend/>





++VIDEO UPLOAD:
<textarea label="Q2" style="video" optional="0" height="10" width="50" uses="videocapture.1" videocapture:timelimit="30">
  <title>Now that you've had a chance to wear the garment, we'd like to know what you think of the garment.<br/>
<br/>
	Please record a 10-30 second video explaining what you <b><u>liked</u></b> about the garment.<br/>
<br/>
	<i><small>Please allow several seconds for the video to upload, keeping in mind that the longer the video length, the longer it will take to upload</small></i>.</title>
<noanswer label="n9">NA</noanswer>

  <style name="question.after"><![CDATA[
	<script>
		$ (document).ready(function() {
			\@if not Q2.n9
    			$ ("#question_Q2b").hide();
    		\@endif
    		$ ("input:checkbox").click(function(){
    			$ ("#question_Q2b").toggle();
    		})
		});
    </script>
]]></style>

</textarea>

<text label="Q2b" size="40" optional="1">
  <title><i><b>If you are unable to upload a video response, please respond using the space below.</b></i></title>
  <comment>Please be as specific as possible</comment>

<validate>
if Q2.n9 and not Q2b.val:
  error(res.Q2ERROR)
</validate>

</text>

<suspend/>



++LIGHTBOX (just like FANCYBOX): LIGHT BOX
++IMAGE PIPE IN:
<select
  label="Q37"
  minRanks="1"
  optional="1"
  ranksort:bucketCSS="width: 140px; height: 110px;"
  ranksort:cardCSS="width: 140px; height: 110px;"
  shuffle="rows"
  unique="rows,cols"
  uses="ranksort.4">
  <title>Please rank in order these five poster advertisements, with 1 being <i> <b>the strongest OraVet poster overall, the one that would convince you to stock OraVet inventory and promote OraVet</b></i> to 5 being <i> <b>the weakest OraVet poster overall, the one least likely to convince you to stock OraVet inventory/promote OraVet</b></i>:
    <div class="hidden hc1">[image Concept1_T.jpg]</div>
    <div class="hidden hc2">[image Concept2_D.jpg]</div>
    <div class="hidden hc3">[image Concept3_B.jpg]</div>
    <div class="hidden hc4">[image Concept4_R.jpg]</div>
    <div class="hidden hc5">[image Concept5_G.jpg]</div>
  </title>
  <choice label="ch1" value="1">Strongest OraVet poster overall</choice>
  <choice label="ch2" value="2">2</choice>
  <choice label="ch3" value="3">3</choice>
  <choice label="ch4" value="4">4</choice>
  <choice label="ch5" value="5">Weakest OraVet poster overall</choice>
  <row label="r1" value="1"><a href="#" onclick="Survey.uidialog.make($('.hc1'));">[image Concept1_T.jpg width=100 height=100 protected=1]</a></row>
  <row label="r2" value="2"><a href="#" onclick="Survey.uidialog.make($('.hc2'));">[image Concept2_D.jpg width=100 height=100 protected=1]</a></row>
  <row label="r3" value="3"><a href="#" onclick="Survey.uidialog.make($('.hc3'));">[image Concept3_B.jpg width=100 height=100 protected=1]</a></row>
  <row label="r4" value="4"><a href="#" onclick="Survey.uidialog.make($('.hc4'));">[image Concept4_R.jpg width=100 height=100 protected=1]</a></row>
  <row label="r5" value="5"><a href="#" onclick="Survey.uidialog.make($('.hc5'));">[image Concept5_G.jpg width=100 height=100 protected=1]</a></row>
</select>

<suspend/>




++DQC REMOVAL:
++DATA QUALITY CHECK:
Survey must be [LIVE]
	Responses > View/Edit Responses
	Filter Responses
		> Variables
		+ Add Filter Variables
			Select Survey Variable > UUID / record
				Copy+Paste the ids that you want DQC'd in the box "Matches any of these values"
				(next line separated)
			Add Variables
			Apply
			wait for it to refresh *automatic
		Edit Data
		Advanced
			Select an Action = Disqualify Selected Records
				as: DQC reason -- example: [speeder] Speeder
			CHECK all records
				Update # Records
		Disqualify
			"Data records updated"
			Close
		you can check: Status=Terminated

++DQC VIA IMPORT DATA
C:\j.a.y\E2E\Decipher\training\DQC Template Decipher v2.xlsx

++DQC VIA EDIT:
https://survey-d.dynata.com/rep/selfserve/53b/XXXXXX:edit






++MWSE DISTRO
MWSE.SP.CEBU <MWSE.SP.CEBU@Dynata.com>
MWSE.DP.CEBU <MWSE.DP.CEBU@Dynata.com>
CebuPA.MWSE <CebuPA.MWSE@Dynata.com>



++ADD CLIENT ACCESS PERMISSION
Cebu.Ops.Mgmt -- all cebu
	Access Custom settings is automatically populated
    L-SSI CEBU PM
    L-SSI CEBU QA
    L-SSI CEBU SP
    L-SSI PM
    CEBU DP Team

anajanette.galanay@dynata.com
gilbert.chua@surveysampling.com



	Overview > USERS
		+ Add User / Group
			User / User Group = Client Name
				(if not found - ask access from Deo or Olive)

Client (default):
			Permission Level: Custom
				Survey                : View
				Reporting / Crosstabs : Edit
				Data                  : None // Download -- ONLY IF SPECIFIED BY PM
				Response Summary      : View
				Campaign Manager      : None
				Research Dashboard    : View
				Theme Editor          : None
				Admin                 : None
				Offline               : None

Sonja Demarco demarco@halporet.com
hal@halporet.com
Client (Hal Poret):
			Permission Level: Custom
				Survey                : View
				Reporting / Crosstabs : Edit
				Data                  : Edit
				Response Summary      : Edit
				Campaign Manager      : None
				Research Dashboard    : View
				Theme Editor          : None
				Admin                 : None
				Offline               : Full

Client (Asurion):
			Permission Level: Custom
				Survey                : View
				Reporting / Crosstabs : Edit
				Data                  : Download
				Response Summary      : View
				Campaign Manager      : None
				Research Dashboard    : View
				Theme Editor          : None
				Admin                 : None
				Offline               : None

PM (default):
			Permission Level: Custom
				Survey                : View
				Reporting / Crosstabs : Edit
				Data                  : Edit
				Response Summary      : Edit
				Campaign Manager      : None
				Research Dashboard    : View
				Theme Editor          : Full
				Admin                 : Full
				Offline               : Full

DP (default):
			Permission Level: Custom
				Survey                : View
				Reporting / Crosstabs : Edit
				Data                  : Edit
				Response Summary      : View
				Campaign Manager      : None
				Research Dashboard    : View
				Theme Editor          : None
				Admin                 : Full
				Offline               : None

RN Sales:
			Permission Level: Custom
				Survey                : View
				Reporting / Crosstabs : Edit
				Data                  : Download
				Response Summary      : Edit
				Campaign Manager      : None
				Research Dashboard    : View
				Theme Editor          : None
				Admin                 : None
				Offline               : None

Sample provider / vendor:
			Permission Level        : Vendor

SP GL / Other SP vendors:
			Permission Level        : Full Access

Quota only:
			Permission Level        : Custom
				Survey                : None
				Reporting / Crosstabs : None
				Data                  : None
				Response Summary      : View
				Campaign Manager      : None
				Research Dashboard    : View
				Theme Editor          : None
				Admin                 : None
				Offline               : None


	Save
	Add User(s)





++FOR LYNX ACCESS PERMISSION:
				Survey: View
				Reporting / Crosstabs: Edit
				Data: Edit
				Response Summary: Edit
				Campaign Manager: None
				Research Dashboard: View
				Theme editor: Use All
				Admin: Full

	FOR bruce@lynxresearchnet.net:
		Account Expires: Never
				Survey: View
				Reporting / Crosstabs: Edit
				Data: Edit
				Rsponsen Summary: Edit
				Campaign Manager: None
				Research Dashboard: None
				Theme editor: Use All
				Admin: None
				Offline: Full








++LAUNCHING:
++SET TO LIVE:
++LIVE LINK:
++FOLLOW LINE PER LINE TO LIVE

ALWAYS CHECK if YOU APPLIED QUALITY SCORE STANDARDS;

CHECK DOMAIN: builder:cname="survey-d.dynata.com"
	CHANGE TO: builder:cname="survey-d.yoursurveynow.com"

for SIGNED URL ONLY:
ADD IN ALL END LINKS for DYNATA SIGNED
&amp;_d=${gv.survey.path}

CHECK ${psid} for <exit qualified> etc.. in Samplesources update to:
	${psid if gv.survey.root.state.live else psid+'_test'}

CHECK R&D TOOLS for basePath, if it is updated
  <exec when="init">
    def getImageBasePath(file):
    return 'https://survey-d.yoursurveynow.com/survey/selfserve/53b/2206244/'+ file+ '.jpg'
  </exec>

  <img width="60%" src="${getImageBasePath('owndays_1')}" />


update Basic and High keys

check p.qs['term'] = 1 # SHOULD BE 1

Change ss:enableNavigation="1"  to ss:enableNavigation="0"

Change the default value in the samplesources tag
<samplesources default="0">
	1=STS, 2=DK, etc.

Remove brnjumpto code block


SAVE

RUN DUMMY

Launch Survey
Proceed
Get Responses
Copy Links and send to PM
	Example Links:
		{DK / Nexus}
		Live Link:
		https://survey-d.yoursurveynow.com/survey/selfserve/53b/xxxxxxx?list=2&pid=<#DubKnowledge[1500/Entity id]>&psid=<#IdParameter[Value]>

		Quota Link:
		https://survey-d.yoursurveynow.com/rep/selfserve/53b/xxxxxxx:dashboard?tab=quota&split=none

		{STS}
		Live Link:
		https://survey-d.yoursurveynow.com/survey/selfserve/53b/xxxxxxx?list=1&rnid=$rnid&study=$study&c=$c&src=$src



SAMPLE EMAIL:
Hi —

This is now live. Kindly see below for the live link:
https://survey-d.yoursurveynow.com/survey/selfserve/53b/xxxxxxx?list=2&pid=<#DubKnowledge[1500/Entity id]>&psid=<#IdParameter[Value]>

With keys:


And quota link below, please review and let us know if this is fine:
https://survey-d.dynata.com/rep/selfserve/53b/xxxxxxx:dashboard?tab=quota&split=none






LIVE links are currently setup as SIGNED URL START-END, let us know if otherwise.


++SIGNED URL START-END
if PM confirms:
  in all NEXUS <samplesources>
    update from: sign="out"
    to: keyring="sys/rn" sign="out,in"








++QUALITY SCORE QS
++QUALITY SCORE QS
++QUALITY SCORE QS
++QUALITY SCORE QS
++QUALITY SCORE QS
++QUALITY SCORE QS
++QUALITY SCORE QS
++QUALITY SCORE QS
++QUALITY SCORE QS
++QUALITY SCORE QS
https://dynatacorp.atlassian.net/wiki/spaces/RT/pages/49153280/How+to+add+Real+Answer+attributes+to+Open+End+questions
countries and languages supported, please refer to: https://confluence.dynata.com/x/WZVKB

If you'd like to turn Quality Score off, please set:
p.qs['on'] = 0

Enable Termination based on Quality Score result:
p.qs['term'] = 1

Terminated respondents will have "qualityScore" marker and get maked as "QualityScore Check Failed" in vStatus, vTerm and Response Summary report.



If you are using a generic language (decLang=english_g1, decLang=english_g2, etc) for one of QualityScore supported languages then you'll need to specify it in order to enable the Open End evaluation.

For example:
p.qs['QsLangCode'] = '"english_g1":"ES"'
p.qs['QsLangCode'] = '"english_g1":"EN","english_g2":"ES"'

If not-supported language used for a generic option, then it does not need to be specified. It will be excluded from the OE evaluation automatically.


TURN OFF QUALITY SCORE TO A SPECIFIC PAGE:
 - TO BE USED if EVER CUSTOM QUESTIONS FAIL TO SUBMIT CONTINUE BUTTON
 - QS DO NOT WORK WITH QUESTIONS WITH UNDERSCORE
 - QS DO NOT WORK WITH CHINA COUNTRY
 - PLEASE MAKE SURE QS IS USING LANGUAGE AND LOCAL THAT IS PLATFORM STANDARD
<style name="question.after"><![CDATA[ <input type="hidden" id="qualityscore_collect_disabled"> ]]></style>

OR:
set TO BEFORE QUESTION:
p.qs['on'] = 0

AND SET BACK AFTER THE QUESTION:
p.qs['on'] = 1


ADD if OPEN END IS A BRAND (including OTH):
 ss:rowClassNames="qsraIsBrandQuestion-1"


ADD if OPEN END SHOULD NOT BE INCLUDED IN QS CALCULATION (including OTH):
example: ZIP, PII
 ss:rowClassNames="qsraIsExcluded-1"


ADD WHEN THE RESPONSE IS EXPECTED TO BE A SHORT 1-2 WORD:
AUTOMATICALLY ADDED TO ALL OTH
AUTOMATICALLY ADDED TO ALL OTH
AUTOMATICALLY ADDED TO ALL OTH
AUTOMATICALLY ADDED TO ALL OTH
AUTOMATICALLY ADDED TO ALL OTH
 ss:rowClassNames="qsraEngagedLength-1"




























++ADD START-DATE / DATE in DP data export:
Report > More Tools > Report (2010)
	Click Download (top right)
		Click Edit (top left)
			Add / Remove Variables
			search: date
				check BOTH date and start_date
				Close
			Save as... > Standard - with date




++"Remove brnjumpto code block" BACKUP
<block label="brnjumpto" cond="gv.survey.root.state.testing and jumpto" builder:title="JumpTo - please remove this block when go living">
  <exec>
try: rnjumpto.val = rnjumpto.attr(jumpto).index
except: pass
try: rnjumpto.val = int(gv.request.get('jumpto0'))
except: pass
p.tmp = p.tmp + str(rnjumpto.val) + "; "
  </exec>

  <select
   label="rnjumpto"
   cond="jumpto =='all' and not gv.request.get('jumpto0')&gt;'0'"
   optional="1"
   translateable="0"
   where="survey,notdp">
    <title>Please select a question to jump to.</title>
    <choice label="skip">Skip</choice>
    <style name="question.after" wrap="ready"><![CDATA[
var newSelect = $ (".answers select").clone();
newSelect.attr("name","jumpto0");
newSelect.attr("id", "jumpto0");
newSelect.find("option").attr("selected",false).first().remove();
newSelect.find("option").first().text("Jump to");
sessionStorage.jumptoSelect = newSelect[0].outerHTML;
]]></style>
  </select>
</block>






++ZIP CODE TO REGION FULL:
C:\j.a.y\DMA BLOCK.html



<block label="zip_block" sst="0">
<text
  label="QS3"
  optional="0"
  size="5"
  verify="zipcode">
  <title>Please enter your zip code.</title>
  <style mode="before" name="question.header"><![CDATA[
<script src="http://survey-d.researchnow.com/survey/selfserve/53b/rnlib/jquery.maskedinput.js "></script>
]]></style>
  <style mode="after" name="question.element"><![CDATA[
<script>$ ("input[name='$(name)']").mask("99999")</script>
]]></style>
<style name="question.after"><![CDATA[
<script>
$ (':text').attr('maxlength','5');
$ (':text').attr('size','5');
</script>
]]></style>
</text>

<suspend/>

  <exec>
p.zipCodeDict = dict(zcode=QS3.val)
p.surveyWillTerm = False
  </exec>

  <logic label="zipCodeAPI" api:params="p.zipCodeDict" api:url="http://speeders.researchnow.com/zipcode/dmalookup.php" uses="api.1"/>
  <exec sst="0">
if zipCodeAPI.status == 200:
  try:
    p.surveyWillTerm = True
    for i in range(0, 6):
      dmaData.cols[i].ZIP_CODE.val = zipCodeAPI.r[i]['ZIP_CODE']
      dmaData.cols[i].DMA_CODE.val = zipCodeAPI.r[i]['DMA_CODE']
      dmaData.cols[i].DMA_NAME.val = zipCodeAPI.r[i]['DMA_NAME']
      dmaData.cols[i].ADDITIONAL_DMA_CODE.val = zipCodeAPI.r[i]['ADDITIONAL_DMA_CODE']
      dmaData.cols[i].STATE_CODE.val = zipCodeAPI.r[i]['STATE_CODE']
      dmaData.cols[i].STATE_ABV.val = zipCodeAPI.r[i]['STATE_ABV']
      dmaData.cols[i].COUNTY_CODE.val = zipCodeAPI.r[i]['CITY_CODE']
      dmaData.cols[i].COUNTY_NAME.val = zipCodeAPI.r[i]['CITY_NAME']
      dmaData.cols[i].COUNTY_SIZE.val = zipCodeAPI.r[i]['CITY_SIZE']
      dmaData.cols[i].NMR_TERR_CODE.val = zipCodeAPI.r[i]['NMR_TERR_CODE']
      dmaData.cols[i].NOT_USED.val = zipCodeAPI.r[i]['NOT_USED']
      dmaData.cols[i].DMA_RANK.val = zipCodeAPI.r[i]['DMA_RANK']
      dmaData.cols[i].METRO_INDICATOR.val = zipCodeAPI.r[i]['METRO_INDICATOR']

      # If this point is reached, then we have complete data for at least one set and thus we will not term the survey
      p.surveyWillTerm = False
  except IndexError:
    print "IndexError occurred; either we have no data or we do not have 6 full columns of data"
else:
  # Status code was not 200, which means that the data did not return successfully; thus we term
  p.surveyWillTerm = True
  </exec>

  <term cond="p.surveyWillTerm" label="S4term">No DMA matched</term>

  <text
   label="dmaData"
   sst="0"
   translateable="0"
   where="execute,survey,report">
    <title>DMA data for zipcode ${QS3.val}</title>
    <row label="ZIP_CODE">ZIP_CODE</row>
    <row label="DMA_CODE">DMA_CODE</row>
    <row label="DMA_NAME">DMA_NAME</row>
    <row label="ADDITIONAL_DMA_CODE">ADDITIONAL_DMA_CODE</row>
    <row label="STATE_CODE">STATE_CODE</row>
    <row label="STATE_ABV">STATE_ABV</row>
    <row label="COUNTY_CODE">COUNTY_CODE</row>
    <row label="COUNTY_NAME">COUNTY_NAME</row>
    <row label="COUNTY_SIZE">COUNTY_SIZE</row>
    <row label="NMR_TERR_CODE">NMR_TERR_CODE</row>
    <row label="NOT_USED">NOT_USED</row>
    <row label="DMA_RANK">DMA_RANK</row>
    <row label="METRO_INDICATOR">METRO_INDICATOR</row>
    <col label="c1">DMA data from DB 1:</col>
    <col label="c2">DMA data from DB 2:</col>
    <col label="c3">DMA data from DB 3:</col>
    <col label="c4">DMA data from DB 4:</col>
    <col label="c5">DMA data from DB 5:</col>
    <col label="c6">DMA data from DB 6:</col>
  </text>

  <suspend/>

  <exec sst="0">
region4NE = ['CT','ME','MA','NH','NJ','NY','PA','RI','VT']
region4MW = ['IL','IN','IA','KS','MI','MN','MO','NE','ND','OH','SD','WI']
region4SO = ['DE','DC','FL','GA','MD','NC','SC','VA','WV','AL','KY','MS','TN','AR','LA','OK','TX']
region4WE = ['AZ','CO','ID','NM','MT','UT','NV','WY','AK','CA','HI','OR','WA']

region4Array = [region4NE, region4MW, region4SO, region4WE]

for i in range(0, len(region4Array)):
  if dmaData.cols[0].STATE_ABV.val in region4Array[i]:
    region4.val = i
    break
  </exec>

  <exec sst="0">
region9PAC = ['WA','OR','CA','AK','HI']
region9MTN = ['MT','ID','WY','NV','UT','CO','AZ','NM']
region9WNC = ['ND','SD','NE','KS','MN','IA','MO']
region9WSC = ['TX','OK','AR','LA']
region9ENC = ['WI','IL','MI','IN','OH']
region9ESC = ['KY','TN','MS','AL']
region9SA =  ['FL','GA','SC','NC','VA','WV','DC','MD','DE']
region9MA =  ['NY','NJ','PA']
region9NE =  ['ME','NH','VT','MA','RI','CT']

region9Array = [region9PAC, region9MTN, region9WNC, region9WSC, region9ENC, region9ESC, region9SA, region9MA, region9NE]

for i in range(0, len(region9Array)):
  if dmaData.cols[0].STATE_ABV.val in region9Array[i]:
    region9.val = i
    break
  </exec>

  <suspend/>

  <radio
   label="region4"
   grouping="cols"
   optional="1"
   sst="0"
   translateable="0"
   where="execute,survey,report">
    <title>4-Region Assignment for zipcode ${QS3.val}</title>
    <row label="r1" value="1">Northeast</row>
    <row label="r2" value="2">Midwest</row>
    <row label="r3" value="3">South</row>
    <row label="r4" value="4">West</row>
  </radio>

  <radio
   label="region9"
   grouping="cols"
   optional="1"
   sst="0"
   translateable="0"
   where="execute,survey,report">
    <title>9-Region Assignment for zipcode ${QS3.val}</title>
    <row label="r1" value="1">Pacific</row>
    <row label="r2" value="2">Mountain</row>
    <row label="r3" value="3">WNC</row>
    <row label="r4" value="4">WSC</row>
    <row label="r5" value="5">ENC</row>
    <row label="r6" value="6">ESC</row>
    <row label="r7" value="7">SA</row>
    <row label="r8" value="8">MA</row>
    <row label="r9" value="9">NE</row>
  </radio>

  <suspend/>

  <exec sst="0">
p.actualStateCode = dmaData.cols[0].STATE_ABV.val
STATEset=0
for eachRow in STATE.rows:
  if eachRow.o.label == ('r%s' % p.actualStateCode):
    STATE.val = eachRow.index
    STATEset=1
    break
if STATEset==0:
  STATE.val=STATE.rOTH.index
  </exec>

  <radio
   label="STATE"
   multicol:count="4"
   optional="1"
   sst="0"
   translateable="0"
  ss:legendColWidth="195px"
   uses="multicol.7"
   where="execute,survey,report">
    <title>Hidden Punch.  State of Residence</title>
    <row label="rAL">Alabama</row>
    <row label="rAK">Alaska</row>
    <row label="rAZ">Arizona</row>
    <row label="rAR">Arkansas</row>
    <row label="rCA">California</row>
    <row label="rCO">Colorado</row>
    <row label="rCT">Connecticut</row>
    <row label="rDE">Delaware</row>
    <row label="rFL">Florida</row>
    <row label="rGA">Georgia</row>
    <row label="rHI">Hawaii</row>
    <row label="rID">Idaho</row>
    <row label="rIL">Illinois</row>
    <row label="rIN">Indiana</row>
    <row label="rIA">Iowa</row>
    <row label="rKS">Kansas</row>
    <row label="rKY">Kentucky</row>
    <row label="rLA">Louisiana</row>
    <row label="rME">Maine</row>
    <row label="rMD">Maryland</row>
    <row label="rMA">Massachusetts</row>
    <row label="rMI">Michigan</row>
    <row label="rMN">Minnesota</row>
    <row label="rMS">Mississippi</row>
    <row label="rMO">Missouri</row>
    <row label="rMT">Montana</row>
    <row label="rNE">Nebraska</row>
    <row label="rNV">Nevada</row>
    <row label="rNH">New Hampshire</row>
    <row label="rNJ">New Jersey</row>
    <row label="rNM">New Mexico</row>
    <row label="rNY">New York</row>
    <row label="rNC">North Carolina</row>
    <row label="rND">North Dakota</row>
    <row label="rOH">Ohio</row>
    <row label="rOK">Oklahoma</row>
    <row label="rOR">Oregon</row>
    <row label="rPA">Pennsylvania</row>
    <row label="rRI">Rhode Island</row>
    <row label="rSC">South Carolina</row>
    <row label="rSD">South Dakota</row>
    <row label="rTN">Tennessee</row>
    <row label="rTX">Texas</row>
    <row label="rUT">Utah</row>
    <row label="rVT">Vermont</row>
    <row label="rVA">Virginia</row>
    <row label="rWA">Washington</row>
    <row label="rWV">West Virginia</row>
    <row label="rWI">Wisconsin</row>
    <row label="rWY">Wyoming</row>
    <row label="rAS">American Samoa</row>
    <row label="rDC">District of Columbia</row>
    <row label="rFM">Federated States of Micronesia</row>
    <row label="rGU">Guam</row>
    <row label="rMH">Marshall Islands</row>
    <row label="rMP">Northern Mariana Islands</row>
    <row label="rPW">Palau</row>
    <row label="rPR">Puerto Rico</row>
    <row label="rVI">Virgin Islands</row>
    <row label="rOTH">Other/None</row>
  </radio>

  <suspend/>

  <exec>
p.actualDMACode = dmaData.cols[0].DMA_CODE.val
DMAset=0
for eachRow in DMA.rows:
  if eachRow.o.label == ('r%s' % p.actualDMACode):
    DMA.val = eachRow.index
    DMAset=1
    break
if DMAset==0:
  DMA.val=DMA.r9999.index
  </exec>

  <radio
   label="DMA"
   multicol:count="4"
   optional="1"
   translateable="0"
  ss:legendColWidth="195px"
   uses="multicol.7"
   where="execute,survey,report">
    <title>DMA Code to City Assignment</title>
    <row label="r662">662 Abilene-Sweetwater, TX</row>
    <row label="r525">525 Albany, GA</row>
    <row label="r532">532 Albany-Schenectady-Troy, NY</row>
    <row label="r790">790 Albuquerque-Santa Fe, NM</row>
    <row label="r644">644 Alexandria, LA</row>
    <row label="r583">583 Alpena, MI</row>
    <row label="r634">634 Amarillo, TX</row>
    <row label="r743">743 Anchorage, AK</row>
    <row label="r524">524 Atlanta, GA</row>
    <row label="r520">520 Augusta, GA</row>
    <row label="r635">635 Austin, TX</row>
    <row label="r800">800 Bakersfield, CA</row>
    <row label="r512">512 Baltimore, MD</row>
    <row label="r537">537 Bangor, ME</row>
    <row label="r716">716 Baton Rouge, LA</row>
    <row label="r692">692 Beaumont-Port Arthur, TX</row>
    <row label="r821">821 Bend, OR</row>
    <row label="r756">756 Billings, MT</row>
    <row label="r746">746 Biloxi-Gulfport, MS</row>
    <row label="r502">502 Binghamton, NY</row>
    <row label="r630">630 Birmingham (Anniston and Tuscaloosa), AL</row>
    <row label="r559">559 Bluefield-Beckley-Oak Hill, WV</row>
    <row label="r757">757 Boise, ID</row>
    <row label="r506">506 Boston, MA (Manchester, NH)</row>
    <row label="r736">736 Bowling Green, KY</row>
    <row label="r514">514 Buffalo, NY</row>
    <row label="r523">523 Burlington, VT-Plattsburgh, NY</row>
    <row label="r754">754 Butte-Bozeman, MT</row>
    <row label="r767">767 Casper-Riverton, WY</row>
    <row label="r637">637 Cedar Rapids-Waterloo-Iowa City and Dubuque, IA</row>
    <row label="r648">648 Champaign and Springfield-Decatur, IL</row>
    <row label="r519">519 Charleston, SC</row>
    <row label="r564">564 Charleston-Huntington, WV</row>
    <row label="r517">517 Charlotte, NC</row>
    <row label="r584">584 Charlottesville, VA</row>
    <row label="r575">575 Chattanooga, TN</row>
    <row label="r759">759 Cheyenne, WY-Scottsbluff, NE</row>
    <row label="r602">602 Chicago, IL</row>
    <row label="r868">868 Chico-Redding, CA</row>
    <row label="r515">515 Cincinnati, OH</row>
    <row label="r598">598 Clarksburg-Weston, WV</row>
    <row label="r510">510 Cleveland-Akron (Canton), OH</row>
    <row label="r752">752 Colorado Springs-Pueblo, CO</row>
    <row label="r546">546 Columbia, SC</row>
    <row label="r604">604 Columbia-Jefferson City, MO</row>
    <row label="r522">522 Columbus, GA</row>
    <row label="r535">535 Columbus, OH</row>
    <row label="r673">673 Columbus-Tupelo-West Point, MS</row>
    <row label="r600">600 Corpus Christi, TX</row>
    <row label="r623">623 Dallas-Ft. Worth, TX</row>
    <row label="r682">682 Davenport, IA-Rock Island-Moline, IL</row>
    <row label="r542">542 Dayton, OH</row>
    <row label="r751">751 Denver, CO</row>
    <row label="r679">679 Des Moines-Ames, IA</row>
    <row label="r505">505 Detroit, MI</row>
    <row label="r606">606 Dothan, AL</row>
    <row label="r676">676 Duluth, MN-Superior, WI</row>
    <row label="r765">765 El Paso, TX</row>
    <row label="r565">565 Elmira, NY</row>
    <row label="r516">516 Erie, PA</row>
    <row label="r801">801 Eugene, OR</row>
    <row label="r802">802 Eureka, CA</row>
    <row label="r649">649 Evansville, IN</row>
    <row label="r745">745 Fairbanks, AK</row>
    <row label="r724">724 Fargo-Valley City, ND</row>
    <row label="r513">513 Flint-Saginaw-Bay City, MI</row>
    <row label="r866">866 Fresno-Visalia, CA</row>
    <row label="r571">571 Ft. Myers-Naples, Fl</row>
    <row label="r670">670 Ft. Smith-Fayetteville-Springdale-Rogers, AR</row>
    <row label="r509">509 Ft. Wayne, IN</row>
    <row label="r592">592 Gainesville, FL</row>
    <row label="r798">798 Glendive, MT</row>
    <row label="r773">773 Grand Junction-Montrose, CO</row>
    <row label="r563">563 Grand Rapids-Kalamazoo-Battle Creek, MI</row>
    <row label="r755">755 Great Falls, MT</row>
    <row label="r658">658 Green Bay-Appleton, WI</row>
    <row label="r518">518 Greensboro-High Point-Winston Salem, NC</row>
    <row label="r545">545 Greenville-New Bern-Washington, NC</row>
    <row label="r567">567 Greenville-Spartanburg, SC-Asheville, NC-Anderson,SC</row>
    <row label="r647">647 Greenwood-Greenville, MS</row>
    <row label="r636">636 Harlingen-Weslaco-Brownsville-McAllen, TX</row>
    <row label="r566">566 Harrisburg-Lancaster-Lebanon-York, PA</row>
    <row label="r569">569 Harrisonburg, VA</row>
    <row label="r533">533 Hartford and New Haven, CT</row>
    <row label="r710">710 Hattiesburg-Laurel, MS</row>
    <row label="r766">766 Helena, MT</row>
    <row label="r744">744 Honolulu, HI</row>
    <row label="r618">618 Houston, TX</row>
    <row label="r691">691 Huntsville-Decatur (Florence), AL</row>
    <row label="r758">758 Idaho Falls-Pocatello, ID</row>
    <row label="r527">527 Indianapolis, IN</row>
    <row label="r718">718 Jackson, MS</row>
    <row label="r639">639 Jackson, TN</row>
    <row label="r561">561 Jacksonville, FL</row>
    <row label="r574">574 Johnstown-Altoona, PA</row>
    <row label="r734">734 Jonesboro, AR</row>
    <row label="r603">603 Joplin, MO-Pittsburg, KS</row>
    <row label="r747">747 Juneau, AK</row>
    <row label="r616">616 Kansas City, MO</row>
    <row label="r557">557 Knoxville, TN</row>
    <row label="r702">702 La Crosse-Eau Claire, WI</row>
    <row label="r582">582 Lafayette, IN</row>
    <row label="r642">642 Lafayette, LA</row>
    <row label="r643">643 Lake Charles, LA</row>
    <row label="r551">551 Lansing, MI</row>
    <row label="r749">749 Laredo, TX</row>
    <row label="r839">839 Las Vegas, NV</row>
    <row label="r541">541 Lexington, KY</row>
    <row label="r558">558 Lima, OH</row>
    <row label="r722">722 Lincoln and Hastings-Kearney, NE</row>
    <row label="r693">693 Little Rock-Pine Bluff, AR</row>
    <row label="r803">803 Los Angeles, CA</row>
    <row label="r529">529 Louisville, KY</row>
    <row label="r651">651 Lubbock, TX</row>
    <row label="r503">503 Macon, GA</row>
    <row label="r669">669 Madison, WI</row>
    <row label="r737">737 Mankato, MN</row>
    <row label="r553">553 Marquette, MI</row>
    <row label="r813">813 Medford-Klamath Falls, OR</row>
    <row label="r640">640 Memphis, TN</row>
    <row label="r711">711 Meridian, MS</row>
    <row label="r528">528 Miami-Fort Lauderdale, FL</row>
    <row label="r617">617 Milwaukee, WI</row>
    <row label="r613">613 Minneapolis-St. Paul, MN</row>
    <row label="r687">687 Minot-Bismarck-Dickinson(Williston), ND</row>
    <row label="r762">762 Missoula, MT</row>
    <row label="r686">686 Mobile, AL-Pensacola (Ft. Walton Beach), FL</row>
    <row label="r628">628 Monroe, LA-El Dorado, AR</row>
    <row label="r828">828 Monterey-Salinas, CA</row>
    <row label="r698">698 Montgomery-Selma, AL</row>
    <row label="r570">570 Myrtle Beach-Florence, SC</row>
    <row label="r659">659 Nashville, TN</row>
    <row label="r622">622 New Orleans, LA</row>
    <row label="r501">501 New York, NY</row>
    <row label="r544">544 Norfolk-Portsmouth-Newport News, VA</row>
    <row label="r740">740 North Platte, NE</row>
    <row label="r633">633 Odessa-Midland, TX</row>
    <row label="r650">650 Oklahoma City, OK</row>
    <row label="r652">652 Omaha, NE</row>
    <row label="r534">534 Orlando-Daytona Beach-Melbourne, FL</row>
    <row label="r631">631 Ottumwa, IA-Kirksville, MO</row>
    <row label="r632">632 Paducah, KY-Cape Girardeau, MO-Harrisburg, IL</row>
    <row label="r804">804 Palm Springs, CA</row>
    <row label="r656">656 Panama City, FL</row>
    <row label="r597">597 Parkersburg, WV</row>
    <row label="r675">675 Peoria-Bloomington, IL</row>
    <row label="r504">504 Philadelphia, PA</row>
    <row label="r753">753 Phoenix, AZ</row>
    <row label="r508">508 Pittsburgh, PA</row>
    <row label="r820">820 Portland, OR</row>
    <row label="r500">500 Portland-Auburn, ME</row>
    <row label="r552">552 Presque Isle, ME</row>
    <row label="r521">521 Providence, RI-New Bedford, MA</row>
    <row label="r717">717 Quincy, IL-Hannibal, MO-Keokuk, IA</row>
    <row label="r560">560 Raleigh-Durham (Fayetteville), NC</row>
    <row label="r764">764 Rapid City, SD</row>
    <row label="r811">811 Reno, NV</row>
    <row label="r556">556 Richmond-Petersburg, VA</row>
    <row label="r573">573 Roanoke-Lynchburg, VA</row>
    <row label="r538">538 Rochester, NY</row>
    <row label="r611">611 Rochester, MN-Mason City, IA-Austin, MN</row>
    <row label="r610">610 Rockford, IL</row>
    <row label="r862">862 Sacramento-Stockton-Modesto, CA</row>
    <row label="r576">576 Salisbury, MD</row>
    <row label="r770">770 Salt Lake City, UT</row>
    <row label="r661">661 San Angelo, TX</row>
    <row label="r641">641 San Antonio, TX</row>
    <row label="r825">825 San Diego, CA</row>
    <row label="r807">807 San Francisco-Oakland-San Jose, CA</row>
    <row label="r855">855 Santa Barbara-Santa Maria-San Luis Obispo, CA</row>
    <row label="r507">507 Savannah, GA</row>
    <row label="r819">819 Seattle-Tacoma, WA</row>
    <row label="r657">657 Sherman, TX-Ada, OK</row>
    <row label="r612">612 Shreveport, LA</row>
    <row label="r624">624 Sioux City, IA</row>
    <row label="r725">725 Sioux Falls (Mitchell), SD</row>
    <row label="r588">588 South Bend-Elkhart, IN</row>
    <row label="r881">881 Spokane, WA</row>
    <row label="r619">619 Springfield, MO</row>
    <row label="r543">543 Springfield-Holyoke, MA</row>
    <row label="r638">638 St. Joseph, MO</row>
    <row label="r609">609 St. Louis, MO</row>
    <row label="r555">555 Syracuse, NY</row>
    <row label="r530">530 Tallahassee, FL-Thomasville, GA</row>
    <row label="r539">539 Tampa-St. Petersburg (Sarasota), FL</row>
    <row label="r581">581 Terre Haute, IN</row>
    <row label="r547">547 Toledo, OH</row>
    <row label="r605">605 Topeka, KS</row>
    <row label="r540">540 Traverse City-Cadillac, MI</row>
    <row label="r531">531 Tri-Cities, TN-VA</row>
    <row label="r789">789 Tucson (Sierra Vista), AZ</row>
    <row label="r671">671 Tulsa, OK</row>
    <row label="r760">760 Twin Falls, ID</row>
    <row label="r709">709 Tyler-Longview(Lufkin and Nacogdoches), TX</row>
    <row label="r526">526 Utica, NY</row>
    <row label="r626">626 Victoria, TX</row>
    <row label="r625">625 Waco-Temple-Bryan, TX</row>
    <row label="r511">511 Washington, DC (Hagerstown, MD)</row>
    <row label="r549">549 Watertown, NY</row>
    <row label="r705">705 Wausau-Rhinelander, WI</row>
    <row label="r548">548 West Palm Beach-Ft. Pierce, FL</row>
    <row label="r554">554 Wheeling, WV-Steubenville, OH</row>
    <row label="r627">627 Wichita Falls, TX-Lawton, OK</row>
    <row label="r678">678 Wichita-Hutchinson, KS Plus</row>
    <row label="r577">577 Wilkes Barre-Scranton, PA</row>
    <row label="r550">550 Wilmington, NC</row>
    <row label="r810">810 Yakima-Pasco-Richland-Kennewick, WA</row>
    <row label="r536">536 Youngstown, OH</row>
    <row label="r771">771 Yuma, AZ-El Centro, CA</row>
    <row label="r596">596 Zanesville, OH</row>
    <row label="r9999">Other</row>
  </radio>

  <suspend/>

</block>





++STATE TO REGION4 REGION5(Hal Poret) REGION9 *** USE ME ***
++STATE TO REGION4 REGION5(Hal Poret) REGION9 *** USE ME ***
++STATE TO REGION4 REGION5(Hal Poret) REGION9 *** USE ME ***
++STATE TO REGION4 REGION5(Hal Poret) REGION9 *** USE ME ***
++STATE TO REGION4 REGION5(Hal Poret) REGION9 *** USE ME ***
++STATE TO REGION4 REGION5(Hal Poret) REGION9 *** USE ME ***
++STATE TO REGION4 REGION5(Hal Poret) REGION9 *** USE ME ***
++STATE TO REGION4 REGION5(Hal Poret) REGION9 *** USE ME ***
++STATE TO REGION4 REGION5(Hal Poret) REGION9 *** USE ME ***
++STATE TO REGION4 REGION5(Hal Poret) REGION9 *** USE ME ***
++STATE TO REGION4 REGION5(Hal Poret) REGION9 *** USE ME ***
++STATE TO REGION4 REGION5(Hal Poret) REGION9 *** USE ME ***
++STATE TO REGION4 REGION5(Hal Poret) REGION9 *** USE ME ***
++STATE TO REGION4 REGION5(Hal Poret) REGION9 *** USE ME ***
<block label="STATEtoREGION_block">
  <select
   label="Q#">
    <title>What state do you currently live in?</title>
    <choice label="chAL" value="1">Alabama</choice>
    <choice label="chAK" value="2">Alaska</choice>
    <choice label="chAZ" value="3">Arizona</choice>
    <choice label="chAR" value="4">Arkansas</choice>
    <choice label="chCA" value="5">California</choice>
    <choice label="chCO" value="6">Colorado</choice>
    <choice label="chCT" value="7">Connecticut</choice>
    <choice label="chDE" value="8">Delaware</choice>
    <choice label="chDC" value="9">District of Columbia</choice>
    <choice label="chFL" value="10">Florida</choice>
    <choice label="chGA" value="11">Georgia</choice>
    <choice label="chHI" value="12">Hawaii</choice>
    <choice label="chID" value="13">Idaho</choice>
    <choice label="chIL" value="14">Illinois</choice>
    <choice label="chIN" value="15">Indiana</choice>
    <choice label="chIA" value="16">Iowa</choice>
    <choice label="chKS" value="17">Kansas</choice>
    <choice label="chKY" value="18">Kentucky</choice>
    <choice label="chLA" value="19">Louisiana</choice>
    <choice label="chME" value="20">Maine</choice>
    <choice label="chMD" value="21">Maryland</choice>
    <choice label="chMA" value="22">Massachusetts</choice>
    <choice label="chMI" value="23">Michigan</choice>
    <choice label="chMN" value="24">Minnesota</choice>
    <choice label="chMS" value="25">Mississippi</choice>
    <choice label="chMO" value="26">Missouri</choice>
    <choice label="chMT" value="27">Montana</choice>
    <choice label="chNE" value="28">Nebraska</choice>
    <choice label="chNV" value="29">Nevada</choice>
    <choice label="chNH" value="30">New Hampshire</choice>
    <choice label="chNJ" value="31">New Jersey</choice>
    <choice label="chNM" value="32">New Mexico</choice>
    <choice label="chNY" value="33">New York</choice>
    <choice label="chNC" value="34">North Carolina</choice>
    <choice label="chND" value="35">North Dakota</choice>
    <choice label="chOH" value="36">Ohio</choice>
    <choice label="chOK" value="37">Oklahoma</choice>
    <choice label="chOR" value="38">Oregon</choice>
    <choice label="chPA" value="39">Pennsylvania</choice>
    <choice label="chRI" value="40">Rhode Island</choice>
    <choice label="chSC" value="41">South Carolina</choice>
    <choice label="chSD" value="42">South Dakota</choice>
    <choice label="chTN" value="43">Tennessee</choice>
    <choice label="chTX" value="44">Texas</choice>
    <choice label="chUT" value="45">Utah</choice>
    <choice label="chVT" value="46">Vermont</choice>
    <choice label="chVA" value="47">Virginia</choice>
    <choice label="chWA" value="48">Washington</choice>
    <choice label="chWV" value="49">West Virginia</choice>
    <choice label="chWI" value="50">Wisconsin</choice>
    <choice label="chWY" value="51">Wyoming</choice>
    <choice label="chXX" value="52">Not from US</choice>
    <style cond="1" name="question.after"><![CDATA[
<style>
  .question, .input{
    font-family: Arial,sans-serif !important;
  }
  </style>
]]></style>
  </select>

  <suspend/>

  <term cond="Q#.chXX" label="Q#term">Q#: Not from US</term>

  <exec>
myState = Q#.selected.label[-2:]

if myState in ["CT", "ME", "MA", "NH", "NJ", "NY", "PA", "RI", "VT"]:
  HP_region4.val = HP_region4.r1.index
elif myState in ["IL", "IN", "MI", "OH", "WI", "IA", "KS", "MN", "MO", "NE", "ND", "SD"]:
  HP_region4.val = HP_region4.r2.index
elif myState in ["DE", "FL", "GA", "MD", "NC", "SC", "VA", "DC", "WV", "AL", "KY", "MS", "TN", "AR", "LA", "OK", "TX"]:
  HP_region4.val = HP_region4.r3.index
elif myState in ["AZ", "CO", "ID", "MT", "NV", "NM", "UT", "WY", "AK", "CA", "HI", "OR", "WA"]:
  HP_region4.val = HP_region4.r4.index

# ENABLE FOR HAL PORET ONLY
#if myState in ["DE", "DC", "FL", "GA", "MD", "NC", "SC", "VA", "WV"]:
#  HP_region5.val = HP_region5.r5.index
#elif myState in ["AK", "AZ", "CA", "CO", "HI", "ID", "MT", "NE", "NV", "NM", "ND", "OR", "SD", "UT", "WA", "WY"]:
#  HP_region5.val = HP_region5.r2.index
#elif myState in ["IL", "IN", "IA", "MI", "MN", "OH", "WI","KS"] :
#  HP_region5.val = HP_region5.r3.index
#elif  myState in ["CT", "ME", "MA", "NH", "NJ", "NY", "PA", "RI", "VT"]:
#  HP_region5.val = HP_region5.r1.index
#elif myState in ["AL", "AR", "KY", "LA", "MS", "MO", "OK", "TN", "TX"]:
#  HP_region5.val = HP_region5.r4.index

if myState in ["WA", "OR", "CA", "AK", "HI"]:
  HP_region9.val = HP_region9.r1.index
elif myState in ["MT", "ID", "WY", "CO", "UT", "NV", "AZ", "NM"]:
  HP_region9.val = HP_region9.r2.index
elif myState in ["ND", "MN", "SD", "NE", "IA", "KS", "MO"]:
  HP_region9.val = HP_region9.r3.index
elif myState in ["OK", "AR", "TX", "LA"]:
  HP_region9.val = HP_region9.r4.index
elif myState in ["MI", "WI", "IN", "IL", "OH"]:
  HP_region9.val = HP_region9.r5.index
elif myState in ["KY", "TN", "MS", "AL"]:
  HP_region9.val = HP_region9.r6.index
elif myState in ["ME", "NH", "VT", "MA", "CT", "RI"]:
  HP_region9.val = HP_region9.r7.index
elif myState in ["NY", "PA", "NJ"]:
  HP_region9.val = HP_region9.r8.index
elif myState in ["WV", "MD", "DE", "DC", "VA", "NC", "SC", "GA", "FL"]:
  HP_region9.val = HP_region9.r9.index
  </exec>

  <radio
   label="HP_region4"
   where="execute,survey,report">
    <title>Hidden Question.  Region4</title>
    <row label="r1" value="1">Northeast</row>
    <row label="r2" value="2">Midwest</row>
    <row label="r3" value="3">South</row>
    <row label="r4" value="4">West</row>
  </radio>

<note> ENABLE FOR HAL PORET ONLY </note>
<!--
  <radio
    label="HP_region5"
    where="execute,survey,report">
    <title>Hidden Question.  Region4 with US legal</title>
    <row label="r1" value="1">Northeast</row>
    <row label="r2" value="2">West</row>
    <row label="r3" value="3">Midwest</row>
    <row label="r4" value="4">South</row>
    <row label="r5" value="5">Southeast</row>
  </radio>
-->

  <radio
   label="HP_region9"
   where="execute,survey,report">
    <title>Hidden Question.  Region9</title>
    <row label="r1" value="1">Pacific</row>
    <row label="r2" value="2">Mountain</row>
    <row label="r3" value="3">West North Central</row>
    <row label="r4" value="4">West South Central</row>
    <row label="r5" value="5">East North Central</row>
    <row label="r6" value="6">East South Central</row>
    <row label="r7" value="7">New England</row>
    <row label="r8" value="8">Mid Atlantic</row>
    <row label="r9" value="9">South Atlantic</row>
  </radio>

  <suspend/>
</block>







++BUT CONDITION: FOR SINGLE ONLY
<term cond="QS9.but(QS9.r2 or QS9.r3 or QS9.r99).any">QS9: Did not select Vegetarian/Kosher or None of the above</term>

cond="Q181.but(Q181.r4).any"
 -- if any Q181 is answered but not r4

<term cond="Q5.but(Q5.r1,Q5.r2,Q5.r3).any">Q5 --- TERM IF Q5 IS NOT 1, 2, OR 3</term>






++PIPE QS12 IN QS13 ROWS:
++COPY ROWS
onLoad="copy('QS12', rows=True)"
onLoad="copy('QS12', rows=True, exclude='r11')"
onLoad="copy('QS12', rows=True, exclude='r11 r12')"

rowCond="QS12[row]"
 shuffle="rows" shuffleBy="QS12"

<checkbox
  label="QS12"
  atleast="1"
  shuffle="rows">
  <title>Please select from the following food products, if any, you purchase for your family <b>at least once a month.</b></title>
  <comment>(Please select all that apply.)</comment>
  <row label="r1">Cereal</row>
  <row label="r2">Mustard</row>
  <row label="r3">Ketchup</row>
  <row label="r4">Mayonnaise</row>
  <row label="r5">Soup</row>
  <row label="r6">Salad Dressing</row>
  <row label="r7">Marinades</row>
  <row label="r8">Prepared meals</row>
</checkbox>

<suspend/>

<term cond="not(QS12.r4 or QS12.r6)">QS12: Mayo and Dressing was not selected</term>

<radio
  label="QS13"
  onLoad="copy('QS12', rows=True)"
  shuffle="rows"
  rowCond="QS12[row]">
  <title>For each food item you selected, which best describes the type you typically purchase? </title>
  <comment>(Please select all that apply.)</comment>
  <col label="c1" value="1">Brand Name</col>
  <col label="c2" value="2">Store Brand</col>
  <col label="c3" value="3">Mix of Brand Name and Store Brand</col>
</radio>

<suspend/>




++ETRAP:
https://sites.google.com/dynata.com/mwse/custom/etrap

<res label="EtrapError1">Response should not be numeric.</res>
<res label="EtrapError2">Your response have %s characters only, please be more specific with your response.</res>
<res label="EtrapError3">Your response have %s characters and exceeds character limits, should only have %s characters.</res>
<res label="EtrapError4">Response in '%s' should not be numeric.</res>
<res label="EtrapError5">Your response have %s characters only, please be more specific with your response for '%s'.</res>
<res label="EtrapError6">Your response in '%s' have %s characters and exceeds character limits, should only have %s characters.</res>
<res label="EtrapError8">Response in '%s' at '%s' should not be numeric.</res>
<res label="EtrapError9">Your response have %s characters, please be specific with your response for '%s' at '%s'.</res>
<res label="EtrapError10">Your response in '%s' at '%s' have %s characters and exceeds character limits, should only have %s characters.</res>
<res label="EtrapError7">Duplicates are not allowed.</res>

<exec when="init">
### Start - ETRAP function
def etrap(curr,arr,col='',dup=0,min=3,max=0):
    hasDup = False
    if curr in ['', None]:
        return

    print dup
    txtList = []

    if len(arr) == 0: # for open ended question
        resp = curr.val
        if len(str(resp)) gt 0:
            if str(resp).isdigit(): # checking for numeric
                error(res.EtrapError1)
            if len(str(resp)) lt min: # checking for minimum characters
                error(res.EtrapError2 % len(str(resp)))
                #error(res.EtrapError2)
            if max gt 0 and len(str(resp)) gt max: # checking for maximum characters
                error(res.EtrapError3 % (len(str(resp)), max))
                #error(res.EtrapError3 % max)
    else:  # for oSpec and open text list
        for iRow in curr.rows:
           if iRow and iRow.label in arr:
               item = arr[arr.index(iRow.label)]
               try:
                   resp = str(curr.attr(item).open).lower()
               except:
                   if col=='':
                      resp = str(curr.attr(item).val).lower()
                   else:
                      colIndex = curr.attr(col).index
                      resp = str(curr.cols[colIndex].attr(item).val).lower()

               if len(str(resp)) gt 0:

                   if resp not in txtList:
                       txtList.append(resp)
                   else:
                       hasDup = True

                   if str(resp).isdigit(): # checking for numeric
                       if col=='':
                          error(res.EtrapError4 % curr.attr(item).text)
                       else:
                          error(res.EtrapError8 % (curr.attr(item).text, curr.attr(col).text))
                   if len(str(resp)) lt min: # checking for minimum characters
                       if col=='':
                          error(res.EtrapError5 % (len(str(resp)), curr.attr(item).text))
                       else:
                          error(res.EtrapError9 % (len(str(resp)), curr.attr(item).text, curr.attr(col).text))
                   if max gt 0 and len(str(resp)) gt max: # checking for maximum characters
                       if col=='':
                          error(res.EtrapError6 % (curr.attr(item).text, len(str(resp)), max))
                       else:
                          error(res.EtrapError10 % (curr.attr(item).text, curr.attr(col).text, len(str(resp)), max))


    print txtList
    if dup==1:
        if hasDup:
            error(res.EtrapError7)

    return
### Stop - ETRAP function


### Start - is_numeric function
def is_numeric(val):
  try:
    val = int(val)
    return True
  except ValueError:
    pass
### Stop - is_numeric function
</exec>


++HOW TO USE:

<validate>
etrap(Q#,[])
</validate>

<validate>
etrap(Q#,['r2'])
</validate>

<validate>
etrap(Q#,['r1','r2'])
</validate>

++ETRAP USE FOR LOOPS <textarea>
<validate>
resp = Q53a_[loopvar:label].val

if len(str(resp)) lt 3: # checking for minimum characters
  error(res.EtrapError2 % len(str(resp)))
</validate>

++ETRAP - NO DUPLICATE:
<validate>
etrap(Q#,['r1','r2'],'',1)
</validate>

++ETRAP - ALLOW DUPLICATE:
<validate>
etrap(Q#,['r1','r2'],'',0)
</validate>


++ETRAP AT LEAST 5 CHARACTERS
<validate>
etrap(Q#,['r1','r2'],'',0,5)
</validate>



++ARRAY FOR ETRAP
<exec>
def etrapArr(q):
  return [x.label for x in q.rows]
</exec>

++HOW TO USE:
<validate>
etrap(QUESTION_withROWS_OE,etrapArr(QUESTION_withROWS_OE))
</validate>







++ETRAP ALTERNATIVE
#etrap
<res label="EtrapError1">Response should not be numeric.</res>
<res label="EtrapError2">Your response have {0} characters, please be specific with your response.</res>
<res label="EtrapError3">Your response have {0} characters and exceeds character limits, should only have {1} characters.</res>
<res label="EtrapError4">Response in '{0}' should not be numeric.</res>
<res label="EtrapError5">Your response have {0} characters, please be specific with your response for '{1}'.</res>
<res label="EtrapError6">Your response in '{0}' have {1} characters and exceeds character limits, should only have {2} characters.</res>
<res label="EtrapError7">Duplicates are not allowed.</res>

<exec when="init">
### Start - ETRAP function
def etrap(curr,arr,dup=0,min=2,max=0):
    hasDup = False
    if curr in ['', None]:
        return

    print dup
    txtList = []

    if len(arr) == 0: # for open ended question
        resp = curr.val
        if len(str(resp)) gt 0:
            if str(resp).isdigit(): # checking for numeric
                error(res.EtrapError1)
            if len(str(resp)) lt min: # checking for minimum characters
                error(res.EtrapError2.format(len(str(resp))))
                #error(res.EtrapError2)
            if max gt 0 and len(str(resp)) gt max: # checking for maximum characters
                error(res.EtrapError3.format(len(str(resp)), max))
                #error(res.EtrapError3 % max)
    else:  # for oSpec and open text list
        for iRow in curr.rows:
            if iRow and iRow.label in arr:
                item = arr[arr.index(iRow.label)]
                try:
                    resp = str(curr.attr(item).open).lower()
                except:
                    resp = str(curr.attr(item).val).lower()

                if len(str(resp)) gt 0:

                    if resp not in txtList:
                        txtList.append(resp)
                    else:
                        hasDup = True

                    if str(resp).isdigit(): # checking for numeric
                        error(res.EtrapError4.format(curr.attr(item).text))
                    if len(str(resp)) lt min: # checking for minimum characters
                        error(res.EtrapError5.format(len(str(resp)), curr.attr(item).text))
                        #error(res.EtrapError5 % curr.attr(item).text)
                    if max gt 0 and len(str(resp)) gt max: # checking for maximum characters
                        error(res.EtrapError6.format(curr.attr(item).text, len(str(resp)), max))
                        #error(res.EtrapError6 % (curr.attr(item).text, max))

    print txtList
    if dup==1:
        if hasDup:
            error(res.EtrapError7)

    return
### Stop - ETRAP function


### Start - is_numeric function
def is_numeric(val):
  try:
    val = int(val)
    return True
  except ValueError:
    pass
### Stop - is_numeric function
</exec>











++US PHONE TRAP / STYLE / FORMAT
upload:
C:\j.a.y\jquery.maskedinput-1.4.1.min.js

<text
  label="PHONE"
  cond="END3.r1"
  optional="0"
  size="13">
  <title>Thank you so much.  What is the best number to reach you at for a follow up interview?</title>
  <comment>Phone number (use (XXX) XXX-XXXX format)</comment>
  <row label="r1"></row>
  <style mode="before" name="question.header"><![CDATA[
<script src="[rel jquery.maskedinput-1.4.1.min.js]"></script>
]]></style>
  <style mode="after" name="question.element" rows="r1"><![CDATA[
<script>$ ("input[name='$(name)']").mask("(999) 999-9999")</script>
]]></style>
</text>

<suspend/>






++AUTOSUBMIT PAGE:
<style arg:timeout="3" mode="after" name="respview.client.js" with="qend" wrap="ready"><![CDATA[
var $submitButton = $ ("#btn_continue, #btn_finish");
   $submitButton.prop("disabled", true);
   setTimeout( function() {
      postIt();
   }, $(timeout) * 1000);
   $submitButton.click();

var timeleft = $(timeout);
   var textTimer = setInterval(function(){
   timeleft--;
   $ ('#countdowntimer').text(timeleft);
   if(timeleft <= 0)
       clearInterval(textTimer);
   },1000);
]]></style>

<html label="qend" where="survey">Thank you for taking our survey!<br/>
<br/>
<small><i>You will automatically be advanced to the next page after <span id="countdowntimer">3 </span> seconds.</i></small>
</html>



++CARD SORT AUTOSUBMIT
REPLACE XXXXX WITH YOUR QUESTION ID

<style label="autoNext1" mode="after" name="survey.respview.footer" with="XXXXXX" wrap="ready"><![CDATA[
  $ ('#btn_continue').hide();
  $ (window).load(function() {
    cardSortNext();
  });
  $ ('.sq-cardsort-bucket').click(function() {
    setTimeout(function() {cardSortNext();}, 1000);
  });

  $ ('.sq-cardsort-next').click(function() {
    setTimeout(function() {cardSortNext();}, 1000);
  });

  function cardSortNext() {
    if ($ ('.sq-cardsort-completion').is(':visible')) {
      $ ('#btn_continue').slideDown();
      $ ('#btn_continue').click();
      $ ('#btn_continue').visibility=visible;

    }
  }
]]></style>





++CARD RATING ADJUST CARD HEIGHT FOR MOBILE:
 uses="cardrating.1"

<style name="question.after" cond="gv.request.device.isMobileDevice() or gv.request.device.isSmartphone() or gv.request.device.isTablet() or gv.request.device.isIpad()">	<![CDATA[
	<style>
			.sq-cardrating-cards{
	  		height: 250px !important;
			}
	</style>
]]>
</style>




++LIGHTBOX LIGHT BOX MOBILE:
<radio
  label="dummobile"
  optional="1"
  translateable="0"
  where="execute,survey,report">
  <title>DUMMY - IS DEVICE USED MOBILE</title>
  <comment>Select one</comment>
<exec>
d = gv.request.device
if d.isMobileDevice() or d.isSmartphone() or d.isTablet() or d.isIpad() :
	dummobile.val = dummobile.r1.index
else:
	dummobile.val = dummobile.r2.index
</exec>
  <row label="r1" value="1">mobile</row>
  <row label="r2" value="2">non-mobile</row>
</radio>

<suspend/>


<html label="d10img1" where="survey"><div class="hidden hc1">[image q10img1.jpg]</div>
<div style="text-align: center"><a href="#" onclick="Survey.uidialog.make($('.hc1'));">[image q10img1.jpg width=400 height=400 protected=1 value='']</a></div>
&lt;style cond="dummobile.r1" name="respview.client.css"&gt;
    .ui-dialog{ // popup dialog box;
	    height: 90vh !important;
	    width: 90vw !important;
	    top: 4vh !important;
	    left: 4vw !important;
	    overflow: scroll !important;

	}
    .ui-dialog img{ // image inside - popup dialog box;
		min-width: 100%;
	}

&lt;/style&gt;
</html>




++LIGHTBOX OPTIMIZED MOBILE SIMPLE
<res label="adsL"><img src="[rel L.png]" class="imageADS" /></res>
<res label="adsL_mobile"><a href="#" onclick="Survey.uidialog.make($('.hc1')); scrollToTop();"><img src="[rel L.png]" class="imageADS" /></a></res>

        <radio
      label="q16">
          <title>The following is shows examples of social media ads posted on Facebook and Instagram since January this year.<br /><br />
          <div class="hidden hc1" style="text-align: center" id="imgid"><img src="[rel L.png]"/></div>
          <div style="text-align:center;">${res.adsL_mobile if(dummobile.r1) else res.adsL}</div>
          <br /><br />
          Do you recall seeing any of these or similar posts for Sonoma on social media since January?</title>
          <validate>
if q16.r1:
    if not q16b.val:
        error(res.err101)
          </validate>

          <row label="r1" value="1">Yes</row>
          <row label="r2" value="2">No</row>
          <style copy="showhideQ"/>
<style cond="dummobile.r1" name="question.after"><![CDATA[
  <script>
    var elmnt = document.getElementById("imgid");
    function scrollToTop() {
      elmnt.scrollIntoView(true);
    }
  </script>

<style>
    .ui-dialog{
	    height: 90vh !important;
	    width: 90vw !important;
	    top: 4vh !important;
	    left: 4vw !important;
	    overflow: scroll !important;

	}

</style>
]]></style>
        </radio>







++MAXDIFF MAX DIFF FULL:
++IMAGES PIPE IN
++LIGHTBOX OPTIMIZED
<block label="Maxdiff_block">

<exec>
d = gv.request.device
if d.isMobileDevice() or d.isSmartphone() or d.isTablet() or d.isIpad():
	dummobile.val = dummobile.r1.index
else:
	dummobile.val = dummobile.r2.index
</exec>

<radio
  label="dummobile"
  optional="1"
  translateable="0"
  where="execute,survey,report">
  <title>DUMMY - IS DEVICE USED MOBILE</title>
  <row label="r1" value="1">mobile</row>
  <row label="r2" value="2">non-mobile</row>
</radio>

<suspend/>



<quota overquota="noqual" sheet="K1Version"/>

  <exec>
for eachRow in hK1Ver.choices:
    if hasMarker('/K1Version/k1version_%s' % eachRow.label):
        hK1Ver.val = eachRow.index
        break
  </exec>

  <select
   label="hK1Ver"
   optional="1"
   translateable="0"
   where="execute,survey,report">
    <title>Version</title>
    <choice label="ch1" value="1">1</choice>
    <choice label="ch2" value="2">2</choice>
    <choice label="ch3" value="3">3</choice>
    <choice label="ch4" value="4">4</choice>
    <choice label="ch5" value="5">5</choice>
    <choice label="ch6" value="6">6</choice>
    <choice label="ch7" value="7">7</choice>
    <choice label="ch8" value="8">8</choice>
    <choice label="ch9" value="9">9</choice>
    <choice label="ch10" value="10">10</choice>
    <choice label="ch11" value="11">11</choice>
    <choice label="ch12" value="12">12</choice>
    <choice label="ch13" value="13">13</choice>
    <choice label="ch14" value="14">14</choice>
    <choice label="ch15" value="15">15</choice>
    <choice label="ch16" value="16">16</choice>
    <choice label="ch17" value="17">17</choice>
    <choice label="ch18" value="18">18</choice>
    <choice label="ch19" value="19">19</choice>
    <choice label="ch20" value="20">20</choice>
    <choice label="ch21" value="21">21</choice>
    <choice label="ch22" value="22">22</choice>
    <choice label="ch23" value="23">23</choice>
    <choice label="ch24" value="24">24</choice>
    <choice label="ch25" value="25">25</choice>
    <choice label="ch26" value="26">26</choice>
    <choice label="ch27" value="27">27</choice>
    <choice label="ch28" value="28">28</choice>
    <choice label="ch29" value="29">29</choice>
    <choice label="ch30" value="30">30</choice>
    <choice label="ch31" value="31">31</choice>
    <choice label="ch32" value="32">32</choice>
    <choice label="ch33" value="33">33</choice>
    <choice label="ch34" value="34">34</choice>
    <choice label="ch35" value="35">35</choice>
    <choice label="ch36" value="36">36</choice>
    <choice label="ch37" value="37">37</choice>
    <choice label="ch38" value="38">38</choice>
    <choice label="ch39" value="39">39</choice>
    <choice label="ch40" value="40">40</choice>
    <choice label="ch41" value="41">41</choice>
    <choice label="ch42" value="42">42</choice>
    <choice label="ch43" value="43">43</choice>
    <choice label="ch44" value="44">44</choice>
    <choice label="ch45" value="45">45</choice>
    <choice label="ch46" value="46">46</choice>
    <choice label="ch47" value="47">47</choice>
    <choice label="ch48" value="48">48</choice>
    <choice label="ch49" value="49">49</choice>
    <choice label="ch50" value="50">50</choice>
    <choice label="ch51" value="51">51</choice>
    <choice label="ch52" value="52">52</choice>
    <choice label="ch53" value="53">53</choice>
    <choice label="ch54" value="54">54</choice>
    <choice label="ch55" value="55">55</choice>
    <choice label="ch56" value="56">56</choice>
    <choice label="ch57" value="57">57</choice>
    <choice label="ch58" value="58">58</choice>
    <choice label="ch59" value="59">59</choice>
    <choice label="ch60" value="60">60</choice>
    <choice label="ch61" value="61">61</choice>
    <choice label="ch62" value="62">62</choice>
    <choice label="ch63" value="63">63</choice>
    <choice label="ch64" value="64">64</choice>
    <choice label="ch65" value="65">65</choice>
    <choice label="ch66" value="66">66</choice>
    <choice label="ch67" value="67">67</choice>
    <choice label="ch68" value="68">68</choice>
    <choice label="ch69" value="69">69</choice>
    <choice label="ch70" value="70">70</choice>
    <choice label="ch71" value="71">71</choice>
    <choice label="ch72" value="72">72</choice>
    <choice label="ch73" value="73">73</choice>
    <choice label="ch74" value="74">74</choice>
    <choice label="ch75" value="75">75</choice>
    <choice label="ch76" value="76">76</choice>
    <choice label="ch77" value="77">77</choice>
    <choice label="ch78" value="78">78</choice>
    <choice label="ch79" value="79">79</choice>
    <choice label="ch80" value="80">80</choice>
    <choice label="ch81" value="81">81</choice>
    <choice label="ch82" value="82">82</choice>
    <choice label="ch83" value="83">83</choice>
    <choice label="ch84" value="84">84</choice>
    <choice label="ch85" value="85">85</choice>
    <choice label="ch86" value="86">86</choice>
    <choice label="ch87" value="87">87</choice>
    <choice label="ch88" value="88">88</choice>
    <choice label="ch89" value="89">89</choice>
    <choice label="ch90" value="90">90</choice>
    <choice label="ch91" value="91">91</choice>
    <choice label="ch92" value="92">92</choice>
    <choice label="ch93" value="93">93</choice>
    <choice label="ch94" value="94">94</choice>
    <choice label="ch95" value="95">95</choice>
    <choice label="ch96" value="96">96</choice>
    <choice label="ch97" value="97">97</choice>
    <choice label="ch98" value="98">98</choice>
    <choice label="ch99" value="99">99</choice>
    <choice label="ch100" value="100">100</choice>
  </select>

  <suspend/>

  <exec>
p.startTime = timeSpent()
  </exec>

  <loop label="startinghAttrOrder_qmaxdiff_loop" vars="mset">
    <block label="startinghAttrOrder_qmaxdiff_block">
      <exec>
MaxDiffFile = File("maxdiffDesignK1.dat","id");
id = "%s::%s" %(hK1Ver.selected.label.replace("ch",""),"[loopvar: label]")
MaxDiffInfo =  MaxDiffFile.get(id)
hAttrOrder_[loopvar: label].val = MaxDiffInfo["attr"]
      </exec>

      <text
     label="hAttrOrder_[loopvar: label]"
     optional="1"
     size="40"
     translateable="0"
     where="execute,survey,report">
        <title>Hidden: Attribute to show and the order</title>
      </text>

      <suspend/>

      <exec>
#change the order of the rows
newOrder = []
for i in hAttrOrder_[loopvar: label].val.split(","):
  newOrder.append(QK1_[loopvar: label].attr("c%s" % i))
QK1_[loopvar: label].cols.order = newOrder[:]
      </exec>

      <radio
     label="QK1_[loopvar: label]"
     colCond="col.label.replace('c','') in hAttrOrder_[loopvar: label].val.split(',')"
     grouping="rows"
     shuffle="cols"
     surveyDisplay="desktop"
     unique="1">
        <title>Of the 4 images shown, which one is the MOST appealing, and which one is the LEAST appealing? Please click on the image to enlarge it.
        <div class="hidden hc1 hidhc">[image QK1_1.jpg]</div>
        <div class="hidden hc2 hidhc">[image QK1_2.jpg]</div>
        <div class="hidden hc3 hidhc">[image QK1_3.jpg]</div>
        <div class="hidden hc4 hidhc">[image QK1_4.jpg]</div>
        <div class="hidden hc5 hidhc">[image QK1_5.jpg]</div>
        <div class="hidden hc6 hidhc">[image QK1_6.jpg]</div>
        <div class="hidden hc7 hidhc">[image QK1_7.jpg]</div>
        <div class="hidden hc8 hidhc">[image QK1_8.jpg]</div>
        <div class="hidden hc9 hidhc">[image QK1_9.jpg]</div>
        <div class="hidden hc10 hidhc">[image QK1_10.jpg]</div>
        <div class="hidden hc11 hidhc">[image QK1_11.jpg]</div>
        <div class="hidden hc12 hidhc">[image QK1_12.jpg]</div>
  </title>
        <style cond="dummobile.r2" name="question.after" wrap="ready"><![CDATA[
$ ('.row-col-legends td').css('display','none');
	$ ('.row-elements th').css('display','none');
	$ ('.row-elements').each(function(){
		var ths = $ (this).find('th').html();
		$ (this).before("<tr class='nonempty legend row-legend row-legend-left row-legend-basic legend-level-1 mobile border-collapse'><td colspan='4'>"+ths+"</td></tr>");
	});
]]></style>
        <style cond="dummobile.r2" name="question.after"><![CDATA[
<style>
	.grid.grid-table-mode .row-legend {text-align: center;}
	.ui-dialog{
	    height: 90vh !important;
	    width: 56vw !important;
	    top: 2vh !important;
	    left: 22vw !important;
	    overflow: scroll !important;
	}
</style>
]]></style>
        <style cond="dummobile.r1" name="question.after"><![CDATA[
<style>
	.grid.grid-table-mode .row-legend {text-align: center;}
	.ui-dialog{
	    height: 95vh !important;
	    width: 95vw !important;
	    top: 2vh !important;
	    left: 2vw !important;
	    overflow: scroll !important;
	}
</style>
]]></style>
        <row label="r1" value="1"><b>MOST Appealing</b></row>
        <row label="r2" value="2"><b>LEAST Appealing</b></row>
        <col label="c1"><a href="#" onclick="Survey.uidialog.make($('.hc1'));">[image QK1_1.jpg width=${"200" if dummobile.r1 else "400"} height=${"200" if dummobile.r1 else "400"}]</a></col>
        <col label="c2"><a href="#" onclick="Survey.uidialog.make($('.hc2'));">[image QK1_2.jpg width=${"200" if dummobile.r1 else "400"} height=${"200" if dummobile.r1 else "400"}]</a></col>
        <col label="c3"><a href="#" onclick="Survey.uidialog.make($('.hc3'));">[image QK1_3.jpg width=${"200" if dummobile.r1 else "400"} height=${"200" if dummobile.r1 else "400"}]</a></col>
        <col label="c4"><a href="#" onclick="Survey.uidialog.make($('.hc4'));">[image QK1_4.jpg width=${"200" if dummobile.r1 else "400"} height=${"200" if dummobile.r1 else "400"}]</a></col>
        <col label="c5"><a href="#" onclick="Survey.uidialog.make($('.hc5'));">[image QK1_5.jpg width=${"200" if dummobile.r1 else "400"} height=${"200" if dummobile.r1 else "400"}]</a></col>
        <col label="c6"><a href="#" onclick="Survey.uidialog.make($('.hc6'));">[image QK1_6.jpg width=${"200" if dummobile.r1 else "400"} height=${"200" if dummobile.r1 else "400"}]</a></col>
        <col label="c7"><a href="#" onclick="Survey.uidialog.make($('.hc7'));">[image QK1_7.jpg width=${"200" if dummobile.r1 else "400"} height=${"200" if dummobile.r1 else "400"}]</a></col>
        <col label="c8"><a href="#" onclick="Survey.uidialog.make($('.hc8'));">[image QK1_8.jpg width=${"200" if dummobile.r1 else "400"} height=${"200" if dummobile.r1 else "400"}]</a></col>
        <col label="c9"><a href="#" onclick="Survey.uidialog.make($('.hc9'));">[image QK1_9.jpg width=${"200" if dummobile.r1 else "400"} height=${"200" if dummobile.r1 else "400"}]</a></col>
        <col label="c10"><a href="#" onclick="Survey.uidialog.make($('.hc10'));">[image QK1_10.jpg width=${"200" if dummobile.r1 else "400"} height=${"200" if dummobile.r1 else "400"}]</a></col>
        <col label="c11"><a href="#" onclick="Survey.uidialog.make($('.hc11'));">[image QK1_11.jpg width=${"200" if dummobile.r1 else "400"} height=${"200" if dummobile.r1 else "400"}]</a></col>
        <col label="c12"><a href="#" onclick="Survey.uidialog.make($('.hc12'));">[image QK1_12.jpg width=${"200" if dummobile.r1 else "400"} height=${"200" if dummobile.r1 else "400"}]</a></col>
      </radio>
    </block>

    <looprow label="1">
      <loopvar name="mset">Set 1</loopvar>
    </looprow>

    <looprow label="2">
      <loopvar name="mset">Set 2</loopvar>
    </looprow>

    <looprow label="3">
      <loopvar name="mset">Set 3</loopvar>
    </looprow>

    <looprow label="4">
      <loopvar name="mset">Set 4</loopvar>
    </looprow>

    <looprow label="5">
      <loopvar name="mset">Set 5</loopvar>
    </looprow>

    <looprow label="6">
      <loopvar name="mset">Set 6</loopvar>
    </looprow>

    <looprow label="7">
      <loopvar name="mset">Set 7</loopvar>
    </looprow>

    <looprow label="8">
      <loopvar name="mset">Set 8</loopvar>
    </looprow>

    <looprow label="9">
      <loopvar name="mset">Set 9</loopvar>
    </looprow>
  </loop>

  <float
   label="QK1_Timer"
   size="15"
   translateable="0"
   where="execute,survey,report">
    <title>QK1 - MaxDiff Timer (Minutes)</title>
    <exec>
QK1_Timer.val = (timeSpent() - p.startTime) / 60.0
    </exec>

  </float>

  <suspend/>
</block>














++BASIC LOOP
<loop label="Q111_loop" vars="company" title=" " suspend="0">

  <block label="Q111_block">

    <radio
      label="Q111_[loopvar: label]">
      <title>What is your overall opinion of [loopvar: company]?<br/>
      [loopvar: label] out of 4</title>
      <comment>Select one</comment>
      <col label="c1" value="1">1-Extremely Negative</col>
      <col label="c2" value="2">2</col>
      <col label="c3" value="3">3</col>
      <col label="c4" value="4">4</col>
      <col label="c5" value="5">5</col>
      <col label="c6" value="6">6</col>
      <col label="c7" value="7">7</col>
      <col label="c8" value="8">8</col>
      <col label="c9" value="9">9</col>
      <col label="c10" value="10">10- Extremely Positive</col>
    </radio>

    <suspend/>

  </block>

  <looprow label="1" cond="1">
    <loopvar name="company">Xcel Energy</loopvar>
  </looprow>
  <looprow label="2" cond="1">
    <loopvar name="company">Apple</loopvar>
  </looprow>
  <looprow label="3" cond="1">
    <loopvar name="company">Google</loopvar>
  </looprow>
  <looprow label="4" cond="1">
    <loopvar name="company">Amazon</loopvar>
  </looprow>

</loop>





++SLIDER WITH DK:
<number
  label="Q1"
  ignoreValues="999" <!-- DK value -->
  size="10"
  slidernumber:OO_Text="Prefer not to say" <!-- DK text -->
  uses="slidernumber.5"
  verify="range(1,5)">
  <title>Please answer the following:</title>
  <row label="r1">R1</row>
  <row label="r2">R2</row>
  <row label="r3">R3</row>
</number>



++RESETUP RE-SETUP RE SETUP DUPLICATE
Duplicate project
	Check: Share project with same users and groups



++QUOTA WITH DUMMY CATCHER
<quota overquota="noqual" sheet="qt_name"/>

<exec>
for eachRow in dQV.rows: # text should match with text from dummy punches
    if(hasMarker("/qt_name/%s" %(eachRow.label))):
        dummyVAR.val = eachRow.index
        break
</exec>

<radio
  label="dummyVAR"
  optional="1"
  translateable="0"
  where="execute,survey,report">
  <title>Hidden Question. Quota Variable</title>
  <row label="r1" value="1">VALUE1</row>
  <row label="r2" value="2">VALUE2</row>
</radio>

<suspend/>




++GOTO GO TO JUMP QUESTION
<goto cond="Q#.r#" target="Q#"/>


++REDIRECT TO ANOTHER SITE
update:   autosaveKey="rnid,pid,psid,uuid,RID,code,state"

change <suspend/> to:
<suspend sst="0" cond="1" url="http://www.google.com"/>
<suspend cond="1" sst="0" url="https://19060KF.sawtoothsoftware.com/cgi-bin/ciwweb.pl?studyname=19060KF&amp;uid=${uuid}&amp;Q7=${dQ7.selected.text}"/>



state variable will automatically be passed: ?state=92ecf60a3728a0748270a98d7376d8c3ae976bacQ000001A00000342
to contunue the survey, pass back the state variable


--REDIRECT MESSAGE
Kindly see below for an example link to be passed back to us (test link):
https://survey-d.dynata.com/survey/selfserve/53b/19041174?state={alphanumeric}


Also, since we have 3 sample types kindly see updated test links below:
Dynata:
https://survey-d.dynata.com/survey/selfserve/53b/19041174?samp=1
Lucid:
https://survey-d.dynata.com/survey/selfserve/53b/19041174?samp=2
EMI:
https://survey-d.dynata.com/survey/selfserve/53b/19041174?samp=3


From our end we would like to pass these variables to the client:
                •             “uuid” – alphanumeric. id used match our data with the client's data;
                •             and “state” – alphanumeric. which is the session variable and must be passed back to our survey link to let the respondent continue their survey:

Example values are:
uuid=em7s9rm14u0js88s
state=d0156fc1c06002a46d3c98db452a90a348a59be0Q00000NP00000346







++GET QUOTA CURRENT COUNT
<exec>
cells = gv.survey.root.quota.getQuotaCells()
current, limit, overquota = cells["/general/Male"]
</exec>



++HOLDER; NOT SHOWN AT ALL
<html label="after_conjoint" where="none">FOR PROGRAMMING PURPOSES ONLY - HOLDER AFTER CONJOINT REDIRECT</html>



++IF JQUERY DOES NOT WORK
setTimeout(function(){
*jquery code here*
	},100);



++CHECK WHO OPENED EMAILS BY DEFAULT
https://decipher.zendesk.com/hc/en-us/articles/360010160714-Identifying-Email-Recipients



++MOBILE KEYBOARD TO NUMBERS
		HAVE THE MOBILE KEYBOARD AUTOMATICALLY SHOW THE NUMBER KEYBOARD RATHER THAN LETTERS
ADD STYLES TO THE QUESTION:
<style name="el.text"><![CDATA[
\@if row.styles.ss.preText or this.styles.ss.preText
${row.styles.ss.preText or this.styles.ss.preText or ""}&nbsp;
\@endif
<input type="number" pattern="[0-9]*" name="$(name)" id="$(id)" value="$(value)" size="$(size)" class="input text-input" $(extra)/>
\@if row.styles.ss.postText or this.styles.ss.postText
&nbsp;${row.styles.ss.postText or this.styles.ss.postText or ""}
\@endif
]]></style>
<style name="page.head"><![CDATA[
<style type="text/css">
input[type=number] {
background: #fff;
border: 1px solid #ccc;
color: #454545;
font-size: 1rem;
-moz-border-radius: 4px;
-webkit-border-radius: 4px;
border-radius: 4px;
padding: .5em .75em;
}
</style>
]]></style>



++RUN SIMULATED DATA > CONFIGURE TEST SIMULATION > CUSTOM TEST SIMULATION > TESTING PARAMETERS:
stype: 1,2
country: 1,2,3,4,5

Overquota is fine as long as NOT INSIDE PARENTHESIS OR HAVE PLUS SIGN



++ZIP CODE UPLOAD FROM FILE
<block label="zipcode_block" cond="1" sst="0">
<exec when="init">
def zipCodeFile(fname, zipHeader):
  try:
      zipCodesData = File( "%s/%s" % (gv.survey.path, fname), zipHeader)
  except IOError:
      zipCodesData = ""
  return zipCodesData
</exec>

<exec when="init">
ZIPCODES = zipCodeFile("zips.dat", "zip")
</exec>

  <text
   label="Q106"
   optional="0"
   size="5"
   verify="zipcode">
    <title>Please type your zip code here:</title>
    <comment><i>5 numbers only</i></comment>
<style name="question.after" wrap="ready"><![CDATA[
$ (':text').attr('maxlength','5');
$ (':text').attr('size','5');
]]></style>
  </text>

  <suspend/>

<exec>
p.term = False
RECORD = ZIPCODES.get( Q106.val )

if not(RECORD):
  p.term = True
</exec>

  <term cond="p.term == True" label="Q106term">Q106: Invalid zipcode</term>
</block>




++TO GET OTHER VALUES FROM FILE
<exec>
p.term = False

ZIPCODES = zipCodeFile("zips.dat", "zipcode")

RECORD = ZIPCODES.get( ZIP.val )

print "RECORD: ", RECORD

if not(RECORD):
  p.term = True
else:
  print "dSTATE_ABBR: ", RECORD['state_abbr']
  print "dCITY_NAME: ", RECORD['city_name']
  print "dCOUNTY_NAME: ", RECORD['county_name']
  print "dDMA_NAME: ", RECORD['dma_name']
  dSTATE_ABBR.val = RECORD['state_abbr']
  dCITY_NAME.val = RECORD['city_name']
  dCOUNTY_NAME.val = RECORD['county_name']
  dDMA_NAME.val = RECORD['dma_name']
</exec>





++ZIPCODE FROM FILE SIMPLE *new*
<block label="zipcode_block" cond="1" sst="0">
<exec when="init">
def zipCodeFile(fname, zipHeader):
  try:
      zipCodesData = File( "%s/%s" % (gv.survey.path, fname), zipHeader)
  except IOError:
      zipCodesData = ""

  return zipCodesData
</exec>

<exec when="init">
ZIPCODES = zipCodeFile("zips.dat", "ZipCode")
</exec>

  <text
   label="S1"
   optional="0"
   size="5"
   verify="zipcode">
    <title>What is your zip code?</title>
<exec>
print "sample zips: 58501, 49614"
</exec>
<style name="question.after" wrap="ready"><![CDATA[
$ (':text').attr('maxlength','5');
$ (':text').attr('size','5');
]]></style>
  </text>

  <suspend/>

<radio
  label="H120"
  optional="1"
  where="execute,survey,report">
  <title>Hidden. Market assignment</title>
  <comment>Select one</comment>
<exec>
RECORD = ZIPCODES.get( S1.val )

if RECORD:
  print "RECORD: ", RECORD
  REGIONCODE = RECORD['regioncode']
  print "RegionCode: ", REGIONCODE
  for eachRow in H120.rows:
    if int(eachRow.value) == int(REGIONCODE):
      H120.val = eachRow.index
      break
else:
  H120.val = H120.r11.index
</exec>
  <row label="r1" value="1">Omaha (NE/IA)</row>
  <row label="r2" value="2">South/SW MI</row>
  <row label="r3" value="3">SMI-GrandRapids</row>
  <row label="r4" value="4">Northern MI</row>
  <row label="r5" value="5">Eastern MI</row>
  <row label="r6" value="6">Bismarck ND</row>
  <row label="r7" value="7">Fargo ND</row>
  <row label="r8" value="8">Dickinson ND</row>
  <row label="r9" value="9">Rapid City SD</row>
  <row label="r10" value="10">WI/MN/Western NE (Upper Midwest)</row>
  <row label="r11" value="11">None of these TERMINATE</row>
</radio>

<suspend/>

<term cond="H120.r11">H120: None of these</term>


</block>














++REMOVE PROGRESS BAR
  ss:hideProgressBar="1"


++PIPE IN <pipe>
<pipe label="Q2pipe" onLoad="fixupPipe()">
  <case label="r1" cond="S6.r16">your current wireless service provider</case>
  <case label="r99" cond="1"></case>
</pipe>
[pipe: Q2pipe]

<radio
  label="Q2">
  <title>How likely are you to switch from [pipe: Q2pipe] to another wireless service provider <u>in the next 12 months</u>?</title>
  <comment>(Select one)</comment>
  <row label="r1" value="1">Definitely Will <u>Not</u> Switch</row>
  <row label="r2" value="2">Probably Will <u>Not</u> Switch</row>
  <row label="r3" value="3">Might or Might Not Switch</row>
  <row label="r4" value="4">Probably Will Switch</row>
  <row label="r5" value="5">Definitely Will Switch</row>
</radio>

<suspend/>


++PIPE IN WITH OTHER TEXT
[pipe: Q7EU]



++PIPE IN WITH DATA CAPTURE
<pipe label="dSC2E_Attr3pipe" onLoad="fixupPipe()">
<case label="r1" cond="dType.r2">Uniqlo</case>
<case label="r2" cond="1">Polo-Ralph Lauren</case></pipe>




++CAROUSEL
https://decipher.zendesk.com/hc/en-us/articles/360010274373-Dynamic-Question-Versioning
uses-"cardrating.1" -- preferred (radio only)
uses-"cardsort.6"




++STRAIGHTLINER FOR SPECIFIC QUESTION

<exec>
for eachCol in Qxxx.cols:
    if eachCol.all:
         hStraightlinedQxxx.val = hStraightlinedQxxx.r1.index
         break
else:
     hStraightlinedQxxx.val = hStraightlinedQxxx.r2.index
</exec>

<radio
  label="hStraightlinedQxxx"
  optional="1"
  where="execute,survey,report">
  <title>Hidden to flag if Qxxx is straight lined.</title>
  <comment>Please select one</comment>
  <row label="r1" value="1">Straight lined</row>
  <row label="r2" value="2">Not Straight lined</row>
</radio>

<suspend/>




++TOOLKIT LEGACY RML6 RnD R&D
++TOOLKIT LEGACY RML6 RnD R&D
++TOOLKIT LEGACY RML6 RnD R&D
++TOOLKIT LEGACY RML6 RnD R&D
++TOOLKIT LEGACY RML6 RnD R&D
https://survey-d.dynata.com/survey/selfserve/53b/19021138

https://confluence.surveysampling.com/display/RT/RML6+Tools+-+Legacy+RSN


CODES HERE:
https://survey-d.dynata.com/apps/lumos/53b/19021138/temp-view:xmledit
TEST HERE:
https://survey-d.dynata.com/survey/selfserve/53b/19021138/temp-view



++RML6 CONFIG
<block label="b97" builder:title="MX Config">
    <exec when="init">
order_id = 'ORD-12345-ABCD'
project_id = gv.survey.path

def initMxDataToggle():
  output = "\n"
  output += "var dataToggler = jQuery('&lt;div&gt;Please click here to see the data nodes for this tool.&lt;/div&gt;');\n"
  output += "dataToggler.addClass('dataToggle');\n"
  output += "dataToggler.css({'text-decoration': 'underline','font-size': 'small','color': 'blue','cursor': 'pointer','margin-top': '20px'});\n"
  output += "jQuery('.mx-stage').last().after(dataToggler);\n"
  output += "dataToggler.click(info.bridge.toggleDataNodes());\n"
  return output

def MxToolUsageUrl(toolid):
  return 'https://surveytools.researchnow.com/rsntools/rnd/apis/latest/monitoring/latest/tool/add-usage?project-id=' + gv.survey.path + '&amp;tool-id=' + toolid + '&amp;server-id=' + getHostId(gv)
  </exec>
  </block>







++RML6 CAROUSEL RADIO

  <style name="question.after"><![CDATA[
<style>.answers{visibility:hidden;}</style>
    <script type="text/javascript" src="//d2n88fe5uqdqty.cloudfront.net/ssi_js/decipher/ssi_ALLInOne_Confirmit_2.0_groups_decipher.js"></script>

    <script type="text/javascript">
    var lukanka;
    (function (lukanka) {
      if (!lukanka.qDefs)
        lukanka.qDefs = {};
        lukanka.qDefs["${this.label}"] = ${jsexport()};
      $ (document).ready(function(){
        parseJsexportData();
      });
    })(lukanka || (lukanka = {}));

    </script>

    <div class="gridclick" style="margin-bottom:50px"><img class="img-responsive loading-container" style="margin: 40px auto;" src="//d2n88fe5uqdqty.cloudfront.net/rnd/tools/images/loading.gif" /><div class="gridclick-container"></div></div>

    <link rel="stylesheet" type="text/css" href="//d2n88fe5uqdqty.cloudfront.net/rnd/tools/gridclick/gridClick_v2.9.4_d.min.css">
    <link rel="stylesheet" type="text/css" href="//d2n88fe5uqdqty.cloudfront.net/rnd/plugins/ionicons/ionicons-2.0.1/css/ionicons.min.css">
    <link rel="stylesheet" type="text/css" href="//d2n88fe5uqdqty.cloudfront.net/rnd/plugins/fancybox/3.x.x/3.1.20/jquery.fancybox.css">

    <script type="text/javascript" src="//d2n88fe5uqdqty.cloudfront.net/rnd/tools/gridclick/gridClick_v2.9.4_d.min.js"></script>
    <script type="text/javascript" src="//d2n88fe5uqdqty.cloudfront.net/rnd/plugins/fancybox/3.x.x/3.1.20/jquery.fancybox.js"></script>

    <script type="text/javascript">
      $ (function() {
        var config = {

          // =============== DOCUMENTATION ===============> https://confluence.surveysampling.com/x/hq17AQ

          sForm : getFormName(1), // form name of the grid
          sSplitter : '$', // splitter for images
          sOrientation : 'horizontal', // 'horizontal', 'vertical'
          sProgressSepText : ' / ', // separator text between item progress
          sTxtProgress : '', // text after progress text
          sForwardButton : '#btn_continue',  // forward button jQuery selector - used for toggling the next button
          sOeDefaultHolder: '&#xf2bf;........', // default input placeholder when OEs are present
          sHideScaleType : 'keepAlignment', // method to hide the scales - 'keepAlignment', 'newAlignment'
          sDkScaleBgColor : '#E9ECEF', // background color for the DK scale
          iMinItemsRequired : null, // minimum answered items required to toggle the next button - default is null - all required
          iAnimationTime : 400, // animation time in ms
          iMaxContainerWidth : 750, // maximum tool container width - can be used to enlarge/shrink the tool
          iVertItemContainPerc : 45, // vertical item container percentage width
          iVertItemContainMarginPerc : 5, // vertical item container percentage margin
          iFontSize : null, // font size for the tool container
          aDkScale : [99], // dk codes for scale - for example: [99,999]
          aOtherNotRequired : [], // other not required item codes - for example: [99,999]
          aOtherPlaceHolder : [], // other input custom placeholder - for example [{'98': 'Please specify'}, {'998': 'Specify'}]
          aOtherOpenOptional: [], // other OE input not required - next button will be toggled without the need of OE input - scale can still be chosen - for example: [98, 998]
          aHideScaleCodes: [], // hide scales for specific codes [{98: [1,3]}, {1: [2,4]}]

          oElementConfig : { // element/item config object
            bImages : false, // images as options - using the splitter
            bShowLabel : true, // show labels for the options
            bShowOeImage : false, // if OE - should it show an image for the other option
            bZoomEnabled : false, // is zoom enabled
            sZoomImage : '//d2n88fe5uqdqty.cloudfront.net/rnd/tools/images/zoom_icon2.png', // zoom icon image path
            sZoomPosition : 'br', // position for the zoom icon - 'br', 'bl', 'tl'
            sImagePath : '', // path for the images to be used with the splitter
            sSmallImageExtension : '_S.jpg', // extension for the small image (default shown)
            sLargeImageExtension : '_L.jpg', // extension for the zoomed image
            iMaxImageWidth: 100, // maximum image width - needs to be lower than iWidth
            iMaxImageHeight: 100, // maximum image height - needs to be lower than iHeight
            iWidth : 130, // overall item container width
            iHeight : 100, // overall item container height
            iHorizontalSpacing : 15, // horizontal spacing between items
            iVerticalSpacing : 5, // vertical spacing between items
            iFontSize: null // font size for the item container
          },

          oScaleConfig : { // scale config object
            bImages : false, // images as options - using the splitter
            bShowLabel : true, // show labels for the options
            bZoomEnabled : false, // is zoom enabled
            sZoomImage : '//d2n88fe5uqdqty.cloudfront.net/rnd/tools/images/zoom_icon2.png', // zoom icon image path
            sZoomPosition : 'br', // position for the zoom icon - 'br', 'bl', 'tl'
            sImagePath : '', // path for the images to be used with the splitter
            sSmallImageExtension : '.png', // extension for the small image (default shown)
            sLargeImageExtension : '.png', // extension for the zoomed image
            iMaxImageWidth: 62, // maximum image width - needs to be lower than iWidth
            iMaxImageHeight: 62, // maximum image height - needs to be lower than iHeight
            iWidth : 120, // scale button width
            iHeight : 35, // scale button height
            iHorizontalSpacing : 10, // horizontal scale spacing
            iVerticalSpacing : 10, // vertical scale spacing
            iFontSize: null // font size for the scale container
          },

          oFancyBoxConfig : {}, // config for adding custom fancybox parameters - //fancyapps.com/fancybox/3/docs/
          bInvertItemScale : false, // invert the item/scale containers - top/bottom for horizontal, left/right for vertical
          bHeightAuto : false, // make the items/scales have auto height for horizontal view - should not be used for vertical
          bScaleNewLine: true, // make the scale in horizontal mode render vertically (one below the other) when not enough horizontal space for all scales
          bReverse : true, // reverse the direction of the items/navigation arrows
          bShowProgressText : false, // show the progress text progress
          bShowProgressIndicator :  true, // show the progress indicator
          bDisableNavigation : false, // disable navigation arrows - will only be allowed for multi or when no AutoNext item is false
          bAutoNextItem : true, // automatically go to next item when selected - working on multi only when DK scale is selected
          bAutoSubmit : false, // auto submit page when all items are answered
          bInitialNavigation : false, // initial navigation toggle
          bEnableNavAnswered : false, // Enable navigation for already answered items only. Not applicable when bDisableNavigation or bInitialNavigation is enabled.
          bMultiple : false, // is the grid multiple
          bAutoSizeScales : false, //Automatically re-render scales to fit the width. Not applicable when bScaleNewLine is enabled or when oScaleConfig.iFirstLastWidth is set.
          bIsTest : true, // will make the tool warning appear as JavaScript alerts to make sure they are handled
          onStart : function() {}, // function called before the tool starts generating
          onAnswer : function(e) {}, // function called when an answer is given (click on scale)
          onInput : function(e) {}, // function called on OE input (item)
          onCompleted : function() {}, // function called when all items are answered (unless OE not required codes are defined) before next button is toggled
          onReady : function() {
            $ ('.answers').hide();
          }, // function called after tool is fully loaded
        }
        $ ('body').gridClick(config);


      });
    </script>
]]></style>


++RML6 CAROUSEL MULTI

  <style name="question.after"><![CDATA[
<style>.answers{visibility:hidden;}</style>
    <script type="text/javascript" src="//d2n88fe5uqdqty.cloudfront.net/ssi_js/decipher/ssi_ALLInOne_Confirmit_2.0_groups_decipher.js"></script>

    <script type="text/javascript">
    var lukanka;
    (function (lukanka) {
      if (!lukanka.qDefs)
        lukanka.qDefs = {};
        lukanka.qDefs["${this.label}"] = ${jsexport()};
      $ (document).ready(function(){
        parseJsexportData();
      });
    })(lukanka || (lukanka = {}));

    </script>

    <div class="gridclick" style="margin-bottom:50px"><img class="img-responsive loading-container" style="margin: 40px auto;" src="//d2n88fe5uqdqty.cloudfront.net/rnd/tools/images/loading.gif" /><div class="gridclick-container"></div></div>

    <link rel="stylesheet" type="text/css" href="//d2n88fe5uqdqty.cloudfront.net/rnd/tools/gridclick/gridClick_v2.9.4_d.min.css">
    <link rel="stylesheet" type="text/css" href="//d2n88fe5uqdqty.cloudfront.net/rnd/plugins/ionicons/ionicons-2.0.1/css/ionicons.min.css">
    <link rel="stylesheet" type="text/css" href="//d2n88fe5uqdqty.cloudfront.net/rnd/plugins/fancybox/3.x.x/3.1.20/jquery.fancybox.css">

    <script type="text/javascript" src="//d2n88fe5uqdqty.cloudfront.net/rnd/tools/gridclick/gridClick_v2.9.4_d.min.js"></script>
    <script type="text/javascript" src="//d2n88fe5uqdqty.cloudfront.net/rnd/plugins/fancybox/3.x.x/3.1.20/jquery.fancybox.js"></script>

    <script type="text/javascript">
      $ (function() {
        var config = {

          // =============== DOCUMENTATION ===============> https://confluence.surveysampling.com/x/hq17AQ

          sForm : getFormName(1), // form name of the grid
          sSplitter : '$', // splitter for images
          sOrientation : 'horizontal', // 'horizontal', 'vertical'
          sProgressSepText : ' / ', // separator text between item progress
          sTxtProgress : '', // text after progress text
          sForwardButton : '#btn_continue',  // forward button jQuery selector - used for toggling the next button
          sOeDefaultHolder: '&#xf2bf;........', // default input placeholder when OEs are present
          sHideScaleType : 'keepAlignment', // method to hide the scales - 'keepAlignment', 'newAlignment'
          sDkScaleBgColor : '#E9ECEF', // background color for the DK scale
          iMinItemsRequired : null, // minimum answered items required to toggle the next button - default is null - all required
          iAnimationTime : 400, // animation time in ms
          iMaxContainerWidth : 750, // maximum tool container width - can be used to enlarge/shrink the tool
          iVertItemContainPerc : 45, // vertical item container percentage width
          iVertItemContainMarginPerc : 5, // vertical item container percentage margin
          iFontSize : null, // font size for the tool container
          aDkScale : [3], // dk codes for scale - for example: [99,999]
          aOtherNotRequired : [], // other not required item codes - for example: [99,999]
          aOtherPlaceHolder : [], // other input custom placeholder - for example [{'98': 'Please specify'}, {'998': 'Specify'}]
          aOtherOpenOptional: [], // other OE input not required - next button will be toggled without the need of OE input - scale can still be chosen - for example: [98, 998]
          aHideScaleCodes: [], // hide scales for specific codes [{98: [1,3]}, {1: [2,4]}]

          oElementConfig : { // element/item config object
            bImages : false, // images as options - using the splitter
            bShowLabel : true, // show labels for the options
            bShowOeImage : false, // if OE - should it show an image for the other option
            bZoomEnabled : false, // is zoom enabled
            sZoomImage : '//d2n88fe5uqdqty.cloudfront.net/rnd/tools/images/zoom_icon2.png', // zoom icon image path
            sZoomPosition : 'br', // position for the zoom icon - 'br', 'bl', 'tl'
            sImagePath : '', // path for the images to be used with the splitter
            sSmallImageExtension : '_S.jpg', // extension for the small image (default shown)
            sLargeImageExtension : '_L.jpg', // extension for the zoomed image
            iMaxImageWidth: 100, // maximum image width - needs to be lower than iWidth
            iMaxImageHeight: 100, // maximum image height - needs to be lower than iHeight
            iWidth : 130, // overall item container width
            iHeight : 100, // overall item container height
            iHorizontalSpacing : 15, // horizontal spacing between items
            iVerticalSpacing : 5, // vertical spacing between items
            iFontSize: null // font size for the item container
          },

          oScaleConfig : { // scale config object
            bImages : false, // images as options - using the splitter
            bShowLabel : true, // show labels for the options
            bZoomEnabled : false, // is zoom enabled
            sZoomImage : '//d2n88fe5uqdqty.cloudfront.net/rnd/tools/images/zoom_icon2.png', // zoom icon image path
            sZoomPosition : 'br', // position for the zoom icon - 'br', 'bl', 'tl'
            sImagePath : '', // path for the images to be used with the splitter
            sSmallImageExtension : '.png', // extension for the small image (default shown)
            sLargeImageExtension : '.png', // extension for the zoomed image
            iMaxImageWidth: 62, // maximum image width - needs to be lower than iWidth
            iMaxImageHeight: 62, // maximum image height - needs to be lower than iHeight
            iWidth : 120, // scale button width
            iHeight : 35, // scale button height
            iHorizontalSpacing : 10, // horizontal scale spacing
            iVerticalSpacing : 10, // vertical scale spacing
            iFontSize: null // font size for the scale container
          },

          oFancyBoxConfig : {}, // config for adding custom fancybox parameters - //fancyapps.com/fancybox/3/docs/
          bInvertItemScale : false, // invert the item/scale containers - top/bottom for horizontal, left/right for vertical
          bHeightAuto : false, // make the items/scales have auto height for horizontal view - should not be used for vertical
          bScaleNewLine: true, // make the scale in horizontal mode render vertically (one below the other) when not enough horizontal space for all scales
          bReverse : true, // reverse the direction of the items/navigation arrows
          bShowProgressText : false, // show the progress text progress
          bShowProgressIndicator :  true, // show the progress indicator
          bDisableNavigation : false, // disable navigation arrows - will only be allowed for multi or when no AutoNext item is false
          bAutoNextItem : false, // automatically go to next item when selected - working on multi only when DK scale is selected
          bAutoSubmit : false, // auto submit page when all items are answered
          bInitialNavigation : false, // initial navigation toggle
          bEnableNavAnswered : false, // Enable navigation for already answered items only. Not applicable when bDisableNavigation or bInitialNavigation is enabled.
          bMultiple : true, // is the grid multiple
          bAutoSizeScales : false, //Automatically re-render scales to fit the width. Not applicable when bScaleNewLine is enabled or when oScaleConfig.iFirstLastWidth is set.
          bIsTest : true, // will make the tool warning appear as JavaScript alerts to make sure they are handled
          onStart : function() {}, // function called before the tool starts generating
          onAnswer : function(e) {}, // function called when an answer is given (click on scale)
          onInput : function(e) {}, // function called on OE input (item)
          onCompleted : function() {}, // function called when all items are answered (unless OE not required codes are defined) before next button is toggled
          onReady : function() {
            $ ('.answers').hide();
          }, // function called after tool is fully loaded
        }
        $ ('body').gridClick(config);


      });
    </script>
]]></style>





++RML6 CAROUSEL MULTI VERTICAL
Config:
<block label="b98" builder:title="LSSI Config">
    <exec when="init">
order_id = 'ORD-12345-ABCD'
project_id = gv.survey.path

def initLSSIDataToggle():
  if gv.isUser() and not gv.debug.respview:
    output = "&lt;script&gt;\n"
    output += "var dataToggler = jQuery('&lt;div&gt;Please click here to see the data nodes for this tool.&lt;/div&gt;');\n"
    output += "dataToggler.addClass('dataToggle');\n"
    output += "dataToggler.css({'text-decoration': 'underline','font-size': 'small','color': 'blue','cursor': 'pointer','margin-top': '20px'});\n"
    output += "dataToggler.click(lssiDataToggle);\n"
    output += "function lssiDataToggle(){ if(jQuery('.survey-page').hasClass('showlssiData')) jQuery('.survey-page').removeClass('showlssiData'); else jQuery('.survey-page').addClass('showlssiData');  }\n"
    output += "jQuery(function(){jQuery ('.survey-buttons').before(dataToggler); })\n"
    output += "&lt;/script&gt;\n"
    output += "&lt;style&gt;.showlssiData .answers,.showlssiData .question{display: block !important;visibility: visible !important;}&lt;/style&gt;\n"
    return output
  else:
    return ""
  </exec>
  </block>


<note>========================================================= CAROUSEL MULTI WITH OTH COL START =========================================================</note>

<checkbox
  label="D1"
  cond="not A1.r8"
  atleast="1"
  fir="off"
  surveyDisplay="desktop">
  <title>Where do you purchase train tickets and plan train travel?</title>
  <row label="r1">Buy tickets</row>
  <row label="r2">Plan travel</row>
  <col label="c1">Online</col>
  <col label="c2">App</col>
  <col label="c3">Ticket office</col>
  <col label="c4">Ticket machine</col>
  <col label="c5">Ticket inspector</col>
  <col label="c6">Other (please specify)</col>
     <style name="question.after"><![CDATA[
<style>

#question_D1oe {display:none;}
.scale-button[data-code='98'] .text-content, input.confirmit-other-input.scale-other {display: inline-block;}
.prev-nav.no-move, .next-nav.no-move {display: none !important;}
.item-inner-container.no-move .item {visibility: hidden;}
.item-inner-container.no-move .item.current {visibility: visible;}
input#forwardbutton.no-move {display: none !important;}
.scale-button {max-height: 50px;}
.scale-button[data-code='6'] {max-height: none;}
</style>
    <script type="text/javascript" src="//d2n88fe5uqdqty.cloudfront.net/ssi_js/decipher/ssi_ALLInOne_Confirmit_2.0_groups_decipher.js"></script>

    <script type="text/javascript">
    var lukanka;
    (function (lukanka) {
      if (!lukanka.qDefs)
        lukanka.qDefs = {};
        lukanka.qDefs["${this.label}"] = ${jsexport()};
      $ (document).ready(function(){
        parseJsexportData();
      });
    })(lukanka || (lukanka = {}));

    </script>

    <div class="gridclick" style="margin-bottom:50px"><img class="img-responsive loading-container" style="margin: 40px auto;" src="//d2n88fe5uqdqty.cloudfront.net/rnd/tools/images/loading.gif" /><div class="gridclick-container"></div></div>

    <link rel="stylesheet" type="text/css" href="//d2n88fe5uqdqty.cloudfront.net/rnd/tools/gridclick/gridClick_v2.9.3_d.min.css">
    <link rel="stylesheet" type="text/css" href="//d2n88fe5uqdqty.cloudfront.net/rnd/plugins/ionicons/ionicons-2.0.1/css/ionicons.min.css">
    <link rel="stylesheet" type="text/css" href="//d2n88fe5uqdqty.cloudfront.net/rnd/plugins/fancybox/3.x.x/3.1.20/jquery.fancybox.css">

    <script type="text/javascript" src="//d2n88fe5uqdqty.cloudfront.net/rnd/tools/gridclick/gridClick_v2.9.3_d.min.js"></script>
    <script type="text/javascript" src="//d2n88fe5uqdqty.cloudfront.net/rnd/plugins/fancybox/3.x.x/3.1.20/jquery.fancybox.js"></script>

      <script type="text/javascript">
      $ (function() {

var other=6;

        var config = {
          sForm : getFormName(1), // form name of the grid
          sSplitter : '$', // splitter for images
          sOrientation : 'vertical', // 'horizontal', 'vertical'
          sProgressSepText : ' / ', // separator text between item progress
          sTxtProgress : '', // text after progress text
          sForwardButton : '#btn_continue',  // forward button jQuery selector - used for toggling the next button
          sHideScaleType : 'keepAlignment', // method to hide the scales - 'keepAlignment', 'newAlignment'
          sDkScaleBgColor : '#E9ECEF', // background color for the DK scale
          iMinAnswersPerItem : 1, // minumum answers per item required to make the item "answered" - default is 1
          iMaxAnswersPerItem: null, // maximum allowed answers per item - default is null
          iMinItemsRequired : null, // minimum answered items required to toggle the next button - default is null - all required
          iAnimationTime : 400, // animation time in ms
          iMaxContainerWidth : 700, // maximum tool container width - can be used to enlarge/shrink the tool
          iVertItemContainPerc : 45, // vertical item container percentage width
          iVertItemContainMarginPerc : 5, // vertical item container percentage margin
          iFontSize : null, // font size for the tool in px
          aDkScale : [], // dk codes for scale - for example: [99,999]
          aHideScaleCodes: [], // [{98:[1,3]},{1:[2,4]}] (hides scales with codes 1 and 3 from Answer code 98 and scales with codes 2 and 4 from Answers code 1

          oElementConfig : { // element/item config object
            bImages : false, // images as options - using the splitter
            bShowLabel : true, // show labels for the options
            bShowOeImage : false, // if OE - should it show an image for the other option
            bZoomEnabled : true, // is zoom enabled
            sZoomImage : '//d2n88fe5uqdqty.cloudfront.net/rnd/tools/images/zoom_icon2.png', // zoom icon image path
            sZoomPosition : 'br', // position for the zoom icon - 'br', 'bl', 'tl'
            sImagePath : null, // path for the images to be used with the splitter
            sSmallImageExtension : '_S.jpg', // extension for the small image (default shown)
            sLargeImageExtension : '_L.jpg', // extension for the zoomed image
            iMaxImageWidth: 100, // maximum image width - needs to be lower than iWidth
            iMaxImageHeight: 100, // maximum image height - needs to be lower than iHeight
            iWidth : 230, // overall item container width
            iHeight : 220, // overall item container height
            iHorizontalSpacing : 15, // horizontal spacing between items
            iVerticalSpacing : 125, // vertical spacing between items
            iFontSize: null // font size for the item container
          },

          oScaleConfig : { // scale config object
            bImages : false, // images as options - using the splitter
            bShowLabel : true, // show labels for the options
            bZoomEnabled : false, // is zoom enabled
            sZoomImage : '//d2n88fe5uqdqty.cloudfront.net/rnd/tools/images/zoom_icon2.png', // zoom icon image path
            sZoomPosition : 'br', // position for the zoom icon - 'br', 'bl', 'tl'
            sImagePath : '', // path for the images to be used with the splitter
            sSmallImageExtension : '.png', // extension for the small image (default shown)
            sLargeImageExtension : '.png', // extension for the zoomed image
            iMaxImageWidth: 62, // maximum image width - needs to be lower than iWidth
            iMaxImageHeight: 62, // maximum image height - needs to be lower than iHeight
            iWidth : 350, // scale button width
            iHeight : 35, // scale button height
            iHorizontalSpacing : 5, // horizontal scale spacing
            iVerticalSpacing : 10, // vertical scale spacing
            iFontSize: null // font size for the scale container
          },

          oFancyBoxConfig : {}, // config for adding custom fancybox parameters - //fancyapps.com/fancybox/3/docs/
          bInvertItemScale : false, // invert the item/scale containers - top/bottom for horizontal, left/right for vertical
          bHeightAuto : false, // make the items/scales have auto height for horizontal view - should not be used for vertical
          bScaleNewLine: false, // make the scale in horizontal mode render vertically (one below the other) when not enough horizontal space for all scales
          bReverse : true, // reverse the direction of the items/navigation arrows
          bShowProgressText : false, // show the progress text progress
          bShowProgressIndicator :  true, // show the progress indicator
          bDisableNavigation : false, // disable navigation arrows - will only be allowed for multi or when no AutoNext item is false
          bAutoNextItem : true, // automatically go to next item when selected - working on multi only when DK scale is selected
          bDisableBlinkNav: false, // disables the blink navigation assistance for multi
          bInitialNavigation : false, // initial navigation toggle
          bEnableNavAnswered : false, // Enable navigation for already answered items only. Not applicable when bDisableNavigation or bInitialNavigation is enabled
          bMultiple : true, // is the grid multiple
          bAutoSizeScales : false, //Automatically re-render scales to fit the width. Not applicable when bScaleNewLine is enabled or when oScaleConfig.iFirstLastWidth is set.
          bIsTest : true, // if set to true the tool warnings will appear as alerts
          onStart : function() {}, // function called before the tool starts generating
          onAnswer : function(e) {
  setTimeout(function(){
            if($ (".scale-button.selected").attr("data-code")!=other)
            {
                //$ (".scale-button .scale-other,#"+getFormName(2)+"_"+$ (".item.current").attr("data-code")).val("");
                //if($ (".scale-button.selected").size()>0) /*$ (".next-nav .nav-container").click();*/
            } else {
             $ (".scale-button .scale-other").focus();
            }

            if ($ (".scale-button[data-code='"+other+"']").hasClass("selected")) {

            } else {
                var code = $ ('.item.current').eq(0).attr('data-code');
                $ (".scale-button .scale-other").val('');
                assignValueToText(getFormName(2), code, '');
            }
        },100);

          }, // function called when an answer is given (click on scale)
          onInput : function(e) {}, // function called on OE input (item)
          onCompleted : function() {}, // function called when all items are answered (unless OE not required codes are defined) before next button is toggled
          onReady : function() {
            $ ('.answers').hide();

              //Update other specify value when navigation arrows are clicked
              $ ('.prev-nav, .next-nav').on('click',function(){
                  setTimeout(function(){
                    var code = $ ('.item.current').eq(0).attr('data-code');
                    //console.log(getListItemValue('open',getFormName(2),code));
                    $ (".scale-button .scale-other").val(getListItemValue('open',getFormName(2),code));
                  }, 500);
              });



setTimeout(function(){
                $ (".scale-button .scale-other").val($ ("#"+getFormName(2)+"."+$ (".item.current").attr("data-code")).val());
            },550);

    //add other
    var flgParent = true;
        var oth=$ ("<input type='text' class='confirmit-other-input scale-other'  placeholder='........' autocomplete='off'/>");
        oth.on('keyup blur', function(e) {
            assignValueToText(getFormName(2), $ (".item.current").attr("data-code"), $ (this).val());
            if ($ (this).val()!='') {
              //$ (this).parents('.scale-button').addClass("selected");
              //assignValueToMIP(getFormName(1), $ (".item.current").attr("data-code"), other, true);
              if (!$ (this).parents('.scale-button').hasClass('selected')) {
                flgParent = false;
                $ (this).parents('.scale-button').click();
              }
            } else {
              //$ (this).parents('.scale-button').removeClass("selected");
              //assignValueToMIP(getFormName(1), $ (".item.current").attr("data-code"), other, false);
              if ($ (this).parents('.scale-button').hasClass('selected')) {
                flgParent = false;
                $ (this).parents('.scale-button').click();
              }
            }
        });
        $ (".scale-button[data-code='"+other+"'] .button-content-wrapper-cell").append(oth);
        oth.on('click', function(e) {
            e.stopPropagation();
        });


  //when items change
        $ (".item-outer-container").click(function(){
            setTimeout(function(){
                //$ (".scale-button .scale-other").val($ ("#"+getFormName(2)+"."+$ (".item.current").attr("data-code")).val());
                $ (".scale-button .scale-other").val(getListItemValue('open',getFormName(2),$ (".item.current").attr("data-code")).val());
            },550);
        });

          }, // function called after tool is fully loaded
        }
        $ ('body').gridClick(config);

        var project_id = '${project_id if project_id else "p1019653"}';
        var toolId;toolId=config.bMultiple?config.oElementConfig.bImages?"jMGTI001":"jMGTT001":config.oElementConfig.bImages?"jGTI001":"jGTT001";


      });
    </script>
]]></style>
</checkbox>

<text
  label="D1oe"
  size="15">
  <title>Other,specify</title>
  <row label="r1"/>
  <row label="r2"/>
  <style name="question.after"><![CDATA[
<script type="text/javascript">
    var lukanka;
    (function (lukanka) {
      if (!lukanka.qDefs)
        lukanka.qDefs = {};
        lukanka.qDefs["${this.label}"] = ${jsexport()};
      $ (document).ready(function(){
        parseJsexportData();
      });
    })(lukanka || (lukanka = {}));

    </script>
]]></style>
</text>
<suspend/>

<note>========================================================= CAROUSEL MULTI WITH OTH COL END =========================================================</note>







++COND IF NOT SELECTED
cond="not Q14b.any"


++CONJOINT GUIDE KnowledgeBase
https://decipher.zendesk.com/hc/en-us/articles/360010278113-Creating-a-Discrete-Choice-Model-DCM-Question




++VALIDATE IF ZIP QUESTION DOES NOT MATCH STATE QUESTION
ADD IN LAST QUESTION (in this case the zip question S7):
<style name="question.after" wrap="ready"><![CDATA[
/*VALIDATE ZIPCODE WITH STATE - check GOTO xml element below*/
if(${("%s" % p.notZipStateMatch).lower()}){ $ ('.question-text').after("<div class='question-error'><h2 class='question-error-text'>Please match zipcode with state.</h2></div>"); }
]]></style>

ADD SOMEWHERE BELOW:
<exec>
if not hSTATE.val == S6.val: # hSTATE is from zip question recoded to state; S6 is the STATE question
  p.notZipStateMatch = True
else:
  p.notZipStateMatch = False
</exec>

<goto cond="p.notZipStateMatch" target="S7"/>



++SHOW / HIDE OE BOX
<radio
  label="Q740"
  shuffle="rows">
  <title>Thinking specifically about <b>“Make sure our transit systems are safe, secure, and resilient,”</b> how important do you think each of the following priorities are?</title>
  <comment>Select a rating for each item</comment>
  <col label="c1" value="1">Not at all important</col>
  <col label="c2" value="2">Somewhat important</col>
  <col label="c3" value="3">Very Important</col>
  <col label="c4" value="4">One of the most important overall</col>
  <row label="r1" value="1">Ensure transit facilities, vehicles, and equipment are safe to ride</row>
  <row label="r2" value="2">Reduce the risk and frequency of equipment failures and service outages</row>
  <row label="r3" value="3">Protect transit systems against security risks and vulnerabilities</row>
  <row label="r4" value="4">Improve the safety of accessing transit, including safe places to walk, bike, park and wait to board</row>
  <row label="r5" value="5">Reduce vulnerability to flooding, erosion, and other risks associated with climate change</row>
  <style label="showhideOE" arg:qidn="Q740f" name="question.after" wrap="ready"><![CDATA[
$ ('div#question_$(qidn) input:radio').click(function() {
    var bal = $ (this).val();
    if(bal == 0 && $ (this).is(':checked')) {
        $ ('div#question_$(qidn) input:text').show();
    } else {
        $ ('div#question_$(qidn) input:text').hide();
    }
});

$ ('div#question_$(qidn) label.clickable').click(function() {
	setTimeout( function() {
		var ans = $ ("div#question_$(qidn) input:radio:checked").val();
		if(ans == 0) {
            $ ('div#question_$(qidn) input:text').show();
        } else {
            $ ('div#question_$(qidn) input:text').hide();
        }
	}, 300);
});

var ans = $ ("div#question_$(qidn) input:radio:checked").val();
console.info(ans);
if(ans == 0) {
	$ ('div#question_$(qidn) input:text').show();
} else {
	$ ('div#question_$(qidn) input:text').hide();
}
]]></style>
</radio>

<radio
  label="Q740f">
  <title>Is there another priority that should be considered? </title>
  <row label="r1" open="1" openSize="50" randomize="0" value="1">Yes</row>
  <row label="r2" value="2">No</row>
</radio>

<suspend/>


++SAME ROW COL FROM PREVIOUS QUESTION
same rows Q720x1 == basis question
  onLoad="copy('Q720x1', rows=True)"
  shuffle="rows"
  shuffleBy="Q720x1"



++TEXTAREA WIDTH WHOLE SCREEN
<textarea
  label="Q785"
  optional="1">
  <title>When you think about the future of public transportation in our region, what other goals or priorities are most important to you? </title>
  <comment>Please be as specific as possible</comment>

  <style wrap="ready" name="question.after"><![CDATA[

    	$ ("textarea").attr("cols", "150");

]]></style>

</textarea>



++CHECK IF SINGLE RADIO IS ANSWERED
Q1.any

++CHECK IF HOW MANY MULTI CHECKBOX IS ANSWERED
Q1.count




++PUNCHES ARE IN TABLE FORMAT
<res label="hd1">Audience</res>
<res label="hd2">Product Needs</res>
<res label="hd3">Yard Work Behavior</res>
<res label="hd4">Yard Work Attitudes</res>
<res label="r1c1"><b>Gas power</b> and <b>heavy duty</b> equipment is important.<br /><br /><b>Brand</b> is also very important.</res>
<res label="r1c2">Own a <b>wide range</b> of equipment, a lot of them are <b>gas powered</b>.<br /><br />Like to have a <b>routine</b> for yard work.</res>
<res label="r1c3"><b>Moderate enjoyment</b> of yard work, but like to keep a well maintained yard.<br /><br /><b>Spend a long time</b> on yard work.</res>
<res label="r2c1">Want <b>easy to use</b> powered equipment that is <b>ergonomic</b> and <b>lightweight</b>. <br /><br /><b>Low price</b> is important.</res>
<res label="r2c2">Own <b>simple and traditional equipment</b>, such as grass trimmers and walk behind mowers.</res>
<res label="r2c3">Moderate enjoyment of yard work. Concerned about yard appearance so fit in yard work when possible.</res>
<res label="r3c1">Want an <b>easy to use</b> product that is <b>fairly cheap</b>. <b>Preference for gas</b> power over electric.</res>
<res label="r3c2">Will do reactive versus proactive yard work – <b>don’t have a routine</b>.</res>
<res label="r3c3"><b>Very low enjoyment</b> from yard work. <b>Hard to get motivated</b> to do yard work. I am <b>not really concerned</b> about my yard’s appearance</res>
<res label="r4c1">Prefer <b>easy to use</b> and <b>lightweight</b> products. <br /><br /><b>Prefer electric</b> products over gas products.</res>
<res label="r4c2"><b>Often use non-powered hand tools</b> while doing yard work. <br /><br />Don’t own many powered outdoor devices.</res>
<res label="r4c3">Moderately enjoy doing yard work but really enjoy gardening. <b>Willing to hire a pro</b> to help with more labor-intensive yard work task.</res>
<res label="r5c1">Needs from a device depend on what is being purchased; want <b>heavy duty power, innovation, premium brands.</b></res>
<res label="r5c2"><b>Will hire a pro to help with yard work if necessary.</b> Yard work requires effort but <b>proud of the end result.</b></res>
<res label="r5c3"><b>Enjoy yard work</b> and <b>easily motivated</b> to do it. <b>Willing to spend more</b> to get a better quality product.</res>

<exec when="init">
def getOrder(qid):
   a = []
   for qidR in qid.rows.order:
       a.append(str(qidR.index+1))

   return a
</exec>

<radio
  label="Q17"
  shuffle="rows">
  <title>Below are 5 different audiences. Each audience is different in terms of its needs, behaviors and attitudes toward using outdoor equipment.  Which of following audiences would you say you identify with the most?</title>
  <comment>Select one</comment>
  <exec>
print getOrder(Q17)
  </exec>

  <row label="r1" ss:rowClassNames="row1" value="1">1</row>
  <row label="r2" ss:rowClassNames="row2" value="2">2</row>
  <row label="r3" ss:rowClassNames="row3" value="3">3</row>
  <row label="r4" ss:rowClassNames="row4" value="4">4</row>
  <row label="r5" ss:rowClassNames="row5" value="5">5</row>
  <style name="question.after"><![CDATA[
<table class='tbl'>
      <tr><th>${res.hd1}</td><th>${res.hd2}</td><th>${res.hd3}</td><th>${res.hd4}</th></tr>
      <tr><td class='button${getOrder(Q17)[0]}'></td><td>${res["r%sc1" % getOrder(Q17)[0]]}</td><td>${res["r%sc2" % getOrder(Q17)[0]]}</td><td>${res["r%sc3" % getOrder(Q17)[0]]}</th></tr>
      <tr><td class='button${getOrder(Q17)[1]}'></td><td>${res["r%sc1" % getOrder(Q17)[1]]}</td><td>${res["r%sc2" % getOrder(Q17)[1]]}</td><td>${res["r%sc3" % getOrder(Q17)[1]]}</th></tr>
      <tr><td class='button${getOrder(Q17)[2]}'></td><td>${res["r%sc1" % getOrder(Q17)[2]]}</td><td>${res["r%sc2" % getOrder(Q17)[2]]}</td><td>${res["r%sc3" % getOrder(Q17)[2]]}</th></tr>
      <tr><td class='button${getOrder(Q17)[3]}'></td><td>${res["r%sc1" % getOrder(Q17)[3]]}</td><td>${res["r%sc2" % getOrder(Q17)[3]]}</td><td>${res["r%sc3" % getOrder(Q17)[3]]}</th></tr>
      <tr><td class='button${getOrder(Q17)[4]}'></td><td>${res["r%sc1" % getOrder(Q17)[4]]}</td><td>${res["r%sc2" % getOrder(Q17)[4]]}</td><td>${res["r%sc3" % getOrder(Q17)[4]]}</th></tr>
</table>

<style>
th {text-align: center}
.cell-sub-column {display: block !important; text-align: center;}
.answers {display: none;}
.tbl {width: 100%; max-width: 960px; border: 1px solid black;}
.tbl tr, .tbl tr td, .tbl tr th {border: 1px solid black; padding: 10px; line-height: 13px;}
</style>

<script>
$ (document).ready(function () {
   $ ("td.button1").append($ (".row1 span.cell-sub-wrapper span.cell-input"));
   $ ("td.button2").append($ (".row2 span.cell-sub-wrapper span.cell-input"));
   $ ("td.button3").append($ (".row3 span.cell-sub-wrapper span.cell-input"));
   $ ("td.button4").append($ (".row4 span.cell-sub-wrapper span.cell-input"));
   $ ("td.button5").append($ (".row5 span.cell-sub-wrapper span.cell-input"));
});
</script>
]]></style>
</radio>

<suspend/>




++SPEEDER TERM TEXT CHANGE (for list=0)
Add this in list=0 sample source
<exit cond="terminated and (hasMarker('speederAutoCheck') or hasMarker('speederAuto'))">XXXXXXXXXXXXXXX</exit>



++CHECK SAMPLE SOURCE (in edit XML)
list == '1'
list=='1'
list in ['1','3']



++IF PROJECT VIEW/EDIT XML IS NOT SET TO DRAFT
  change state="live"
  to: state="testing"




++LEAST FILL; EMPTY INSTEAD OF ZERO
<checkbox
  label="Q1"
  atleast="1">
  <title>Select some options</title>
  <row label="r1">A</row>
  <row label="r2">B</row>
  <row label="r3">C</row>
  <row label="r4">D</row>
  <row label="r5">E</row>
  <row label="r6" exclusive="1">None</row>
</checkbox>

<suspend/>

<quota cond="not Q1.r6" overquota="noqual" sheet="Concept"/>

<exec>
print p.markers
for x in dConcept.rows:
  if hasMarker("/Concept/c%s" % x.text):
    x.val = 1
  else:
    x.disabled = True
</exec>

<checkbox
  label="dConcept"
  where="execute,survey,report">
  <title>Picked elements</title>
  <row label="r1">A</row>
  <row label="r2">B</row>
  <row label="r3">C</row>
  <row label="r4">D</row>
  <row label="r5">E</row>
</checkbox>

<suspend/>



++QUOTA PRIORITIZE PRIORITIZATION PRIORITY
the higher the number the higher the heirarchy

# cells:2 = Brands Pick
q24brand1	inf
q24brand2	inf:2
q24brand3	inf
q24brand4	inf:1
NOTE: q24brand2 will be prioritized




++MOBILE DEVICE DUMMOBILE
<radio
  label="dummobile"
  optional="1"
  translateable="0"
  where="execute,survey,report">
  <title>DUMMY - IS DEVICE USED MOBILE</title>
<exec>
d = gv.request.device
if d.isMobileDevice() or d.isSmartphone() or d.isTablet() or d.isIpad():
	dummobile.val = dummobile.r1.index
else:
	dummobile.val = dummobile.r2.index
</exec>
  <row label="r1" value="1">mobile</row>
  <row label="r2" value="2">non-mobile</row>
</radio>

<suspend/>



++SCRIPT FOR MOBILE DEVICE ONLY
<style name="question.after" cond="d.isMobileDevice() or d.isSmartphone() or d.isTablet() or d.isIpad()"><![CDATA[
	<script>

    $ ("tr:even").css("background-color", "black");

  </script>
]]></style>







++ROTATE GRID WITH GROUP
ROTATE 3-4, THEN 5-8, THEN 9-13
newOrder = []
for rq3_q13a in Q3_Q13DUM1.rows.order:
    newOrder.append(rq3_q13a.index)
for rq3_q13b in Q3_Q13DUM2.rows.order:
    newOrder.append(int(rq3_q13b.index)+2)
for rq3_q13c in Q3_Q13DUM3.rows.order:
    newOrder.append(int(rq3_q13c.index)+6)

print newOrder
Q3_Q13.rows.order = newOrder




++RANDOMIZE BLOCK ORDER
++BLOCK ORDER
<radio
  label="dQ3Q4Q5_flow"
  optional="1"
  rowShuffle="rotate"
  shuffle="rows"
  translateable="0"
  where="execute,survey,report">
  <title>DUMMY - FOR PROGRAMMING PURPOSES ONLY - DO NOT INCLUDE IN THE DATA - Q3 Q4 Q5 FLOW</title>
  <row label="r1" value="1">Q3</row>
  <row label="r2" value="2">Q4</row>
  <row label="r3" value="3">Q5</row>
</radio>

<suspend/>

<exec>
dQ3Q4Q5_arr = []
ord_flow = dQ3Q4Q5_flow.rows.order
for xrow in ord_flow:
    if dQ3Q4Q5_flow[xrow].displayed:
        dQ3Q4Q5_arr.append(xrow.text)
    else:
        pass

dQ3Q4Q5_Order.r1.val = "\n".join(dQ3Q4Q5_arr)
Q3Q4Q5_block.order = dQ3Q4Q5_flow.rows.order
</exec>

<suspend/>

<textarea
  label="dQ3Q4Q5_Order"
  size="40"
  where="execute,survey,report">
  <title>DUMMY - Q3 Q4 Q5 ORDER</title>
  <row label="r1"/>
</textarea>

<suspend/>

<block label="Q3Q4Q5_block" cond="1" randomizeChildren="1">

  <note>INSERT QUESTIONS INSIDE BLOCK EACH; 1 QUESTION PER BLOCK</note>

  <block label="Q3Q4Q5x1_block" cond="1" randomize="1">

    <QUESTION />

    <suspend/>
  </block>

</block>




++VIDEO PLAYER
//change video_id

<text
  label="dvid"
  size="40"
  uses="videoplayer.1"
  optional="1"
  videoplayer:account_id="2280166212001"
  videoplayer:player_id="SybkoGSJb"
  videoplayer:video_id="6049669921001">
  <title>Please click the Play button to start the video.</title>
</text>

<suspend/>


ADDITIONAL OPTIONS:
  videoplayer:allow_fullscreen="1"
  videoplayer:autostart="1"
  videoplayer:autosubmit="1"
  videoplayer:disable_continue="0"
  videoplayer:enable_continue_after="50%"
  videoplayer:hide_poster="1"
  videoplayer:hide_volume="1"
  videoplayer:pause_enable="1"
  videoplayer:player_id="SybkoGSJb"
  videoplayer:replay_enable="1"
  videoplayer:watermark="WATER"



++FULL SCREEN VIDEO PLAYER
<style label="waitVid" name="question.after" with="Q215Video" wrap="ready"><![CDATA[
$ (".vjs-big-play-button").show()
var continueButton = $ ("#btn_continue, #question_Q215")

if ($ ('video').length > 0) {
$ (continueButton).hide();

if ($ ('div.question').hasClass('hasError')) {
$ (continueButton).show().removeAttr('disabled');
}

$ ('video').on('ended', function (e) {
console.log('show')
$ (continueButton).show().removeAttr('disabled');
});

$ ('.vjs-big-play-button').click(function(e) {
e.preventDefault();
$ ('.vjs-play-control').click();
$ ('.vjs-fullscreen-control').click();
});
}
]]></style>





++CHECK OTHER SPECIFY IF ANSWERED:
Qnum.r9.open.len()>0



++AUTOSUM PERCENTAGE TOTAL 100%
 autosum:disabled="1" #disable autosum

<number
  label="Q39"
  size="3"
  optional="0"
  ss:postText=""
  ss:preText=""
  verify="range(0,100)"
  uses="autosum.5"
  amount="100"
  autosum:prefill="0"
  autosum:preText=""
  autosum:postText="%"
  >
  <title>Of your total time spent with media in a typical day, what percentage is spent with each type of media listed below? Please make sure your total equals 100%.</title>
  <comment>Please enter a whole number</comment>
  <row label="r1">Broadcast TV (e.g.: Seven, Nine, Ten, SBS, ABC)</row>
  <row label="r2">Satellite/Pay TV (e.g.: Foxtel)</row>
  <row label="r3">Broadcast Video On Demand (e.g.: 9Now, 7plus, tenplay, SBS On Demand, ABC iView)</row>
  <row label="r4">Subscription Video On Demand (e.g.: Netflix, Stan, Amazon Prime, YouTube Red)</row>
  <row label="r5">AM/FM radio</row>
  <row label="r6">Streaming radio (e.g.: Spotify, Podcasts)</row>
  <row label="r7">Print (newspaper or magazine)</row>
  <row label="r8">Online video (e.g.: YouTube)</row>
  <row label="r9">Digital (e.g., non-video sites, news sites, blogs, email, shopping, non-gaming sites/apps)</row>
  <row label="r10">Social media (e.g., Facebook, Instagram, LinkedIn)</row>
  <row label="r11">Gaming (e.g., mobile, computer, tablet, console games, eSports, eGaming, etc.)</row>
<style name="question.after" wrap="ready"><![CDATA[
$ (':text').attr('maxlength','3');
$ (':text').attr('size','3');
]]></style>
</number>

<suspend/>



++FORCE GRID DISPLAY FOR BIG GRIDS
++FORCE GRID DISPLAY DESKTOP STYLE
  ss:listDisplay="1"
  surveyDisplay="desktop"



++GRID WITH OPTIONAL OTH TEXT
<radio
  label="Q8"
  shuffle="rows">
  <title>If you could choose any resources to receive from the DPA, what would they be?</title>
  <comment>Select one for each resource</comment>
<exec>
Q8.r27.val = Q8.c2.index # initialize oth to "No"
</exec>
  <col label="c1" value="1">Yes</col>
  <col label="c2" value="2">No</col>
  <row label="r1">DPA Trade Portal</row>
  <row label="r2">DPA newsletter</row>
  <row label="r3">DPA website</row>
  <row label="r4">"Real is a Diamond" website</row>
  <row label="r5">"Real is a Diamond" social media platform</row>
  <row label="r6">Total Clarity</row>
  <row label="r7">DPA Diamond Terminology Guideline</row>
  <row label="r8">DPA Social media platforms (Twitter, Facebook, Instagram, LinkedIn)</row>
  <row label="r9">DPA Project Assure</row>
  <row label="r10">DPA Ambassador program</row>
  <row label="r11">DPA Education</row>
  <row label="r12">DPA E-learnings</row>
  <row label="r13">DPA Webinars</row>
  <row label="r14">DPA In-store Trainings</row>
  <row label="r15">Customizable marketing materials (shop.diamondproducers.com)</row>
  <row label="r16">Print ads</row>
  <row label="r17">Press releases</row>
  <row label="r18">Pocket sized takeaways</row>
  <row label="r19">Duratrans</row>
  <row label="r20">Counter cards</row>
  <row label="r21">Digital Banners</row>
  <row label="r22">Mobile app(s)</row>
  <row label="r23">Brochures</row>
  <row label="r24">Newsletters</row>
  <row label="r25">Direct print mailers</row>
  <row label="r26">Direct e-mail</row>
  <row label="r27" open="1" openSize="25" randomize="0" openOptional="1" ss:rowClassNames="q8r27oth">Other</row>
</radio>
<style name="question.after" wrap="ready"><![CDATA[
$ ("td[headers='Q8_c1'].q8r27oth span").hide();
$ ("td[headers='Q8_c2'].q8r27oth span").hide();
]]></style>
<suspend/>

<exec>
if Q8.r27.open != "":
    Q8.r27.val = Q8.c1.index # backfill oth to "Yes" if answered
</exec>



++ETA TEMPLATE
Hi --

Just finished the initial script review. Kindly see forecasted ETA below:
	• Pre-programming: 1 hr
	• Programming: 2-4 hrs
	• Testing (not QA): 1-2 hrs
	• Reports: 1 hr

Since it is already near the end of my shift. I will endorse this to the support people - they can work on this if ever they have availability.
If everything goes well, targeted date for the QA approved test links will be on Monday - will let you know in case we encounter something unexpected.
Also, let me know if you want to receive the test links in parallel to QA.

Kindly see below for my clarifications found during script review:



• Pre-programming (script review, WT, etc.)  : 1 hour
• Programming  : 9-10  hours
• Testing(unit testing, code review, not QA)  : 2-3 hours
• Reports :1 hour
• Other Tasks : 1-2 hours
• Test links : 2 working days





++CLOSING END MESSAGE
<checkbox
  label="Q11"
  ss:questionClassNames="sq-timertest"
  timertest:showCounter="0"
  timertest:timerLimit="2"
  uses="timertest.3"
  where="survey,report,notdp">
  <title>Those are all the questions we have for you today.  Thank you for your time!</title>
</checkbox>



++QUESTIONS RESPONSES SHOW AS TABLE GRID :: NO MOBILE FRIENDLY
++ANSWER CHOICES BESIDE ROWS
++GRID STYLE
  uses="separator.5"



++TIMER PER PAGE
AT START OF THE QUESTION PAGE (before previous question suspend):
<exec> p.startTime = timeSpent() </exec>

...QUESTION CODE HERE...

<suspend/>

<float
  label="Q#_Timer"
  where="execute,survey,report">
  <title>Q# - DCM Timer (Minutes)</title>
  <exec>
Q#_Timer.val = (timeSpent() - p.startTime) / 60.0
  </exec>

</float>

<suspend/>




++PRIVACY POLICY
https://www.dynata.com/privacy-policy/




++AUDIO PLAYER
<checkbox
  label="RECQ27"
  audio:enable_pause="1"
  audio:enable_replay="1"
  audio:must_listen="1"
  audio:enable_autoplay="1"
  audio:file="https://survey-d.dynata.com/survey/selfserve/53b/19051345/test.mp3"
  sst="0"
  uses="audio.3"
  where="survey,notdp">
  <title>New Audio Player Question</title>
  <comment>Please press play to listen to the audio.</comment>
</checkbox>

<suspend/>




++SHOWHIDEQ SHOW HIDE NEXT QUESTION RADIO
ADD IN TRIGGER QUESTION:
<style label="showhideQ" name="question.after"><![CDATA[
<script>
   $ ( document ).ready(function() {
     $ (':text').attr('maxlength',2);
     $ (':text').bind('keyup paste', function(){
       this.value = this.value.replace(/[^0-9]/g, '');
     });

   if( $ ('input[type=radio]:checked').val()!="0" ){
       $ ('div.question:last').hide();
   }

   $ ('.cell-sub-column').change(function () {
     if( $ ('input[type=radio]:checked').val()=="0" ){
           $ ('div.question:last').show();
     }else{
       $ ('div.question:last').find('.fir-icon').each(function () {
              if ($ (this).hasClass('selected')) {
                $ (this).removeClass('selected');
                $ (this).parent().children('input[type="checkbox"]').prop('checked', false);
                $ (this).parents('td').next().find('input[type="text"]').hide();
              }
          });
       $ ('div.question:last').find('input[type="text"]').val('');
       $ ('div.question:last').hide();
     }
   });
   });
   </script>
]]></style>







++TRIGGER SHOW SECOND QUESTION
<style label="hide2nd" name="question.after" wrap="ready"><![CDATA[
$ ("h1").removeAttr("title")
$ ("h2").removeAttr("title")
$ ("input").removeAttr("title")
  hide2ndQ();
  $ ('.clickable').click(function(){ //console.log("clicked");
    console.log($ ('.showScndQ').length)
    hide2ndQ();
  });
  $ ('.fir-icon').click(() => console.log($ ('.fir-icon').parents('div')))
  function hide2ndQ(){
    if($ ('.showScndQ').length > 0){ //console.log("in");
      setTimeout(() => {
        if($ ('.showScndQ').find('input[type="checkbox"]').prop("checked")){
            $ ('.question:last').show();

        }else{
          //$ ('.question:last').find('textarea').val('');
          $ ('.question:last').find('input').each( function() {
              if($ (this).hasClass('text-input')){
                $ (this).val('')
              } else{
                $ (this).prop("checked",false).next().removeClass('selected')
              }

          })
          $ ('.question:last').hide();
        }
      }, 500);

    }
  }
]]></style>


<checkbox
 label="CH_2b_[loopvar: label]"
 atleast="1">
  <title>Please select which of the following <b><u><i>non-herbal/non-botanical Dietary</i></u> Supplements</b> you take for this wellness goal: <br /><br />[loopvar: ch2]</title>
  <comment>Select all that apply</comment>
  <row label="r1">Co-Enzyme Q10</row>
  <row label="r2">Combination Non-Herbal/Traditional Dietary Supplements (multi-ingredient dietary supplements, combination of multivitamins with probiotics, or fish oils)</row>
  <row label="r3">Eye Health Supplements</row>
  <row label="r4">Fish Oils/Omega Fatty Acids</row>
  <row label="r5">Glucosamine</row>
  <row label="r6">Minerals</row>
  <row label="r7">Calcium Supplements</row>
  <row label="r8">Mineral Supplements</row>
  <row label="r9">Probiotic Supplements</row>
  <row label="r10">Protein Supplements</row>
  <row label="r11">Weight Loss Supplements</row>
  <row label="r12" randomize="0" ss:rowClassNames="showScndQ">Other Non-Herbal/Traditional Dietary Supplements</row>
</checkbox>

<checkbox
 label="CH_2bOther_[loopvar: label]"
 optional="1">
  <title>Other Non-Herbal/Traditional Dietary Supplements</title>
  <comment>Select all that apply</comment>
  <validate>
if CH_2b_[loopvar: label].r12 and not CH_2bOther_[loopvar: label].any:
  error(res.provide)
  </validate>
  <row label="r1">Alpha Lipoic Acid</row>
  <row label="r2">Amino Acid</row>
  <row label="r3">Chitosan</row>
  <row label="r4">Chromium</row>
  <row label="r5">Collagen</row>
  <row label="r6">DHEA</row>
  <row label="r7">E-Jiao</row>
  <row label="r8">Glucose Powder</row>
  <row label="r9">Glutathione</row>
  <row label="r10">L-Carnitine</row>
  <row label="r11">Lecithin</row>
  <row label="r12">Lysine</row>
  <row label="r13">Melatonin</row>
  <row label="r14">NADH</row>
  <row label="r15">Royal Jelly</row>
  <row label="r16">Shark Cartilage</row>
  <row label="r17">Silica</row>
  <row label="r18">and Yeast</row>
  <row label="r19">something else</row>
</checkbox>

<suspend/>





++TRIGGER IF YES: SIMPLE
++HIDE NEXT QUESTION: SIMPLE
<res label="P6error">Please select an answer.</res>

add in row to be selected
 ss:rowClassNames="showifselected"

<block label="P5_P6_block" cond="S5.r4">
  <radio
   label="P5">
    <title>We would love to hear more about what your child is most interested in! <br /><br />
Is your child who is between the ages of 10-12 currently available to answer a couple questions on the new activities offered on cruise ships?</title>
    <comment>Select one</comment>
    <row label="r1" value="1">Yes</row>
    <row label="r2" value="2">No</row>
  </radio>

  <radio
   label="P6"
   optional="1">
    <title>Would you be willing to hand over the survey to let them pick their favorite topics?</title>
    <comment>Select one</comment>
    <validate>
if P5.r1:
	#enable for single:
	if P6.val == None:
	#enable for multi:
	#if P6.count == 0:
		for eachRow in P6:
			error(res.P6error, row=eachRow)
    </validate>

    <row label="r1" value="1">Yes</row>
    <row label="r2" value="2">No</row>
    <style name="question.after" wrap="ready"><![CDATA[
qP6 = $ ('#question_P6')
qP6.hide();

$ ('.cell-sub-wrapper').on('change',function(){
	cbox = $ ('.showifselected').find('span input:radio').is(':checked');
	if (cbox){
		qP6.show();
	}
	else{
		qP6.hide();
	}
});

$ ('.cell-sub-wrapper').each(function(){
	cbox = $ ('.showifselected').find('span input:radio').is(':checked');
	if (cbox){
		qP6.show();
	}
	else{
		qP6.hide();
	}
});
]]></style>
  </radio>

  <suspend/>
</block>















++SHOW ONLY NUMPAD KEYS
<style name="el.text"><![CDATA[
@if row.styles.ss.preText or this.styles.ss.preText
${row.styles.ss.preText or this.styles.ss.preText or ""}
@endif
<input type="text" pattern="[0-9]*" inputmode="numeric" name="$(name)" id="$(id)" value="$(value)" size="$(size)" class="input text-input" $(extra)/>
@if row.styles.ss.postText or this.styles.ss.postText
 ${row.styles.ss.postText or this.styles.ss.postText or ""}
@endif
]]></style>




++END PAGE REDIRECT TO NEXUS IN 2 SECONDS
<checkbox
  label="endPage"
  where="notdp"
  ss:questionClassNames="sq-timertest"
  timertest:showCounter="0"
  timertest:timerLimit="2"
  uses="timertest.3">
  <title><b>Thank you for participating!</b></title>
</checkbox>





++22118 LONGWOODS CAPTURE DDR2 DDR3; LONGWOODS STANDARD
add in list==2
    <var name="DDR2"/>
    <var name="DDR3"/>



<block label="DDR_new_BLOCK" cond="list=='2'" sst="0">
  <exec>
hDDR2.val = DDR2.replace(" ", "+")
hDDR3.val = DDR3.replace(" ", "+")
  </exec>

  <textarea
   label="hDDR2"
   translateable="0"
   where="execute,survey,report">
    <title>HIDDEN - DDR2 CAPTURED FROM LINK</title>
  </textarea>

  <textarea
   label="hDDR3"
   translateable="0"
   where="execute,survey,report">
    <title>HIDDEN - DDR3 CAPTURED FROM LINK</title>
  </textarea>

  <suspend/>

  <term cond="list=='2' and len(hDDR2.val)==0" sst="0">hDDR2 is empty</term>

  <exec>
if len(hDDR2.val) ge 1:
    setMarker('notEmptyDDR')
else:
    setMarker('emptyDDR')
  </exec>

  <term cond="hasMarker('emptyDDR')">Term if: Empty DDR2 variables</term>

  <exec cond="len(hDDR2.val) == 38">
#print vDDR2.r1.val

ddr2_val = hDDR2.val

dDDR2_new_breakdowns.DDR2_FORMAT.val = ddr2_val[0]
dDDR2_new_breakdowns.DDR2_CNTRY.val = ddr2_val[1:4]
dDDR2_new_breakdowns.DDR2_HHINCOME.val = ddr2_val[4:7]
dDDR2_new_breakdowns.DDR2_MSTAT.val = ddr2_val[7]
dDDR2_new_breakdowns.DDR2_EMP.val = ddr2_val[8]
dDDR2_new_breakdowns.DDR2_ED.val = ddr2_val[9:11]
dDDR2_new_breakdowns.DDR2_OCC.val = ddr2_val[11]

dDDR2_new_breakdowns.DDR2_ETHNCTY.val = ddr2_val[13]
dDDR2_new_breakdowns.DDR2_BIRTH.val = ddr2_val[14:18]
dDDR2_new_breakdowns.DDR2_GENDER.val = ddr2_val[18]
dDDR2_new_breakdowns.DDR2_MEM2Y.val = ddr2_val[19:21]
dDDR2_new_breakdowns.DDR2_MEM2G.val = ddr2_val[21]
dDDR2_new_breakdowns.DDR2_MEM3Y.val = ddr2_val[22:24]
dDDR2_new_breakdowns.DDR2_MEM3G.val = ddr2_val[24]
dDDR2_new_breakdowns.DDR2_MEM4Y.val = ddr2_val[25:27]
dDDR2_new_breakdowns.DDR2_MEM4G.val = ddr2_val[27]
dDDR2_new_breakdowns.DDR2_MEM5Y.val = ddr2_val[28:30]
dDDR2_new_breakdowns.DDR2_MEM5G.val = ddr2_val[30]
dDDR2_new_breakdowns.DDR2_MEM6Y.val = ddr2_val[31:33]
dDDR2_new_breakdowns.DDR2_MEM6G.val = ddr2_val[33]
dDDR2_new_breakdowns.DDR2_CHECKSUM.val = ddr2_val[34:38]
  </exec>

  <text
   label="dDDR2_new_breakdowns"
   translateable="0"
   where="execute,survey,report">
    <title>DDR2 data breakdowns</title>
    <row label="DDR2_FORMAT">Format version number</row>
    <row label="DDR2_CNTRY">Country</row>
    <row label="DDR2_HHINCOME">Household Income</row>
    <row label="DDR2_MSTAT">Panelist Marital Status</row>
    <row label="DDR2_EMP">Panelist Employment</row>
    <row label="DDR2_ED">Panelist Education</row>
    <row label="DDR2_OCC">Panelist Occupation</row>
    <row label="DDR2_ETHNCTY">Panelist Ethnicity</row>
    <row label="DDR2_BIRTH">Panelist - Year of Birth</row>
    <row label="DDR2_GENDER">Panelist Gender</row>
    <row label="DDR2_MEM2Y">Household Member 2 - Year of Birth</row>
    <row label="DDR2_MEM2G">Household Member 2 - Gender</row>
    <row label="DDR2_MEM3Y">Household Member 3 - Year of Birth</row>
    <row label="DDR2_MEM3G">Household Member 3 - Gender</row>
    <row label="DDR2_MEM4Y">Household Member 4 - Year of Birth</row>
    <row label="DDR2_MEM4G">Household Member 4 - Gender</row>
    <row label="DDR2_MEM5Y">Household Member 5 - Year of Birth</row>
    <row label="DDR2_MEM5G">Household Member 5 - Gender</row>
    <row label="DDR2_MEM6Y">Household Member 6 - Year of Birth</row>
    <row label="DDR2_MEM6G">Household Member 6 - Gender</row>
    <row label="DDR2_CHECKSUM">Checksum</row>
  </text>

  <suspend/>

  <exec cond="len(hDDR3.val) == 25">
#print vDDR2.r1.val

ddr3_val = hDDR3.val

dDDR3_breakdowns.DDR3_FORMAT.val = ddr3_val[0]
dDDR3_breakdowns.DDR3_CNTY.val = ddr3_val[1:6]
dDDR3_breakdowns.DDR3_MSA.val = ddr3_val[6:11]
dDDR3_breakdowns.DDR3_DMA.val = ddr3_val[11:14]
dDDR3_breakdowns.DDR3_ZIP.val = ddr3_val[14:19]
dDDR3_breakdowns.DDR3_CENREG.val = ddr3_val[19]
dDDR3_breakdowns.DDR3_CENDIV.val = ddr3_val[20]
dDDR3_breakdowns.DDR3_CHECKSUM.val = ddr3_val[21:25]
  </exec>

  <text
   label="dDDR3_breakdowns"
   translateable="0"
   where="execute,survey,report">
    <title>DDR3 data breakdowns</title>
    <row label="DDR3_FORMAT">Format version number</row>
    <row label="DDR3_CNTY">County</row>
    <row label="DDR3_MSA">MSA</row>
    <row label="DDR3_DMA">DMA</row>
    <row label="DDR3_ZIP">ZIP Code</row>
    <row label="DDR3_CENREG">Census Region</row>
    <row label="DDR3_CENDIV">Census Division</row>
    <row label="DDR3_CHECKSUM">Checksum</row>
  </text>

  <suspend/>
</block>








++CHANGE LANGUAGE IN THE MIDDLE OF SURVEY
<radio label="Q0" optional="0">
  <title>Please choose your language preference:</title>
  <row label="r1">English</row>
  <row label="r2">Francias</row>
  <row label="r3">Deutsch</row>
  <row label="r4">???</row>
</radio>
<suspend/>

<exec>
if Q0.r2:
  setLanguage('french')
elif Q0.r3:
  setLanguage('german')
elif Q0.r4:
  setLanguage('japanese')
</exec>




++GRID WITH LEFT AND RIGHT TEXT LEGEND
<res label="Q16right1" >I prefer to have less change and more stability in my life</res>
<res label="Q16right2" >I love things that are trendy, of the moment, and unconventional</res>
<res label="Q16right3" >I tend to be the more pragmatic, realistic person in my peer group</res>
<res label="Q16right4" >I consider myself more of a numbers and process person</res>
<res label="Q16right5" >I tend to interpret things literally</res>
<res label="Q16right6" >To me, most issues aren't black and white, but shades of gray</res>
<res label="Q16right7" >I prefer my days to be unplanned and spontaneous</res>
<res label="Q16right8" >Order/organization isn't overly important to me</res>
<res label="Q16right9" >I find flexibility to be the key to success</res>
<res label="Q16right10">I go with the flow and am not always on time</res>
<res label="Q16right11">I'm more reserved</res>
<res label="Q16right12">I prefer one-on-one interactions</res>
<res label="Q16right13">My communication is usually more friendly, tactful</res>
<res label="Q16right14">I'm completely comfortable keeping to myself</res>
<res label="Q16right15">I need to look ahead at the future &quot;big picture&quot;</res>
<res label="Q16right16">I'm happy just to participate/be involved</res>
<res label="Q16right17">I prefer working alone</res>
<res label="Q16right18">I prefer to be more empathetic, compassionate</res>
<res label="Q16right19">I tend to be more logical, less emotionally reactive</res>
<res label="Q16right20">It takes a lot to rattle me</res>
<res label="Q16right21">When I shop, I go with a prepared list to follow and don't stray from it</res>
<res label="Q16right22">I prefer to go with the flow</res>

<radio
  label="Q16"
  type="rating">
  <title>For the following sets of statements, please select the one that applies to you the <b>most</b>.</title>
  <comment>Select one in each row</comment>
  <col label="c1" value="1"/>
  <col label="c2" value="2"/>
  <row label="r1"  legend="both" rightLegend="${res.Q16right1}" >I like having change and new things in my life</row>
  <row label="r2"  legend="both" rightLegend="${res.Q16right2}" >I love things that are classic, timeless, conventional</row>
  <row label="r3"  legend="both" rightLegend="${res.Q16right3}" >I play the curious, imaginative role among my friends</row>
  <row label="r4"  legend="both" rightLegend="${res.Q16right4}" >I consider myself a creative person</row>
  <row label="r5"  legend="both" rightLegend="${res.Q16right5}" >I tend to look for meaning in things or have superstitions</row>
  <row label="r6"  legend="both" rightLegend="${res.Q16right6}" >To me, most issues are black and white</row>
  <row label="r7"  legend="both" rightLegend="${res.Q16right7}" >I prefer to keep to a schedule most days</row>
  <row label="r8"  legend="both" rightLegend="${res.Q16right8}" >I prefer things organized</row>
  <row label="r9"  legend="both" rightLegend="${res.Q16right9}" >I find structure to be the key to success</row>
  <row label="r10" legend="both" rightLegend="${res.Q16right10}">It is important to be on time for all of my commitments</row>
  <row label="r11" legend="both" rightLegend="${res.Q16right11}">I'm outgoing</row>
  <row label="r12" legend="both" rightLegend="${res.Q16right12}">I prefer socializing in groups</row>
  <row label="r13" legend="both" rightLegend="${res.Q16right13}">My communication is usually more straightforward, frank</row>
  <row label="r14" legend="both" rightLegend="${res.Q16right14}">I must be able to express myself</row>
  <row label="r15" legend="both" rightLegend="${res.Q16right15}">I can really only focus on what's going on today</row>
  <row label="r16" legend="both" rightLegend="${res.Q16right16}">I'm a competitive person</row>
  <row label="r17" legend="both" rightLegend="${res.Q16right17}">I like to collaborate with others</row>
  <row label="r18" legend="both" rightLegend="${res.Q16right18}">I'm comfortable giving criticism</row>
  <row label="r19" legend="both" rightLegend="${res.Q16right19}">I tend to be an emotional, sensitive type</row>
  <row label="r20" legend="both" rightLegend="${res.Q16right20}">I'm easily stressed</row>
  <row label="r21" legend="both" rightLegend="${res.Q16right21}">When I shop, I tend to be impulsive</row>
  <row label="r22" legend="both" rightLegend="${res.Q16right22}">I like to challenge convention</row>
</radio>


++GRID WITH OTHER SPECIFY (RML6)
https://survey-d.dynata.com/survey/selfserve/53b/19021138?list=2&pid=123&psid=123&start-at=jRCT001#?



++EMPTY TITLE
<title>&amp;nbsp;</title>

<style name="question.after">
<![CDATA[
	<script>

$ ('.question-text').hide()

  </script>
]]>
</style>





++MULTI TEXT LIST DUP CHECK DUPLICATE CHECK
++TEXT DUPLICATE
++TEXT ANSWER IN ORDER
<res label="oeOrder_Error">Please answer in order.</res>
<res label="oeDuplicate_Error">Please do not input duplicates.</res>
<exec when="init">
def dupOrderCheck(Qn):
    dupCheck = []
    for eachRow in Qn.rows:
        if len(eachRow.val) gt  0:
            dupCheck.append(eachRow.val)
        if eachRow.label != "r1":
            if len(eachRow.val) gt  0 and len(Qn[int(eachRow.index)-1].val) lt 1:
                error(res["oeOrder_Error"])
    if len(dupCheck)!=len(', '.join(set(dupCheck)).split(",")):
        error(res["oeDuplicate_Error"])
</exec>

++HOW TO USE
  <validate>
dupOrderCheck(A6)
  </validate>




++MX TOOLKIT
https://confluence.surveysampling.com/display/RT/Mx+Tools+-+Dynata
https://survey-d.dynata.com/apps/portal#/projects/detail/selfserve/53b/19021138



++RANKING WITH 2 OR MORE ROWS
++ranksort.4 WITH TWO COLUMNS FOR RANK BOX

<select
  label="Q1002"
  minRanks="8"
  optional="1"
  ranksort:bucketCSS="height:115px"
  ranksort:cardCSS="height:115px"
  ranksort:mobile_cardCSS="height:80px"
  ranksort:showBucketText="1"
  unique="rows,cols"
  uses="ranksort.4">
  <title>Please rank the following employee spend categories by how important they are to optimize. The category that is most important to optimize should be first followed by the second most important category etc. The category that is least important to optimize should be last.</title>
  <choice label="ch1" value="1">1</choice>
  <choice label="ch2" value="2">2</choice>
  <choice label="ch3" value="3">3</choice>
  <choice label="ch4" value="4">4</choice>
  <choice label="ch5" value="5">5</choice>
  <choice label="ch6" value="6">6</choice>
  <choice label="ch7" value="7">7</choice>
  <choice label="ch8" value="8">8</choice>
  <row label="r1">T&amp;E</row>
  <row label="r2">Sales T&amp;E</row>
  <row label="r3">eCatalog Purchases</row>
  <row label="r4">Indirect spend (i.e. goods and services not directly incorporated into a product e.g. computers, office supplies, janitorial services, equipment, furniture)</row>
  <row label="r5">Direct spend (i.e. goods and services directly incorporated into a product e.g. raw materials, subcontracted manufacturing services, components, hardware)</row>
  <row label="r6">Contingent Labor</row>
  <row label="r7">Marketing Services</row>
  <row label="r8">Consulting Services</row>
  <style name="question.after"><![CDATA[
<style>
.sq-ranksort-numbers{
 display: none;
}
.sq-ranksort-buckets.ui-sortable{
  display: flex;
  margin-left: 20px !important;
  flex-direction: column;
  flex-wrap: wrap;
  height: 570px;
  width: 380px !important;
}
</style>
]]></style>
</select>

<suspend/>



++NUMERIC 2 DIGITS
<style name="question.after"><![CDATA[
<script>
        $ ('input').attr('maxlength','2')
        $ ('input').attr('size','3');
    </script>
]]></style>





++FORCE NUMERIC INPUTS
<style label="maxLengthScript" arg:MaxLen="4" name="question.after" wrap="ready"><![CDATA[
$ (':text').attr('maxlength',$(MaxLen));
  $ (':text').bind('keyup paste', function(){
    this.value = this.value.replace(/[^0-9]/g, '');
  });
]]></style>








++D&B D & B
we’re good to have the external survey redirect to our D&B survey
 and then redirect them back to the external survey
  and send the appropriate results back
These are the templates:
  •	Confirmit: p5335501
  •	Decipher: 53b/1907238 (survey-d)


Please see below for the list of clarifications/pending items:
  •	Please provide a list of variables that we need to capture on our end from the Client survey link.
  •	Also, where should we redirect the respondents after they have completed the D&B wrapper? Should we redirect them directly to Nexus? Or do we need to redirect them back to the Client Survey? Please confirm.
  •	If we need to redirect them back to the client survey, then the client will need to provide a redirect link for the respondents to re-enter their survey.
  •	Please also provide the list of variables or information that we need to pass from D&B wrapper.


Once all are set on our end, we will provide to you/client the entry link for this D&B wrapper so they can set this up on their end as well.




++ROWs to COLCOND
++ROWCOND TO COLCOND COLUMNS
<checkbox
  label="Q81"
  colCond="dQ81brands.rows[col.index]"
  shuffle="rows,cols">



++UNIQUE LINKS
++OPEN LINKS
CHECK if SAMPLE NEEDS TO DISABLE QUALITY SCORE
CHECK if SAMPLE NEEDS TO DISABLE IP CHECKER <samplesource list="#" disableBrowserDupes="1">

  <samplesource list="3">
    <title>Client List</title>
    <invalid>You are missing information in the URL. Please verify the URL with the original invite.</invalid>
    <completed>It seems you have already entered this survey.</completed>
    <var filename="sample_0_cid.txt" name="cid" unique="1"/>
    <exit cond="terminated">Thank you for taking our survey.</exit>
    <exit cond="qualified">Thank you for taking our survey. Your efforts are greatly appreciated!</exit>
    <exit cond="overquota">Thank you for taking our survey.</exit>
  </samplesource>

	if Client provides a unique links file:
		replace "sample_0_cid.txt" with their specific file
	if not:
		go to google, search for unique code generator with 5 digits
		append the codes in the live link
		send to the client

	replace also the [name="cid"] with the specific variable for the client id


C:\j.a.y\E2E\Decipher\[V7]Unique Links and Email Invites in Decipher.docx
C:\j.a.y\E2E\Decipher\Unique Links Setup.docx




++CAST STRING AS INT STRING TO INT
print "dumPIN.ival: ", dumPIN.ival
print "dumPIN.ival ge 300000 and dumPIN.ival le 899999: ", dumPIN.ival ge 300000 and dumPIN.ival le 899999
print "dumPIN.ival ge 300000: ", dumPIN.ival ge 300000
print "dumPIN.ival lt 900000: ", dumPIN.ival lt 900000

dumPIN needs to be number rather than text
	or cast as int
	int(dumPIN.ival)



++FORCEORDER FORCE ORDER * use me *
++FORCEORDER FORCE ORDER * use me *
++FORCEORDER FORCE ORDER * use me *
++FORCEORDER FORCE ORDER * use me *
++FORCEORDER FORCE ORDER * use me *
++FORCEORDER FORCE ORDER * use me *

<style name="question.after"><![CDATA[
<script>
    $ (document).ready(function(){
      $ (':input.text-input').first().focus();
      $ (':input.text-input').not(':focus').css('background-color','#e2e2d9').prop('disabled',true);


    $ (':input.text-input').on('keyup',function(){
      var next = $ (this).closest('div').next().find(':input.text-input');
      var nextAll = $ (this).closest('div').nextAll().find(':input.text-input');
      if(($ (this).val()).trim() == ""){
        nextAll.css('background-color','#e2e2d9').prop('disabled',true);
      }else{
        next.css('background-color','white').prop('disabled',false);
      }
      $ (':input.text-input').each(function(){
              var next = $ (this).closest('div').next().find(':input.text-input');
              if($ (this).val().trim() == "" && next.val().trim() != ""){
                  $ (this).val(next.val().trim());
                  next.val("");
                  next.css('background-color','white').prop('disabled',false);
              }
      });
    });
    $ (':input.text-input').each(function(){
              var next = $ (this).closest('div').next().find(':input.text-input');
              if($ (this).val().trim() != ""){
                  next.css('background-color','white').prop('disabled',false);
              }
    });

    var DNcheck = $ ('input[type="checkbox"]');
    var iconCheck = $ ('input[type="checkbox"]').find('span.fir-icon');


      DNcheck.change(function(){
        if($ (this).is(':checked')){
          $ (':input.text-input').css('background-color','#e2e2d9');
        }else{
            setTimeout(function () {
             $ (':input.text-input').first().focus().css('background-color','white');
             $ (':input.text-input').not(':focus').css('background-color','#e2e2d9').prop('disabled',true);
          },100);
        }
      });
      $ ('input:submit').on('click', function(){
        $ (':input.text-input').each(function(){
              $ (this).prop('disabled', false);
      });
      });


    });
  </script>
]]></style>



++FORCEORDER WEST STYLE

<style arg:label="${this.label}" name="question.after"><![CDATA[
<script>

  $ (document).ready(function(){
  $ (':text').removeAttr("maxlength");
  //Hide all textbox without text inside
  $ ('#question_$(label)').find('.text-input').each(function(){
    var prev = $ (this).closest('div').prev().find(':input.text-input');

    if($ (this).val() == "" && prev.val() == ""){
      $ (this).hide();
    }
  });


  //Hide or show next textbox based on the current textbox
  $ ('#question_$(label)').find('.text-input').on('keyup',function(){
    var next = $ (this).closest('div').next().find(':input.text-input');

    $ ('#question_$(label)').find('.text-input').each(function(){
      var next = $ (this).closest('div').next().find(':input.text-input');

      if($ (this).val() == "" && next.val() != ""){
          $ (this).val(next.val());
          next.val("");
      }
      if($ (this).val() == "" && next.val() == ""){
          $ (this).val(next.val());
          next.hide();
      }

    });

    if ($ (this).val() != ""){
      next.show();
    }

  });

  $ ('#question_$(label)').find('.cell-sub-wrapper').on('click',function(){
    //Hide all textbox without text inside
    $ ('#question_$(label)').find('.text-input').each(function(){
      var prev = $ (this).closest('div').prev().find(':input.text-input');

      if($ (this).val() == "" && prev.val() == ""){
        $ (this).hide();
      }
    });
  });

  });
</script>
]]></style>







++MULTIPLE COLUMNS MULTI COL MULTICOL
   uses="multicol.7"
   multicol:count="4"
   ss:legendColWidth="195px"


   uses="multicol.7"
   multicol:count="2"
  ss:legendColWidth="390px"



++SAME WITH MULTIPLE COLUMNS
<style label="Q8styles" name="question.after"><![CDATA[
  <style type="text/css">
    .grid.grid-table-mode { display: block; }
    .cell.nonempty.multi-col-parent-cell.desktop { width: 50%; }
    .grid.grid-table-mode.grid-multi-col .colCount-1 .element, .clearColWidths .grid.grid-table-mode .colCount-1 .element { width: 31px; }
  </style>
]]></style>




++DISABLE SELECT DROPDOWN (WITH PRE-ASSIGNED VALUES):
<col label="c1" ss:colClassNames="BRANDc1"><strong>Brand</strong></col>
<col label="c3" ss:colClassNames="PURCHASEYEARc1"><strong>Purchase Year</strong></col>

<style cond="1" name="question.after"><![CDATA[
<style>
    .question-text {max-width: 1351px;}
  </style>

  <script>
  $ ('select option').css("font-family","Arial,sans-serif");

  $ (document).ready(function(){
    //set initial value to Brand row 1
    $ (".BRANDc1 select").eq(0).prop("disabled", false);
    $ (".BRANDc1 select").eq(0).val("${dBrand.selected.index}");
    $ (".BRANDc1 select").eq(0).prop("disabled", true);

  	// set initial value to Purchase Year row 1
    $ (".PURCHASEYEARc1 select").eq(0).prop("disabled", false);
    $ (".PURCHASEYEARc1 select").eq(0).val("${Q10Year.r1.val}");
    $ (".PURCHASEYEARc1 select").eq(0).prop("disabled", true);


    $ ('input#btn_continue.button.continue').on('click', function(){
    $ ('input, select').prop('disabled', false);
    });
});
  </script>
]]></style>




++UNIQUE LINKS
C:\j.a.y\E2E\Decipher\Unique Links Setup.docx

 - Create a new sample source for [Client sample] with [id] variable
 		!!! MAKE SURE TO MAKE IT UNIQUE !!!
 - Go to Site: https://www.random.org/strings/
    • Generate: [how many test ids you want]
    • checkbox: unique id style
    • Do you want each string to be unique? Yes
    • Click [Get Strings]
 - Copy and paste the generated strings
 - Append TESTids at the beginning of the file: test1, test2, test3,...
 - Save file as .txt
 - Backup the current survey XML
 - Upload the .txt file
    • Option 1:
       - Open Survey Editor
       - Sample Sources > Client List (sample source implemented to be Unique links)
       - in URL Variables:
          • Var Name: variable captured from link
          • Required: Unique
          • Authentication: File
          • Click Upload File > .txt
       - Go to Edit XML
       - open WinMerge and check if old code matches the new one (aside from the added <var>)
       - change them accordingly
    • Option 2:
       - Go to: Build > More Tools > Upload System Files
       - Upload File > .txt
       - add this in the sample source implemented to be Unique links
          <var filename="uploaded.txt" name="uniqid" unique="1">
          • Filename: .txt generated from randomizer
          • Var Name: variable name - captured from link
          • Unique: Always "1"
 - Add the Var Name to this code:
    autosaveKey="rnid,psid,uniqid"
 - Append all generated unique ids to the live link and send to PM/Client
    https://survey-d.dynata.com/survey/selfserve/53b/xxxxxxx?list=3&uniqid=$uniqid

    https://survey-d.dynata.com/survey/selfserve/53b/xxxxxxx?list=3&uniqid=test1
    https://survey-d.dynata.com/survey/selfserve/53b/xxxxxxx?list=3&uniqid=test2
    https://survey-d.dynata.com/survey/selfserve/53b/xxxxxxx?list=3&uniqid=JI2a9
    https://survey-d.dynata.com/survey/selfserve/53b/xxxxxxx?list=3&uniqid=sd8FF
 - Go to Overview > Shared Documents > + Add Shared Documents
 - Upload file with the sent unique links with appended uniqid










++GRIDSET
<exec when="init">
#GRIDSET
#Use with below format:
#qid = Q1
#rowset = ['r1','r2']
#colset = ['c1','c2']
#this returns ['r1'] if Q1.r1.c1 or Q1.r1.c2 is True

def gridSet(qid,rowset,colset):
  finalset = []
  for x in qid.rows:
    if x.label in rowset:
      for y in colset:
        if x.attr('%s' % y):
           finalset.append(x.label)
  return finalset
</exec>



++CleanQ()
Single: dqCompetitivequal.val = ""
Checkbox: TBD



++LOOP CHECKBOX IF SELECTED
for eachRow in Q17.rows:
  if eachRow:

++FOR SINGLE NO NEED LOOP
Q17.selected.row =



++SELECT DROPDOWN: RANDOMIZE CHOICES
 shuffle="choices"


++SELECT DROPDOWN CSS TO ARIAL

<style name="question.after" wrap="ready"><![CDATA[
$ (".input").css('font-family','Arial')
$ (".dropdown").css('font-family','Arial')
]]></style>



++LOOP LOOPING CHECKING EACH VARIABLE INSIDE THE LOOP OUTSIDE THE LOOP
++LOOP LOGIC PIPE
++DYNAMIC QUESTIONS LOGIC
p.sphone = 0

for x in range(11):
  if x > 0:
    if allQuestions["Q5f_%s" %(x)].r1 or allQuestions["Q5f_%s" %(x)].r2 or allQuestions["Q5f_%s" %(x)].r3 or allQuestions["Q5f_%s" %(x)].r4:
      p.sphone = 1
      break



++GRID LEGEND COLUMN LEGEND SHOW AGAIN
   colLegendRows="9,17" #where to show again the column legends




++DISABLE / HIDE SHOW CONTINUE BUTTON AFTER X SECONDS NEXT BUTTON 10 SECONDS
<style label="disable_continue" with="Q1" arg:timeout="10" mode="after" wrap="ready" name="respview.client.js"><![CDATA[
  var $submitButton = $ ("#btn_continue, #btn_finish");
  $submitButton.hide();

  setTimeout( function() {
    $submitButton.show();
  }, $(timeout) * 1000);
]]></style>


++ANOTHER STYLE (10 seconds):
$ ("#btn_continue").hide();
$ ('#btn_continue').delay(10000).show(0);


++DISABLE / HIDE SHOW CONTINUE BUTTON AFTER VIDEO IS FINISHED
<note>---------------------------HIDE BUTTON SHOW AFTER VIDEO ENDED seconds START ---------------------------------</note>
<style name="question.after" with="Q8avideo_TOC_1,Q8avideo_TOC_2,Q8avideo_TOC_4,Q8avideo_US_1,Q8avideo_US_2,Q8avideo_US_4,Q8avideo_MQ_2,Q8avideo_MQ_3,Q8avideo_MQ_4" wrap="ready"><![CDATA[
var continueButton = $ ("#btn_continue")
if ($ ('video').length > 0) {
  $ (continueButton).hide();

  if ($ ('div.question').hasClass('hasError')) {
         $ (continueButton).show().removeAttr('disabled');
  }

  $ ('video').on('ended', function (e) {
         console.log('show')
         $ (continueButton).show().removeAttr('disabled');

  });
  }
]]></style>
<note>---------------------------HIDE BUTTON SHOW AFTER VIDEO ENDED seconds END---------------------------------</note>

++FANCYBOX JULES:
++FANCYBOX JULES:
++FANCYBOX JULES:
<comment>Please click on the image to enlarge it.</comment>

<style name="question.after"><![CDATA[
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css">
<script src="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js"></script>
]]></style>

<div style="text-align:center"><a href='img.png' data-fancybox=""><img src='img.png' /></a></div>
<div style="text-align:center"><a href='[rel img.png]' data-fancybox=""><img src='[rel img.png]' style='width:55%'/></a></div>



++FANCYBOX
<radio
 label="Q3x1">
  <title>Do you expect or not expect that you would be able to book a room at "Vendange Carmel Inn &amp; Suites" if you clicked on the Expedia.com or Hotels.com ads?</title>
  <comment><div style="text-align: left; font-size: larger;">
    Please select one.  You can view the web page again by clicking <a data-fancybox="" href="[rel FORMxQ3.png]" class="lightbox2"><span><i> <b>here.</b></i></span></a>
    </div>
  </comment>
    <row label="r1" value="1">Yes, I would expect to be able to book a room</row>
    <row label="r2" value="2">No, I would not expect to be able to book a room</row>
    <row label="r3" value="3">Not sure</row>
  <style label="fancybox3" name="question.after"><![CDATA[
    <link rel='stylesheet' href='//d2n88fe5uqdqty.cloudfront.net/ssiCebu/fso/tools/fancybox3/v3a/jquery.fancybox.min.css'>
    <script src='//d2n88fe5uqdqty.cloudfront.net/ssiCebu/fso/tools/fancybox3/v3a/jquery.fancybox.min.js'></script>
  ]]></style>
</radio>
<suspend/>

SUCCEEDING QUESTIONS:
<a data-fancybox="concept1" href="[rel Concept_1_-_Page_2.png]"><u>here</u></a>

        <style copy="fancybox3"/>



++FANCYBOX OPTION 2
<radio
  label="P34">
  <title>¿Qué tan de acuerdo estarías en reemplazar el diseño de Studio Look original con esta nueva propuesta?<br />
  <br />
  &lt;center&gt;
  <table>
    <tr style="text-align:center; font-weight:bold">
      <td>ACTUAL</td>
      <td>PROPUESTA</td>
    </tr>
    <tr style="text-align:center;">
    <td><a data-fancybox="gallery" href="[rel 2_SL_Actual_Branded.jpg]"><img src="[rel 2_SL_Actual_Branded.jpg]" width="300" height="100" /></a></td>
    <td><a data-fancybox="gallery" href="[rel 1_SL_Propuesta_Branded.jpg]"><img src="[rel 1_SL_Propuesta_Branded.jpg]" width="300" height="100" /></a></td>
    </tr>
  </table>
    &lt;/center&gt;
  </title>
  <col label="c1" value="1"><b>Totalmente en desacuerdo</b></col>
  <col label="c2" value="2"><b>En desacuerdo</b></col>
  <col label="c3" value="3"><b>Ni de acuerdo ni en desacuerdo</b></col>
  <col label="c4" value="4"><b>De acuerdo</b></col>
  <col label="c5" value="5"><b>Totalmente de acuerdo</b></col>
</radio>

<suspend/>







++VALIDATE ALL CELLS; ALLOW 0 - 100 and "DK" (not case sensitive)
<text
  label="Q27"
  optional="0"
   rowCond="Q14[row]"
   shuffle="rows"
   shuffleBy="Q14"
   size="3"
   ss:listDisplay="0"
   ss:postText="%">
    <title>In your experience, what <b>level of discount off list price</b> does your company typically receive?</title>
    <comment><i>Enter the <b>% off list price</b> below. If you are not sure of the discount from a particular vendor, enter <b>don't know</b> "DK".</i></comment>

    <col label="c1"><b>% Discount</b> <br />(from list price)</col>

  <row label="r1">Microsoft Azure</row>
  <row label="r2">AWS</row>
  <row label="r3">Google Cloud Platform (GCP)</row>
  <row label="r4">Oracle</row>
  <row label="r5">IBM</row>
  <row label="r6">VMware</row>
  <row label="r7">Citrix</row>
  <row label="r8">Rackspace</row>
  <row label="r9">Salesforce</row>
  <row label="r10">SAP</row>
  <row label="r98" randomize="0">${Q14.r98.open}</row>
    <style name="question.after" wrap="ready"><![CDATA[
$ (':text').attr('maxlength','3');
$ (':text').attr('size','3');
]]></style>

<validateCell>
if not(data.isdigit()) and data.lower() != 'dk':
  error(res.Q27Error1)
if data.isdigit() and (int(data) lt 0 or int(data) gt 100):
  error(res.Q27Error2)
</validateCell>

</text>

<suspend/>





++RML6 DRAG AND DROP TEXT:
reference: 1909322 Q5g2

  <radio
   label="Q5g2">
    <title>Regarding the activities you are looking forward to during your 2020 international travel, please drag and drop them based on how you generally plan to approach them. By ‘plan ahead’ we mean, something you will schedule, make a reservation, and/or pay for ahead of time.</title>
    <comment>Select one</comment>
    <col label="c1" value="1">Plan ahead</col>
    <col label="c2" value="2">Plan while at destination</col>
    <col label="c3" value="3">Mix of both</col>
    <row label="r1" cond="Q5f2.r1.any">Sightseeing Tours (e.g. Statue of Liberty, a city bus tour)</row>
    <row label="r2" cond="Q5f2.r2.any">Personal sightseeing (e.g. landmarks, points of interest)</row>
    <row label="r3" cond="Q5f2.r3.any">Food and/or Beverage Tours (e.g. Wineries, best BBQ in Texas)</row>
    <row label="r4" cond="Q5f2.r4.any">Food festival</row>
    <row label="r5" cond="Q5f2.r5.any">Music festival</row>
    <row label="r6" cond="Q5f2.r6.any">Sporting events</row>
    <row label="r7" cond="Q5f2.r7.any">Going to a museum</row>
    <row label="r8" cond="Q5f2.r8.any">Theatre (i.e. musicals, plays, ballets)</row>
    <row label="r9" cond="Q5f2.r9.any">Visiting theme parks/amusement parks</row>
    <row label="r10" cond="Q5f2.r10.any">Adventure (e.g. Safari)</row>
    <row label="r11" cond="Q5f2.r11.any">High adrenaline activities (e.g. parasailing, bungee jumping, four wheeling)</row>
    <row label="r12" cond="Q5f2.r12.any">Outdoor/Nature activities (e.g. hiking, camping, canoeing)</row>
    <row label="r13" cond="Q5f2.r13.any">Exercise (e.g. running on the beach, using hotel gym, yoga, biking)</row>
    <row label="r14" cond="Q5f2.r14.any">Sports (e.g. golf, tennis, skiing)</row>
    <row label="r15" cond="Q5f2.r15.any">Board games</row>
    <row label="r16" cond="Q5f2.r16.any">Cooking, preparing meals together</row>
    <row label="r17" cond="Q5f2.r17.any">Dining out</row>
    <row label="r18" cond="Q5f2.r18.any">Picnics</row>
    <row label="r19" cond="Q5f2.r19.any">Quiet time (e.g. meditation, reading)</row>
    <row label="r20" cond="Q5f2.r20.any">Relaxing by the pool/ocean or enjoying a view</row>
    <row label="r21" cond="Q5f2.r21.any">${Q5f2.r21.open}</row>
    <style name="page.head"><![CDATA[
<script type="text/javascript">
        window.RML6ErrorReport = function (e,toolName,toolVersion, notShowMsg) {
            var url = '${RML6ErrorReportUrl()}&qid=${this.label}&tn='+(typeof toolName == "undefined"?'':toolName) +
                '&tv=' + (typeof toolVersion == 'undefined'?'':toolVersion) +
                '&jquery=' + (typeof jQuery) +
                '&jqueryrml6=' + (typeof jQueryRML6) +
                '&msg=' + encodeURIComponent(e.message);
            var xhttp = new XMLHttpRequest();
            xhttp.open("GET", url, true);
            xhttp.send();
            if(!notShowMsg){  alert('${RML6ErrorMessageForUsers()}'); }
            if (typeof window.console !== "undefined" && typeof window.console.log !== "undefined")
            {
              console.log(e.message);
              console.log(url);
            }
        };
        window.onerror = function(msg, url, line, col, error) {
           var err = new Error("Error: " + msg + "; Script: " + url + "; Line: " + line + "; Column: " + col +"; StackTrace: " + error);
           RML6ErrorReport(err, 'CardSort','6.0', true);
           return true;
        };
</script>
    <link href='//fonts.googleapis.com/css?family=Open+Sans:400,600,700,400italic' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="//rsn-rml-prod.s3.amazonaws.com/rml6/common/bootstrap/v3.3.6/css/bootstrap.rml.css?v=${getTimeStamp()}" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="//rsn-rml-prod.s3.amazonaws.com/rml6/common/survey_question_decipher/v6.09/default.css?v=${getTimeStamp()}">
    <link rel="stylesheet" type="text/css" href="//rsn-rml-prod.s3.amazonaws.com/rml6/common/core_framework/v6.07/default.css?v=${getTimeStamp()}">

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script type="text/javascript" src="//oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js?v=${getTimeStamp()}"></script>
      <script type="text/javascript" src="//oss.maxcdn.com/respond/1.4.2/respond.min.js?v=${getTimeStamp()}"></script>
    <![endif]-->

    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script type="text/javascript" crossorigin="anonymous" src="//rsn-rml-prod.s3.amazonaws.com/rml6/common/jquery/jquery-1.11.3.min.js?v=${getTimeStamp()}"></script>
    <script type="text/javascript" crossorigin="anonymous" src="//rsn-rml-prod.s3.amazonaws.com/rml6/common/jquery/jquery-ui-1.11.4.min.js?v=${getTimeStamp()}"></script>


    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script type="text/javascript" crossorigin="anonymous" src="//rsn-rml-prod.s3.amazonaws.com/rml6/common/bootstrap/v3.3.6/js/bootstrap.js?v=${getTimeStamp()}"></script>
    <script type="text/javascript" crossorigin="anonymous" src="//rsn-rml-prod.s3.amazonaws.com/rml6/common/survey_question_decipher/v6.09/application.min.js?v=${getTimeStamp()}"></script>
    <script type="text/javascript" crossorigin="anonymous" src="//rsn-rml-prod.s3.amazonaws.com/rml6/common/bridge/v6.03/application.min.js?v=${getTimeStamp()}"></script>
    <script type="text/javascript" crossorigin="anonymous" src="//rsn-rml-prod.s3.amazonaws.com/rml6/common/core_framework/v6.07/application.min.js?v=${getTimeStamp()}"></script>
    <script type="text/javascript" crossorigin="anonymous" src="//rsn-rml-prod.s3.amazonaws.com/rml6/common/loading_spinner/modal_spinner.js?v=${getTimeStamp()}"></script>
    <script type="text/javascript">
    jQueryRML6(document).ready(function(){
      jQueryRML6.spin(true);
    });
    </script>

    <!-- TOOL SPECIFIC CODE GOES HERE -->
    <link rel="stylesheet" type="text/css" href="//rsn-rml-prod.s3.amazonaws.com/rml6/tools/cardsort/v6.06/default.css?v=${getTimeStamp()}">
<script crossorigin="anonymous" src='//surveytools.researchnow.com/rml6/get_message.php?v=${getTimeStamp()}&pc[]=nm225&pc[]=nm226&pc[]=nm227&pc[]=nm228&pc[]=nm229&pc[]=nm230&l=${decLang}&callback=window.RML6Bridge.onRMLMessagesLoaded'></script>
    <script type="text/javascript" crossorigin="anonymous" src="//rsn-rml-prod.s3.amazonaws.com/rml6/tools/cardsort/v6.06/application.min.js?v=${getTimeStamp()}"></script>

    <!-- CUSTOM CSS GOES HERE -->
    <style type="text/css">
    .rml-cardsort-container .rml-cardsort-stackzone
    {
        background-color:#f8f8f8;
    }
    .rml-cardsort-container .row-horizon > .col-lg-2 { width: 200px !important; height: 120px !important }
/* tablets/desktops and up ----------- */
\@media (min-width: 992px) {
    .survey-body
    {
        width:90%;
    }
}

    </style>
]]></style>
    <style name="question.after" wrap="ready"><![CDATA[
try{
  (function(jQuery, jQueryRML6, window, undefined) {
    var rmlOptions = {
        "toolName": "Cardsort", // =============== DOCUMENTATION ===============> https://confluence.surveysampling.com/x/HrZ7AQ
        "toolVersion": "6.0",
        "minRequired": "1",
        "maxSelected": "21",
        "countOther": false,
        "maxSelectedError": "<*nm225*>",
        "maxSelectedErrorTitle": "<*nm226*>",
        "maxDzError": "<*nm227*>",
        "maxDzErrorTitle": "<*nm228*>",
        "forceSequentialRating": false,

            "carouselArrows":true,
            "scrollSpeed":300,
            "scrollMove":200,


        /** --- modes: flat, stacked, carousel and rating --- **/
        "homeRegionType" : "carousel",
        "homeRegionClasses": "",
        "homeRegionRowClasses": "",
        "tolerance" : "intersect", // can be changed to pointer, touch, fit, intersect
        "multiDropMode": false,
        "startReachedMessage":"<*nm229*>",
        "endReachedMessage":"",

        "spreadCards":false,
        "spreadCardsDistance":"20",

        "maxFlatCardsPerRow": { "xs": 3, "sm": 4, "md": 5, "lg": 10 },
        "cardClasses": "col-xs-4 col-sm-3 col-md-2 col-lg-2 col-centered", //should have no bootstrap CSS classes if "flat" and "maxFlatCardsPerRow" is set above
        "cardColumns": "",//"col-md-4 col-lg-4",

        "dropzoneClasses": " col-xs-3 col-sm-3 col-md-2 col-lg-2",
        "dropzoneClassesRatingMode": " col-xs-4 col-sm-4 col-md-2 col-lg-2",

        "dropRegionClasses": "",
        "dropRegionRowClasses": "",

        "autoButtonOnSmallScreens" : true,
        "autoButtonMaxWidth" : "991",
        "homeRegionCardColumns": "",
        "timeDataNumDecimals": "2",
        "exclusiveClasses": "btn-group-justified",
        "exclusiveColumns": "col-md-4 col-lg-4 col-centered",
        "toolAnimateSpeed": "400",
        "orderArray": ["homeRegion", "gap", "dropRegion", "exclusives"],
        "lang":"${decLang}",
        "debug": false
    };

    jQueryRML6(function(){
      try {
        var surveyQuestionObj = new window.SurveyQuestion('${this.label}');
        var rmlObj = new window.RML6Bridge(rmlOptions, surveyQuestionObj, window.RML6Bridge.Cardsort_6_0);
        rmlObj.onRMLEvent("rml_tool_loaded", function(evt, app){
          jQueryRML6.spin(false);
          //console.log("rml_tool_loaded");
        });
        rmlObj.onRMLEvent("card_dropped", function(evt, val){
          //console.log("card_dropped");
        });
        rmlObj.onRMLEvent("exclusive_clicked", function(evt, cb){
          //console.log("exclusive_clicked");
        });
        //rmlObj.setMessages({"nm1": "Custom Message Text Here"});
        ${initRMLDataToggle()}
        rmlObj.init();
        jQueryRML6.getScript("${RML6ToolUsageUrl()}&qid=${this.label}&tn="+rmlOptions.toolName+"&tv="+rmlOptions.toolVersion);
      } catch(e) {
        RML6ErrorReport(e, rmlOptions.toolName, rmlOptions.toolVersion );
      }
    });

  })(jQuery, jQueryRML6, window, undefined);
}
catch(e){
  RML6ErrorReport(e,"CardSort","6.0");
}
]]></style>
  </radio>

  <suspend/>




++VIRTUAL REPLACE, FROM GROUPING="COLS" to NORMAL GROUPING="ROWS"

<checkbox
  label="Q153"
  atleast="1"
  grouping="cols"
  shuffle="rows"
  shuffleBy="Q151">
  <title>Of the brands/businesses that you <b>already followed</b> from which you made a purchase over the past 3 months, what type of a product did you purchase on that social networking site or app?</title>
  <comment><i>Please check all that apply.</i></comment>
  <col label="c1" cond="Q150.r1.c1">Facebook</col>
  <col label="c2" cond="Q150.r2.c1">Instagram</col>
  <col label="c3" cond="Q150.r3.c1">Pinterest</col>
  <col label="c4" cond="Q150.r4.c1">Snapchat</col>
  <row label="r1" cond="Q151.r1.any">Men’s apparel</row>
  <row label="r2" cond="Q151.r2.any">Women’s apparel</row>
  <row label="r3" cond="Q151.r3.any">Accessories/jewelry</row>
  <row label="r4" cond="Q151.r4.any">Beauty/cosmetics</row>
  <row label="r5" cond="Q151.r5.any">Personal care</row>
  <row label="r6" cond="Q151.r6.any">Men’s shoes</row>
  <row label="r7" cond="Q151.r7.any">Women’s shoes</row>
  <row label="r8" cond="Q151.r8.any">Children’s apparel/shoes</row>
  <row label="r99" exclusive="1" randomize="0">None of the above</row>
</checkbox>

<suspend/>

<checkbox
  label="vQ153"
  optional="1">
  <title>Of the brands/businesses that you <b>already followed</b> from which you made a purchase over the past 3 months, what type of a product did you purchase on that social networking site or app?</title>
  <comment><i>Please check all that apply.</i></comment>

<virtual>
for eachRow in vQ153.rows:
  for eachCol in vQ153.cols:
    vQ153.attr("%s" %(eachRow.label)).attr("%s" %(eachCol.label)).val = Q153.attr("%s" %(eachCol.label.replace("c","r"))).attr("%s" %(eachRow.label.replace("r","c"))).val
</virtual>

  <row label="r1">Facebook</row>
  <row label="r2">Instagram</row>
  <row label="r3">Pinterest</row>
  <row label="r4">Snapchat</row>

  <col label="c1">Men’s apparel</col>
  <col label="c2">Women’s apparel</col>
  <col label="c3">Accessories/jewelry</col>
  <col label="c4">Beauty/cosmetics</col>
  <col label="c5">Personal care</col>
  <col label="c6">Men’s shoes</col>
  <col label="c7">Women’s shoes</col>
  <col label="c8">Children’s apparel/shoes</col>
  <col label="c99" exclusive="1">None of the above</col>
</checkbox>

<suspend/>





++RML6 CAROUSEL WITH COUNTER

<radio
  label="qa1"
  averages="cols"
  shuffle="rows"
  type="rating">
  <title>This first section is about you, your attitudes and lifestyle. You will see a number of words or descriptors and, for each one, please indicate to what extent it describes you. There are 10 to do. Please press the &gt; button when you are ready to start</title>
  <comment>Select one in each row</comment>
  <col label="c1" alt="perfectly" value="1">Describes me perfectly</col>
  <col label="c2" alt="mostly" value="2">Describes me mostly</col>
  <col label="c3" alt="slightly" value="3">Describes me slightly</col>
  <col label="c4" alt="not at all" value="4">Describes me not at all</col>
  <row label="r1">Vegetarian</row>
  <row label="r2">Movie-lover</row>
  <row label="r3">Liberal</row>
  <row label="r4">Conservative</row>
  <row label="r5">Charitable</row>
  <row label="r6">Sociable</row>
  <row label="r7">Socially conscious</row>
  <row label="r8">Environmentally aware</row>
  <row label="r9">Optimistic</row>
  <row label="r10">Competitive</row>
  <style name="question.after"><![CDATA[
<style>.answers{visibility:hidden;}</style>
    <script type="text/javascript" src="//d2n88fe5uqdqty.cloudfront.net/ssi_js/decipher/ssi_ALLInOne_Confirmit_2.0_groups_decipher.js"></script>

    <script type="text/javascript">
    var lukanka;
    (function (lukanka) {
      if (!lukanka.qDefs)
        lukanka.qDefs = {};
        lukanka.qDefs["${this.label}"] = ${jsexport()};
      $ (document).ready(function(){
        parseJsexportData();
      });
    })(lukanka || (lukanka = {}));

    </script>

    <div class="gridclick" style="margin-bottom:50px"><img class="img-responsive loading-container" style="margin: 40px auto;" src="//d2n88fe5uqdqty.cloudfront.net/rnd/tools/images/loading.gif" /><div class="gridclick-container"></div></div>

    <link rel="stylesheet" type="text/css" href="//d2n88fe5uqdqty.cloudfront.net/rnd/tools/gridclick/gridClick_v2.9.4_d.min.css">
    <link rel="stylesheet" type="text/css" href="//d2n88fe5uqdqty.cloudfront.net/rnd/plugins/ionicons/ionicons-2.0.1/css/ionicons.min.css">
    <link rel="stylesheet" type="text/css" href="//d2n88fe5uqdqty.cloudfront.net/rnd/plugins/fancybox/3.x.x/3.1.20/jquery.fancybox.css">

    <script type="text/javascript" src="//d2n88fe5uqdqty.cloudfront.net/rnd/tools/gridclick/gridClick_v2.9.4_d.min.js"></script>
    <script type="text/javascript" src="//d2n88fe5uqdqty.cloudfront.net/rnd/plugins/fancybox/3.x.x/3.1.20/jquery.fancybox.js"></script>

    <script type="text/javascript">
      $ (function() {
        var config = {

          // =============== DOCUMENTATION ===============> https://confluence.surveysampling.com/x/hq17AQ

          sForm : getFormName(1), // form name of the grid
          sSplitter : '$', // splitter for images
          sOrientation : 'horizontal', // 'horizontal', 'vertical'
          sProgressSepText : ' / ', // separator text between item progress
          sTxtProgress : ' ${res.carousel_progress_text}', // text after progress text
          sForwardButton : '#btn_continue',  // forward button jQuery selector - used for toggling the next button
          sOeDefaultHolder: '&#xf2bf;........', // default input placeholder when OEs are present
          sHideScaleType : 'keepAlignment', // method to hide the scales - 'keepAlignment', 'newAlignment'
          sDkScaleBgColor : '#E9ECEF', // background color for the DK scale
          iMinItemsRequired : null, // minimum answered items required to toggle the next button - default is null - all required
          iAnimationTime : 400, // animation time in ms
          iMaxContainerWidth : 850, // maximum tool container width - can be used to enlarge/shrink the tool
          iVertItemContainPerc : 45, // vertical item container percentage width
          iVertItemContainMarginPerc : 5, // vertical item container percentage margin
          iFontSize : null, // font size for the tool container
          aDkScale : [], // dk codes for scale - for example: [99,999]
          aOtherNotRequired : [], // other not required item codes - for example: [99,999]
          aOtherPlaceHolder : [], // other input custom placeholder - for example [{'98': 'Please specify'}, {'998': 'Specify'}]
          aOtherOpenOptional: [], // other OE input not required - next button will be toggled without the need of OE input - scale can still be chosen - for example: [98, 998]
          aHideScaleCodes: [], // hide scales for specific codes [{98: [1,3]}, {1: [2,4]}]

          oElementConfig : { // element/item config object
            bImages : false, // images as options - using the splitter
            bShowLabel : true, // show labels for the options
            bShowOeImage : false, // if OE - should it show an image for the other option
            bZoomEnabled : false, // is zoom enabled
            sZoomImage : '//d2n88fe5uqdqty.cloudfront.net/rnd/tools/images/zoom_icon2.png', // zoom icon image path
            sZoomPosition : 'br', // position for the zoom icon - 'br', 'bl', 'tl'
            sImagePath : '', // path for the images to be used with the splitter
            sSmallImageExtension : '_S.jpg', // extension for the small image (default shown)
            sLargeImageExtension : '_L.jpg', // extension for the zoomed image
            iMaxImageWidth: 100, // maximum image width - needs to be lower than iWidth
            iMaxImageHeight: 100, // maximum image height - needs to be lower than iHeight
            iWidth : 160, // overall item container width
            iHeight : 100, // overall item container height
            iHorizontalSpacing : 15, // horizontal spacing between items
            iVerticalSpacing : 5, // vertical spacing between items
            iFontSize: 16 // font size for the item container
          },

          oScaleConfig : { // scale config object
            bImages : false, // images as options - using the splitter
            bShowLabel : true, // show labels for the options
            bZoomEnabled : false, // is zoom enabled
            sZoomImage : '//d2n88fe5uqdqty.cloudfront.net/rnd/tools/images/zoom_icon2.png', // zoom icon image path
            sZoomPosition : 'br', // position for the zoom icon - 'br', 'bl', 'tl'
            sImagePath : '', // path for the images to be used with the splitter
            sSmallImageExtension : '.png', // extension for the small image (default shown)
            sLargeImageExtension : '.png', // extension for the zoomed image
            iMaxImageWidth: 62, // maximum image width - needs to be lower than iWidth
            iMaxImageHeight: 62, // maximum image height - needs to be lower than iHeight
            iWidth : 150, // scale button width
            iHeight : 35, // scale button height
            iHorizontalSpacing : 10, // horizontal scale spacing
            iVerticalSpacing : 10, // vertical scale spacing
            iFontSize: 13 // font size for the scale container
          },

          oFancyBoxConfig : {}, // config for adding custom fancybox parameters - //fancyapps.com/fancybox/3/docs/
          bInvertItemScale : false, // invert the item/scale containers - top/bottom for horizontal, left/right for vertical
          bHeightAuto : false, // make the items/scales have auto height for horizontal view - should not be used for vertical
          bScaleNewLine: true, // make the scale in horizontal mode render vertically (one below the other) when not enough horizontal space for all scales
          bReverse : true, // reverse the direction of the items/navigation arrows
          bShowProgressText : true, // show the progress text progress
          bShowProgressIndicator :  true, // show the progress indicator
          bDisableNavigation : false, // disable navigation arrows - will only be allowed for multi or when no AutoNext item is false
          bAutoNextItem : true, // automatically go to next item when selected - working on multi only when DK scale is selected
          bAutoSubmit : false, // auto submit page when all items are answered
          bInitialNavigation : false, // initial navigation toggle
          bEnableNavAnswered : false, // Enable navigation for already answered items only. Not applicable when bDisableNavigation or bInitialNavigation is enabled.
          bMultiple : false, // is the grid multiple
          bAutoSizeScales : false, //Automatically re-render scales to fit the width. Not applicable when bScaleNewLine is enabled or when oScaleConfig.iFirstLastWidth is set.
          bIsTest : true, // will make the tool warning appear as JavaScript alerts to make sure they are handled
          onStart : function() {}, // function called before the tool starts generating
          onAnswer : function(e) {}, // function called when an answer is given (click on scale)
          onInput : function(e) {}, // function called on OE input (item)
          onCompleted : function() {}, // function called when all items are answered (unless OE not required codes are defined) before next button is toggled
          onReady : function() {
            $ ('.answers').hide();
          }, // function called after tool is fully loaded
        }
        $ ('body').gridClick(config);

      });
    </script>
]]></style>
</radio>

<suspend/>






++RML6 SINGLE CAROUSEL WITH OTHER
<radio
  label="Q25"
  cond="hPipeText.r1 or hPipeText.r2">
  <title>${hPipeText.selected.text}</title>
  <comment>Select one</comment>
  <validate>
etrap(Q25,['c7'])
  </validate>

  <row label="r1" cond="Q22.r1.c2">Hep B (Hepatitis B)</row>
  <row label="r2" cond="Q22.r2.c2">DTaP (Diphtheria, Tetanus, Pertussis)</row>
  <row label="r3" cond="Q22.r3.c2">Hib (Haemophilus influenzae type b)</row>
  <row label="r4" cond="Q22.r4.c2">Polio (inactivated Poliovirus)</row>
  <row label="r5" cond="Q22.r5.c2">PCV (Pneumococcal)</row>
  <row label="r6" cond="Q22.r6.c2">Rota (Rotavirus)</row>
  <row label="r7" cond="Q22.r7.c2">MMR (Measles, Mumps, Rubella)</row>
  <row label="r8" cond="Q22.r8.c2">Chickenpox (Varicella)</row>
  <row label="r9" cond="Q22.r9.c2">Hep A (Hepatitis A)</row>
  <row label="r10" cond="Q22.r10.c2">Influenza (Seasonal Flu)</row>
  <row label="r11" cond="Q22.r11.c2">HPV (Human Papillomavirus)</row>
  <row label="r12" cond="Q22.r12.c2">Meningococcal</row>
  <row label="r13" cond="Q22.r13.c2">Tdap (Booster for Tetanus, Diphteria, Pertussis)</row>
  <col label="c1" value="1">My doctor suggested it</col>
  <col label="c2" value="2">I read or saw information that made me worry about the vaccine’s safety</col>
  <col label="c3" value="3">Something bad happened to a friend or relatives’ child after they received this vaccine when it was recommended</col>
  <col label="c4" value="4">I read or saw something that made me think children don’t need this vaccine so soon</col>
  <col label="c5" value="5">I don’t want to give my child too many vaccines at one time</col>
  <col label="c6" value="6">My child does not need that vaccine</col>
  <col label="c7" value="7">Other (Specify)</col>
  <style name="question.after"><![CDATA[
<style>

#question_D1oe {display:none;}
.scale-button[data-code='98'] .text-content, input.confirmit-other-input.scale-other {display: inline-block;}
.prev-nav.no-move, .next-nav.no-move {display: none !important;}
.item-inner-container.no-move .item {visibility: hidden;}
.item-inner-container.no-move .item.current {visibility: visible;}
input#forwardbutton.no-move {display: none !important;}
.scale-button {max-height: 50px;}
.scale-button[data-code='6'] {max-height: none;}
</style>
    <script type="text/javascript" src="//d2n88fe5uqdqty.cloudfront.net/ssi_js/decipher/ssi_ALLInOne_Confirmit_2.0_groups_decipher.js"></script>

    <script type="text/javascript">
    var lukanka;
    (function (lukanka) {
      if (!lukanka.qDefs)
        lukanka.qDefs = {};
        lukanka.qDefs["${this.label}"] = ${jsexport()};
      $ (document).ready(function(){
        parseJsexportData();
      });
    })(lukanka || (lukanka = {}));

    </script>

    <div class="gridclick" style="margin-bottom:50px"><img class="img-responsive loading-container" style="margin: 40px auto;" src="//d2n88fe5uqdqty.cloudfront.net/rnd/tools/images/loading.gif" /><div class="gridclick-container"></div></div>

    <link rel="stylesheet" type="text/css" href="//d2n88fe5uqdqty.cloudfront.net/rnd/tools/gridclick/gridClick_v2.9.3_d.min.css">
    <link rel="stylesheet" type="text/css" href="//d2n88fe5uqdqty.cloudfront.net/rnd/plugins/ionicons/ionicons-2.0.1/css/ionicons.min.css">
    <link rel="stylesheet" type="text/css" href="//d2n88fe5uqdqty.cloudfront.net/rnd/plugins/fancybox/3.x.x/3.1.20/jquery.fancybox.css">

    <script type="text/javascript" src="//d2n88fe5uqdqty.cloudfront.net/rnd/tools/gridclick/gridClick_v2.9.3_d.min.js"></script>
    <script type="text/javascript" src="//d2n88fe5uqdqty.cloudfront.net/rnd/plugins/fancybox/3.x.x/3.1.20/jquery.fancybox.js"></script>

      <script type="text/javascript">
      $ (function() {

var other=7;

        var config = {
          sForm : getFormName(1), // form name of the grid
          sSplitter : '$', // splitter for images
          sOrientation : 'horizontal', // 'horizontal', 'vertical'
          sProgressSepText : ' / ', // separator text between item progress
          sTxtProgress : '', // text after progress text
          sForwardButton : '#btn_continue',  // forward button jQuery selector - used for toggling the next button
          sHideScaleType : 'keepAlignment', // method to hide the scales - 'keepAlignment', 'newAlignment'
          sDkScaleBgColor : '#E9ECEF', // background color for the DK scale
          iMinAnswersPerItem : 1, // minumum answers per item required to make the item "answered" - default is 1
          iMaxAnswersPerItem: null, // maximum allowed answers per item - default is null
          iMinItemsRequired : null, // minimum answered items required to toggle the next button - default is null - all required
          iAnimationTime : 400, // animation time in ms
          iMaxContainerWidth : 700, // maximum tool container width - can be used to enlarge/shrink the tool
          iVertItemContainPerc : 45, // vertical item container percentage width
          iVertItemContainMarginPerc : 5, // vertical item container percentage margin
          iFontSize : null, // font size for the tool in px
          aDkScale : [], // dk codes for scale - for example: [99,999]
          aHideScaleCodes: [], // [{98:[1,3]},{1:[2,4]}] (hides scales with codes 1 and 3 from Answer code 98 and scales with codes 2 and 4 from Answers code 1

          oElementConfig : { // element/item config object
            bImages : false, // images as options - using the splitter
            bShowLabel : true, // show labels for the options
            bShowOeImage : false, // if OE - should it show an image for the other option
            bZoomEnabled : true, // is zoom enabled
            sZoomImage : '//d2n88fe5uqdqty.cloudfront.net/rnd/tools/images/zoom_icon2.png', // zoom icon image path
            sZoomPosition : 'br', // position for the zoom icon - 'br', 'bl', 'tl'
            sImagePath : null, // path for the images to be used with the splitter
            sSmallImageExtension : '_S.jpg', // extension for the small image (default shown)
            sLargeImageExtension : '_L.jpg', // extension for the zoomed image
            iMaxImageWidth: 100, // maximum image width - needs to be lower than iWidth
            iMaxImageHeight: 100, // maximum image height - needs to be lower than iHeight
            iWidth : 130, // overall item container width
            iHeight : 100, // overall item container height
            iHorizontalSpacing : 15, // horizontal spacing between items
            iVerticalSpacing : 125, // vertical spacing between items
            iFontSize: null // font size for the item container
          },

          oScaleConfig : { // scale config object
            bImages : false, // images as options - using the splitter
            bShowLabel : true, // show labels for the options
            bZoomEnabled : false, // is zoom enabled
            sZoomImage : '//d2n88fe5uqdqty.cloudfront.net/rnd/tools/images/zoom_icon2.png', // zoom icon image path
            sZoomPosition : 'br', // position for the zoom icon - 'br', 'bl', 'tl'
            sImagePath : '', // path for the images to be used with the splitter
            sSmallImageExtension : '.png', // extension for the small image (default shown)
            sLargeImageExtension : '.png', // extension for the zoomed image
            iMaxImageWidth: 62, // maximum image width - needs to be lower than iWidth
            iMaxImageHeight: 62, // maximum image height - needs to be lower than iHeight
            iWidth : 350, // scale button width
            iHeight : 35, // scale button height
            iHorizontalSpacing : 5, // horizontal scale spacing
            iVerticalSpacing : 10, // vertical scale spacing
            iFontSize: null // font size for the scale container
          },

          oFancyBoxConfig : {}, // config for adding custom fancybox parameters - //fancyapps.com/fancybox/3/docs/
          bInvertItemScale : false, // invert the item/scale containers - top/bottom for horizontal, left/right for vertical
          bHeightAuto : false, // make the items/scales have auto height for horizontal view - should not be used for vertical
          bScaleNewLine: false, // make the scale in horizontal mode render vertically (one below the other) when not enough horizontal space for all scales
          bReverse : true, // reverse the direction of the items/navigation arrows
          bShowProgressText : false, // show the progress text progress
          bShowProgressIndicator :  true, // show the progress indicator
          bDisableNavigation : false, // disable navigation arrows - will only be allowed for multi or when no AutoNext item is false
          bAutoNextItem : false, // automatically go to next item when selected - working on multi only when DK scale is selected
          bDisableBlinkNav: false, // disables the blink navigation assistance for multi
          bInitialNavigation : false, // initial navigation toggle
          bEnableNavAnswered : false, // Enable navigation for already answered items only. Not applicable when bDisableNavigation or bInitialNavigation is enabled
          bMultiple : false, // is the grid multiple
          bAutoSizeScales : false, //Automatically re-render scales to fit the width. Not applicable when bScaleNewLine is enabled or when oScaleConfig.iFirstLastWidth is set.
          bIsTest : true, // if set to true the tool warnings will appear as alerts
          onStart : function() {}, // function called before the tool starts generating
          onAnswer : function(e) {
  setTimeout(function(){
            if($ (".scale-button.selected").attr("data-code")!=other)
            {
                //$ (".scale-button .scale-other,#"+getFormName(2)+"_"+$ (".item.current").attr("data-code")).val("");
                //if($ (".scale-button.selected").size()>0) /*$ (".next-nav .nav-container").click();*/
            } else {
             $ (".scale-button .scale-other").focus();
            }

            if ($ (".scale-button[data-code='"+other+"']").hasClass("selected")) {

            } else {
                var code = $ ('.item.current').eq(0).attr('data-code');
                $ (".scale-button .scale-other").val('');
                assignValueToText(getFormName(2), code, '');
            }
        },100);

          }, // function called when an answer is given (click on scale)
          onInput : function(e) {}, // function called on OE input (item)
          onCompleted : function() {}, // function called when all items are answered (unless OE not required codes are defined) before next button is toggled
          onReady : function() {
            $ ('.answers').hide();

              //Update other specify value when navigation arrows are clicked
              $ ('.prev-nav, .next-nav').on('click',function(){
                  setTimeout(function(){
                    var code = $ ('.item.current').eq(0).attr('data-code');
                    //console.log(getListItemValue('open',getFormName(2),code));
                    $ (".scale-button .scale-other").val(getListItemValue('open',getFormName(2),code));
                  }, 500);
              });



setTimeout(function(){
                $ (".scale-button .scale-other").val($ ("#"+getFormName(2)+"."+$ (".item.current").attr("data-code")).val());
            },550);

    //add other
    var flgParent = true;
        var oth=$ ("<input type='text' class='confirmit-other-input scale-other'  placeholder='?........' autocomplete='off'/>");
        oth.on('keyup blur', function(e) {
            assignValueToText(getFormName(2), $ (".item.current").attr("data-code"), $ (this).val());
            if ($ (this).val()!='') {
              //$ (this).parents('.scale-button').addClass("selected");
              //assignValueToMIP(getFormName(1), $ (".item.current").attr("data-code"), other, true);
              if (!$ (this).parents('.scale-button').hasClass('selected')) {
                flgParent = false;
                $ (this).parents('.scale-button').click();
              }
            } else {
              //$ (this).parents('.scale-button').removeClass("selected");
              //assignValueToMIP(getFormName(1), $ (".item.current").attr("data-code"), other, false);
              if ($ (this).parents('.scale-button').hasClass('selected')) {
                flgParent = false;
                $ (this).parents('.scale-button').click();
              }
            }
        });
        $ (".scale-button[data-code='"+other+"'] .button-content-wrapper-cell").append(oth);
        oth.on('click', function(e) {
            e.stopPropagation();
        });


  //when items change
        $ (".item-outer-container").click(function(){
            setTimeout(function(){
                //$ (".scale-button .scale-other").val($ ("#"+getFormName(2)+"."+$ (".item.current").attr("data-code")).val());
                $ (".scale-button .scale-other").val(getListItemValue('open',getFormName(2),$ (".item.current").attr("data-code")).val());
            },550);
        });

          }, // function called after tool is fully loaded
        }
        $ ('body').gridClick(config);

      });
    </script>
]]></style>
</radio>

<text
  label="h25oe"
  cond="hPipeText.r1 or hPipeText.r2"
  size="15">
  <title>&amp;nbsp;</title>
  <row label="r1" cond="Q22.r1.c2">Hep B (Hepatitis B)</row>
  <row label="r2" cond="Q22.r2.c2">DTaP (Diphtheria, Tetanus, Pertussis)</row>
  <row label="r3" cond="Q22.r3.c2">Hib (Haemophilus influenzae type b)</row>
  <row label="r4" cond="Q22.r4.c2">Polio (inactivated Poliovirus)</row>
  <row label="r5" cond="Q22.r5.c2">PCV (Pneumococcal)</row>
  <row label="r6" cond="Q22.r6.c2">Rota (Rotavirus)</row>
  <row label="r7" cond="Q22.r7.c2">MMR (Measles, Mumps, Rubella)</row>
  <row label="r8" cond="Q22.r8.c2">Chickenpox (Varicella)</row>
  <row label="r9" cond="Q22.r9.c2">Hep A (Hepatitis A)</row>
  <row label="r10" cond="Q22.r10.c2">Influenza (Seasonal Flu)</row>
  <row label="r11" cond="Q22.r11.c2">HPV (Human Papillomavirus)</row>
  <row label="r12" cond="Q22.r12.c2">Meningococcal</row>
  <row label="r13" cond="Q22.r13.c2">Tdap (Booster for Tetanus, Diphteria, Pertussis)</row>
  <style name="question.after"><![CDATA[
<script type="text/javascript">
    var lukanka;
    (function (lukanka) {
      if (!lukanka.qDefs)
        lukanka.qDefs = {};
        lukanka.qDefs["${this.label}"] = ${jsexport()};
      $ (document).ready(function(){
        parseJsexportData();
      });
    })(lukanka || (lukanka = {}));

    </script>
]]></style>
</text>

<suspend/>






++MULTI CAROUSE WITH OE

<checkbox
  label="D1"
  atleast="1"
  fir="off"
  surveyDisplay="desktop">
  <title>Where do you purchase train tickets and plan train travel?</title>
  <row label="r1">Buy tickets</row>
  <row label="r2">Plan travel</row>
  <col label="c1">Online</col>
  <col label="c2">App</col>
  <col label="c3">Ticket office</col>
  <col label="c4">Ticket machine</col>
  <col label="c5">Ticket inspector</col>
  <col label="c6">Other (please specify)</col>
     <style name="question.after"><![CDATA[
<style>

#question_D1oe {display:none;}
.scale-button[data-code='98'] .text-content, input.confirmit-other-input.scale-other {display: inline-block;}
.prev-nav.no-move, .next-nav.no-move {display: none !important;}
.item-inner-container.no-move .item {visibility: hidden;}
.item-inner-container.no-move .item.current {visibility: visible;}
input#forwardbutton.no-move {display: none !important;}
.scale-button {max-height: 50px;}
.scale-button[data-code='6'] {max-height: none;}
</style>
    <script type="text/javascript" src="//d2n88fe5uqdqty.cloudfront.net/ssi_js/decipher/ssi_ALLInOne_Confirmit_2.0_groups_decipher.js"></script>

    <script type="text/javascript">
    var lukanka;
    (function (lukanka) {
      if (!lukanka.qDefs)
        lukanka.qDefs = {};
        lukanka.qDefs["${this.label}"] = ${jsexport()};
      $ (document).ready(function(){
        parseJsexportData();
      });
    })(lukanka || (lukanka = {}));

    </script>

    <div class="gridclick" style="margin-bottom:50px"><img class="img-responsive loading-container" style="margin: 40px auto;" src="//d2n88fe5uqdqty.cloudfront.net/rnd/tools/images/loading.gif" /><div class="gridclick-container"></div></div>

    <link rel="stylesheet" type="text/css" href="//d2n88fe5uqdqty.cloudfront.net/rnd/tools/gridclick/gridClick_v2.9.3_d.min.css">
    <link rel="stylesheet" type="text/css" href="//d2n88fe5uqdqty.cloudfront.net/rnd/plugins/ionicons/ionicons-2.0.1/css/ionicons.min.css">
    <link rel="stylesheet" type="text/css" href="//d2n88fe5uqdqty.cloudfront.net/rnd/plugins/fancybox/3.x.x/3.1.20/jquery.fancybox.css">

    <script type="text/javascript" src="//d2n88fe5uqdqty.cloudfront.net/rnd/tools/gridclick/gridClick_v2.9.3_d.min.js"></script>
    <script type="text/javascript" src="//d2n88fe5uqdqty.cloudfront.net/rnd/plugins/fancybox/3.x.x/3.1.20/jquery.fancybox.js"></script>

      <script type="text/javascript">
      $ (function() {

var other=6;

        var config = {
          sForm : getFormName(1), // form name of the grid
          sSplitter : '$', // splitter for images
          sOrientation : 'vertical', // 'horizontal', 'vertical'
          sProgressSepText : ' / ', // separator text between item progress
          sTxtProgress : '', // text after progress text
          sForwardButton : '#btn_continue',  // forward button jQuery selector - used for toggling the next button
          sHideScaleType : 'keepAlignment', // method to hide the scales - 'keepAlignment', 'newAlignment'
          sDkScaleBgColor : '#E9ECEF', // background color for the DK scale
          iMinAnswersPerItem : 1, // minumum answers per item required to make the item "answered" - default is 1
          iMaxAnswersPerItem: null, // maximum allowed answers per item - default is null
          iMinItemsRequired : null, // minimum answered items required to toggle the next button - default is null - all required
          iAnimationTime : 400, // animation time in ms
          iMaxContainerWidth : 700, // maximum tool container width - can be used to enlarge/shrink the tool
          iVertItemContainPerc : 45, // vertical item container percentage width
          iVertItemContainMarginPerc : 5, // vertical item container percentage margin
          iFontSize : null, // font size for the tool in px
          aDkScale : [], // dk codes for scale - for example: [99,999]
          aHideScaleCodes: [], // [{98:[1,3]},{1:[2,4]}] (hides scales with codes 1 and 3 from Answer code 98 and scales with codes 2 and 4 from Answers code 1

          oElementConfig : { // element/item config object
            bImages : false, // images as options - using the splitter
            bShowLabel : true, // show labels for the options
            bShowOeImage : false, // if OE - should it show an image for the other option
            bZoomEnabled : true, // is zoom enabled
            sZoomImage : '//d2n88fe5uqdqty.cloudfront.net/rnd/tools/images/zoom_icon2.png', // zoom icon image path
            sZoomPosition : 'br', // position for the zoom icon - 'br', 'bl', 'tl'
            sImagePath : null, // path for the images to be used with the splitter
            sSmallImageExtension : '_S.jpg', // extension for the small image (default shown)
            sLargeImageExtension : '_L.jpg', // extension for the zoomed image
            iMaxImageWidth: 100, // maximum image width - needs to be lower than iWidth
            iMaxImageHeight: 100, // maximum image height - needs to be lower than iHeight
            iWidth : 230, // overall item container width
            iHeight : 220, // overall item container height
            iHorizontalSpacing : 15, // horizontal spacing between items
            iVerticalSpacing : 125, // vertical spacing between items
            iFontSize: null // font size for the item container
          },

          oScaleConfig : { // scale config object
            bImages : false, // images as options - using the splitter
            bShowLabel : true, // show labels for the options
            bZoomEnabled : false, // is zoom enabled
            sZoomImage : '//d2n88fe5uqdqty.cloudfront.net/rnd/tools/images/zoom_icon2.png', // zoom icon image path
            sZoomPosition : 'br', // position for the zoom icon - 'br', 'bl', 'tl'
            sImagePath : '', // path for the images to be used with the splitter
            sSmallImageExtension : '.png', // extension for the small image (default shown)
            sLargeImageExtension : '.png', // extension for the zoomed image
            iMaxImageWidth: 62, // maximum image width - needs to be lower than iWidth
            iMaxImageHeight: 62, // maximum image height - needs to be lower than iHeight
            iWidth : 350, // scale button width
            iHeight : 35, // scale button height
            iHorizontalSpacing : 5, // horizontal scale spacing
            iVerticalSpacing : 10, // vertical scale spacing
            iFontSize: null // font size for the scale container
          },

          oFancyBoxConfig : {}, // config for adding custom fancybox parameters - //fancyapps.com/fancybox/3/docs/
          bInvertItemScale : false, // invert the item/scale containers - top/bottom for horizontal, left/right for vertical
          bHeightAuto : false, // make the items/scales have auto height for horizontal view - should not be used for vertical
          bScaleNewLine: false, // make the scale in horizontal mode render vertically (one below the other) when not enough horizontal space for all scales
          bReverse : true, // reverse the direction of the items/navigation arrows
          bShowProgressText : false, // show the progress text progress
          bShowProgressIndicator :  true, // show the progress indicator
          bDisableNavigation : false, // disable navigation arrows - will only be allowed for multi or when no AutoNext item is false
          bAutoNextItem : true, // automatically go to next item when selected - working on multi only when DK scale is selected
          bDisableBlinkNav: false, // disables the blink navigation assistance for multi
          bInitialNavigation : false, // initial navigation toggle
          bEnableNavAnswered : false, // Enable navigation for already answered items only. Not applicable when bDisableNavigation or bInitialNavigation is enabled
          bMultiple : true, // is the grid multiple
          bAutoSizeScales : false, //Automatically re-render scales to fit the width. Not applicable when bScaleNewLine is enabled or when oScaleConfig.iFirstLastWidth is set.
          bIsTest : true, // if set to true the tool warnings will appear as alerts
          onStart : function() {}, // function called before the tool starts generating
          onAnswer : function(e) {
  setTimeout(function(){
            if($ (".scale-button.selected").attr("data-code")!=other)
            {
                //$ (".scale-button .scale-other,#"+getFormName(2)+"_"+$ (".item.current").attr("data-code")).val("");
                //if($ (".scale-button.selected").size()>0) /*$ (".next-nav .nav-container").click();*/
            } else {
             $ (".scale-button .scale-other").focus();
            }

            if ($ (".scale-button[data-code='"+other+"']").hasClass("selected")) {

            } else {
                var code = $ ('.item.current').eq(0).attr('data-code');
                $ (".scale-button .scale-other").val('');
                assignValueToText(getFormName(2), code, '');
            }
        },100);

          }, // function called when an answer is given (click on scale)
          onInput : function(e) {}, // function called on OE input (item)
          onCompleted : function() {}, // function called when all items are answered (unless OE not required codes are defined) before next button is toggled
          onReady : function() {
            $ ('.answers').hide();

              //Update other specify value when navigation arrows are clicked
              $ ('.prev-nav, .next-nav').on('click',function(){
                  setTimeout(function(){
                    var code = $ ('.item.current').eq(0).attr('data-code');
                    //console.log(getListItemValue('open',getFormName(2),code));
                    $ (".scale-button .scale-other").val(getListItemValue('open',getFormName(2),code));
                  }, 500);
              });



setTimeout(function(){
                $ (".scale-button .scale-other").val($ ("#"+getFormName(2)+"."+$ (".item.current").attr("data-code")).val());
            },550);

    //add other
    var flgParent = true;
        var oth=$ ("<input type='text' class='confirmit-other-input scale-other'  placeholder='........' autocomplete='off'/>");
        oth.on('keyup blur', function(e) {
            assignValueToText(getFormName(2), $ (".item.current").attr("data-code"), $ (this).val());
            if ($ (this).val()!='') {
              //$ (this).parents('.scale-button').addClass("selected");
              //assignValueToMIP(getFormName(1), $ (".item.current").attr("data-code"), other, true);
              if (!$ (this).parents('.scale-button').hasClass('selected')) {
                flgParent = false;
                $ (this).parents('.scale-button').click();
              }
            } else {
              //$ (this).parents('.scale-button').removeClass("selected");
              //assignValueToMIP(getFormName(1), $ (".item.current").attr("data-code"), other, false);
              if ($ (this).parents('.scale-button').hasClass('selected')) {
                flgParent = false;
                $ (this).parents('.scale-button').click();
              }
            }
        });
        $ (".scale-button[data-code='"+other+"'] .button-content-wrapper-cell").append(oth);
        oth.on('click', function(e) {
            e.stopPropagation();
        });


  //when items change
        $ (".item-outer-container").click(function(){
            setTimeout(function(){
                //$ (".scale-button .scale-other").val($ ("#"+getFormName(2)+"."+$ (".item.current").attr("data-code")).val());
                $ (".scale-button .scale-other").val(getListItemValue('open',getFormName(2),$ (".item.current").attr("data-code")).val());
            },550);
        });

          }, // function called after tool is fully loaded
        }
        $ ('body').gridClick(config);

      });
    </script>
]]></style>
</checkbox>

<text
  label="D1oe"
  size="15">
  <title>Other,specify</title>
  <row label="r1"/>
  <row label="r2"/>
  <style name="question.after"><![CDATA[
<script type="text/javascript">
    var lukanka;
    (function (lukanka) {
      if (!lukanka.qDefs)
        lukanka.qDefs = {};
        lukanka.qDefs["${this.label}"] = ${jsexport()};
      $ (document).ready(function(){
        parseJsexportData();
      });
    })(lukanka || (lukanka = {}));

    </script>
]]></style>
</text>
<suspend/>







++AUTOSUBMIT USES
<checkbox
  label="OUTRO"
  ss:questionClassNames="sq-timertest"
  timertest:showCounter="0"
  timertest:timerLimit="3"
  uses="timertest.3">
  <title>So that's the end of our survey today, thank you so much for taking part. We really look forward to getting your expert opinions on another survey in the near future.</title>
</checkbox>

<suspend/>




++CUSTOM CLOSING PAGE
<res label="sys_closed"> Closing info here!</res>



++CHANGE CONTINUE TEXT
<res label="sys_continue"> > </res>



++VERIFY LENGTH AT LEAST
 verify="len(15)"
 verify="len(MIN_LENGTH, MAX_LENGTH)"





++GROUPS
<checkbox
  label="Q26"
  atleast="1">
  <title>Where would you expect this garment to be sold?</title>
  <comment><b>(Please select all that apply.)</b></comment>
  <group label="g1" builder:axis="row"><b><u>Department Stores</u></b></group>
  <group label="g2" builder:axis="row"><b><u>Discount Stores</u></b></group>
  <group label="g3" builder:axis="row" randomize="0"><br /></group>
  <group label="g4" builder:axis="row" randomize="0"><br /></group>
  <row label="r1" groups="g1">Macy's</row>
  <row label="r2" groups="g1">Kohl's</row>
  <row label="r3" groups="g1">JCPenney</row>
  <row label="r4" groups="g1">Sears</row>
  <row label="r5" groups="g1">Other department stores (Dillard's, Bealls, Nordstrom, etc.)</row>
  <row label="r6" groups="g2">Wal-Mart</row>
  <row label="r7" groups="g2">Target</row>
  <row label="r8" groups="g2">Other discount store</row>
  <row label="r9" groups="g3" ss:rowClassNames="nopad"><b>Apparel Specialty Stores</b> (Gap, Old Navy, American Eagle, etc.)</row>
  <row label="r10" groups="g3" ss:rowClassNames="nopad"><b>Sports Specialty Store</b> (Dick's Cabela's, REI, etc.)</row>
  <row label="r11" groups="g3" ss:rowClassNames="nopad"><b>Off-Price Retailers</b> (TJ Maxx, Marshalls, etc.)</row>
  <row label="r12" groups="g3" ss:rowClassNames="nopad"><b>Outlet Stores</b></row>
  <row label="r13" groups="g3" ss:rowClassNames="nopad"><b>Online</b> (Amazon.com, Target.com, Ulta.com, Sephora.com, etc.)</row>
  <row label="r14" groups="g3" ss:rowClassNames="nopad"><b>Through a Catalog</b></row>
  <row label="r15" groups="g3" ss:rowClassNames="nopad"><b>Warehouse clubs</b> (Sam's Costco, BJ's, etc.)</row>
  <row label="r16" exclusive="1" groups="g4" randomize="0" ss:rowClassNames="nopad"><b>None of these</b></row>
  <style cond="1" name="question.after"><![CDATA[
<style>
	.nopad{padding-left: 0;}
	</style>
]]></style>
</checkbox>

NOPAD IS FOR THE LEFT PADDING








++GROUP TOGETHER WITH; GROUPING RANDOMIZE WITHIN GROUP

<exec when="init">
def group_rows( question, grouped_rows ):
    first_item_index = None
    shuffle_order = [row.index for row in question.rows.order]

    for index, row in enumerate( shuffle_order ):
        if question.rows[row].label in grouped_rows:
            if first_item_index == None:
                first_item_index = index
            else:
                first_item_index += 1
                shuffle_order.insert( first_item_index, shuffle_order.pop(index) )

    question.rows.order = shuffle_order
</exec>

<exec>
group_rows(Q23a, ['r1', 'r2', 'r3', 'r4', 'r5', 'r6', 'r7', 'r8', 'r9', 'r10', 'r11', 'r12', 'r13', 'r14'])
group_rows(Q23a, ['r15', 'r16', 'r17', 'r18', 'r19', 'r20', 'r21', 'r22', 'r23', 'r24'])
</exec>

<radio
  label="Q23a"
  shuffle="rows,groups">
  <title>Here are some needs that people might have when shopping for furniture or home furnishings. How important to you are each of the following when it comes to selecting a retailer?</title>
  <comment>Select one in each row</comment>
  <group label="g2"/>
  <group label="g1"/>
  <col label="c1" value="1">1=Not at all important</col>
  <col label="c2" value="2">2</col>
  <col label="c3" value="3">3=Neutral</col>
  <col label="c4" value="4">4</col>
  <col label="c5" value="5">5=Very important</col>
  <row label="r1">Offers good value for the money</row>
  <row label="r2">Offers free delivery</row>
  <row label="r3">Offers expedited delivery (2 Business Days)</row>
  <row label="r4">Has products that are durable and wear well</row>
  <row label="r5">Offers many different styles of furniture</row>
  <row label="r6">Allows me to try the products at home risk-free</row>
  <row label="r7">Makes returns easy</row>
  <row label="r8">Offers in-home assembly</row>
  <row label="r9">Offers design planning assistance for kitchens, bathrooms, etc.</row>
  <row label="r10">Has a physical store where I can see the products in person</row>
  <row label="r11">Has a physical store location that is easy to get to</row>
  <row label="r12">Allows me to shop online then pick up the items in-store</row>
  <row label="r13">Let’s me customize my choices</row>
  <row label="r14">Allows me to shop in the store and then get items delivered</row>
  <row label="r15">Is a retailer that operates in a way that’s better for society and the environment</row>
  <row label="r16">Offers a shopping experience that is easy and convenient</row>
  <row label="r17">Is a retailer that understand the economic issue that people face today</row>
  <row label="r18">Is a values-driven company</row>
  <row label="r19">Is a company with a strong purpose</row>
  <row label="r20">Is a company that cares about people including consumers, employees and society</row>
  <row label="r21">Is a retailer that is committed to diversity and inclusion</row>
  <row label="r22">Is a company that is creating ways for people to live more sustainably at home</row>
  <row label="r23">Is a brand that makes me feel confident in my home</row>
  <row label="r24">Makes me excited to shop for furniture or home furnishing and accessory items</row>
  <style arg:iHeightElement="100" arg:iHeightScale="20" arg:iWidthElement="230" arg:iWidthScale="130" arg:sOrientation="horizontal" copy="carouselQ6"/>
</radio>

<suspend/>





++GROUP TOGETHER IN ASCENDING ORDER : SIMPLE
<exec when="init">
def group_rows_with_order( question, grouped_rows ):
    current_order = [row.index for row in question.rows.order]
    new_order     = []

    grouped_rows     = [question.attr(row).index for row in grouped_rows]
    first_item_index = current_order.index(grouped_rows[0])

    current_order.insert(first_item_index, grouped_rows)

    for row in current_order:
        if row == grouped_rows:
            new_order = new_order + row
        elif row not in grouped_rows:
            new_order.append(row)

    question.rows.order = new_order
</exec>

<checkbox
  label="Q115"
  atleast="1"
  shuffle="rows">
  <title>Which of the following, if any, have you personally purchased <u>online</u> in the past 12 months?<br /><br /></title>
  <comment><i>(Select all that apply)</i></comment>
  <exec>
group_rows_with_order(Q115, ['r1', 'r2'])
group_rows_with_order(Q115, ['r3', 'r4'])
group_rows_with_order(Q115, ['r5', 'r6'])
  </exec>

  <row label="r1">Airline ticket</row>
  <row label="r2">Concert ticket</row>
  <row label="r3">Clothing</row>
  <row label="r4">Footwear</row>
  <row label="r5">Mobile phone</row>
  <row label="r6">Tablet computer</row>
  <row label="r7" exclusive="1" randomize="0">None of the above</row>
</checkbox>

<suspend/>



++GROUP TOGETHER KEEP RANDOMIZATION ORDER : SIMPLE
<exec when="init">
def group_rows( question, grouped_rows ):
    first_item_index = None
    shuffle_order = [row.index for row in question.rows.order]

    for index, row in enumerate( shuffle_order ):
        if question.rows[row].label in grouped_rows:
            if first_item_index == None:
                first_item_index = index
            else:
                first_item_index += 1
                shuffle_order.insert( first_item_index, shuffle_order.pop(index) )

    question.rows.order = shuffle_order
</exec>


  <exec>
group_rows(Q210, ['r7', 'r8', 'r9', 'r10', 'r11', 'r12'])
  </exec>






++DEFINE FOR CHECKBOX
<define label="P1aList">
  <row label="r1" value="1">Subway</row>
  <row label="r2" value="2">Tim Horton's</row>
  <row label="r3" value="3">A&amp;W</row>
  <row label="r4" value="4">Starbucks</row>
  <row label="r5" value="5">Freshii</row>
</define>
<checkbox
  label="P1a"
  atleast="1"
  shuffle="rows">
  <title>How <b>familiar</b> are you with the following <b>quick service restaurants</b>?</title>
  <comment><i>Please select all that apply</i></comment>

  <insert source="P1aList" strip="value"/>

  <row label="r6" cond="1" randomize="0">Any other quick service restaurants</row>
  <row label="r7" cond="1" exclusive="1" randomize="0">None of the above</row>
</checkbox>

<suspend/>




++ASCII BOX TEXT
"[" = &amp;#091;
"]" = &amp;#093;






++FORWARD BUTTON DELAY (10 SECONDS)
<style label="autoNext" mode="after" name="survey.respview.footer" with="info" wrap="ready"><![CDATA[
$ ("#btn_continue").hide();
setTimeout(function() { $ ("#btn_continue").show();} , 10000);
]]></style>
<html label="info" cond="R1.r23 or R1_HAL.r99" where="survey">You mentioned previously that you have <u>not</u> seen this advertising recently. Please look at the images below again about these advertisements which were advertised.<br /><br /><div align="center">[pipe:dimage]</div></html>




++RECAPTCHA via GOOGLE
<logic label="Recaptcha" recaptcha:secret="6Lfxy3cgAAAAACEoBkEBzvhWf-2cPkOMk2oXHkJf" recaptcha:sitekey="6Lfxy3cgAAAAAFqXtKpaInjWUJY1SN1OzZZlNvMl" uses="recaptcha.1">
  <title>Please click the button below to verify you are not a robot and begin the survey.</title></logic>
<radio
  label="Recaptcha_results"
  translateable="0"
  where="execute,survey,report">
  <title>Results</title>
  <comment>Select one</comment>
  <exec>
Recaptcha_results.val = int(not Recaptcha.human)
  </exec>

  <row label="r1">Human</row>
  <row label="r2">Not Human</row>
</radio>

<suspend/>

<block label="reCaptcha_Block" cond="Recaptcha_results.r2">
  <logic label="Recaptcha1" recaptcha:secret="6Lfxy3cgAAAAACEoBkEBzvhWf-2cPkOMk2oXHkJf" recaptcha:sitekey="6Lfxy3cgAAAAAFqXtKpaInjWUJY1SN1OzZZlNvMl" uses="recaptcha.1">
    <title>Please click the button below to verify you are not a robot and begin the survey.</title></logic>
  <radio
   label="Recaptcha_results1"
   translateable="0"
   where="execute,survey,report">
    <title>Results</title>
    <comment>Select one</comment>
    <exec>
Recaptcha_results1.val = int(not Recaptcha1.human)
    </exec>

    <row label="r1">Human</row>
    <row label="r2">Not Human</row>
  </radio>

  <suspend/>

  <term cond="Recaptcha_results1.r2">ROBOT</term>
</block>

<suspend/>




++TOOLTIP IN QTEXT
<number
  label="Q8"
  optional="0"
  size="2"
  slidernumber:leftLegend="0"
  slidernumber:rightLegend="10+"
  uses="slidernumber.5"
  verify="range(0,10)">
  <title>How many <a href="#" style="text-decoration: none;" title="Credit cards allow you to borrow against a line of credit when making a purchase.  You will pay interest on the purchases made if they are not paid off in 30 days.">credit cards</a> do you have in your wallet?
</title>
  <style label="tooltip" name="question.after"><![CDATA[

  <script>
    $ ( function() {
      $ (document).tooltip();
    });
    $ ('.question-text').removeAttr( "title" );
  </script>

  <style>
    .ui-tooltip {
    	font-weight:700;
    	font-size:16px;
    	padding: 5px 5px;
    }
  </style>

]]></style>

</number>

<suspend/>





++STYLE COPY
<style label="imgoptions" name="question.after"><![CDATA[
<style>
	.fir-icon {font-size: 5.65em;}
	.cell-text{padding: 0 0 0 3.25em !important;}
</style>
]]></style>

<style copy="imgoptions" name="question.after"/>






++STANDARD OE TRAPPING OE LIST TEXT LIST
<res label="QEError">Please provide an answer.</res>


<validate>
if QEquestion.r1.val=='':
	error(res.QEError)
</validate>






++FLAG STRAIGHTLINER FUNCTION:
<exec when="init">
def flagSL(q,fq):
	fq.val = fq.r2.index
	for eachCol in q.cols:
		if eachCol.displayed and eachCol.all:
			fq.val = fq.r1.index
			break
</exec>

++HOWTO USE FLAG STRAIGHTLINER FUNCTION:





++DEVICE CATEGORY
<exec>
d = gv.request.device
if d.isMobileDevice() or d.isSmartphone() or d.isTablet() or d.isIpad() :
	hDevice.val = hDevice.r1.index
else:
	hDevice.val = hDevice.r2.index
</exec>

<radio
  label="hDevice"
  where="execute,survey,report">
  <title>Hidden: To punch Device Type</title>
  <row label="r1">Mobile User</row>
  <row label="r2">PC/laptop/tablet User</row>
</radio>

<suspend/>





++AUTOSUBMIT SIMPLE *** USE ME ***
++AUTOSUBMIT SIMPLE *** USE ME ***
++AUTOSUBMIT SIMPLE *** USE ME ***
++AUTOSUBMIT SIMPLE *** USE ME ***
++AUTOSUBMIT SIMPLE *** USE ME ***
++AUTOSUBMIT SIMPLE *** USE ME ***
++AUTOSUBMIT SIMPLE *** USE ME ***
++AUTOSUBMIT SIMPLE *** USE ME ***
<checkbox
  label="qend"
  cond="1"
  ss:questionClassNames="sq-timertest"
  timertest:showCounter="0"
  timertest:timerLimit="3"
  uses="timertest.3"
  where="survey,report,notdp">
  <title>
    <div style="text-align: center;">
      <b>Unfortunately, this test is only being done among people age 18 and over. But thanks for your willingness to participate!</b>
    </div>
  </title>
</checkbox>
<suspend/>




++CHANGE TERM MESSAGE
add mterm below:
  extraVariables="source,record,ipAddress,decLang,list,userAgent,settings,jumpto,mterm,mqualified,moverquota"

<res label="termMessage">{}<br /><br /><br /><br /></res>

<exec>
p.mterm = res.termMessage.format("You have reached the end of the test. Thank you very much for your participation!")
</exec>



++SHOW/HIDE QUESTION CHECKBOX
IF SELECTED PREFER NOT TO ANSWER, HIDE D2b
  <number
   label="D2a"
   optional="0"
   size="10"
   ss:postText="years old"
   verify="range(0,99)">
    <title>Please enter your age below:</title>
    <comment>Please enter a whole number</comment>
    <noanswer label="r1">100 years old or older</noanswer>
    <noanswer label="r2">Prefer not to answer</noanswer>
    <style name="question.after"><![CDATA[
<style>
input:text{
    font-size: 5.029370078740157vh
}
</style>
]]></style>
    <style name="question.after" wrap="ready"><![CDATA[
dinput = $ ('input.checkbox').eq(1)
    dinput.change(function(event) {
        if ($ (this).is(':checked')) {
            $ ('#question_D2b').css('display', 'block');
        }
        else if (!$ (this).is(':checked')) {
            $ ('#question_D2b').css('display', 'none');
            $ ('#question_D2b input').removeAttr('checked')
            $ ('#question_D2b span').removeClass('selected')
        }
    });
    dinput.change();

$ (':text').attr('maxlength','2');
$ (':text').attr('size','2');

]]></style>
  </number>

  <radio
   label="D2b"
   optional="1">
    <title>Which of the following ranges contains your age?</title>
    <comment>Select one</comment>
    <validate>
if D2a.r2 and not(D2b.any):
  error('Please select an answer')
    </validate>

    <row label="r1" value="1">18-49 years old</row>
    <row label="r2" value="2">50-74 years old</row>
    <row label="r3" value="3">75+ years old</row>
    <row label="r4" value="4">Prefer not to answer</row>
    <style name="question.after"><![CDATA[
<style>
#question_D2b{display:none}
</style>
]]></style>
  </radio>

  <suspend/>




++SHOW/HIDE QUESTION RADIO
SHOW Q345 IF "YES" in Q340

<radio
  label="Q340">
  <title>Do you think the clothing you just saw is <u>sponsored or approved by</u> any other company or brand, or do you not?</title>
  <style label="showHide" arg:label="Q345" name="question.after"><![CDATA[
<script>
  	$ (document).ready(function(){
  		var yes = $ ('.yesBtn').find('input[type="radio"]');
  		var no = $ ('.noBtn').find('input[type="radio"]');

  		if (yes.is(':checked')){
  				$ ('#question_$(label)').show();
  			}else{
  				$ ('#question_$(label)').hide();
  			}


  		//If yes button clicked
  		yes.click(function(){
  			if ($ (this).is(':checked')){
  				$ ('#question_$(label)').fadeIn();
  				$ (':input.text-input').css('background-color','#e2e2d9').val("").prop('disabled',true);
      			$ (':input.text-input').first().css('background-color','white').prop('disabled',false);
      			$ ('#question_$(label)').find('input:checkbox').prop('checked', false);
  			}else{
  				$ ('#question_$(label)').fadeOut();
  			}
  		});

  		//If No or DK button clicked
  		no.click(function(){
  			if ($ (this).is(':checked')){
  				console.log('asdasdfad');
      			$ (':input.text-input').css('background-color','#e2e2d9').val("").prop('disabled',true);
      			$ (':input.text-input').first().css('background-color','white').prop('disabled',false);
  				$ ('#question_$(label)').find('input:checkbox').prop('checked', false);
  				$ ('#question_$(label)').fadeOut();
  			}
  		});
  	});
  </script>
]]></style>
  <row label="r1" ss:rowClassNames="yesBtn" value="1">Yes, I do</row>
  <row label="r2" ss:rowClassNames="noBtn" value="2">No, I do not</row>
  <row label="r3" ss:rowClassNames="noBtn" value="3">Don't know/No opinion</row>
</radio>

<text
  label="Q345"
  size="40">
  <title>What other company or brand?</title>
  <comment>(If you are thinking of more than one company or brand, please enter each one in a separate box below.  If you don’t know, you may select that option.)</comment>
  <validate>
if Q340.r1 and (Q345.r1.val.strip() == ""):
  error(res.prov)
  </validate>

  <row label="r1"/>
  <row label="r2"/>
  <row label="r3"/>
  <row label="r4"/>
  <row label="r5"/>
  <noanswer label="r99">Don’t know</noanswer>
  <style copy="forceorder" name="question.after"/>
</text>

<suspend/>







++RECAPTCHA DYNATA
<logic label="Q99" recaptcha:secret="6Lfxy3cgAAAAACEoBkEBzvhWf-2cPkOMk2oXHkJf" recaptcha:sitekey="6Lfxy3cgAAAAAFqXtKpaInjWUJY1SN1OzZZlNvMl" uses="recaptcha.1">
  <title>Please click the button below to verify you are not a robot and begin the survey.</title></logic>
<radio
  label="dQ99"
  sst="0"
  translateable="0"
  where="execute,survey,report">
  <title>Results</title>
  <exec>
print Q99.human
dQ99.val = int(not Q99.human)
  </exec>

  <row label="r1">Human</row>
  <row label="r2">Not Human</row>
</radio>

<suspend/>

<term cond="dQ99.r2" sst="0">Q99: Robot</term>





++TOOLTIP IN ROWS
<res label="hoverR1text">e.g., Deadliest Catch, Gold Rush, Swamp People, etc.</res>
<res label="hoverR2text">e.g., Big Bang Theory, Modern Family, Younger, Arrested Development, The Last OG, etc.</res>
<res label="hoverR3text">e.g., Project Runway, Chopped, Survivor, The Voice, Alone, etc.</res>
<res label="hoverR4text">e.g., COPS, The First 48, Live PD, Making a Murderer, etc.</res>
<res label="hoverR5text">e.g., CSI, Criminal Minds, 911, True Detective, etc.</res>
<res label="hoverR6text">e.g., a non-fiction film or program recounting actual events, etc.</res>
<res label="hoverR7text">e.g., Entertainment Tonight, TMZ, Extra, etc.</res>
<res label="hoverR8text">e.g., Game of Thrones, The Walking Dead, Stranger Things, etc.</res>
<res label="hoverR9text">e.g., The Men Who Built America, OJ: Made In America, etc.</res>
<res label="hoverR10text">e.g., House Hunters, Fixer Upper, Love it or List it, etc.</res>
<res label="hoverR11text">e.g., American Horror Story, The Haunting of Hill House, etc.</res>
<res label="hoverR12text">e.g., The Late Show, The Daily Show, Tonight Show, Last Week Tonight, etc.</res>
<res label="hoverR13text">i.e., movies made specifically for TV</res>
<res label="hoverR14text">e.g., Chernobyl, Fosse/Verdon, etc.</res>
<res label="hoverR15text">e.g., Fast N Loud, Top Gear, The Grand Tour, Counting Cars, etc.</res>
<res label="hoverR16text">e.g., The Americans, House of Cards, Scandal, etc.</res>
<res label="hoverR17text">e.g., Leah Remini: Scientology and the Aftermath, Surviving R. Kelly, Alaskan Bush People, My 600-lb Life, etc.</res>
<res label="hoverR18text">e.g., Vanderpump Rules, Real Housewives, Love &amp; Hip Hop, Sister Wives, etc.</res>
<res label="hoverR19text">e.g., How the Universe Works, Breakthrough, Planet Earth, etc.</res>
<res label="hoverR20text">e.g., Grey's Anatomy, This Is Us, etc.</res>
<res label="hoverR21text">e.g., Jessica Jones, Arrow, The Flash, Legion, Luke Cage etc.</res>
<res label="hoverR22text">e.g., The Dead Files, Ancient Aliens, Hollywood Medium, Ghost Adventures, etc.</res>


<radio
  label="QGENRE"
  colLegendRows="12"
  shuffle="rows"
  ss:legendColWidth="30px">
  <title>How do you feel about each of the following TV genres?</title>
  <comment>Hover over each response to see an example of programs in this genre.</comment>
  <row label="r1"><span title="${res.hoverR1text}">Action-Oriented Reality programs</span></row>
  <row label="r2"><span title="${res.hoverR2text}">Comedies</span></row>
  <row label="r3"><span title="${res.hoverR3text}">Competitive Reality programs</span></row>
  <row label="r4"><span title="${res.hoverR4text}">Crime Reality programs</span></row>
  <row label="r5"><span title="${res.hoverR5text}">Crime/Mystery dramas</span></row>
  <row label="r6"><span title="${res.hoverR6text}">Documentary specials</span></row>
  <row label="r7"><span title="${res.hoverR7text}">Entertainment News programs</span></row>
  <row label="r8"><span title="${res.hoverR8text}">Fantasy/Science Fiction dramas</span></row>
  <row label="r9"><span title="${res.hoverR9text}">History/World Events</span></row>
  <row label="r10"><span title="${res.hoverR10text}">Home Improvement and Decorating programs</span></row>
  <row label="r11"><span title="${res.hoverR11text}">Horror dramas</span></row>
  <row label="r12"><span title="${res.hoverR12text}">Late Night Talk programs</span></row>
  <row label="r13"><span title="${res.hoverR13text}">Made-for-TV Movies</span></row>
  <row label="r14"><span title="${res.hoverR14text}">Mini-series</span></row>
  <row label="r15"><span title="${res.hoverR15text}">Motor/Gear shows</span></row>
  <row label="r16"><span title="${res.hoverR16text}">Political dramas</span></row>
  <row label="r17"><span title="${res.hoverR17text}">Reality Docu-Series programs</span></row>
  <row label="r18"><span title="${res.hoverR18text}">Reality Docu-Soap/relationship programs</span></row>
  <row label="r19"><span title="${res.hoverR19text}">Science and Nature programs</span></row>
  <row label="r20"><span title="${res.hoverR20text}">Relationship dramas</span></row>
  <row label="r21"><span title="${res.hoverR21text}">Superhero dramas</span></row>
  <row label="r22"><span title="${res.hoverR22text}">Supernatural or Paranormal programs</span></row>
  <col label="c1" value="1">One of my favorites</col>
  <col label="c2" value="2">I like it</col>
  <col label="c3" value="3">I'm indifferent</col>
  <col label="c4" value="4">I don't like it much</col>
  <col label="c5" value="5">I hate it</col>
  <style name="question.after"><![CDATA[
<script>
  $ ( document ).tooltip();
</script>
]]></style>
</radio>






++IMAGE PINCH MOBILE

<style label="ImagePinch" mode="after" name="respview.client.js" with="Q210" wrap="ready"><![CDATA[
$ (document).ready(function() {
  if ($ ("body").hasClass("touch")) {
    $ ("head").append('<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=12.0, user-scalable=yes">');
  }
});
]]></style>


++IMAGE PINCH MOBILE - SIMPLE: ADD TO ALL AFFECTED QUESTIONS
<style name="question.after"><![CDATA[
  $ ("head").append('<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=12.0, user-scalable=yes">');
]]></style>








++GRID WITH OEs:
1910639
see codes:
  missingOE(Q#,Q#_OE,['r#'])
  etrap(Q#_OE,etrapArr(Q#_OE))
  <style arg:MaxLen="checkbox" copy="jqueryCustomFunc" name="question.after"/>
  <style arg:qname="Q#" copy="custCSS" name="question.after"/>





++SURVEY CAPABILITIES
https://survey-d.researchnow.com/survey/selfserve/53b/1902798?debug=respview#?





++RANK SORT WITH OTHER SPECIFY OE
https://survey-d.researchnow.com/survey/selfserve/53b/1902798?debug=respview&diyqids=30903#?





++GET TEXT FROM GRID:
<exec>
QRowText = [eachRow.text for eachRow in dUSO.rows]
print QRowText[dUSO.c1.val]
</exec>





++SHOW THE QA CODES WITHOUT LOGGING IN TO DECIPHER
adding " ?settings=showqid " in test link of the survey
adding " &settings=showqid " in test link of the survey



++RANDOM NUMBER GENERATOR
<exec>
  import random
  randomOrder = random.randint(0,5)
</exec>







++MOST IMPORTANT LEAST IMPORTANT (MAX DIFF STYLE)
<radio
  label="Q31"
  fir="off"
  randomize="0">
  <title>Agora, gostaríamos de entender melhor como você prefere se relacionar com a sua instituição de investimento ao longo de diversas etapas de sua jornada, incluindo criação de conta, construção de portfólio, suporte ao cliente, etc.
  	<br />
  	<br />
Dentre as opções abaixo, selecione aquela que lhe é mais importante e a menos importante para você.
</title>
  <row label="r1">Mais importante</row>
  <row label="r2">Menos importante</row>
  <col label="c1">Receber aconselhamento financeiro durante um evento específico (ex: compra e venda de uma casa, nascimento de filhos, etc.)</col>
  <col label="c2">Abrir novas contas online / em meu smartphone e conseguir inserir todas as informações necessárias para investir através desse canal</col>
  <col label="c3">Abrir novas contas pessoalmente e ter uma discussão mais detalhada com o atendente</col>
  <col label="c4">Discutir minhas metas financeiras com o meu assessor financeiro / instituição financeira, encarregando-o de criar o meu portfólio final de investimentos</col>
  <col label="c5">Inserir informações em uma ferramenta online ou aplicativo para celular que seja capaz de me fornecer um aconselhamento financeiro</col>
  <col label="c6">Construir meu próprio portfólio de investimentos usando ferramentas e estratégias de investimento fornecidas pelo meu assessor financeiro / instituição financeira</col>
  <col label="c7">Ter um algoritmo automatizado para gerenciar meu portfólio e tomar todas as decisões de investimento em meu nome</col>
  <col label="c8">Ter visibilidade em tempo real de como está o meu portfólio através do meu smartphone</col>
  <col label="c9">Capacidade de conversar com meu assessor financeiro em qualquer momento que eu quiser</col>
  <col label="c10">Ter um assessor financeiro para gerenciar meus investimentos e me enviar relatórios periódicos com os resultados do meu portfólio</col>
  <col label="c11">Capacidade de entrar em contato com o meu asessor financeiro / instituição financeira usando mensagens de texto, WhatsApp, Facebook ou outra plataforma de mensagens digitais</col>
  <col label="c12">Acesso a especialistas para diversos tópicos específicos (ex: impostos, etc.)</col>
  <col label="c13">Acesso a chatbots para tirar dúvidas / consultar informações menos complexas</col>
  <col label="c14">Capacidade para ligar para alguém alterar o perfil da minha conta ou outras informações</col>
  <col label="c15">Ter um indivíduo qualificado gerenciando totalmente todas as minhas finanças e investimentos</col>
  <col label="c16">Capacidade de fazer minha própria pesquisa / decisões e executar operações de investimentos online ou por telefone</col>
  <col label="c17">Obter recomendações sobre ações e títulos que devo investir</col>
  <style name="question.after"><![CDATA[
<style>.answers{display: none} .progress-container {text-align: center;}</style>

  <script type="text/javascript" src="//d2n88fe5uqdqty.cloudfront.net/ssi_js/decipher/ssi_ALLInOne_Confirmit_1.1_decipher.js"></script>

	  <script type="text/javascript">
	  var lukanka;
	  (function (lukanka) {
		if (!lukanka.qDefs)
		  lukanka.qDefs = {};
		  lukanka.qDefs["${this.label}"] = ${jsexport()};
		$ (document).ready(function(){
		  parseJsexportData();
		});
	  })(lukanka || (lukanka = {}));

	  </script>

  <link rel="stylesheet" href="//d2n88fe5uqdqty.cloudfront.net/rnd/tools/cjmaxdiff/css/maxdiff_v1.2.min.css">
  <link rel="stylesheet" href="//d2n88fe5uqdqty.cloudfront.net/rnd/plugins/ionicons/ionicons-2.0.1/css/ionicons.min.css">

  <script src="//d2n88fe5uqdqty.cloudfront.net/rnd/tools/cjmaxdiff/js/maxdiff_v1.2_Decipher.min.js"></script>

  <div class="maxdiff-container"><img class="img-responsive loading-container" src="//d2n88fe5uqdqty.cloudfront.net/rnd/tools/images/loading.gif"/><div class="inner-container"><div class="scale-container"></div><div class="options-container"></div><div class="progress-container"></div></div></div>

  <script>
  $ (function() {
	  $ ('.toolContainer').MaxDiff({

		  // =============== DOCUMENTATION ===============> https://confluence.surveysampling.com/x/1Md7AQ

		  sTheForm: getFormName(1), // question element id
		  //sProgressCurrentIterationText: '1', // current iteration text
		  //sProgressTotalIterationsText: '1', // update loopname if necessary
		  //sProgressSplitText: ' of ', // progress count splitter
		  iSetMinHeight: null, // if set - will add min height to all item containers
		  sForwardbutton: '#btn_continue', // forward button selector - used to toggle next button
		  bReverseScale: false, // if true - left scale will be negative, right scale will be positive
		  bShowProgress: false, // show iteration progress
		  bAutoSubmit: false // if true - will auto-submit once both positive and negative are answered
	  });
	  $ ('.maxdiff-container').css('max-width','800px');
      $ ('.inner-container').css('width','100%');

countIt({
"tool-id": "jMDT002",
"project-id": '19101389',
"order": 'ORD-453683-N2H2'
});
  });
  </script>
]]></style>
</radio>

<suspend/>





++TEXT AREA OPEN TEXT CHARACTER COUNT LETTER COUNT
    <textarea
    label="P2x[loopvar: label]"
    optional="0">
      <title>¿Qué es lo que MENOS te gusta de esta imagen?<br /><br />
&lt;center&gt;<a data-fancybox="gallery" href="[rel [loopvar: image]]"><div><img src="[rel [loopvar: image]]" style="width:55%" /></div></a>&lt;/center&gt;
<br />

   <div class="progress">carta(s): <span class="counter" style="color: red">0</span></div>
</title>
      <validate>
etrap2(P2x[loopvar: label],"",15)
      </validate>

      <style label="fancy_progress" arg:count_ques="P2count_[loopvar: label]" name="question.after"><![CDATA[
<script>
  	$ (document).ready(function(){
  		$ ("a.img").fancybox();
  		$ ('.counter').html($ ('textarea').val().length);
          	if ($ (this).val().length > 14){
      				$ ('.counter').css('color', 'green');
      			}else{
      				$ ('.counter').css('color', 'red');
      			}
  			$ ("input[type='text']").val($ ('textarea').val().length);

  			$ ('textarea').on('keyup', function(){
      			$ ('.counter').html($ (this).val().length);
      			if ($ (this).val().length > 14){
      				$ ('.counter').css('color', 'green');
      			}else{
      				$ ('.counter').css('color', 'red');
      			}
      			$ ("input[type='text']").val($ (this).val().length);
      		});

      		$ ('#question_$(count_ques)').hide();
  	});
  </script>
]]></style>
    </textarea>

    <number
    label="P2count_[loopvar: label]"
    size="3"
    translateable="0">
      <title>Number of characters. (Programming purposes)</title>
      <row label="r1"/>
    </number>

    <suspend/>







++DROPDOWN WITH OE; DROPDOWN GRID WITH OE
<block label="Q8b_block" cond="not Q5.r22 and Q8a.c2.any">
  <exec>
Q8b1.rows.order = Q5.rows.order
Q8b2.rows.order = Q5.rows.order
Q8b1OE.rows.order = Q5.rows.order
  </exec>

  <select
   label="Q8b1"
   rowCond="Q8a[row].c2"
   shuffle="rows">
    <title>You mentioned you do not personally pay for the account/subscription for the following services/platforms. <br />
<br /><br />
Please select who is responsible for paying for the account/subscription, and whether they live in your household.<br />
 </title>
    <comment><i>Select one response.</i></comment>
    <validate>
for eachR in Q8b1.rows:
    if eachR.ch7 and len(Q8b1OE[eachR.index].val)==0:
        error((res.Q8b1Error % eachR.text))
    </validate>

    <col label="c1">Who pays for the account/subscription?</col>
    <choice label="ch1" value="1">Parent/parents</choice>
    <choice label="ch2" value="2">Other family member</choice>
    <choice label="ch3" value="3">Spouse/romantic partner</choice>
    <choice label="ch4" value="4">Roommate</choice>
    <choice label="ch5" value="5">Friend</choice>
    <choice label="ch6" value="6">Employer</choice>
    <choice label="ch7" open="1" openSize="25" value="7">Other, please specify</choice>
    <row label="r1">Traditional cable or satellite</row>
    <row label="r2">Traditional TV network apps or websites like FX NOW, HBO GO, NBC app, etc.(accessible for free or with a cable/satellite log-in)</row>
    <row label="r3">Paid network subscription service like CBS All Access, HBO NOW, Showtime Anytime, etc.</row>
    <row label="r4">Netflix</row>
    <row label="r5">Amazon Prime Video</row>
    <row label="r6">Hulu standard (does NOT include live TV)</row>
    <row label="r7">Hulu with live TV</row>
    <row label="r8">AT&amp;T TV NOW (formerly DIRECTV NOW)</row>
    <row label="r9">PlayStation Vue</row>
    <row label="r10">Sling TV</row>
    <row label="r11">Philo</row>
    <row label="r12">YouTube standard or premium (does NOT include live TV)</row>
    <row label="r13">YouTube TV with live TV</row>
    <row label="r14">Facebook</row>
    <row label="r15">Twitter</row>
    <row label="r16">Instagram</row>
    <row label="r17">TikTok</row>
    <row label="r18">Snapchat</row>
    <row label="r19">Twitch</row>
    <row label="r20">Google Play</row>
    <row label="r21">Apple TV app (formerly iTunes)</row>
    <style name="question.after" wrap="ready"><![CDATA[
$ ("#question_Q8b1OE").hide();

$ ('.grid-table-mode tbody tr').find("td:first").find('select').each(function(ndx,obj){
      $ (this).after($ (":text:eq("+ndx+")"));

      if($ (this).val() == '6'){
        $ (":text:eq("+ndx+")").show();
      }else{
        $ (":text:eq("+ndx+")").hide();
        $ (":text:eq("+ndx+")").val("");
      }

  });

$ ('.grid-table-mode tbody tr').find("td:first").find('select').change(function(){

      if($ (this).val() == '6'){
        $ (this).next().show();
      }else{
        $ (this).next().hide();
        $ (this).next().val("");
      }

  });
]]></style>
  </select>

  <select
   label="Q8b2"
   rightOf="Q8b1"
   rowCond="Q8a[row].c2"
   shuffle="rows">
    <title><br /></title>
    <col label="c1">Does the person who pays for the account/subscription live in your household?</col>
    <row label="r1">Traditional cable or satellite</row>
    <row label="r2">Traditional TV network apps or websites like FX NOW, HBO GO, NBC app, etc.(accessible for free or with a cable/satellite log-in)</row>
    <row label="r3">Paid network subscription service like CBS All Access, HBO NOW, Showtime Anytime, etc.</row>
    <row label="r4">Netflix</row>
    <row label="r5">Amazon Prime Video</row>
    <row label="r6">Hulu standard (does NOT include live TV)</row>
    <row label="r7">Hulu with live TV</row>
    <row label="r8">AT&amp;T TV NOW (formerly DIRECTV NOW)</row>
    <row label="r9">PlayStation Vue</row>
    <row label="r10">Sling TV</row>
    <row label="r11">Philo</row>
    <row label="r12">YouTube standard or premium (does NOT include live TV)</row>
    <row label="r13">YouTube TV with live TV</row>
    <row label="r14">Facebook</row>
    <row label="r15">Twitter</row>
    <row label="r16">Instagram</row>
    <row label="r17">TikTok</row>
    <row label="r18">Snapchat</row>
    <row label="r19">Twitch</row>
    <row label="r20">Google Play</row>
    <row label="r21">Apple TV app (formerly iTunes)</row>
    <choice label="ch1" value="1">Yes</choice>
    <choice label="ch2" value="2">No</choice>
  </select>

  <text
   label="Q8b1OE"
   rowCond="Q8a[row].c2"
   shuffle="rows"
   size="30">
    <title>${""}</title>
    <alt> Q8b1 - Other, please specify </alt>
    <row label="r1"/>
    <row label="r2"/>
    <row label="r3"/>
    <row label="r4"/>
    <row label="r5"/>
    <row label="r6"/>
    <row label="r7"/>
    <row label="r8"/>
    <row label="r9"/>
    <row label="r10"/>
    <row label="r11"/>
    <row label="r12"/>
    <row label="r13"/>
    <row label="r14"/>
    <row label="r15"/>
    <row label="r16"/>
    <row label="r17"/>
    <row label="r18"/>
    <row label="r19"/>
    <row label="r20"/>
    <row label="r21"/>
  </text>

  <suspend/>

  <exec>
for eachR in Q8b1.rows:
    if eachR.ch7:
        print eachR.index
        print Q8b1OE[eachR.index].val
    else:
        Q8b1OE[eachR.index].val = ""
        print Q8b1OE[eachR.index].val
  </exec>
</block>




++QUOTA HOOKS QUOTA PRIORITY PRIORITIZATION
<note>-----------------------------------------------------------START QUOTA HOOK FUNCTION FOR LEAST FILL PRIO PICKER OF Q22a----------------------------------------------------</note>
<exec when="init">
def quota_hook(sheet, table, cells):
 if sheet == 'Q22aMessages':
   cellsOrdered = []
   prio1 = ['/Q22aMessages/Q22aMessages_' + eachRow.label for eachRow in Q22.rows if (eachRow.c8 or eachRow.c9 or eachRow.c10)]
   prio2 = ['/Q22aMessages/Q22aMessages_' + eachRow.label for eachRow in Q22.rows if (eachRow.c1 or eachRow.c2 or eachRow.c3)]
   prio3 = ['/Q22aMessages/Q22aMessages_' + eachRow.label for eachRow in Q22.rows if (eachRow.c7)]
   prio4 = ['/Q22aMessages/Q22aMessages_' + eachRow.label for eachRow in Q22.rows if (eachRow.c4)]
   prio5 = ['/Q22aMessages/Q22aMessages_' + eachRow.label for eachRow in Q22.rows if (eachRow.c6)]
   prio6 = ['/Q22aMessages/Q22aMessages_' + eachRow.label for eachRow in Q22.rows if (eachRow.c5)]


   markerPriorities = [prio1,prio2,prio3,prio4,prio5,prio6]
   if len(markerPriorities) gt 0:
     for eachPriority in markerPriorities:
       for eachCell in cells:
         if eachCell[2] in eachPriority:
           if eachCell[2] in eachPriority:
             cellsOrdered.append(eachCell)
     return cellsOrdered
 else:
   return cells
</exec>

<note>-----------------------------------------------------------END QUOTA HOOK FUNCTION FOR LEAST FILL PRIO PICKER OF Q22a----------------------------------------------------</note>






++LOOP INDEX POSITION
++LOOP POSITION
++LOOP ITERATOR
*AFTER <BLOCK> INSIDE THE LOOP*
<exec>
p.currentIndex = Q****_loop.index
print "p.currentIndex: ", p.currentIndex
</exec>

first loop    cond="p.currentIndex == 0"
second loop    cond="p.currentIndex == 1"









++RANKING RML6 RnD : LEGACY
CONFIG:
<block label="b98" builder:title="LSSI Config">
  <exec when="init">
order_id = 'ORD-12345-ABCD'
project_id = gv.survey.path

def initLSSIDataToggle():
  if gv.isUser() and not gv.debug.respview:
    output = "&lt;script&gt;\n"
    output += "var dataToggler = jQuery('&lt;div&gt;Please click here to see the data nodes for this tool.&lt;/div&gt;');\n"
    output += "dataToggler.addClass('dataToggle');\n"
    output += "dataToggler.css({'text-decoration': 'underline','font-size': 'small','color': 'blue','cursor': 'pointer','margin-top': '20px'});\n"
    output += "dataToggler.click(lssiDataToggle);\n"
    output += "function lssiDataToggle(){ if(jQuery('.survey-page').hasClass('showlssiData')) jQuery('.survey-page').removeClass('showlssiData'); else jQuery('.survey-page').addClass('showlssiData');  }\n"
    output += "jQuery(function(){jQuery ('.survey-buttons').before(dataToggler); })\n"
    output += "&lt;/script&gt;\n"
    output += "&lt;style&gt;.showlssiData .answers,.showlssiData .question{display: block !important;visibility: visible !important;}&lt;/style&gt;\n"
    return output
  else:
    return ""
  </exec>
</block>


MAIN:
<res label="RankErrorUnique">Please rank all items uniquely.</res>
<res label="RankErrorLimit">You can rank 10 statements only.</res>

<number
  label="Q##"
  shuffle="rows"
  size="10"
  verify="range(1, 10)">
  <title>Below are factors that pet owners may consider when purchasing grooming tools (e.g. brush, de-shedder, comb, rake, nail clipper, etc.). This does NOT include shampoos, conditioners, or other liquids.<br />
Please rank-order them according to your priorities. Please rank so that 1 is the most important, 2 is the second most important, and so on.</title>
  <validate>
############## CHECK UNIQUE START
Q##LIST = []

#moving qval to list
for x in Q##.rows:
    if x.val != None:
        Q##LIST.append(int(x.val))


#check unique
for x in Q##LIST:
    if x not in ["",None,0]:
        if Q##LIST.count(x) gt 1:
            error(res.RankErrorUnique)
############## CHECK UNIQUE END
</validate>

  <row label="r1">Brand name</row>
  <row label="r2">Price</row>
  <row label="r3">Container size/amount of product</row>
  <row label="r4">Product claims (odor eliminating, shines coat, etc.)</row>
  <row label="r5">The country of origin (where it was manufactured)</row>
  <row label="r6">Product safety</row>
  <row label="r7">Package sustainability (made with materials to reduce environmental impact)</row>
  <row label="r8">Availability where I shop</row>
  <row label="r9">My pet will like it</row>
  <row label="r10">Packaging look and feel</row>
  <style label="ranking2" name="question.after"><![CDATA[
<script type="text/javascript" src="//d2n88fe5uqdqty.cloudfront.net/ssi_js/decipher/ssi_ALLInOne_Confirmit_1.1_decipher.js"></script>

<style>
fieldset { display:none; }
#forwardbutton, #btn_continue { visibility:hidden; }
.answers.answers-list { display:none; }
div#customToolArea { margin-bottom: 20px !important; }
</style>

<div class="pagearea"><div id= "customToolArea"></div></div>

<link rel="stylesheet" type="text/css" href="//d2n88fe5uqdqty.cloudfront.net/rnd/tools/ranking/css/CLK_ranking_text_v1.10.css" />
<link rel="stylesheet" href="//d2n88fe5uqdqty.cloudfront.net/rnd/template/GSL_2016/tool_css/clickable_ranking_txt.css">
<script type="text/javascript" src="//code.jquery.com/jquery-1.8.3.min.js"></script>
<script src="//code.jquery.com/ui/1.9.1/jquery-ui.js"></script>
<script type="text/javascript" src="//d2n88fe5uqdqty.cloudfront.net/rnd/tools/ranking/js/CLK_ranking_text_v1.11_decipher_v14.js"></script>

<script type="text/javascript">
var lukanka;
(function (lukanka) {
  if (!lukanka.qDefs)
    lukanka.qDefs = {};
    lukanka.qDefs["${this.label}"] = ${jsexport()};
    //console.log(lukanka.qDefs);

  $ (document).ready(function(){

    parseJsexportData ();
    var thisForm = getFormName(1);

    var oDataItems = getNumericItems(thisForm);
    var iTotalItems = oDataItems[0].length;

    var config   = {
      isLive        : true, // =============== DOCUMENTATION ===============> https://confluence.surveysampling.com/x/8MF7AQ
      sForm       : thisForm,
      oDataItems      : oDataItems,
      iTotalItems     : iTotalItems,
      //sURL        : "//ssiusers.s3.amazonaws.com/ran_koseki/",
      isDK        : false,
      txtReset        : "Reset",
      sNextBtn        : "//d2n88fe5uqdqty.cloudfront.net/rnd/template/next_SSIglobal.png",
      sBackBtn        : "//d2n88fe5uqdqty.cloudfront.net/rnd/template/prev_SSIglobal.png",
      deviceType        : "^f('DeviceType').get()^",
      items_per_row     : 2,
      items_per_row_mo      : 1,
      iFontSize       : 16,
      iDKFontSize     : 16,
      iResetFontSize      : 16,
      minNrAnswer     : 10,
      maxNrAnswer     : 10,
      item_x_space      : 5,
      item_y_space      : 5,
      iItemWidth        : 320,
      iItemHeight     : 50,
      iDkWidth        : 180,
      iDkHeight       : 42,
      iResetWidth     : 180,
      iResetHeight      : 42,
      sAlert        : "${res.RankErrorLimit}",
      isAnimation     : true,
      AnimationEffect     : "slide",
      iBoxHeightType      : 1,
      isRankAnimation     : true,
      isAlertShown      : true,
      otherSpecifyItems     : "", //example: r99
      iOtherBoxWidth      : 150,
      nrOfDK        : 0
    }
    clkRankingText(config);

  });

})(lukanka || (lukanka = {}));
</script>
<style>
div#customToolArea, div#customToolArea * {
  box-sizing: initial;
}
.customRankSelected {
  background-image: none;
  top: 50% !important;
  margin-top: -18px;
  border: 2px solid #ffffff;
  -webkit-border-radius: 50%;
  -moz-border-radius: 50%;
  border-radius: 50%;
  text-align: center;
}
</style>
${initLSSIDataToggle()}
]]></style>
</number>

<suspend/>









++HOTSPOT
https://surveytools.researchnow.com/rml/sgt_v1.1/

PLOT SHAPES
	once Done: Export shapes

COPY VALUES (1st box):
value::83x361,146x361,146x394,83x394||type::rectangle||max::0	1
value::54x392,173x392,173x486,54x486||type::rectangle||max::0	2
value::137x458,174x458,174x486,137x486||type::rectangle||max::0	3
value::55x487,169x487,169x508,56x508||type::polygon||max::0	4
value::125x526,56x527,56x507,125x508||type::polygon||max::0	5
value::168x507,126x507,126x528,168x528||type::rectangle||max::0	6
value::102x546,53x546,53x527,102x527||type::rectangle||max::0	7
value::170x548,106x548,106x532,170x532||type::rectangle||max::0	8
value::211x361,272x361,272x380,211x379||type::polygon||max::0	9
value::224x532,271x532,271x564,224x564||type::rectangle||max::0	10
value::273x361,272x378,212x377,183x377,182x461,185x573,213x573,242x572,272x570,299x567,297x362||type::polygon||max::0	11

IN RML6:
<note>========================================================= HOTSPOT (IRREGULAR SHAPES) START ===================================================</note>

UPDATE:
        "imageURL": "//rsn-rml-prod.s3.amazonaws.com/rml6/media/hotspot_collector/juicer_blender.png",

CHANGE WITH VALUES COPIED ABOVE:
    <row label="r1">fruit{@value::556x639,472x591,424x529,412x407,568x438,633x365,662x331,582x279,585x209,670x167,700x240,718x296,782x317,811x393,814x471,780x537,754x642||type::polygon@}</row>
    <row label="r2">blender{@value::802x99,799x266,839x450,1006x455,1031x388,1049x251,1051x132,1046x80,983x62,848x67,774x88||type::polygon@}</row>
    <row label="r3">title{@value::54x59,413x59,413x218,54x218||type::rectangle@}</row>
    <row label="r4">time{@value::73x246,340x246,340x354,73x354||type::rectangle@}</row>
    <row label="r5">for{@value::73x388,395x388,395x359,73x359||type::rectangle@}</row>
    <row label="r6">miniblender{@value::51x447,178x447,178x669,51x669||type::rectangle@}</row>
    <row label="r7">stats{@value::388x664,184x664,184x461,388x461||type::rectangle@}</row>
    <row label="r8">brandname{@value::1040x0,1169x0,1169x53,1040x53||type::rectangle@}</row>
    <row label="r9">motor{@value::1004x492,1199x492,1199x684,1004x684||type::rectangle@}</row>

MATCH NUMBER OF ROWS WITH ABOVE FOR THESE VARIABLES:
lrnHotspotIrregularValue
lrnHotspotIrregularCategory
lrnHotspotIrregularShape
lrnHotspotIrregularTime





++Please refer to this link in G drive: https://drive.google.com/drive/folders/1S4iBSkbjISCaY2ZP6mL_GKzSK9cD9ltP for the ff.:
•	Email Invites recording meeting earlier
•	Email Campaigns Checklist
•	How to set-up unique links and email campaigns
•	WIRE emailer VS Decipher Emailer

Please also refer to this knowledgebase article regarding email campaigns: https://decipher.zendesk.com/hc/en-us/sections/360002114914-Email-Campaign-Creation-Management





++HOTSPOT REPORTER
https://confluence.dynata.com/x/Zrt7AQ

https://surveytools.dynata.com/empower/apps/rml6-hotspot-report-generator/public/



++EMPOWER
https://surveytools.dynata.com/empower/toolkit/public/#/login




++SPLIT SCREEN (GRID)


<define label="p1" builder:title="Brands List">
 <row label="p1r1">Brand 1</row>
 <row label="p1r2">Brand 2</row>
 <row label="p1r3">Brand 3</row>
 <row label="p1r4">Brand 4</row>
 <row label="p1r5">Brand 5</row>
 <row label="p1r6">Brand 6</row>
 <row label="p1r7">Brand 7</row>
 <row label="p1r8">Brand 8</row>
 <row label="p1r9">Brand 9</row>
 <row label="p1r10">Brand 10</row>
</define>

<define label="p2" builder:title="Brand Ratings" >
 <row label="p2r1">1</row>
 <row label="p2r2">2</row>
 <row label="p2r3">3</row>
 <row label="p2r4">4</row>
 <row label="p2r5">5</row>
</define>

<radio label="Q1" shuffle="rows" where="report">
 <title>Please rate your experience with each of the following brands.</title>
 <comment>Select one in each row</comment>
 <insert source="p1"/>
 <insert source="p2" as="cols"/>
</radio>

<suspend/>

<radio label="Q1_1"
shuffle="rows"
shuffleBy="Q1"
rowCond="row.label in [r.label for r in Q1.rows.order[0:3]]"
where="survey,notdp">
 <title>Please rate your experience with each of the following brands.</title>
 <comment>Select one in each row</comment>
 <insert source="p1"/>
 <insert source="p2" as="cols"/>
</radio>

<suspend/>

<radio label="Q1_2"
shuffle="rows"
shuffleBy="Q1"
rowCond="row.label in [r.label for r in Q1.rows.order[3:6]]"
where="survey,notdp">
 <title>Please rate your experience with each of the following brands.</title>
 <comment>Select one in each row</comment>
 <insert source="p1"/>
 <insert source="p2" as="cols"/>
</radio>

<suspend/>

<radio label="Q1_3"
shuffle="rows"
shuffleBy="Q1"
rowCond="row.label in [r.label for r in Q1.rows.order[6:]]"
where="survey,notdp">
 <title>Please rate your experience with each of the following brands.</title>
 <comment>Select one in each row</comment>
 <insert source="p1"/>
 <insert source="p2" as="cols"/>
</radio>

<suspend/>

<exec>
splitQuestions = [Q1_1,Q1_2,Q1_3]
for question in splitQuestions:
   for eachRow in question.rows:
       if eachRow.val is not None:
           Q1[eachRow].val = eachRow.val
</exec>







++JAWScip

https://accessibility.blog.gov.uk/2016/11/01/results-of-the-2016-gov-uk-assistive-technology-survey/




++SEGMENTATION
++TYPING TOOL
91 - 1912228  ORD-464885-R6Q6  Schireson  MSFT App Packaging Research

<res label="MSFT_ML_SEGMENTATION_1">x I work on many different projects at the same time</res>
<res label="MSFT_ML_SEGMENTATION_2">x I enjoy dreaming about what could be</res>
<res label="MSFT_ML_SEGMENTATION_3">x I feel overwhelmed when working toward a specific goal</res>
<res label="MSFT_ML_SEGMENTATION_4">x I am always looking to try something new</res>
<res label="MSFT_ML_SEGMENTATION_5">x I prefer finding a good deal</res>
<res label="MSFT_ML_SEGMENTATION_6">x I feel content knowing that I've accomplished something</res>
<res label="MSFT_ML_SEGMENTATION_7">x I am happy with what I have and where I am right now</res>
<res label="MSFT_ML_SEGMENTATION_8">x I want things my way and spend time or effort to get it</res>
<res label="MSFT_ML_SEGMENTATION_9">x I spend a lot of time thinking about and doing things that will improve my future</res>
<res label="MSFT_ML_SEGMENTATION_10">x I could use help managing my time</res>



<block label="segmentation_block">
  <radio
    label="MSFT_ML_SEGMENTATION"
    uses="leftright.1" shuffle="rows">
    <title>Now you will be shown some statements. We would like you to tell us which ones apply most to you.</title>
    <comment>Select one in each row</comment>
    <col label="c1" value="1">Agree with more<br />&lt;&lt;</col>
    <col label="c2" value="2">Agree with more<br />&gt;&gt;</col>
    <row label="r1" rightLegend="${res.MSFT_ML_SEGMENTATION_1}">I work on many different projects at the same time</row>
    <row label="r2" rightLegend="${res.MSFT_ML_SEGMENTATION_2}">I enjoy dreaming about what could be</row>
    <row label="r3" rightLegend="${res.MSFT_ML_SEGMENTATION_3}">I feel overwhelmed when working toward a specific goal</row>
    <row label="r4" rightLegend="${res.MSFT_ML_SEGMENTATION_4}">I am always looking to try something new</row>
    <row label="r5" rightLegend="${res.MSFT_ML_SEGMENTATION_5}">I prefer finding a good deal</row>
    <row label="r6" rightLegend="${res.MSFT_ML_SEGMENTATION_6}">I feel content knowing that I've accomplished something</row>
    <row label="r7" rightLegend="${res.MSFT_ML_SEGMENTATION_7}">I am happy with what I have and where I am right now</row>
    <row label="r8" rightLegend="${res.MSFT_ML_SEGMENTATION_8}">I want things my way and spend time or effort to get it</row>
    <row label="r9" rightLegend="${res.MSFT_ML_SEGMENTATION_9}">I spend a lot of time thinking about and doing things that will improve my future</row>
    <row label="r10" rightLegend="${res.MSFT_ML_SEGMENTATION_10}">I could use help managing my time</row>
  </radio>

  <suspend/>

  <exec>
seg1 = [12.645,10.414,13.788,17.586,11.188,12.628,7.452,7.950,7.745,22.717]
seg2 = [9.189,10.509,13.547,16.499,7.351,8.940,8.145,7.025,5.143,23.103]
seg3 = [10.849,11.253,14.360,33.095,7.719,8.278,6.086,7.249,6.168,22.274]
seg4 = [8.988,7.123,14.082,16.619,9.904,9.280,5.231,7.288,9.064,22.884]
seg5 = [9.062,7.523,11.127,19.322,7.564,9.464,6.609,7.372,6.809,13.150]
seg6 = [11.377,8.191,13.321,31.842,8.086,8.388,5.264,10.726,10.430,21.214]

constant = [-104.525,-84.620,-110.965,-84.671,-64.633,-111.934]

segments = [seg1,seg2,seg3,seg4,seg5,seg6]

scores = [0,0,0,0,0,0]

for s in segments:
 i = segments.index(s)
 for coef in s:
  row = 'r'+str(int(s.index(coef))+1)
  scores[i] = scores[i] + (coef * (int(MSFT_ML_SEGMENTATION.attr(row).val) + 1))
 scores[i] = round(float(scores[i] + constant[i]),2)



### set to segment_percentage
for r in scores:
 row = 'r'+str(int(scores.index(r))+1)
 segment_percentage.attr(row).val = scores[scores.index(r)]


### set to ML_SEG
ML_SEG.val = scores.index(max(scores))
  </exec>

  <float
    label="segment_percentage"
    optional="0"
    size="30"
    ss:postText=""
    ss:preText=""
    where="execute,survey,report">
    <title>Percentage</title>
    <row label="r1">Segment 1</row>
    <row label="r2">Segment 2</row>
    <row label="r3">Segment 3</row>
    <row label="r4">Segment 4</row>
    <row label="r5">Segment 5</row>
    <row label="r6">Segment 6</row>
  </float>

  <radio
    label="ML_SEG"
    optional="1"
    translateable="0"
    where="execute,survey,report">
    <title>CODE INTO THE FOLLOWING SEGMENTS USING TYPING TOOL</title>
    <row label="r1" value="1">DRIVEN PROFESSIONALS</row>
    <row label="r2" value="2">LIFE HACKERS</row>
    <row label="r3" value="3">PRAGMATIC PLANNERS</row>
    <row label="r4" value="4">ECLECTIC EXPLORERS</row>
    <row label="r5" value="5">ACTIVE SEEKERS</row>
    <row label="r6" value="6">LAIDBACK FOLLOWERS</row>
  </radio>

  <suspend/>
</block>








++TABLE MOBILE FRIENDLY:
<div class="safety-app">
... Driving Safety 1 ...
</div>
<div class="safety-app">
... Driving Safety 2 ...
</div>

.safety-app {
   display:inline-block;
   width: 200px;
}




++ACCESSIBILITY INCREASE DECREASE FONT
<note>###################################### ACCESSIBILITY START ######################################</note>
<style name="survey.header"><![CDATA[
<div class="font-plus">
<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 35 28" style="enable-background:new 0 0 35 28;" xml:space="preserve">
<path d="M18.12,27.57l-2-5.78H5.87l-1.89,5.78H0.04L9.45,1.42h3.21l9.33,26.16H18.12z M14.97,18.31L11.01,6.67L7.08,18.31H14.97z"/>
<polygon points="21.21,8.02 31.95,8.02 26.58,1.04 "/>
<path d="M31.42,27.57l-1.35-3.9h-6.92l-1.28,3.9h-2.66l6.35-17.65h2.16l6.3,17.65H31.42z M29.29,21.32l-2.67-7.86l-2.65,7.86H29.29z"/>
</svg>
</div>

<div class="font-minus">
<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 35 28" style="enable-background:new 0 0 35 28;" xml:space="preserve">
<path d="M18.12,27.57l-2-5.78H5.87l-1.89,5.78H0.04L9.45,1.42h3.21l9.33,26.16H18.12z M14.97,18.31L11.01,6.67L7.08,18.31H14.97z"/>
<polygon points="31.95,1.04 21.21,1.04 26.58,8.02 "/>
<path d="M31.42,27.57l-1.35-3.9h-6.92l-1.28,3.9h-2.66l6.35-17.65h2.16l6.3,17.65H31.42z M29.29,21.32l-2.67-7.86l-2.65,7.86H29.29z"/>
</svg>
</div>
<script>if(localStorage.getItem('dFonSize${gv.survey.path.split("/")[-1]}${uuid}')==null) localStorage.setItem('dFonSize${gv.survey.path.split("/")[-1]}${uuid}',12);</script>
<style>.font-minus,.font-plus{font-size:30px;box-shadow:0 1px 5px 0 #ced3e1;border:solid 1px #b6c0cc;background:#fff;display:inline-block;padding:5px 10px;cursor:pointer;position:absolute;top:2px;right:2px;width:30px;box-sizing:content-box}.font-plus{right:60px}.button.back,.button.randomize,.survey-buttons .button{font-size:1.5em}</style>
]]></style>
<style name="survey.respview.footer"><![CDATA[
<style id = "customthemeStyle"></style>
<script>
var currentFont=Number(localStorage.getItem('dFonSize${gv.survey.path.split("/")[-1]}${uuid}'));
$ ("#customthemeStyle").html("html{font-size:"+currentFont+"px}");

$ (document).ready(function () {
	$ (".font-plus").click(function(){ currentFont++; $ ("#customthemeStyle").html("html{font-size:"+currentFont+"px}"); localStorage.setItem('dFonSize${gv.survey.path.split("/")[-1]}${uuid}',currentFont) });
	$ (".font-minus").click(function(){ currentFont--; $ ("#customthemeStyle").html("html{font-size:"+currentFont+"px}"); localStorage.setItem('dFonSize${gv.survey.path.split("/")[-1]}${uuid}',currentFont) });
});
</script>
]]></style>
<note>###################################### ACCESSIBILITY END ######################################</note>




++OVERRIDE verify="zipcode" ERROR MESSAGE
<res label="sys_badZipCode">insert msg</res>




++HAL PORET FONT SIZE OPTIONS SIZE INCREMENT/DECREMENT
.answers, .fir-select2-dropdown {
color: #454545;
font-size: 1.3rem;
font-family: Arial,sans-serif;
}
input[type=text], textarea { font-size: 1.3rem!important; }
.instruction-text{font-style: italic;}



++OE ENCOURAGEMENT
add in <style> after <themes>:
<link rel="stylesheet" type="text/css" href="//resources-na.researchnow.com/DCD/rml6/text_progress/v2.0/styles.css">

update ss:includeJS:
ss:includeJS="/survey/selfserve/dgustlib/res/rnjslib.js?imgsecurity=standard, //resources-na.researchnow.com/DCD/rml6/text_progress/v2.0/application.js, //surveytools.researchnow.com/dcd/jsspellcheck/include.js"

<res label="OE_Encourangement_msg1">You're off to a great start!</res>
<res label="OE_Encourangement_msg2">Keep going, I'm sure you have more to say!</res>
<res label="OE_Encourangement_msg3">Wow! Thank you for your input!</res>

<note>################################# OE ENCOURAGEMENT START #################################</note>
<textarea
  label="APP_OE"
  optional="0">
  <title>Why do you find this app the most exciting?</title>
  <comment>Please be as specific as possible</comment>
  <style name="question.after" wrap="ready"><![CDATA[
var rmlOptions = {
  "language" : "English (USA)",
  "hideReport" : false,
  "reportQID": "APP_OECount",
  "textareaID" : "APP_OE",
  "characterPercentage":100,
  "wordPercentage": 10,
  "checkType": "word", //"word" | "char"
  "enableSpellCheck":true,
  "messages":{
    "10"   : "You're off to a great start!",
    "50"   : "Keep going, I'm sure you have more to say!",
    "100%" : "Wow! Thank you for your input!"
  },
  "debug" : true // true|false to show console.log messages
}
  var s = new TextTool(rmlOptions);

  $ ('.bubble').css('background-color','gray');
  $ ('.bubble_triangle').css('border-color','grey transparent transparent transparent');

  setTimeout(function() {
     $ ('.progressParent').css('height','115px');
     $ ('.progressLines').css('height','115px');

     $ ('.question-text').eq(0).css('color','#454545');
     $ ('.instruction-text').eq(0).css('color','#454545');
     $ ('.question-text').eq(2).css('color','#454545');
     $ ('.instruction-text').eq(2).css('color','#454545');

     $ ('#question_APP_OECount').hide()
   }, 100);
]]></style>
</textarea>

<text
  label="APP_OECount"
  size="25">
  <title>Words</title>
  <comment>Be specific</comment>
  <row label="r1">Total Words</row>
  <row label="r2">Misspelled words</row>
</text>

<suspend/>

<float
  label="APP_METRICS_LOI"
  where="execute,survey,report">
  <title>APP_METRICS LOI (Minutes)</title>
  <exec>
APP_METRICS_LOI.val = (timeSpent() - p.startTime) / 60.0
  </exec>

</float>

<suspend/>

<note>################################# OE ENCOURAGEMENT END #################################</note>




++MULTILANG MULTI LANGUAGE MULTI-LANG ARABIC HEBREW
<style cond="decLang in ['hebrew','arabic']" mode="after" name="respview.client.css"><![CDATA[
<style>
 body { direction: rtl; }
 .survey-buttons { text-align: left !important; }
 #surveyContent, .survey-body, .question-text, .instruction-text,
 .grid.grid-table-mode .row-legend, .grid-desktop-mode.grid-list-mode .cell-section,
 .grid-single-col .cell, .grid[data-settings*='single-col'] .cell,
 .noRows .grid.grid.grid-table-mode .colCount-1 .element,
 .noRows .grid.grid.grid-table-mode .colCount-1 .col-legend { text-align: right !important; }
 .survey-body .fir-hidden { left: auto !important; right: -9999px !important; }
</style>
]]></style>





++CATEGORICAL
<exec>
### Start - CATEGORICAL SAVES function
#mainQ = main question
#catQ = Categorical dummy question
#dir = 1 for rows, 2 for columns, 3 for grid per row, 4 for grid per column

def Categorical(mainQ, catQ, dir=1):
  selected = [] #selected answers in main question

  if dir == 1: #row question
    for eachRow in mainQ.rows:
      if eachRow.val == 1:
        selected.append(int(eachRow.label[1:]))
    selected.sort()
    print selected
    for i, eachSel in enumerate(selected):
      catQ.rows[i].val = selected[i]

  if dir == 2: #column question
    for eachCol in mainQ.cols:
      if eachCol.val == 1:
        selected.append(int(eachCol.label[1:]))
    selected.sort()
    for i, eachSel in enumerate(selected):
      catQ.cols[i].val = selected[i]

  if dir == 3:
    selectedCol = []
    for eachRow in mainQ.rows:
      if eachRow.any:
        for eachCol in mainQ.cols:
          if mainQ.attr('%s' % (eachRow.label)).attr('%s' % (eachCol.label)):
            selectedCol.append(int(eachCol.label[1:]))

        selectedCol.sort()
        for i, eachSel in enumerate(selectedCol):
      	  catQ.attr('%s' % (eachRow.label))[i].val = selectedCol[i]

        selectedCol = []

  if dir == 4:
    selectedRow = []
    for eachCol in mainQ.cols:
      if eachCol.any:
        for eachRow in mainQ.rows:
          if mainQ.attr('%s' % (eachCol.label)).attr('%s' % (eachRow.label)):
            selectedRow.append(int(eachRow.label[1:]))

        selectedRow.sort()
        for i, eachSel in enumerate(selectedRow):
      	  catQ.attr('%s' % (eachCol.label))[i].val = selectedRow[i]

        selectedRow = []

### Stop - CATEGORICAL SAVES function
</exec>

<note>##### CATEGORICAL FOR CHECKBOX #####</note>
<number
  label="cQ##"
  size="3"
  translateable="0"
  where="execute,survey,report">
  <title>Categorical values for F8.</title>
  <exec>
Categorical(Q##, cQ##, 1) #3rd parameter = 1 for checkbox
  </exec>

  <row label="r1">1st item</row>
  <row label="r2">2nd item</row>
  <row label="r3">3rd item</row>
  <row label="r4">4th item</row>
  <row label="r5">5th item</row>
  <row label="r6">6th item</row>
  <row label="r7">7th item</row>
  <row label="r8">8th item</row>
  <row label="r9">9th item</row>
  <row label="r10">10th item</row>
  <row label="r11">11th item</row>
</number>


<note>##### CATEGORICAL FOR GRID #####</note>
<number
 label="cQ##_CAT"
 cond="cQ##.any"
 size="3"
 translateable="0"
 where="execute,survey,report">
  <title>Categorical for cQ##.</title>
  <exec>
Categorical(Q##, cQ##_CAT, 3) #3rd parameter = 3 for grid
  </exec>

  <row label="r1">1</row>
  <row label="r2">2</row>
  <row label="r3">3</row>
  <row label="r4">4</row>
  <row label="r5">5</row>
  <row label="r6">6</row>
  <row label="r7">7</row>
  <row label="r8">8</row>
  <row label="r9">9</row>
  <row label="r10">10</row>
  <row label="r11">11</row>

  <col label="c1">1</col>
  <col label="c2">2</col>
  <col label="c3">3</col>
  <col label="c4">4</col>
  <col label="c5">5</col>
</number>

<suspend/>




++ETRAP 2 for LATAM PROJECTS
<exec when="init">
############################################################
#ETRAP NOTES!!!!!
#QID OE    - Q1
#QID Other - Q1.r1.open
#label - string, if nothing to input... use ""
#min - minimum chars required
############################################################

def etrap2(QID,label,min):
  if len(label) gt 0:
   u=QID.decode('utf-8')
   if len(u) lt min:
    error(res.err_105 % label)
    return


   if QID.isdigit():
    error(res.err_103 % label)
    return

  else:
   u=(QID.val).decode('utf-8')
   if len(u) lt min:
    error(res.err_104)
    return
   if QID.val.isdigit():
    error(res.err_102)
    return
</exec>

<res label="errDup">Sus respuestas no deben tener duplicados.</res>
<res label="err_102">A sua resposta não pode ser numerica.</res>
<res label="err_103">A sua resposta para '%s' não pode ser numerica.</res>
<res label="err_104">Por favor, seja específico com a sua resposta.</res>
<res label="err_105">Por favor, seja específico com a sua resposta para '%s'.</res>
<res label="categErr">Hemos encontrado dificultades en guardar tus respuestas, por favor ayudanos con tus respuesta(s) nuevamente.</res>






++SHOW LOGO PER PAGE
add in: <survey>
  ss:logoAlt="Rage Study 2020"
  ss:logoPosition="middle"







++DFP; Digital Fingerprinting
Allow browsers to enter the survey multiple times
inside <survey>, update:
  browserDupes=""

Enable DFP back ON:
  browserDupes="safe"


OR YOU CAN DISABLE IN SAMPLESOURCES:
<samplesource list="#" disableBrowserDupes="1">





++AUTOFILL ROW
<checkbox
  label="dB1x1qual"
  optional="1" where="execute,survey,report" translateable="0">
  <title>DUMMY - B1x1 QUALIFIED</title>
  <row label="r1"  autofill="B1x1.r1" >Dan's</row>
  <row label="r2"  autofill="B1x1.r2" >Econo Foods</row>
  <row label="r3"  autofill="B1x1.r3" >Family Fare</row>
  <row label="r4"  autofill="B1x1.r4" >Sunmart Foods</row>
  <row label="r5"  autofill="B1x1.r5" >Albertson's/Safeway</row>
  <row label="r6"  autofill="B1x1.r6" >Aldi</row>
  <row label="r7"  autofill="B1x1.r7" >Cash Wise Food Mart</row>
  <row label="r8"  autofill="B1x1.r8" >Hornbachers</row>
  <row label="r9"  autofill="B1x1.r9" >Wal-Mart</row>
  <row label="r10" autofill="B1x1.r10">Costco</row>
  <row label="r11" autofill="B1x1.r11">Sam's Club</row>
  <row label="r12" autofill="B1x1.r12">Target</row>
  <row label="r13" autofill="B1x1.r13">Trader Joe's</row>
  <row label="r14" autofill="B1x1.r14">Whole Foods</row>
</checkbox>

<suspend/>



++SLIDERPOINTS.3
<select
  label="Q15"
  ss:questionClassNames="sq-sliderpoints"
  uses="sliderpoints.3">
  <title>How important do you feel company leadership thinks SalesForce is to the overall success of your company?</title>
  <choice label="ch1" value="1">Not at All Important</choice>
  <choice label="ch2" value="2"/>
  <choice label="ch3" value="3"/>
  <choice label="ch4" value="4"/>
  <choice label="ch5" value="5">Extremely Important</choice>
</select>

<suspend/>





++SLIDER WITH LEFT AND RIGHT HEADERS sliderpoints.3
<select
  label="Q17"
  ss:questionClassNames="sq-sliderpoints"
  uses="sliderpoints.3">
  <title>Comparing each set of words, which one more describes how you feel about SalesForce?</title>
  <choice label="ch1" value="1">Completely describes</choice>
  <choice label="ch2" value="2">Somewhat Describes</choice>
  <choice label="ch3" value="3">Neither Describes</choice>
  <choice label="ch4" value="4">Somewhat Describes</choice>
  <choice label="ch5" value="5">Completely Describes</choice>
  <row label="r1"><div class="holderdiv"><span class="spanalignleft">Difficult</span><span class="spanalignright">Easy</span></div></row>
  <row label="r2"><div class="holderdiv"><span class="spanalignleft">Complicated</span><span class="spanalignright">Simple</span></div></row>
  <row label="r3"><div class="holderdiv"><span class="spanalignleft">Frustrating</span><span class="spanalignright">Dreamy</span></div></row>
  <row label="r4"><div class="holderdiv"><span class="spanalignleft">Confusing</span><span class="spanalignright">User-friendly</span></div></row>
  <row label="r5"><div class="holderdiv"><span class="spanalignleft">Obstacle</span><span class="spanalignright">Helpful</span></div></row>
  <row label="r6"><div class="holderdiv"><span class="spanalignleft">Overrated</span><span class="spanalignright">Powerful</span></div></row>
  <row label="r7"><div class="holderdiv"><span class="spanalignleft">Tool</span><span class="spanalignright">Process</span></div></row>
  <row label="r8"><div class="holderdiv"><span class="spanalignleft">Frivolous</span><span class="spanalignright">Necessary</span></div></row>
<style name="question.after"><![CDATA[
<style>
  .holderdiv{
    height: 20px;
  }
  .spanalignleft{
    text-align: left;
    float:left;
  }
  .spanalignright{
    text-align: right;
    float:right;
  }
</style>
]]></style>
</select>
<suspend/>






++REPOPULATE HEADERS DEPENDING ON SPECIFIED NUMBER OF ROWS
++REPEAT HEADER
<style label="repeatHeader" arg:xrepeat="2" name="question.after" wrap="ready"><![CDATA[
var indx = Math.round($ ('.answers .grid tbody:last tr').length/$(xrepeat));
if(indx > 5){
  var repHead = $ ('.answers .grid tbody:first tr.row-col-legends').clone();
  repHead.insertAfter($ ('.answers .grid tbody:last tr').eq(indx-1));
}
]]></style>





++SPEEDER CHECK FOR SPECIFIC COUNTRY
  <exec>
#######################################
# Run Quality Checks
#######################################
isStraightliner()
isSpeeder()
isSlowpoke()


#added speeder for India
if isIndia():
  isSpeederINDIA()  #26mins -- check function for this at near end of xml
  </exec>



add in # Quality Checks Functions:

def isSpeederINDIA():
    p.minTimeINDIA = 1561     #terminate if someone completes the survey in 26 minutes or less (for India only)

    speederAuto.val = speederAuto.r2.index

    if timeSpent() lt p.minTimeINDIA:
        speederAuto.val = speederAuto.r1.index
        setMarker('indiaSPEEDER')







++CARDSORT MX
++CAROUSEL MX
++CARD SORT MX
    <note>Mx Cardsort Carousel (Image)</note>
    <radio label="mxCardsortCarouselImage" builderHint="{&quot;rocochoName&quot;:&quot;radiogrid&quot;}" fir="off" surveyDisplay="desktop">
      <title>Please categorize the following banks, based on your impression of their logo.</title>
      <comment>You can drag each logo and drop it into the group of your choice.&lt;br /&gt;&lt;br /&gt;</comment>
      <col label="c1">Investment</col>
      <col label="c2">Retail</col>
      <col label="c3">Commercial</col>
      <col label="c4">Online</col>
      <row label="r1">America Trust Bank{@imageURL::bank_1.jpg||largeImageURL::bank_1_L.jpg||width::120px||height::140px@}</row>
      <row label="r2">Federal Money Bank{@imageURL::bank_2.jpg||largeImageURL::bank_2_L.jpg||width::120px||height::140px@}</row>
      <row label="r3">Stock and Saving Bank{@imageURL::bank_3.jpg||largeImageURL::bank_3_L.jpg||width::120px||height::140px@}</row>
      <row label="r4">America United Bank{@imageURL::bank_4.jpg||largeImageURL::bank_4_L.jpg||width::120px||height::140px@}</row>
      <row label="r5">Global Bank{@imageURL::bank_5.jpg||largeImageURL::bank_5_L.jpg||width::120px||height::140px@}</row>
      <row label="r6">Bank of the USA{@imageURL::bank_6.jpg||largeImageURL::bank_6_L.jpg||width::120px||height::140px@}</row>
      <row label="r7">Bank of the USA{@imageURL::bank_7.jpg||largeImageURL::bank_7_L.jpg||width::120px||height::140px@}</row>
      <row label="r8">Bank of the USA{@imageURL::bank_8.jpg||largeImageURL::bank_8_L.jpg||width::120px||height::140px@}</row>
<style name="page.head"><![CDATA[
<style>
  .answers{display:none;}
  #btn_continue {
    visibility: hidden;
  }
  .mx-cardsort-container .mx-collapsible-groupholder.mx-cardsort-itemholder-inner {
    border: none;
  }
  .label{
    text-align: left !important;
  }
</style>
]]></style>
      <style name="question.after"><![CDATA[
<div class="mx-stage" id="mx-stage-${this.label}"></div>
<script type="text/javascript" src="//ssiprojects.s3.amazonaws.com/rnd/rnd-mx-framework/v2.1/loader/application.min.js"></script>

        <script>
        // =============== DOCUMENTATION ===============> https://confluence.dynata.com/x/hBCbAQ

            var platforms = {
                "decipher": "decipher",
                "confirmit": "confirmit"
            }
            var currentPlatform = platforms.decipher;

            if (!mx.qDefs) {

        mx.qDefs = {};
                if(!mx.toolLoader) {
                    mx.toolLoader = new mx.Loader({
                        "baseFileURL": "//ssiprojects.s3.amazonaws.com/rnd/rnd-mx-framework/v2.1/",
                        "scriptDeps": [
              "core/libs.min.js",
              "https://s3.amazonaws.com/ssiprojects/rnd/plugins/jquery-ui/1.12.1/jquery-ui.min.js",
              //"https://ssiprojects.s3.amazonaws.com/rnd/plugins/jquery.ui.touch-punch.min.js",
              "https://ssiprojects.s3.amazonaws.com/rnd/plugins/jquery-ui-touch-punch/0.2.3/clickfix/jquery.ui.touch-punch.js",
              "core/advanced_ui/Carousel_libs.js",
              "core/advanced_ui/Carousel.js"
            ],
                        "cssDeps": [
              "core/style.css",
              "core/libs.css",
              "ionicons/css/ionicons.min.css",
              "https://s3.amazonaws.com/ssiprojects/rnd/plugins/jquery-ui/jquery-ui.css",
              "core/advanced_ui/Carousel.css"
            ],
                        "coreFile": "core/application.min.js",
                        "messages": "https://surveytools.researchnow.com/mx/messages/getMsg.php?callback=window.saveMessages&lang=9",
                        "platformInterface": { js: "platform_interface_" + currentPlatform + "/application.min.js", css: "platform_interface_" + currentPlatform + "/style.css" }
                    });
                    console.log("mx.toolLoader: ", mx.toolLoader);
                }
            }
             mx.qDefs["${this.label}"] = ${jsexport()};
             var isTest = "${gv.isUser() and not gv.debug.respview}" === "True";

            var toolSettings = {
                "toolJs": "card_sort/2.0/application.min.js",
                "toolName": "Cardsort",
                "jsToLoad": [],
                "cssToLoad": ["card_sort/2.0/style.css"],
                "baseToolPath": "https://ssiprojects.s3.amazonaws.com/rnd/rnd-mx-tools/",
                "container": "#mx-stage-${this.label}",
                "toolCssNames": ["testCardSort"],
                "imageBaseURL": "https://survey-d.dynata.com/survey/selfserve/53b/2003518/",
                "minRequired": ${len(this.rows)},
                "maxAllowed": ${len(this.rows)},
                "timeDataNumDecimals": 0,
                "autoNext": false,
                "numRequiredGroups": 1,
                "maxAllowedInGroups": 11,
                "maxCardDrop": 1,
                "showZoom": false,
                "zoomPosition": "bottom-right",
                "oneByOne": true,
                "isRanking": false,
                "isLadder": false,
                "showCounter": true,
                "countPrefix": "",
                "countDelimiter": "/",
                "countSuffix": "",
                "compOrder": ["itemContainer","bucketContainer"],
                "numCardsCarousel": 1,
                "animationSpeed": 300,
        "cardLayout": "carousel", // grid, carousel
        "carouselType": "horizontal", // horizontal, vertical
                "tolerance": "pointer",
                "bucketWidth": 160,
                "bucketHeight": 260,
                "droppedCardWidth": 140,
                "droppedCardHeight": 50,
                "nextButton": "#btn_continue",
                "qid": getFormName(1),
                "formNames":{
                    "qid": getFormName(1),
                    "time_qid": "",
                    "order_qid": "",
                    "exclusive_qid": ""
                },
                "answerItemConfig": {
                    // "width": "100%",
                    // "numItemsPerRow": { "small": 2, "medium": 3, "large": 3 }
                    "width": "300px",
                    "height": "100px",
                    "numItemsPerRow": 4
                },
                mobileConfig: {},
                "customValidation": function(q){
                    console.log("customValidation()");
                    return true;
                }
            };

            mx.toolLoader.registerSettings(toolSettings, function(info){
                // console.log("Questions loaded");
                // console.log(JSON.stringify(info.bridge._platformInterface._questions));
                console.log("info: ", info);

                info.bridge.setPageValidation(function(){
                        console.log("setPageValidation");
                        return true;
                });

                info.instance.on("tool_loaded", function(e){
                  //console.log("tool_loaded", e);
                  if(isTest){
                      ${initMxDataToggle()}
                  }
                });

                info.instance.on("item_dropped", function(e, payload) {
                    // console.log("item_dropped e.detail.precode: ", e.detail);
                    // info.bridge.platformInterface.setQuestionAnswer();
                });
            });

            $ (function(){
                mx.toolLoader.initLoad();

        $.getScript('${MxToolUsageUrl('mxcardsort')}');
            });
        </script>
]]></style>


    </radio>








++ADD TEXT AT TOP LEFT PART OF GRID
<style name="question.left-blank-legend"><![CDATA[
<$(tag) class="cell empty empty-left empty-$(pos) unused ${"desktop" if this.grouping.cols else "mobile"} border-collapse">
<div align="center"><b>SOME TEXT HERE...</b></div></$(tag)>
]]></style>







++UNIQUE LINKS : LATEST : USE ME
++UNIQUE LINKS : LATEST : USE ME
++UNIQUE LINKS : LATEST : USE ME
++UNIQUE LINKS : LATEST : USE ME
++UNIQUE LINKS : LATEST : USE ME
++UNIQUE LINKS : LATEST : USE ME
++UNIQUE LINKS : LATEST : USE ME
++UNIQUE LINKS : LATEST : USE ME
++UNIQUE LINKS : LATEST : USE ME
++UNIQUE LINKS : LATEST : USE ME
-Create new <samplesource>
	Example:
	  NOTE: verify if disableBrowserDupes="1" is required; NOT included by default
  <samplesource list="3">
    <title>Client Sample</title>
    <invalid>You are missing information in the URL. Please verify the URL with the original invite.</invalid>
    <completed>It seems you have already entered this survey.</completed>
    <var filename="clientID.dat" name="cid" unique="1"/>
    <exit cond="terminated">Thank you for taking our survey.</exit>
    <exit cond="qualified">Thank you for taking our survey. Your efforts are greatly appreciated!</exit>
    <exit cond="overquota">Thank you for your participation, however this survey is now closed.</exit>
  </samplesource>

-At the start: <survey>
	update:   autosaveKey="rnid,psid,cid"

-Add capturer for cid:
<text
  label="dcid" cond="list=='3'"
  size="40"
  optional="1" where="execute,survey,report" translateable="0">
  <title>DUMMY - CID FROM CLIENT UNIQUE LINK</title>
<exec>
if list=='3':
  dcid.val = cid
</exec>
</text>
<suspend/>


-Create dat file with numeric Client IDs (cid) - include test ids
  Example clientID.dat (no column header):
1
2
3
...
10
11
...
1500
9998
9999

-Upload clientID.dat in Upload System Files

-Copy live
-Unique links are ready, example:
https://survey-d.dynata.com/survey/selfserve/53b/2009132?list=3&cid=$cid




++EMAIL CAMPAIGNS (SURVEY needs to be LIVE)
++EMAIL INVITES
-Create xlsx file RecepientList.xlsx
  Example:
cid	email	fname	segno
0026	comments@crystallake.org	Aaron	1
0027	szarowicza@douglavillega.gov	Aaron	1

Columns:
  cid (required) - needs to match with what is specified in UNIQUE LINKS sample source
  email (required) - where the survey will be sent
  fname (optional) - for pipe-in
  segno (optional) - for batch sends
    Example:  0 - test
              1 - LIVE batch 1
              2 - LIVE batch 2

-Go to Responses > Email Campaigns

-Create +New Campaign

-Click on: Recepient List
  Upload RecepientList.xlsx
  Check: All recepient....
  Upload
  Ok

-Click on: Survey URL (left side of []Preview)
  Click Edit
  Select the Participant Source the Unique Links belong to:
    list=3
  Check "Include in URL" the columns you want to be included in the URL
    cid (required)
  Save

-Click on: Seed List
  Populate data to whoever wants to receive a test email:
    cid: TEST cid * must be in the uploaded clientID.dat file
    email: whoever wants to receive
    other data: populate them based on required in clientID.dat file

-Click on: Settings
  Populate the fields below depending on client specs:
    Sender Name:
    From address:
    Reply to address:

		IMPORTANT!!!! DO NOT USE [invite@decipherinc.com] IN FROM AND TO _ THIS IS NOT ALLOWED
		ALWAYS ASK FROM AND TO FROM CLIENT:
		IF CNAME IS NOT VERIFIED, REQUEST CNAME FROM: support-d@dynata.com
			Please assist us in adding CNAME of the client specific email below so we can use in Email Campaigns “From” box:


-Update the Survey body
  Match Client specs
  Pipe in: [fname] - fname should be found in RecepientList.xlsx

-Testing (UNIQUE LINKS setup should be copied live)
  Go to Checklist
  Update Seedlist to who you want to receive Test Links
  Click Email Testing > Send Test Email
  Check who you want to receive Test Links
  Send

-Launch Campaign
  Shuffle List: check
  Include Seed List: uncheck
  Unabridged List: uncheck

  Specify: Send [how many]...

  Send Emails








++ZIP FROM FILE (ASURION) ****** USE ME FOR region4 ********
++ZIP FROM FILE (ASURION) ****** USE ME FOR region4 ********
++ZIP FROM FILE (ASURION) ****** USE ME FOR region4 ********
++ZIP FROM FILE (ASURION) ****** USE ME FOR region4 ********
++ZIP FROM FILE (ASURION) ****** USE ME FOR region4 ********
++ZIP FROM FILE (ASURION) ****** USE ME FOR region4 ********
++ZIP FROM FILE (ASURION) ****** USE ME FOR region4 ********
++ZIP FROM FILE (ASURION) ****** USE ME FOR region4 ********
++ZIP FROM FILE (ASURION) ****** USE ME FOR region4 ********
++ZIP FROM FILE (ASURION) ****** USE ME FOR region4 ********
++ZIP FROM FILE (ASURION) ****** USE ME FOR region4 ********
++ZIP FROM FILE (ASURION) ****** USE ME FOR region4 ********
++ZIP FROM FILE (ASURION) ****** USE ME FOR region4 ********
++ZIP FROM FILE (ASURION) ****** USE ME FOR region4 ********
++ZIP FROM FILE (ASURION) ****** USE ME FOR region4 ********
++ZIP FROM FILE (ASURION) ****** USE ME FOR region4 ********
++ZIP FROM FILE (ASURION) ****** USE ME FOR region4 ********
.DAT CAN BE FOUND HERE: C:\j.a.y
zip.dat

<block label="ZIPINFO_BLOCK">
  <text
   label="S5"
   optional="0"
   size="5"
   verify="zipcode">
    <title>Please specify your zip code</title>
    <style label="boxLen" arg:limit="5" name="question.after" wrap="ready"><![CDATA[
$ (':text').attr('maxlength',$(limit))
]]></style>
  </text>

  <suspend/>

  <exec>
ZipFile= File("zip.dat", "zipcode")

zipInfo = ZipFile.get(S5.val)
print S5.val
print zipInfo
HP_cityName.val = None
HP_state.val=None
HP_region4.val=None

if zipInfo:
    HP_state.val = HP_state.attr("r%s" % zipInfo["state_abbr"]).index
    if zipInfo["census_region"] not in (None, ''):
        HP_region4.val = HP_region4.attr("r%s" % zipInfo["census_region"]).index
        HP_cityName.val = zipInfo["city_name"]
    else:
        HP_region4.val = HP_region4.r99.index
    HP_cityName.val = zipInfo["city_name"]
else:
    HP_region4.val = HP_region4.r99.index
    HP_state.val = HP_state.rXX.index
  </exec>

  <text
   label="HP_cityName"
   where="execute,survey,report">
    <title>Hidden Question.  City name from the zipcode entered in S5.</title>
  </text>

  <select
   label="HP_state"
   optional="1"
   where="execute,survey,report">
    <title>State Name</title>
    <choice label="rAL" value="1">Alabama</choice>
    <choice label="rAK" value="2">Alaska</choice>
    <choice label="rAZ" value="3">Arizona</choice>
    <choice label="rAR" value="4">Arkansas</choice>
    <choice label="rCA" value="5">California</choice>
    <choice label="rCO" value="6">Colorado</choice>
    <choice label="rCT" value="7">Connecticut</choice>
    <choice label="rDE" value="8">Delaware</choice>
    <choice label="rDC" value="9">Washington, D.C.</choice>
    <choice label="rFL" value="10">Florida</choice>
    <choice label="rGA" value="11">Georgia</choice>
    <choice label="rHI" value="12">Hawaii</choice>
    <choice label="rID" value="13">Idaho</choice>
    <choice label="rIL" value="14">Illinois</choice>
    <choice label="rIN" value="15">Indiana</choice>
    <choice label="rIA" value="16">Iowa</choice>
    <choice label="rKS" value="17">Kansas</choice>
    <choice label="rKY" value="18">Kentucky</choice>
    <choice label="rLA" value="19">Louisiana</choice>
    <choice label="rME" value="20">Maine</choice>
    <choice label="rMD" value="21">Maryland</choice>
    <choice label="rMA" value="22">Massachusetts</choice>
    <choice label="rMI" value="23">Michigan</choice>
    <choice label="rMN" value="24">Minnesota</choice>
    <choice label="rMS" value="25">Mississippi</choice>
    <choice label="rMO" value="26">Missouri</choice>
    <choice label="rMT" value="27">Montana</choice>
    <choice label="rNE" value="28">Nebraska</choice>
    <choice label="rNV" value="29">Nevada</choice>
    <choice label="rNH" value="30">New Hampshire</choice>
    <choice label="rNJ" value="31">New Jersey</choice>
    <choice label="rNM" value="32">New Mexico</choice>
    <choice label="rNY" value="33">New York</choice>
    <choice label="rNC" value="34">North Carolina</choice>
    <choice label="rND" value="35">North Dakota</choice>
    <choice label="rOH" value="36">Ohio</choice>
    <choice label="rOK" value="37">Oklahoma</choice>
    <choice label="rOR" value="38">Oregon</choice>
    <choice label="rPA" value="39">Pennsylvania</choice>
    <choice label="rRI" value="40">Rhode Island</choice>
    <choice label="rSC" value="41">South Carolina</choice>
    <choice label="rSD" value="42">South Dakota</choice>
    <choice label="rTN" value="43">Tennessee</choice>
    <choice label="rTX" value="44">Texas</choice>
    <choice label="rUT" value="45">Utah</choice>
    <choice label="rVT" value="46">Vermont</choice>
    <choice label="rVA" value="47">Virginia</choice>
    <choice label="rWA" value="48">Washington</choice>
    <choice label="rWV" value="49">West Virginia</choice>
    <choice label="rWI" value="50">Wisconsin</choice>
    <choice label="rWY" value="51">Wyoming</choice>
    <choice label="rXX" value="99">Not in the US</choice>
  </select>

  <radio
   label="HP_region4"
   optional="1"
   translateable="0"
   where="execute,survey,report">
    <title>Hidden Question.  Region 4 mapping from the zipcode entered in S5.</title>
    <row label="r1" value="1">Northeast</row>
    <row label="r2" value="2">Midwest</row>
    <row label="r3" value="3">South</row>
    <row label="r4" value="4">West</row>
    <row label="r99" value="99">Not in the US</row>
  </radio>

  <suspend/>

  <term cond="HP_region4.r99" label="HP_region4term">HP_region4: Not in the US.</term>
</block>

<suspend/>




++DISPLAY TEXT IN FOOTER
<res label="Q218FooterText">Before continuing to the next screen, please check your numbers one last time to make sure you are satisfied that you have assigned just the right number of points to each feature in terms of its relative importance to your decision to purchase any Vizio television.</res>

<style name="question.after" wrap="ready"><![CDATA[
$ ('#question_Q218').after("<div style='padding-left: 25px; font-size: 1.5rem;width: 900px;'><span>${res.Q218FooterText}</span></div><br /><br /><br /><br />")
$ ('#question_Q218').after("<div style='padding-left: 25px; font-size: 1.5rem;width: 900px;'><span>Definition:</span></div><br /><br />")
]]></style>

Result is found above Continue button and after options list:
"
Definition:
Before continuing to the next screen, please check your numbers one last time to make sure you are satisfied that you have assigned just the right number of points to each feature in terms of its relative importance to your decision to purchase any Vizio television.
"




++VOXPOPME VOX POP ME
https://voxpopme.zendesk.com/hc/en-gb/articles/360015612534-Embedding-Voxpopme-in-Decipher

<style mode="after" name="respview.client.js" with="Q##"><![CDATA[
<script>

  var vpm_widget_config = {
      project_id: "1b25247e4a0f109b3f658a96823fa1ef", // change per project
      additional_data: { // change per project
          'Dynata ID Number': '${pid}',
          'Trigger Quex': 'Q18. In the next 3-6 months, how likely are you to continue with your mobile protection plan?',
          'Respondent Rating': '${QSource.selected.text}',
          'Gender': '${S2.selected.text}',
          'Age': '${S3.selected.value}'
      },
      settings: {
          locale: "[Language]"
      },
      disable_next_button: function() {
          document.querySelectorAll("#btn_continue, #btn_finish")[0].style.display = "none";
          document.querySelectorAll("#btn_continue, #btn_finish")[0].setAttribute("disabled", true);
      },
      enable_next_button: function() {
          document.querySelectorAll("#btn_continue, #btn_finish")[0].style.display = "block";
          document.querySelectorAll("#btn_continue, #btn_finish")[0].removeAttribute("disabled");
      }
  };

document.addEventListener("DOMContentLoaded", function(event) {
  document.querySelectorAll("#btn_continue, #btn_finish")[0].style.display = "none";
  document.querySelectorAll("#btn_continue, #btn_finish")[0].setAttribute("disabled", true);
  var checkbox = document.getElementsByClassName("input checkbox")[0];
  checkbox.onchange = function(){
      if (checkbox.checked){
          document.querySelectorAll("#btn_continue, #btn_finish")[0].style.display = "block";
          document.querySelectorAll("#btn_continue, #btn_finish")[0].removeAttribute("disabled");
      } else {
          document.querySelectorAll("#btn_continue, #btn_finish")[0].style.display = "none";
          document.querySelectorAll("#btn_continue, #btn_finish")[0].setAttribute("disabled", true);
      }
  }
});

!function(a,b,c,d){function e(){var a=b.createElement(c);
a.type="text/javascript",a.src=d;var e=b.getElementsByTagName(c)[0];
e.parentNode.insertBefore(a,e)}a.attachEvent?a.attachEvent("onload",e):a.addEventListener("load",e,!1)}
(window,document,"script","https://capture.voxpopme.net/main.js");
</script>
]]></style>

<block label="Q##_VoxPopMe" cond="QX2.r1">
<checkbox
  label="Q##"
  optional="1">
  <title>Thank you for agreeing to record a video! Before we get started, please be sure to review the following tips for recording the very best videos on your webcam or mobile device. In order to receive the panel's $5 curreny, your submission must be approved by our review team first - so make sure your video isn't rejected.<br />
      <ul>
      	<li style="list-style-type:none;"> - Provide as much detail as you can</li>
      	<li style="list-style-type:none;"> - Make sure you have plenty of light so we can clearly see you</li>
      	<li style="list-style-type:none;"> - Avoid places with lots of background noise so we can clearly hear you</li>
      </ul>
      <br /><br />
      This is what your video should look like:<br />
      <div style="text-align:center"><img src="[rel voxpopmeimg.jpg]" /></div>
      <br /><br />
      Answer the following question with as much detail as possible:<br />
      <br />
      Please tell us your reasons for saying that you are <u>${dQ18pipe.selected.text}</u> to continue your mobile protection plan.<br />
      For example, what about the protection plan makes you feel that way?<br />
      Was there a recent experience or events that influenced your decision, and if so, what happened?<br />
      <br />
      <b>Your reply should be between 30-60 seconds in length. <span style="color: #6495ED">For additional information on how to record your video, please <a href="[rel voxpopupme.png]" data-fancybox="">click here</a>.</span> </b><br />
      <div class="vpm-capture-widget"></div></title>
  <row label="r1">I'm having technical difficulty or would no longer like to record</row>
  <style name="question.after"><![CDATA[
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css">
    <script src="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js"></script>
]]></style>
</checkbox>

<suspend/>

<radio
  label="hQ##"
  optional="1"
  translateable="0"
  where="execute,survey,report">
  <title>DUMMY - UPLOADED VIDEO TO VOXPOPME</title>
  <exec>
if not Q##.r1:
  hQ##.val = hQ##.r1.index
else:
  hQ##.val = hQ##.r2.index
  </exec>

  <row label="r1" value="1">UPLOADED A VIDEO</row>
  <row label="r2" value="2">DID NOT UPLOAD A VIDEO</row>
</radio>

<suspend/>
</block>

<quota cond="hQ##.r1" overquota="noqual" sheet="Q##_tally"/>

++VOXPOPME VOX POP ME PRIVACY POLICY
<a href="https://site.voxpopme.com/en/privacy-policy/" target="_blank">Voxpopme’s privacy policy</a>






++ASURION STANDARD ZIP QUESTION
++SEE LINK FOR ZIP FILE UPLOADED: 115 - ORD-501824-Y8P1 for Asurion
<block label="STANDARD_ZIP_BLOCK" sst="0">
  <select
   label="S4">
    <title>In which state do you live?</title>
    <choice label="rAL">Alabama</choice>
    <choice label="rAK">Alaska</choice>
    <choice label="rAZ">Arizona</choice>
    <choice label="rAR">Arkansas</choice>
    <choice label="rCA">California</choice>
    <choice label="rCO">Colorado</choice>
    <choice label="rCT">Connecticut</choice>
    <choice label="rDE">Delaware</choice>
    <choice label="rDC">Washington, D.C.</choice>
    <choice label="rFL">Florida</choice>
    <choice label="rGA">Georgia</choice>
    <choice label="rHI">Hawaii</choice>
    <choice label="rID">Idaho</choice>
    <choice label="rIL">Illinois</choice>
    <choice label="rIN">Indiana</choice>
    <choice label="rIA">Iowa</choice>
    <choice label="rKS">Kansas</choice>
    <choice label="rKY">Kentucky</choice>
    <choice label="rLA">Louisiana</choice>
    <choice label="rME">Maine</choice>
    <choice label="rMD">Maryland</choice>
    <choice label="rMA">Massachusetts</choice>
    <choice label="rMI">Michigan</choice>
    <choice label="rMN">Minnesota</choice>
    <choice label="rMS">Mississippi</choice>
    <choice label="rMO">Missouri</choice>
    <choice label="rMT">Montana</choice>
    <choice label="rNE">Nebraska</choice>
    <choice label="rNV">Nevada</choice>
    <choice label="rNH">New Hampshire</choice>
    <choice label="rNJ">New Jersey</choice>
    <choice label="rNM">New Mexico</choice>
    <choice label="rNY">New York</choice>
    <choice label="rNC">North Carolina</choice>
    <choice label="rND">North Dakota</choice>
    <choice label="rOH">Ohio</choice>
    <choice label="rOK">Oklahoma</choice>
    <choice label="rOR">Oregon</choice>
    <choice label="rPA">Pennsylvania</choice>
    <choice label="rRI">Rhode Island</choice>
    <choice label="rSC">South Carolina</choice>
    <choice label="rSD">South Dakota</choice>
    <choice label="rTN">Tennessee</choice>
    <choice label="rTX">Texas</choice>
    <choice label="rUT">Utah</choice>
    <choice label="rVT">Vermont</choice>
    <choice label="rVA">Virginia</choice>
    <choice label="rWA">Washington</choice>
    <choice label="rWV">West Virginia</choice>
    <choice label="rWI">Wisconsin</choice>
    <choice label="rWY">Wyoming</choice>
    <style cond="1" name="question.after"><![CDATA[
<style>
  .question, .input{
    font-family: Arial,sans-serif !important;
  }
  </style>
]]></style>
  </select>

  <suspend/>

  <exec>
s4label = S4.selected.label

if s4label in ['rWA','rOR','rCA','rAK','rHI']:
	dRegion.val = dRegion.r1.index
elif s4label in ['rMT','rID','rWY','rNV','rUT','rCO','rAZ','rNM']:
	dRegion.val = dRegion.r2.index
elif s4label in ['rND','rSD','rNE','rKS','rMN','rIA','rMO']:
	dRegion.val = dRegion.r3.index
elif s4label in ['rWI','rIL','rMI','rIN','rOH']:
	dRegion.val = dRegion.r4.index
elif s4label in ['rTX','rOK','rAR','rLA']:
	dRegion.val = dRegion.r5.index
elif s4label in ['rKY','rTN','rMS','rAL']:
	dRegion.val = dRegion.r6.index
elif s4label in ['rFL','rGA','rSC','rNC','rVA','rWV','rDC','rMD','rDE']:
	dRegion.val = dRegion.r7.index
elif s4label in ['rME','rNH','rVT','rMA','rRI','rCT']:
	dRegion.val = dRegion.r8.index
else:
	dRegion.val = dRegion.r9.index
  </exec>

  <radio
   label="dRegion"
   cond="0"
   where="execute,survey,report,notdp">
    <title>Region</title>
    <row label="r1">Pacific (WA, OR, CA, AK, HI)</row>
    <row label="r2">Mountain (MT, ID, WY, NV, UT, CO, AZ, NM)</row>
    <row label="r3">West North Central (ND, SD, NE, KS, MN, IA, MO)</row>
    <row label="r4">East North Central (WI, IL, MI, IN, OH)</row>
    <row label="r5">West South Central (TX, OK, AR, LA)</row>
    <row label="r6">East South Central (KY, TN, MS, AL)</row>
    <row label="r7">South Atlantic (FL, GA, SC, NC, VA, WV, DC, MD, DE)</row>
    <row label="r8">New England (ME, NH, VT, MA, RI, CT)</row>
    <row label="r9">Middle Atlantic (NY, NJ, PA)</row>
  </radio>

  <suspend/>

  <radio
   label="USREGION_HIDDEN"
   optional="1"
   translateable="0"
   where="execute,survey,report">
    <title>Sort into regions.</title>
    <exec>
if dRegion.r1 or dRegion.r2:
	USREGION_HIDDEN.val = 0
elif dRegion.r3 or dRegion.r4:
	USREGION_HIDDEN.val = 1
elif dRegion.r5 or dRegion.r6 or dRegion.r7:
	USREGION_HIDDEN.val = 2
elif dRegion.r8 or dRegion.r9:
	USREGION_HIDDEN.val = 3
    </exec>

    <row label="r1" value="1">West</row>
    <row label="r2" value="2">Midwest</row>
    <row label="r3" value="3">South</row>
    <row label="r4" value="4">Northeast</row>
  </radio>

  <suspend/>

  <block label="ZIPINFO_BLOCK" sst="0">
    <text
    label="S5"
    optional="0"
    size="5"
    verify="zipcode">
      <title>Please provide your home zip code:</title>
      <style label="boxLen" arg:limit="5" name="question.after" wrap="ready"><![CDATA[
$ (':text').attr('maxlength',$(limit))
]]></style>
    </text>

    <suspend/>

    <exec>
ZipFile= File("zip.dat", "zipcode")

zipInfo = ZipFile.get(S5.val)
print S5.val
print zipInfo
HP_cityName.val = None
HP_DMAName.val = None
HP_state.val=None
HP_region4.val=None

if zipInfo:
    HP_state.val = HP_state.attr("r%s" % zipInfo["state_abbr"]).index
    if zipInfo["census_region"] not in (None, ''):
        HP_region4.val = HP_region4.attr("r%s" % zipInfo["census_region"]).index
        HP_cityName.val = zipInfo["city_name"]
        HP_DMAName.val = zipInfo["dma_name"]
    else:
        HP_region4.val = HP_region4.r99.index
    HP_cityName.val = zipInfo["city_name"]
    HP_DMAName.val = zipInfo["dma_name"]
else:
    HP_region4.val = HP_region4.r99.index
    HP_state.val = HP_state.rXX.index
    </exec>

    <text
    label="HP_cityName"
    where="execute,survey,report">
      <title>Hidden Question.  City name from the zipcode entered in S5.</title>
    </text>

    <text
    label="HP_DMAName"
    where="execute,survey,report">
      <title>Hidden Question.  DMA name from the zipcode entered in S5.</title>
    </text>

    <select
    label="HP_state"
    optional="1"
    where="execute,survey,report">
      <title>State Name</title>
      <choice label="rAL" value="1">Alabama</choice>
      <choice label="rAK" value="2">Alaska</choice>
      <choice label="rAZ" value="3">Arizona</choice>
      <choice label="rAR" value="4">Arkansas</choice>
      <choice label="rCA" value="5">California</choice>
      <choice label="rCO" value="6">Colorado</choice>
      <choice label="rCT" value="7">Connecticut</choice>
      <choice label="rDE" value="8">Delaware</choice>
      <choice label="rDC" value="9">Washington, D.C.</choice>
      <choice label="rFL" value="10">Florida</choice>
      <choice label="rGA" value="11">Georgia</choice>
      <choice label="rHI" value="12">Hawaii</choice>
      <choice label="rID" value="13">Idaho</choice>
      <choice label="rIL" value="14">Illinois</choice>
      <choice label="rIN" value="15">Indiana</choice>
      <choice label="rIA" value="16">Iowa</choice>
      <choice label="rKS" value="17">Kansas</choice>
      <choice label="rKY" value="18">Kentucky</choice>
      <choice label="rLA" value="19">Louisiana</choice>
      <choice label="rME" value="20">Maine</choice>
      <choice label="rMD" value="21">Maryland</choice>
      <choice label="rMA" value="22">Massachusetts</choice>
      <choice label="rMI" value="23">Michigan</choice>
      <choice label="rMN" value="24">Minnesota</choice>
      <choice label="rMS" value="25">Mississippi</choice>
      <choice label="rMO" value="26">Missouri</choice>
      <choice label="rMT" value="27">Montana</choice>
      <choice label="rNE" value="28">Nebraska</choice>
      <choice label="rNV" value="29">Nevada</choice>
      <choice label="rNH" value="30">New Hampshire</choice>
      <choice label="rNJ" value="31">New Jersey</choice>
      <choice label="rNM" value="32">New Mexico</choice>
      <choice label="rNY" value="33">New York</choice>
      <choice label="rNC" value="34">North Carolina</choice>
      <choice label="rND" value="35">North Dakota</choice>
      <choice label="rOH" value="36">Ohio</choice>
      <choice label="rOK" value="37">Oklahoma</choice>
      <choice label="rOR" value="38">Oregon</choice>
      <choice label="rPA" value="39">Pennsylvania</choice>
      <choice label="rRI" value="40">Rhode Island</choice>
      <choice label="rSC" value="41">South Carolina</choice>
      <choice label="rSD" value="42">South Dakota</choice>
      <choice label="rTN" value="43">Tennessee</choice>
      <choice label="rTX" value="44">Texas</choice>
      <choice label="rUT" value="45">Utah</choice>
      <choice label="rVT" value="46">Vermont</choice>
      <choice label="rVA" value="47">Virginia</choice>
      <choice label="rWA" value="48">Washington</choice>
      <choice label="rWV" value="49">West Virginia</choice>
      <choice label="rWI" value="50">Wisconsin</choice>
      <choice label="rWY" value="51">Wyoming</choice>
      <choice label="rXX" value="99">Not in the US</choice>
    </select>

    <term cond="HP_state.rXX" sst="0">HP_state: Not in the US</term>

    <radio
    label="HP_region4"
    cond="0"
    optional="1"
    translateable="0"
    where="execute,survey,report,notdp">
      <title>Hidden Question.  Region 4 mapping from the zipcode entered in S5.</title>
      <row label="r1" value="1">Northeast</row>
      <row label="r2" value="2">Midwest</row>
      <row label="r3" value="3">South</row>
      <row label="r4" value="4">West</row>
      <row label="r99" value="99">Not in the US</row>
    </radio>

    <suspend/>

    <term cond="HP_region4.r99">HP_region4: Not in the US.</term>

    <exec>
print "S4: ", S4.selected.label
print "HP_state: ", HP_state.selected.label
    </exec>

    <term cond="S4.selected.label != HP_state.selected.label">S5 ZIP STATE AND STATE FROM S4 DO NOT MATCH</term>
  </block>
</block>

<suspend/>





++ZIPCODE ZEROFILL
ZIPCODES.get(str(S1a.val).zfill(5))






++CLIENT SPECIFIC CAROUSEL (ROI STUDIES) CLIENT SPECIAL; LONGWOODS STANDARD; 53b/2005224; C:\j.a.y\Decipher\Longwoods special carousel\2005224-quota.xls
DSTAR ONLY! 100041
UPDATE THEME BELOW:
  <theme cond="0" name="frozen:company/theme_dk"/></themes>


<note>----------------------------------------------- Q4 CLIENT SPECIFIC CAROUSEL Styling Start ---------------------------------------------------------------------</note>
<style name="question.after" with="qCarousel1,qCategories1,qButtons1"><![CDATA[
<style type="text/css">
.question{
    margin-bottom:0;
}
</style>
]]></style>
<style name="question.after" wrap="ready"><![CDATA[
var numberPattern = /\d+/g;
var categorieButtons = $ ('#question_qCategories1 .sq-atm1d-button')
var rateButtons = $ ('#question_qButtons1 .sq-atm1d-button')
var prevButton = $ ('.sq-cardrating-prev')
var nextButton = $ ('.sq-cardrating-next')
var hiddenData = $ ('#question_qPICKED1 .row-elements')




var readyInterval = setInterval(function() {


          if ($ ('.question-error').length && $ ('.sq-atm1d-button').length){
            setTimeout(function() {
            var attributeElement = $ (".sq-cardrating-card[data-position='0']")
              var temp = hiddenData.eq(attributeElement.attr('data-label').match(numberPattern) -1).find('td.hasError').each(function(index, el) {
                          categorieButtons.eq($ (el).index()-1).css({"background-color":"lightcoral"}).addClass('hasError')
                          console.log(el,$ (el).index())
                     });
            }, 600);
            clearInterval(readyInterval);
          }else{
           if ($ ('.sq-cardrating-itable').length){
              setTimeout(function() {
                categorieButtons.click().eq(0).click()
                clearInterval(readyInterval);
            },400);
          }




      }

}, 500)



categorieButtons.unbind().click(function(event) {
                $ (this).removeClass('hasError')
                categorieButtons.not('.hasError').css({'background-color':'#6b6a6a'}).removeClass('sq-atm1d-selected categorieSelected')
                rateButtons.css({"background-color": "#eee"})
                $ (this).css({"background-color":"#2bbdb9"}).addClass('categorieSelected')



              try {
                var currentCategories = $ (this).attr('data-label').match(numberPattern)
                var currentAttribute = $ (".sq-cardrating-card[data-position='0']").attr('data-label').match(numberPattern)
                var currentValue = $ ('#question_qPICKED1 .row-elements').eq(currentAttribute-1).find('span.cell-input input')
                                    .eq(currentCategories-1).val()

                rateButtons.eq(currentValue || NONE).css({"background-color" : "skyblue"})



                console.log(currentValue)
              } catch(e) {
                // statements
                console.log("");
              }

});
rateButtons.unbind().click(function(event) {
          try {
            var currentValue = $ (this).attr('data-label').match(numberPattern) - 1
            var currentAttribute = $ ( ".sq-cardrating-card[data-position='0']" ).attr('data-label').match(numberPattern)
             var currentCategories = $ ('#question_qCategories1 .categorieSelected').attr('data-label').match(numberPattern)
             var lastCategorie = $ ('#question_qCategories1 .sq-atm1d-button').last().attr('data-label').match(numberPattern)[0] == currentCategories[0]
               rateButtons.css({"background-color": "#eee"})
          $ (this).css({"background-color":"skyblue"})
          if (currentCategories!=null){
                var treeRow = $ ('#question_qPICKED1 .row-elements').eq(currentAttribute-1).find('span.cell-input input')
                 treeRow.eq(currentCategories-1).val(currentValue)
                 var checkTreeIndex=[];
                 var checkTree = treeRow.filter(function(index) {
                        if (this.value === ""){
                             checkTreeIndex += index
                        }
                        return this.value === "";
                 });
                 console.log(checkTreeIndex)
                 if (!checkTree.length && lastCategorie){
                    $ ('.sq-cardrating-button').eq(0).trigger('click',false)

                    setTimeout(function() {
                        rateButtons.css({"background-color": "#eee"})
                        categorieButtons.first().trigger('click',false)

                    }, 500);
                 }
                 else if (!categorieButtons.find('hasError').length && !checkTree.length){
                        $ ('.sq-cardrating-button').eq(0).trigger('click',false)
                                            setTimeout(function() {
                        rateButtons.css({"background-color": "#eee"})
                        categorieButtons.first().trigger('click',false)

                    }, 500);
                 }
                 else if(checkTree.length && lastCategorie){
                                            setTimeout(function() {
                        rateButtons.css({"background-color": "#eee"})
                        categorieButtons.eq(checkTreeIndex[0]).trigger('click',false)

                    }, 500);
                 }
                else{
                  setTimeout(function() {
                    categorieButtons.eq(currentCategories).trigger('click',false)
                }, 500);
                }

          }
          if ($ ('.sq-cardrating-card').last().attr('data-position') <= 0 && (!checkTree.length)){
                setTimeout(function() {
                   $ ('#btn_continue').click()
                }, 300);
          }

          } catch(e) {
            console.log(e);
          }

});

prevButton.click(function(event) {
  setTimeout(function() {
    categorieButtons.eq(0).trigger('click',false)
  }, 1000);

});

nextButton.click(function(event) {
  setTimeout(function() {
    categorieButtons.eq(0).trigger('click',false)
  }, 1000);

});
]]></style>

<note>-------------------------------------------------------Q4 CLIENT SPECIFIC CAROUSEL  Mobile Styling Style Start ---------------------------------------------------------------------</note>
<style cond="device.isMobileDevice()" name="question.after" with="qCarousel1,qCategories1,qButtons1"><![CDATA[
<style>
.label_qCategories1 .sq-atm1d-tiled .sq-atm1d-buttons {
    width: 70%!important;
    text-align:center;
}
.sq-atm1d .sq-atm1d-buttons{
  text-align:center;
}

#question_qButtons1 .sq-atm1d-buttons {
    display: inline-block;
    text-align:center;
    width: 90%;
}

.sq-atm1d-vertical .sq-atm1d-td, .sq-atm1d-vertical .oe {
    text-align: center;
}

.sq-atm1d-block {
  text-align:center;
}

</style>
]]></style>
<note>-------------------------------------------------------Q4 CLIENT SPECIFIC CAROUSEL  Mobile Styling Style Start ---------------------------------------------------------------------</note>

<note>----------------------------------------------- Q4 CLIENT SPECIFIC CAROUSEL Styling End ---------------------------------------------------------------------</note>







  <block label="dumDestinations_block" cond="0">
    <note>dumDestinations1 and dumDestinations2 should have the same number of items and same text</note>
    <radio
    label="dumDestinations1"
    where="execute,survey,notdp">
      <title>LIST OF DESTINATION for rows (FOR PROGRAMMING PURPOSES ONLY)</title>
      <row label="r1" alt="South Dakota">South Dakota</row>
      <row label="r2" alt="Minnesota">Minnesota</row>
      <row label="r3" alt="Wyoming">Wyoming</row>
      <row label="r4" alt="Nebraska">Nebraska</row>
      <row label="r5" alt="Montana">Montana</row>
      <row label="r6" alt="Manitoba">Manitoba</row>
    </radio>

    <radio
    label="dumDestinations2"
    where="execute,survey,notdp">
      <title>LIST OF DESTINATION for columns (FOR PROGRAMMING PURPOSES ONLY)</title>
      <col label="c1">South Dakota</col>
      <col label="c2">Minnesota</col>
      <col label="c3">Wyoming</col>
      <col label="c4">Nebraska</col>
      <col label="c5">Montana</col>
      <col label="c6">Manitoba</col>
    </radio>
  </block>

  <note>*******************************Q4 Custom Grid Start************************************</note>
  <block label="grid_Comparison" cond="1" sst="0">
    <exec sst="0">
for iRow in dumQ4.rows:
    iRow.val = 1
    </exec>

    <checkbox
    label="dumQ4"
    onLoad="copy('dumDestinations1', rows=True, exclude='r8')"
    optional="1"
    translateable="0"
    where="execute,survey,report">
      <title>QUALIFIED DESTINATIONS for least fill</title>
    </checkbox>

    <suspend/>

    <quota cond="1" overquota="noqual" sheet="QuotaQ4"/>

    <exec>
#for hQ4r in hidQ4.rows:
#    if hasMarker('/QuotaQ4/%s' % hQ4r.o.alt):
#        hQ4r.val = 1
print p.markers

for x in hidQ4.rows:
    if hasMarker('/QuotaQ4/hidQ4_%s' % x.label):
        x.val = 1
    </exec>

    <checkbox
    label="hidQ4"
    onLoad="copy('dumQ4', rows=True)"
    shuffle="rows"
    translateable="0"
    where="execute,survey,report">
      <title>FINAL QUALIFIED DESTINATIONS (North Dakota + two randomly-picked competitive destinations)</title>
    </checkbox>

    <suspend/>

    <exec>
textDestinations = [iRow.text for iRow in hidQ4.rows.order if iRow]
indexDestinations = [iRow.index for iRow in hidQ4.rows.order if iRow]
p.tDestinations = textDestinations
p.destIndex = indexDestinations

print textDestinations

for eachRow in qRandomDest.rows:
    if len(textDestinations) gt eachRow.index:
        eachRow.val = textDestinations[eachRow.index]
    </exec>

    <text
    label="qRandomDest"
    size="40"
    where="execute,survey,report">
      <title>Randomization order of Destinations</title>
      <row label="r1">1st</row>
      <row label="r2">2nd</row>
      <row label="r3">3rd</row><!-- row label="r4">4th</row -->
    </text>

    <suspend/>

    <radio
    label="qCarousel1"
    cardrating:lrg_maxwidth="30%"
    cardrating:navigation="1"
    optional="1"
    shuffle="rows"
    uses="cardrating.1"
    where="survey,report,notdp">
      <title><div style="border:1px dashed black;padding:5px 5px;"><p>In this question, please provide your personal impressions of the following as travel destinations.<br />
<br />
To do this, please indicate how much you agree or disagree that each of the following statements applies to this destination. Use a 10-point scale, where "1" means you <b>do not agree at all</b> that the place has that characteristic and "10" means you <b>agree completely</b> that the place has that characteristic.<br />
<br />
Even though you may not have visited these places, it is your impressions we are interested in. So, please use what you have seen and read in advertising, the internet, books, or magazines, or heard from friends or relatives as well as your own experience to answer the following questions. Click on “0” only when you have no impression at all of a destination on a particular dimension.

    </p>
 <br />
  </div>
  </title>
      <row label="r1">I would feel safe traveling anywhere in this place</row>
      <row label="r2">Affordable accommodations</row>
      <row label="r3">Authentic historical sites</row>
      <row label="r4">Different cultures/ways of life</row>
      <row label="r5">Excellent canoeing/kayaking/paddleboarding</row>
      <row label="r6">Excellent fishing</row>
      <row label="r7">Excellent hunting</row>
      <row label="r8">Excellent national/state parks</row>
      <row label="r9">Excellent vacation value</row>
      <row label="r10">Exciting casinos</row>
      <row label="r11">Good for RV-ing</row>
      <row label="r12">Good for viewing wildlife/birds</row>
      <row label="r13">Good place for camping</row>
      <row label="r14">Great cycling/off-road biking</row>
      <row label="r15">Great for boating/water sports</row>
      <row label="r16">Great for theater and the arts</row>
      <row label="r17">Great hiking</row>
      <row label="r18">Great snowmobiling</row>
      <row label="r19">I often notice advertising for this place</row>
      <row label="r20">Native American Culture</row>
      <row label="r21">Friendly local people</row>
      <row label="r22">Not too far away for a vacation</row>
      <row label="r23">Interesting food and drink options</row>
      <row label="r24">Truly beautiful scenery</row>
      <row label="r25">Well-known destination</row>
      <row label="r26">Good for families</row>
      <row label="r27">Great place for a classic American road trip</row>
      <row label="r28">Lots to see and do</row>
      <row label="r29">Popular with vacationers</row>
      <row label="r30">Vacation there is a real adventure</row>
      <row label="r31">An exciting place</row>
      <row label="r32">Good place to relax</row>
      <row label="r33">A fun place for vacation</row>
      <row label="r34">Children would enjoy</row>
      <row label="r35">Good for adult vacation</row>
      <row label="r36">Unique vacation experience</row>
      <row label="r37">Must-see destination</row>
      <row label="r38">Well-known landmarks</row>
      <row label="r39">A place I'd really enjoy visiting</row>
      <row label="r40">A good place to live</row>
      <row label="r41">A good place to start a career</row>
      <row label="r42">A good place to start a business</row>
      <row label="r43">A good place to attend college</row>
      <row label="r44">A good place to purchase a vacation home</row>
      <row label="r45">A good place to retire</row>
      <row label="r46">I’d consider moving there for the right job opportunity</row>
      <row label="r47">I’ve seen job opportunities located here</row>
      <row label="r48">A place my family and I could be happy living</row>
      <row label="r49">A place with a promising economic future</row>
      <row label="r50">I’m interested in learning about work opportunities here</row>
      <row label="r51">I’d recommend moving here to friends/family</row>
      <row label="r52">A place with a strong and expanding job market</row>
      <col label="c1" value="1">hiddencol1</col>
      <col label="c2" value="2">hiddencol2</col>
      <style name="question.after"><![CDATA[
<style>

#question_qCarousel1{
    margin-bottom:-5%;

}

#question_qCarousel1 .sq-cardrating-widget, #question_qCarousel1 .sq-cardrating-center{
    font-size:15px;
    word-wrap:break-word;

}

#question_qCarousel1 .sq-cardrating-buttons{
    display:none;
}


.question-text{
  font-size:1.0rem;
  margin:auto;
  text-align:center;
}
</style>
]]></style>
    </radio>

    <radio
    label="qCategories1"
    atm1d:large_buttonAlign="center"
    atm1d:large_contentAlign="center"
    atm1d:showInput="0"
    atm1d:viewMode="tiled"
    optional="1"
    uses="atm1d.9"
    where="survey,report,notdp">
      <title><p></p></title>
      <row label="r1">${p.tDestinations[0]}</row>
      <row label="r2">${p.tDestinations[1]}</row>
      <row label="r3">${p.tDestinations[2]}</row><!-- row label="r4">${p.tDestinations[3]}</row -->
    </radio>

    <radio
    label="qButtons1"
    atm1d:large_buttonAlign="center"
    atm1d:large_contentAlign="center"
    atm1d:numCols="3"
    atm1d:showInput="0"
    atm1d:viewMode="tiled"
    fir="off"
    optional="1"
    uses="atm1d.9"
    where="survey,report,notdp">
      <title><p></p></title>
      <row label="r1" value="1"><u><b>Do Not <br />Agree At All</b></u> <br /><br />1</row>
      <row label="r2" value="2">2</row>
      <row label="r3" value="3">3</row>
      <row label="r4" value="4">4</row>
      <row label="r5" value="5">5</row>
      <row label="r6" value="6">6</row>
      <row label="r7" value="7">7</row>
      <row label="r8" value="8">8</row>
      <row label="r9" value="9">9</row>
      <row label="r10" value="10"><u><b>Agree <br />Completely</b></u><br /><br />10</row>
      <row label="r0" value="0"><u><b>No<br /> Impression</b></u><br /><br />0</row>
      <style name="question.after"><![CDATA[
<style type="text/css">
        #question_text_qButtons1{
                display:none;
        }
        #question_qButtons1 .sq-atm1d-button{
          background-color: #eee;
          color: black;
          border-radius: 10px;
          height: 70px;
          font-size:12px;
        }
        #question_qButtons1 .sq-atm1d-button:hover{
          box-shadow: 2px 2px;
        }

\@if device.smartphone
        #question_qButtons1 .sq-atm1d-buttons{
          width:90%;
        }
\@endif device.desktop
        #question_qButtons1 .sq-atm1d-buttons{
          width:65%;
        }
   </style>
]]></style>
    </radio>

    <text
    label="qPICKED1"
    onLoad="copy('qCarousel1', rows=True)"
    optional="0"
    size="5">
      <title>Picked row selected</title>
      <col label="c1">${p.tDestinations[0]}</col>
      <col label="c2">${p.tDestinations[1]}</col>
      <col label="c3">${p.tDestinations[2]}</col><!-- col label="c4">${p.tDestinations[3]}</col -->
      <style name="question.after" wrap="ready"><![CDATA[
$ ('.question-error-text').text('Please provide an answer for each of the highlighted options')
$ ('.label_qCarousel1 .question-text').after($ ('.question-error'))
]]></style>
      <style name="question.after"><![CDATA[
<style>
#question_qPICKED1{
    display:none;
}

 </style>
]]></style>
    </text>

    <suspend/>

    <exec>
for iRow in qPICKED1.rows:
   if iRow.any:

      Q4[p.destIndex[0]][iRow.index].val = int(iRow.c1.val)+1
      Q4[p.destIndex[1]][iRow.index].val = int(iRow.c2.val)+1
      Q4[p.destIndex[2]][iRow.index].val = int(iRow.c3.val)+1
      #Q4[p.destIndex[3]][iRow.index].val = int(iRow.c4.val)+1

Q4.cols.order= hidQ4.rows.order
    </exec>

    <number
    label="Q4"
    colCond="hidQ4.rows[col.index]"
    onLoad="copy('dumDestinations2', cols=True), copy('qCarousel1', rows=True)"
    optional="0"
    shuffle="cols"
    size="3"
    verify="range(0,10)"
    where="execute,survey,report">
      <title><p>In this question, please provide your personal impressions of the following as travel destinations.<br />
<br />
To do this, please indicate how much you agree or disagree that each of the following statements applies to this destination. Use a 10-point scale, where "1" means you <b>do not agree at all</b> that the place has that characteristic and "10" means you <b>agree completely</b> that the place has that characteristic.<br />
<br />
Even though you may not have visited these places, it is your impressions we are interested in. So, please use what you have seen and read in advertising, the internet, books, or magazines, or heard from friends or relatives as well as your own experience to answer the following questions. Click on “0” only when you have no impression at all of a destination on a particular dimension.
</p><br />
  </title>
    </number>

    <suspend/>

    <exec>
#del p.tDestinations
slCntrPerColumn = 0
overallList = []


for c in Q4.cols:
    if c.any:
        nList = []
        for x in c.values:
            if x not in nList:
                nList.append(x)
            if x not in overallList:
                overallList.append(x)
        print nList
        if len(nList) == 1 and nList[0] != 0L:
            slCntrPerColumn = slCntrPerColumn+1

print slCntrPerColumn
print overallList
#if len(overallList)==1:
if len(overallList) == 1 and overallList[0] != 0L:
    hidQ4slcheck.val = hidQ4slcheck.r1.index
else:
    hidQ4slcheck.val = hidQ4slcheck.r2.index
    </exec>

    <radio
    label="hidQ4slcheck"
    translateable="0"
    where="execute,survey,report">
      <title>Q4 SL check (TERMINATE IF RESPONDENT GAVE SAME RATING FOR ALL DESTINATIONS, NOT INCLUDING 0)</title>
      <row label="r1" value="1">Straightliner - Yes</row>
      <row label="r2" value="2">Straightliner - No</row>
    </radio>

    <suspend/>

    <term cond="hidQ4slcheck.r1">Q4 term: straightlined at Q4</term>
  </block>










++LONGWOODS VIDEO HIDE BUTTON : 53b/2005224 ; LONGWOODS STANDARD
<note>--------------------------- HIDE/SHOW CONTINUE BUTTON FOR VIDEO (15 secs) START ---------------------------------</note>
<style arg:timeout="15" name="respview.client.js" with="Q12video_1,Q12video_2,Q12video_3,Q12video_4" wrap="ready"><![CDATA[
var continueButton = $ ("#btn_continue")
if ($ ('video').length > 0) {
  $ (continueButton).hide();
  $ ('video').on('timeupdate', function (e) {
      console.log(this.currentTime);

     if ($ ('div.question').hasClass('hasError')) {
         $ (continueButton).show().removeAttr('disabled');
     }

     if ((this.currentTime) >= $(timeout)) {
         console.log('show')
         $ (continueButton).show().removeAttr('disabled');
     }

  });
  }

//if ($ ('video').length > 0) {
  $ (continueButton).hide();
    console.log('initial');

$ ('.question').bind( "click touchstart", function(){
    console.log('click');
 setTimeout(function(){
    if ($ ('div.video-js').hasClass('vjs-has-started')) {
        console.log('playing');
          setTimeout(function(){ $ (continueButton).show().removeAttr('disabled'); }, $(timeout) * 1000);
   }
 }, 1000);
});

  $ ('video').on('timeupdate', function (e) {
     if ($ ('div.question').hasClass('hasError')) {
         $ (continueButton).show().removeAttr('disabled');
     }

  });
 // }
]]></style>




















++REMOVE 'question' WHEN HOVER
<style name="question.after"><![CDATA[
	<script>
$('[title]').each( function() {
    var $this = $(this);
    $this.data('title',$this.attr('title'));
    $this.removeAttr('title');
});

$('a').click( function() {
    var $this = $(this);
    var title = $this.data('title');
});
  </script>
]]></style>






++CALL ONE COL TEXT FROM GRID
dQ10b is dummy to catch the row to be used

${Q9.cols[Q9.rows[dQ10b.val].val].text}

${Q64.cols[Q64.rows[int(loopvar: label)-1].val].text}





++STYLE TO LOWERCASE
<style name="question.after"><![CDATA[
<style type="text/css">
.q19col {
    text-transform: lowercase;
}
   </style>
]]></style>







++WHITMAN SPECIFIC CAROUSEL (AUTOADJUST WIDTH)

  <style name="question.after"><![CDATA[
<style>.answers{visibility:hidden;}</style>
    <script type="text/javascript" src="//d2n88fe5uqdqty.cloudfront.net/ssi_js/decipher/ssi_ALLInOne_Confirmit_2.0_groups_decipher.js"></script>

    <script type="text/javascript">
    var lukanka;
    (function (lukanka) {
      if (!lukanka.qDefs)
        lukanka.qDefs = {};
        lukanka.qDefs["${this.label}"] = ${jsexport()};
      $ (document).ready(function(){
        parseJsexportData();
      });
    })(lukanka || (lukanka = {}));

    </script>

    <div class="gridclick" style="margin-bottom:50px"><img class="img-responsive loading-container" style="margin: 40px auto;" src="//d2n88fe5uqdqty.cloudfront.net/rnd/tools/images/loading.gif" /><div class="gridclick-container"></div></div>

    <link rel="stylesheet" type="text/css" href="//d2n88fe5uqdqty.cloudfront.net/rnd/tools/gridclick/gridClick_v2.9.4_d.min.css">
    <link rel="stylesheet" type="text/css" href="//d2n88fe5uqdqty.cloudfront.net/rnd/plugins/ionicons/ionicons-2.0.1/css/ionicons.min.css">
    <link rel="stylesheet" type="text/css" href="//d2n88fe5uqdqty.cloudfront.net/rnd/plugins/fancybox/3.x.x/3.1.20/jquery.fancybox.css">

    <script type="text/javascript" src="//d2n88fe5uqdqty.cloudfront.net/rnd/tools/gridclick/gridClick_v2.9.4_d.min.js"></script>
    <script type="text/javascript" src="//d2n88fe5uqdqty.cloudfront.net/rnd/plugins/fancybox/3.x.x/3.1.20/jquery.fancybox.js"></script>

    <script type="text/javascript">
      $ (function() {
        var config = {

          // =============== DOCUMENTATION ===============> https://confluence.surveysampling.com/x/hq17AQ

          sForm : getFormName(1), // form name of the grid
          sSplitter : '$', // splitter for images
          sOrientation : 'horizontal', // 'horizontal', 'vertical'
          sProgressSepText : ' / ', // separator text between item progress
          sTxtProgress : '', // text after progress text
          sForwardButton : '#btn_continue',  // forward button jQuery selector - used for toggling the next button
          sOeDefaultHolder: '&#xf2bf;........', // default input placeholder when OEs are present
          sHideScaleType : 'keepAlignment', // method to hide the scales - 'keepAlignment', 'newAlignment'
          sDkScaleBgColor : '#E9ECEF', // background color for the DK scale
          iMinItemsRequired : null, // minimum answered items required to toggle the next button - default is null - all required
          iAnimationTime : 400, // animation time in ms
          iMaxContainerWidth : 900, // maximum tool container width - can be used to enlarge/shrink the tool
          iVertItemContainPerc : 45, // vertical item container percentage width
          iVertItemContainMarginPerc : 5, // vertical item container percentage margin
          iFontSize : null, // font size for the tool container
          aDkScale : [99], // dk codes for scale - for example: [99,999]
          aOtherNotRequired : [], // other not required item codes - for example: [99,999]
          aOtherPlaceHolder : [], // other input custom placeholder - for example [{'98': 'Please specify'}, {'998': 'Specify'}]
          aOtherOpenOptional: [], // other OE input not required - next button will be toggled without the need of OE input - scale can still be chosen - for example: [98, 998]
          aHideScaleCodes: [], // hide scales for specific codes [{98: [1,3]}, {1: [2,4]}]

          oElementConfig : { // element/item config object
            bImages : false, // images as options - using the splitter
            bShowLabel : true, // show labels for the options
            bShowOeImage : false, // if OE - should it show an image for the other option
            bZoomEnabled : false, // is zoom enabled
            sZoomImage : '//d2n88fe5uqdqty.cloudfront.net/rnd/tools/images/zoom_icon2.png', // zoom icon image path
            sZoomPosition : 'br', // position for the zoom icon - 'br', 'bl', 'tl'
            sImagePath : '', // path for the images to be used with the splitter
            sSmallImageExtension : '_S.jpg', // extension for the small image (default shown)
            sLargeImageExtension : '_L.jpg', // extension for the zoomed image
            iMaxImageWidth: 100, // maximum image width - needs to be lower than iWidth
            iMaxImageHeight: 100, // maximum image height - needs to be lower than iHeight
            iWidth : 200, // overall item container width
            iHeight : 100, // overall item container height
            iHorizontalSpacing : 15, // horizontal spacing between items
            iVerticalSpacing : 5, // vertical spacing between items
            iFontSize: null // font size for the item container
          },

          oScaleConfig : { // scale config object
            bImages : false, // images as options - using the splitter
            bShowLabel : true, // show labels for the options
            bZoomEnabled : false, // is zoom enabled
            sZoomImage : '//d2n88fe5uqdqty.cloudfront.net/rnd/tools/images/zoom_icon2.png', // zoom icon image path
            sZoomPosition : 'br', // position for the zoom icon - 'br', 'bl', 'tl'
            sImagePath : '', // path for the images to be used with the splitter
            sSmallImageExtension : '.png', // extension for the small image (default shown)
            sLargeImageExtension : '.png', // extension for the zoomed image
            iMaxImageWidth: 62, // maximum image width - needs to be lower than iWidth
            iMaxImageHeight: 62, // maximum image height - needs to be lower than iHeight
            iWidth : 130, // scale button width
            iHeight : 50, // scale button height
            iHorizontalSpacing : 5, // horizontal scale spacing
            iVerticalSpacing : 5, // vertical scale spacing
            iFontSize: null // font size for the scale container
          },

          oFancyBoxConfig : {}, // config for adding custom fancybox parameters - //fancyapps.com/fancybox/3/docs/
          bInvertItemScale : false, // invert the item/scale containers - top/bottom for horizontal, left/right for vertical
          bHeightAuto : false, // make the items/scales have auto height for horizontal view - should not be used for vertical
          bScaleNewLine: false, // make the scale in horizontal mode render vertically (one below the other) when not enough horizontal space for all scales
          bReverse : true, // reverse the direction of the items/navigation arrows
          bShowProgressText : false, // show the progress text progress
          bShowProgressIndicator :  true, // show the progress indicator
          bDisableNavigation : false, // disable navigation arrows - will only be allowed for multi or when no AutoNext item is false
          bAutoNextItem : true, // automatically go to next item when selected - working on multi only when DK scale is selected
          bAutoSubmit : false, // auto submit page when all items are answered
          bInitialNavigation : false, // initial navigation toggle
          bEnableNavAnswered : false, // Enable navigation for already answered items only. Not applicable when bDisableNavigation or bInitialNavigation is enabled.
          bMultiple : false, // is the grid multiple
          bAutoSizeScales : false, //Automatically re-render scales to fit the width. Not applicable when bScaleNewLine is enabled or when oScaleConfig.iFirstLastWidth is set.
          bIsTest : true, // will make the tool warning appear as JavaScript alerts to make sure they are handled
          onStart : function() {}, // function called before the tool starts generating
          onAnswer : function(e) {}, // function called when an answer is given (click on scale)
          onInput : function(e) {}, // function called on OE input (item)
          onCompleted : function() {}, // function called when all items are answered (unless OE not required codes are defined) before next button is toggled
          onReady : function() {
            $ ('.answers').hide();
            $ ('.scale-button').not(':last, :first, :eq(5)').css('width','30px');
          }, // function called after tool is fully loaded
        }
        $ ('body').gridClick(config);
      });
    </script>
]]></style>





++HAL PORET: SCREENER STANDARDS
    <var name="gender" values="1,2"/>
    <var name="year"/>

ADD IN TEMPLATE CSS:
.instruction-text { font-style: italic; font-size: 1.4rem!important; }
.answers { font-size: 1.4rem!important; }
input[type=text], textarea { font-size: 1.4rem!important; }


<style name="question.after" wrap="ready"><![CDATA[
$ (document).keypress(
  function(event){
    if (event.which == '13') {
      event.preventDefault();
    }
});
]]></style>

<block label="Hal_Poret_Screener">

<logic label="Q99" recaptcha:secret="6Lfxy3cgAAAAACEoBkEBzvhWf-2cPkOMk2oXHkJf" recaptcha:sitekey="6Lfxy3cgAAAAAFqXtKpaInjWUJY1SN1OzZZlNvMl" uses="recaptcha.1">
  <title>Insert Captcha </title></logic>
<radio
  label="dQ99"
  sst="0"
  translateable="0"
  where="execute,survey,report">
  <title>Results</title>
  <exec>
print Q99.human
dQ99.val = int(not Q99.human)
  </exec>

  <row label="r1">Human</row>
  <row label="r2">Not Human</row>
</radio>

<suspend/>

<term cond="dQ99.r2" sst="0" label="Q99term">Q99: Robot</term>

<number
  label="hCOUNTER"
  size="1"
  verify="range(0,1)"
  where="execute,survey,report">
  <title>Set as counter for error at Q100 (if greater than 1 must term Q100)- for programming purposes</title>
  <exec>
hCOUNTER.val = 0
  </exec>

</number>

<suspend/>


<res label="Q100lt4">Please enter your answer in a 4-digit format e.g. 1990.</res>
<res label="Q100nqyear">Please confirm you have entered your year of birth accurately.</res>

<number
  label="Q100"
  optional="0"
  size="3">
  <title>Please enter your year of birth.</title>
  <validate>
if len(str(Q100.r1.ival)) le 3:
    error(res.Q100lt4, row=Q100.r1)
elif hCOUNTER.val lt 1 and (Q100.r1.ival != int(year)):
    hCOUNTER.val = hCOUNTER.ival + 1
    error(res.Q100nqyear, row=Q100.r1)
  </validate>

  <row label="r1"/>
  <style name="question.after" wrap="ready"><![CDATA[
$ (':text').attr('maxlength','4');
]]></style>
</number>

<suspend/>

<term cond="hCOUNTER.val ge 1 and (Q100.r1.ival != int(year))" label="Q100term">Q100: RESPONDENT’S YEAR STILL DOES NOT MATCH PANEL DEMO</term>

<radio
  label="Q105">
  <title>Are you...</title>
  <row label="r1" value="1">Male</row>
  <row label="r2" value="2">Female</row>
</radio>

<suspend/>

<exec>
print Q105.selected.value
print gender
</exec>

<term cond="Q105.selected.value != int(gender)" label="Q105term">Q105: Gender does not match from panel</term>

<!--<quota cond="1" overquota="noqual" sheet="Gender"/>-->

<radio
  label="Q107">
  <title>Which of these age ranges includes your age?</title>
  <row label="r1" value="1">Under 18</row>
  <row label="r2" value="2">18-34</row>
  <row label="r3" value="3">35-49</row>
  <row label="r4" value="4">50 or older</row>
</radio>

<suspend/>

<checkbox
  label="dQ107"
  translateable="0"
  where="execute,survey,report">
  <title>Dummy age range based on year appended.</title>
  <exec>
#jpaglinawan 2022 update

#INITIALIZE TO EMPTY
for eachRow in dQ107.rows:
  eachRow.val = None

# importing date class from datetime module
from datetime import date

# creating the date object of today's date
todays_date = date.today()

age = int(todays_date.year) - int(year)

print "age: ", age
if age lt 18:
  dQ107.r1.val = 1
elif age ge 18 and age le 34:
  dQ107.r2.val = 1
elif age ge 35 and age le 49:
  dQ107.r3.val = 1
else:
  dQ107.r4.val = 1


if int(age) == 18:
  dQ107.r1.val = 1
  dQ107.r2.val = 1
if int(age) == 35:
  dQ107.r2.val = 1
  dQ107.r3.val = 1
if int(age) == 50:
  dQ107.r3.val = 1
  dQ107.r4.val = 1
  </exec>

  <row label="r1">Under 18</row>
  <row label="r2">18-34</row>
  <row label="r3">35-49</row>
  <row label="r4">50 or older</row>
</checkbox>

<suspend/>

<radio
  label="dAge_term"
  optional="1"
  translateable="0"
  where="execute,survey,report">
  <title>Under 18 OR age range not possible based on year of birth entered in Q100 and appended</title>
  <exec>
for eachRow in dQ107.rows:
  if eachRow:
    if Q107.selected.label == eachRow.label:
      dAge_term.val = dAge_term.r2.index
      break
else:
  dAge_term.val = dAge_term.r1.index

if Q107.r1:
  dAge_term.val = dAge_term.r1.index
  </exec>

  <row label="r1" value="1">Terminate</row>
  <row label="r2" value="2">Qualified</row>
</radio>

<suspend/>

<term cond="dAge_term.r1" label="Q107term">Q107: Under 18 OR age range not possible based on year of birth entered in Q100</term>

<!--
<quota cond="1" overquota="noqual" sheet="Age"/>

<quota cond="1" overquota="noqual" sheet="GenderxAge"/>
-->

</block>





++EXPORT TO WORD DOC
LIVE:
  Survey Overview
  Actions > Export Survey
    Options:
      Show labels
      Show sequential labels
      Show logic syntax
      Show programming notes
      Show quotas
    Languages:
      Specify what you want
    Click the format you want (example Word)

TEST:
  add "/temp-edit-live" in the Overview link
  follow steps for LIVE









++TEXT HIGHLIGHTER; HOTTEXT
  <block label="Q27x1_block" randomize="1">
    <select
    label="Q27x1"
    hottext:atleast="1"
    hottext:atmost="3"
    optional="1"
    uses="hottext.3">
      <title>Select the words or phrases that you found most compelling in this statement.</title>
      <comment>You must select between 1 and 3 words or phrases.</comment>
      <choice label="ch1">Like</choice>
      <choice label="ch2">Neutral</choice>
      <choice label="ch3">Dislike</choice>
      <row label="r1" translateable="0">DRINKS NOT EQUAL -</row>
      <row label="r2" translateable="0">Alcoholic</row>
      <row label="r3" translateable="0">beverages</row>
      <row label="r4" translateable="0">are</row>
      <row label="r5" translateable="0">not</row>
      <row label="r6" translateable="0">created</row>
      <row label="r7" translateable="0">equal.</row>
<style name="question.after"><![CDATA[
<style>
\@media (max-width: 991px) {
   .sq-hottext-container, .question { width: 325px !important;}
   .fa-icon-check-empty, .fa-icon-check {margin: -10px !important;};
}
</style>
]]></style>
    </select>

    <suspend/>
  </block>

++NEXT LINE
      <row label="r3" translateable="0">beverages<br /></row>
      <row label="r31" hottext:prefix_html="—&amp;nbsp;" translateable="0">from</row>





++DISABLE ENTER KEY
Do not allow respondents to continue by hitting the Enter key.

.instruction-text { font-style: italic; font-size: 1.4rem!important; }
.answers { font-size: 1.4rem!important; }

<style name="question.after" wrap="ready"><![CDATA[
$ (document).keypress(
  function(event){
    if (event.which == '13') {
      event.preventDefault();
    }
});
]]></style>






++HAL PORET; STYLE BELOW WILL HIDE NEXT EVERY IMAGE AND SHOW IN 5 SECONDS
<style label="disable_continue" arg:timeout="5" mode="after" name="respview.client.js" with="dQ220,dQ240,dQ260" wrap="ready"><![CDATA[
//STYLE BELOW WILL HIDE NEXT EVERY IMAGE AND SHOW IN 5 SECONDS
  $ ('.survey-body').css('display','block') //fullscreen image
  $ ('.comment').css('max-width','100%') //fullscreen image

  var submitButton = $ ("#btn_continue, #btn_finish, #question_Q220, #question_Q240, #question_Q260");
  var ableText =  $ ('#disabledtxt');
  var newText =  $ ('#newtitle');
  var counterFinal = 0; // To know if all images are seen. Default false.

  submitButton.hide();
  ableText.show();
  newText.hide();
  $ ('.next').hide();

  if ($ ('div.question').hasClass('hasError')) {
    submitButton.show();
    ableText.hide();
    newText.hide();
    counterFinal = 1
    $ ('.next').show();
  }else{
    counterFinal = 0
    setTimeout( function() {
      $ ('.next').show();
    }, $(timeout) * 1000);
  }

  var checkTime = 0; // To check time if reached 15 seconds. Default false.

  window.setInterval(function(){
  if (counterFinal == 1){
      setTimeout( function() {
        submitButton.show();
        newText.hide();

      }, $(timeout) * 1000);
    }
  }, 100);



  var counter = 0;
  var checkSeen = 0;

  var allClass = ($ ('.slider').length)-1;
  $ ('span.count_num').text(allClass + 1);
  $ ('.slider').eq(counter).show();
  $ ('.prev').hide();

  //Next function
  $ ('.next').click(function(){
    $ ('.slider').eq(counter).hide();
    $ ('.slider').eq(counter+1).fadeIn();
    counter++;
    $ ('span.num').text(counter+1);
    if (counter == allClass){
      $ ('.next').hide();
      ableText.hide();
      $ ('.prev').show();
      if (counterFinal == 0){
      	newText.show();
      }
      counterFinal = 1;

    }else{
      if (counterFinal == 0){
      	$ ('.next').hide();
      	setTimeout( function() {
          $ ('.next').show();
        }, $(timeout) * 1000);
      }else{
      	$ ('.prev').show();
      }
    }

  });

  //Previous function
  $ ('.prev').click(function(){
    $ ('.slider').eq(counter).hide();
    $ ('.slider').eq(counter-1).fadeIn();
    counter--;
    $ ('span.num').text(counter+1);
    if (counter == 0){
      $ ('.prev').hide();
      $ ('.next').show();
    }else{

      $ ('.next').show();
    }
  	var myDiv = document.getElementById('surveyContainer');
	$ (myDiv).animate({scrollTop:0}, 'fast');
  });
]]></style>





++DEFAULT ERROR MESSAGE
if someLogic:
  error(this.lget("languageResource"))



















++HAL PORET: TRAIN SCREENER VIDEO

<note>MX Media Player (Video)</note>
<style mode="after" name="respview.client.js" with="dQ190" wrap="ready"><![CDATA[
setTimeout( function() {
  if ($ ('div.question').hasClass('hasError')) {
  	  $ ('#btn_continue').addClass('showNext');
      $ ('#question_Q190').show();
             $ ('.fp-ui').hide()
    $ ('.fp-engine').css("pointer-events","none")
  }
}, 1000);

window.setInterval(function(){

}, 100);

//To check if button continue show v2
window.setInterval(function(){
 if ($ ('#btn_continue').hasClass('showNext')) {
  $ ('#question_Q190').show();
  $ ('#question_Q190').find('.question-text').show();
  $ ('#question_Q190').find('.answers').show();
    $ ('.fp-ui').hide()
    $ ('.fp-engine').css("pointer-events","none")
 }
 else{
 	$ ('#question_Q190').hide();
 	$ ('#question_Q190').find('.question-text').hide();
 	$ ('#question_Q190').find('.answers').hide();
 }
}, 100);
]]></style>
<text
  label="dQ190"
  optional="0">
  <title>Please click the play button below to listen to view a brief test video clip.</title>
  <res label="sys_textNoAnswerSelected">Please make sure to finish the video.</res>
  <row label="r1">Times played</row>
  <row label="r2">Current time</row>
  <style name="page.head"><![CDATA[
<style>.answers{display:none;}</style>
]]></style>
  <style name="question.after"><![CDATA[
<div class="mx-stage" id= "mx-stage-${this.label}"></div>
<style type="text/css">
.fp-player a {
  background-image: unset !important;
}

</style>
  <script type="text/javascript" crossorigin="anonymous" src="//s3.amazonaws.com/ssiprojects/rnd/rnd-mx-framework/v1.1/loader/application.min.js?cache=${int(random.random() * 1000)}"></script>

  <script type="text/javascript">
// =============== DOCUMENTATION ===============> https://confluence.dynata.com/x/KRCbAQ
    if (!mx.qDefs)
      mx.qDefs = {};
    if (!mx.toolLoader)
      mx.toolLoader = new mx.Loader({
                                         "baseFileURL": "//s3.amazonaws.com/ssiprojects/rnd/rnd-mx-framework/v1.1/",
                                         "scriptDeps": [
                                        "core/libs.min.js",
                                "core/advanced_ui/Player_libs.js",
                                "core/advanced_ui/Player.js"
                              ],
                                         "cssDeps": ["core/style.css", "core/libs.css", "core/advanced_ui/Player.css"],
                                         "coreFile": "core/application.min.js",
                                         "messages": "//surveytools.researchnow.com/mx/messages/getMsg.php?callback=window.saveMessages&lang=${decLang}",
                                         "platformInterface": { "js": "platform_interface_decipher/application.min.js", "css": "platform_interface_decipher/style.css" }
                                       });
    mx.qDefs["${this.label}"] = ${jsexport()};
    var isTest = "${gv.isUser() and not gv.debug.respview}" === "True";

    //SETTINGS AND STUFF GOES HERE
       var toolSettings = {
          "toolJs": "application.min.js",
          "toolName": "MediaPlayer",
          "jsToLoad": [],
          "cssToLoad": ["style.css"],
          "baseToolPath": "//s3.amazonaws.com/ssiprojects/rnd/rnd-mx-tools/media_player/1.0/",
          "container": "#mx-stage-${this.label}",
          "qid": "${this.label}",
          "toolCssNames": ["test1","test2"],
          "imageBaseURL": "https://rsn-rml-test.s3.amazonaws.com/ray/images/modern/",


          "width": '80%',
          "height": 'auto',
          //"startTime": 20,
          //"endTime": 30,
          "autoPlay": false,

          "videoURLs": { //optional - validate one of this or audioURL are set
               mp4:   "https://ssiprojects.s3.amazonaws.com/ssiCebu/MW_SE_LATAM/ORD-514346-X4M9/TrainScreener.mp4",
               webm:  "https://ssiprojects.s3.amazonaws.com/ssiCebu/MW_SE_LATAM/ORD-514346-X4M9/TrainScreener.webm",
               ogv:   "https://ssiprojects.s3.amazonaws.com/ssiCebu/MW_SE_LATAM/ORD-514346-X4M9/TrainScreener.ogv"
              //mp4:   "https://rsn-rml-prod.s3.amazonaws.com/rml6/media/media_player/robots-10secs.mp4",
              //webm:  "https://rsn-rml-prod.s3.amazonaws.com/rml6/media/media_player/robots-10secs.webm",
              //ogv:   "https://rsn-rml-prod.s3.amazonaws.com/rml6/media/media_player/robots-10secs.ogv"
          },
          //"audioURL": "",//"https://rsn-rml-prod.s3.amazonaws.com/rml6/media/media_player/audio.mp3", //optional - validate one of this or videoURL are set
          "posterImage": "https://ssiprojects.s3.amazonaws.com/ssiCebu/MW_SE_LATAM/ORD-514346-X4M9/blackPoster.jpg",
          "volume": 10,
          //"loop" : true,
          //maxViews
          //showControls
          //etc

          //"showProgressBar": true,
          "qid": getFormName(1),
          //"qid": "q1",
          "time_qid": "",
          "order_qid": "",
          "formNames":{
              "qid": getFormName(1),
              "time_qid": "",
              "order_qid": ""
          },
          "answerItemConfig": {
              "width": "100%",
              "numItemsPerRow": { "small": 2, "medium": 3, "large": 2 }
          },
          "customValidation": function(q){
              console.log("customValidation()");
              return true;
          },
      };

      mx.toolLoader.registerSettings(toolSettings, function(info){
          console.log("Questions loaded");
          console.log(info.bridge.exportQuestions());
          console.log(info);

          info.bridge.setPageValidation(function(){
              console.log("setPageValidation");
              return true;
          });


          info.instance.on("tool_loaded", function(e){
             //console.log("tool_loaded", e);
             if(isTest){
                 ${initMxDataToggle()}
             }
          });

          info.instance.on("fullscreen_changed", function(e){
              if (e.detail) {
                console.log('in')
              } else {
                console.log('out')
              }
          });

          info.instance.on("video_start", function(e){
              console.log(e)
              var api = $ (".mx-player-element").data("flowplayer")
          //    if(!api.isFullscreen) api.fullscreen();
          });

          info.instance.on("video_end", function(e){
              var api = $ (".mx-player-element").data("flowplayer")
          //    if(api.isFullscreen) api.fullscreen();
          });

          info.instance.on("volume_change", function(e){
              $ ('.volume').text(e.detail * 100);
          });
      });
    //END USER EDITABLE CODE

    $ (document).ready(function(){
      mx.toolLoader.initLoad();

  /*
   countIt({
    "tool-id": "mxCollapsible",
    "project-id": "p1019653",
    "order": "ORD-12345-ABCD"
   });
  */
  $.getScript('${MxToolUsageUrl('mxmediaplayer')}');
    });
  </script>
]]></style>
</text>

<radio
  label="Q190"
  shuffle="rows">
  <title>Which of the following did you see and hear?</title>
  <row label="r1" value="1">Bicycle racing</row>
  <row label="r2" value="2">Running stream</row>
  <row label="r3" value="3">Horse jumping</row>
  <row label="r4" value="4">Train horn and tracks</row>
  <row label="r5" randomize="0" value="5">Did not see or hear anything</row>
  <row label="r6" randomize="0" value="6">Did not see anything, only heard audio</row>
  <row label="r7" randomize="0" value="7">Did not hear anything, only saw video</row>
  <row label="r8" randomize="0" value="8">Received an error message</row>
</radio>

<suspend/>

<term cond="not Q190.r4">Q190 not Train Horn</term>


















++HAL PORET; VIDEO WITH IMAGE AS SCREEN

<radio
  label="dVideo"
  optional="1"
  translateable="0"
  where="execute,survey,report">
  <title>Final Video</title>
  <exec>
dVideo.val = dCell.val ######### to Main SP: please uncomment this one once RandD team is done fixing

#dVideo.val = 0 ### to Main SP please remove this one RandD team is done fixing
  </exec>

  <row label="r1" value="1">Video_1001A</row>
  <row label="r2" value="2">Video_1001B</row>
  <row label="r3" value="3"/>
  <row label="r4" value="4"/>
</radio>

<suspend/>

<note>VIDEO START HERE</note>
<note>========================================================= MX MEDIA PLAYER (VIDEO) START ===================================================</note>
<note>MX Media Player (Video)</note>
<block label="bmxplayer" builder:title="MX Media Player">
  <text
   label="MXmediaPlayer"
   optional="0">
    <title>Below is the icon for the movie.  Please click on the icon to watch a segment of the movie. </title>
    <res label="sys_textNoAnswerSelected">Please make sure to finish the video.</res>
    <row label="r1">Times played</row>
    <row label="r2">Current time</row>
    <style name="page.head"><![CDATA[
<style>
  .answers{display:none;}
  #mx-stage-${this.label} { display: none; }
  .cust-container { text-align: center; margin-bottom: 20px; }
  .cust-container.cust-done { display: none !important; }
  .cust-fancybox { display: none; }
  .fancybox-container .mx-stage {
    width: 100%;
  }

  .mx-stage.cust-done {
    display: block !important;
    width: 80%;
    margin: 0 auto;
  }

  .mx-player-element.cust-done .fp-ui {
    background: #000;
  }

</style>
]]></style>
    <style name="question.after"><![CDATA[
<div class="mx-stage" id="mx-stage-${this.label}"></div>

  <script type="text/javascript" crossorigin="anonymous" src="//s3.amazonaws.com/ssiprojects/rnd/rnd-mx-framework/v1.1/loader/application.min.js?cache=${int(random.random() * 1000)}"></script>

  <!-- <script type="text/javascript" src="//d2n88fe5uqdqty.cloudfront.net/rnd/plugins/fancybox/3.x.x/3.1.20/jquery.fancybox.js"></script>
  <link rel="stylesheet" href="//d2n88fe5uqdqty.cloudfront.net/rnd/plugins/fancybox/3.x.x/3.1.20/jquery.fancybox.css" />     -->

  <div class="cust-container">
    <img class="cust-loader" src="//d2n88fe5uqdqty.cloudfront.net/rnd/rnd-mx-framework/dynata_spinner_v2_100px.gif" />
    <a class="cust-fancybox" href="#mx-stage-${this.label}"><img src="//d2n88fe5uqdqty.cloudfront.net/ssiCebu/MW_SE_LATAM/ORD-516120-F3Y9/img_1A_1B.jpg" alt="" style="width: 100%;"/></a>
  </div>

  <script type="text/javascript">

// =============== DOCUMENTATION ===============> https://confluence.dynata.com/x/KRCbAQ
    if (!mx.qDefs)
      mx.qDefs = {};
    if (!mx.toolLoader)
      mx.toolLoader = new mx.Loader({
                                         "baseFileURL": "//s3.amazonaws.com/ssiprojects/rnd/rnd-mx-framework/v1.1/",
                                         "scriptDeps": [
                                        "core/libs.min.js",
                                "core/advanced_ui/Player_libs.js",
                                "core/advanced_ui/Player.js"
                              ],
                                         "cssDeps": ["core/style.css", "core/libs.css", "core/advanced_ui/Player.css"],
                                         "coreFile": "core/application.min.js",
                                         "messages": "//surveytools.researchnow.com/mx/messages/getMsg.php?callback=window.saveMessages&lang=${decLang}",
                                         "platformInterface": { "js": "platform_interface_decipher/application.min.js", "css": "platform_interface_decipher/style.css" }
                                       });
    mx.qDefs["${this.label}"] = ${jsexport()};
    var isTest = "${gv.isUser() and not gv.debug.respview}" === "True";

    //SETTINGS AND STUFF GOES HERE
       var toolSettings = {
          "toolJs": "application.min.js",
          "toolName": "MediaPlayer",
          "jsToLoad": [],
          "cssToLoad": ["style.css"],
          "baseToolPath": "//s3.amazonaws.com/ssiprojects/rnd/rnd-mx-tools/media_player/1.0/",
          "container": "#mx-stage-${this.label}",
          "qid": "${this.label}",
          "toolCssNames": ["test1","test2"],
          "imageBaseURL": "https://rsn-rml-test.s3.amazonaws.com/ray/images/modern/",


          "width": '100%',
          "height": 'auto',
          //"startTime": 20,
          //"endTime": 30,
          "autoPlay": false,

          "videoURLs": { //optional - validate one of this or audioURL are set
              mp4:   "https://d2n88fe5uqdqty.cloudfront.net/ssiCebu/MW_SE_LATAM/ORD-516120-F3Y9/0529/${dVideo.selected.text}.mp4",
              webm:  "https://d2n88fe5uqdqty.cloudfront.net/ssiCebu/MW_SE_LATAM/ORD-516120-F3Y9/0529/${dVideo.selected.text}.webm",
              ogv:   "https://d2n88fe5uqdqty.cloudfront.net/ssiCebu/MW_SE_LATAM/ORD-516120-F3Y9/0529/${dVideo.selected.text}.ogv"
              //mp4:   "https://d2n88fe5uqdqty.cloudfront.net/rnd/tools/mediaplayer/demos/videos/2016-10-27_2/bigbuckbunny-trailer.mp4",
              //webm:  "https://d2n88fe5uqdqty.cloudfront.net/rnd/tools/mediaplayer/demos/videos/2016-10-27_2/bigbuckbunny-trailer.webm",
              //ogv:   "https://d2n88fe5uqdqty.cloudfront.net/rnd/tools/mediaplayer/demos/videos/2016-10-27_2/bigbuckbunny-trailer.ogv"
              //mp4:   "https://rsn-rml-prod.s3.amazonaws.com/rml6/media/media_player/robots-10secs.mp4",
              //webm:  "https://rsn-rml-prod.s3.amazonaws.com/rml6/media/media_player/robots-10secs.webm",
              //ogv:   "https://rsn-rml-prod.s3.amazonaws.com/rml6/media/media_player/robots-10secs.ogv"
          },
          //"audioURL": "",//"https://rsn-rml-prod.s3.amazonaws.com/rml6/media/media_player/audio.mp3", //optional - validate one of this or videoURL are set
          //"posterImage": "https://rsn-rml-prod.s3.amazonaws.com/rml6/media/media_player/timelapse_thumbail.jpg",
          "volume": 80,
          "maxViews": 1,
          //"loop" : true,
          //maxViews
          //showControls
          //etc

          "showProgressBar": true,
          "qid": getFormName(1),
          //"qid": "q1",
          "time_qid": "",
          "order_qid": "",
          "formNames":{
              "qid": getFormName(1),
              "time_qid": "",
              "order_qid": ""
          },
          "answerItemConfig": {
              "width": "100%",
              "numItemsPerRow": { "small": 2, "medium": 3, "large": 2 }
          },
          "customValidation": function(q){
              console.log("customValidation()");
              return true;
          },
      };

      mx.toolLoader.registerSettings(toolSettings, function(info){
          console.log("Questions loaded");
          console.log(info.bridge.exportQuestions());
          console.log(info);

          info.bridge.setPageValidation(function(){
              console.log("setPageValidation");
              return true;
          });


          info.instance.on("tool_loaded", function(e){
             //console.log("tool_loaded", e);
             if(isTest){
                 ${initMxDataToggle()}
             }

             $ ('.cust-loader').hide();
             $ ('.cust-fancybox')
              .css('display', 'inline-block')
              .mxbox({
                fullScreen: {
                  autoStart: false
                }
              });
          });

          info.instance.on("fullscreen_changed", function(e){
              if (e.detail) {
                console.log('in')
              } else {
                console.log('out')
              }
          });
          info.instance.on("volume_change", function(e){
              $ ('.volume').text(e.detail * 100);
          });

          info.instance.on("video_end", function(e){
            $ (".mx-player-element").addClass("cust-done").data("flowplayer").disable();
            $ ("#mx-stage-"+getFormName(1)).removeClass("fancybox-content").addClass("cust-done");
            $ (".cust-container").addClass("cust-done");

            $ (".fp-player a").hide();

            jQuery.mxbox.close();
            $ ("#question_"+getFormName(2)+" .question-text, #question_"+getFormName(2)+" .answers").show();
          });
      });
    //END USER EDITABLE CODE

    $ (document).ready(function(){
      mx.toolLoader.initLoad();

  /*
   countIt({
    "tool-id": "mxCollapsible",
    "project-id": "p1019653",
    "order": "ORD-12345-ABCD"
   });
  */
  $.getScript('${MxToolUsageUrl('mxmediaplayer')}');
    });
  </script>

  <style type="text/css">
  .fp-player a {
    background-image: unset !important;
  }
  </style>
]]></style>
  </text>
</block>

<radio
  label="Q210">
  <title>Please confirm whether or not you were able to view and hear the movie segment clearly.</title>
  <row label="r1" value="1">Yes, I was able to view and hear the movie segment clearly</row>
  <row label="r2" value="2">No, I was not able to view and hear the movie segment clearly</row>
</radio>

<suspend/>

<term cond="Q210.r2">Q210: No, I was not able to view and hear the movie segment clearly</term>










++HAL PORET IMAGES SLIDER SHOW NEXT IMAGE IN 5 SECONDS
<style label="disable_continue" arg:continueBtnDelay="2" arg:firstImgDelay="5" arg:timeout="2" mode="after" name="respview.client.js" with="dQ220" wrap="ready"><![CDATA[
//STYLE BELOW WILL HIDE NEXT EVERY IMAGE AND SHOW IN 2 SECONDS
  //$ ('.survey-body').css('display','block'); //fullscreen image
  //$ ('.comment').css('max-width','100%'); //fullscreen image
  var myDiv = document.getElementById('surveyContainer');
  var submitButton = $ ("#btn_continue, #btn_finish, #question_Q220, #question_Q240, #question_Q260");
  //var ableText =  $ ('#disabledtxt');
  //var newText =  $ ('#newtitle');
  var counterFinal = 0; // To know if all images are seen. Default false.


  submitButton.hide();
  //ableText.show();
  //newText.hide();
  $ ('.next').css('visibility','hidden');

  if ($ ('div.question').hasClass('hasError')) {
    submitButton.show();
    //ableText.hide();
    //newText.hide();
    counterFinal = 1
  	$ ('.next').css('visibility','visible');
  }else{
    counterFinal = 0
    setTimeout( function() {
  		$ ('.next').css('visibility','visible');
    }, $(firstImgDelay) * 1000);
  }

  var checkTime = 0; // To check time if reached 15 seconds. Default false.

  window.setInterval(function(){
  	if (counterFinal == 1){
  		setTimeout( function() {
        	submitButton.show();
        	//newText.hide();
        	//ableText.hide();
    	}, $(continueBtnDelay) * 1000);
    }
  }, 100);



  var counter = 0;
  var checkSeen = 0;

  var allClass = ($ ('.slider').length)-1;
  $ ('span.count_num').text(allClass + 1);
  $ ('.slider').eq(counter).show();
  $ ('.prev').css('visibility','hidden');

  //Next function
  $ ('.next').click(function(){
    $ ('.slider').eq(counter).hide();
    $ ('.slider').eq(counter+1).fadeIn();
    counter++;
    $ ('span.num').text(counter+1);
    if (counter == allClass){
  		$ ('.next').css('visibility','hidden');
  		$ ('.prev').css('visibility','visible');
      	counterFinal = 1;

    }else{
      if (counterFinal == 0){
  		$ ('.next').css('visibility','hidden');
      	setTimeout( function() {
  			$ ('.next').css('visibility','visible');
    	}, $(timeout) * 1000);
      }else{
  		$ ('.prev').css('visibility','visible');
      }
    }
	//$ (myDiv).animate({scrollTop:0}, 'fast');
	//window.scrollTo(0, 0);

  });

  //Previous function
  $ ('.prev').click(function(){
    $ ('.slider').eq(counter).hide();
    $ ('.slider').eq(counter-1).fadeIn();
    counter--;
    $ ('span.num').text(counter+1);
    if (counter == 0){
  		$ ('.prev').css('visibility','hidden');
  		$ ('.next').css('visibility','visible');
    }else{
  		$ ('.next').css('visibility','visible');
    }
	//$ (myDiv).animate({scrollTop:0}, 'fast');
	//window.scrollTo(0, 0);
  });
]]></style>
<html label="dQ220" where="survey">Please use the green arrows to scroll to view the home page of this website.
<div class="container">
<span style="font-size:30px;" class="prev">❮</span>
<span style="font-size:30px;" class="next">❯</span>

  <div class="slider">
    <div class="text"><img src="[rel F31-0220_Image_501.jpg]" style="display: block ;margin-left: auto;margin-right: auto;width:100%;" /></div>
  </div>

  <div class="slider">
    <div class="text"><img src="[rel F31-0220_Image_502.jpg]" style="display: block ;margin-left: auto;margin-right: auto;width:100%;" /></div>
  </div>

  <div class="slider">
    <div class="text"><img src="[rel F31-0220_Image_503.jpg]" style="display: block ;margin-left: auto;margin-right: auto;width:100%;" /></div>
  </div>

  <div class="slider">
    <div class="text"><img src="[rel F31-0220_Image_504.jpg]" style="display: block ;margin-left: auto;margin-right: auto;width:100%;" /></div>
  </div>

  <div class="slider">
    <div class="text"><img src="[rel F31-0220_Image_505.jpg]" style="display: block ;margin-left: auto;margin-right: auto;width:100%;" /></div>
  </div>

  <div class="slider">
    <div class="text"><img src="[rel F31-0220_Image_506.jpg]" style="display: block ;margin-left: auto;margin-right: auto;width:100%;" /></div>
  </div>

  <div class="slider">
    <div class="text"><img src="[rel F31-0220_Image_507.jpg]" style="display: block ;margin-left: auto;margin-right: auto;width:100%;" /></div>
  </div>

  <div class="slider">
    <div class="text"><img src="[rel F31-0220_Image_508.jpg]" style="display: block ;margin-left: auto;margin-right: auto;width:100%;" /></div>
  </div>

  <div class="slider">
    <div class="text"><img src="[rel F31-0220_Image_509.jpg]" style="display: block ;margin-left: auto;margin-right: auto;width:100%;" /></div>
  </div>

  <div class="slider">
    <div class="text"><img src="[rel F31-0220_Image_510.jpg]" style="display: block ;margin-left: auto;margin-right: auto;width:100%;" /></div>
  </div>
  <div style="text-align: center;font-size:2rem;font-weight:bold;"><span class="num">1</span> of <span class="count_num">0</span></div>
</div>

&lt;style type="text/css"&gt;
  .slider {
     display: none;
  }

  .prev{
	     position: absolute;
	     top: 35%;
	     left: 3%;
	     border-radius: 3px 0 0 3px;
	     padding: 10px;
	     font-weight: 700;
	     color:#00d957;
	     background-color: #303030;
	}
	.next{
	     position: absolute;
	     top: 35%;
	     left: 93%;
	     border-radius: 3px 0 0 3px;
	     padding: 10px;
	     font-weight: 700;
	     color:#00d957;
	     background-color: #303030;
  }
  .text{
     padding-left: 22px ;
     text-indent: -22px
     text-align: left;
     padding: 20px 12px;
  }
  .prev:hover, .next:hover {
      background-color: #00d957;
      cursor: pointer;
      color: #303030;

  }

&lt;/style&gt;</html>

<radio
  label="Q220">
  <title>Before continuing with the survey, please indicate whether or not you were able to view the webpage clearly.  </title>
  <row label="r1" value="1">I viewed the webpage clearly</row>
  <row label="r2" value="2">I was unable to view the webpage clearly</row>
</radio>

<suspend/>





++CAROUSEL MULTI WITH ROW CONDITIONs

<res label="Q30r1Error">Please select an organization for The Salvation Army.</res>
<res label="Q30r2Error">Please select an organization for American Red Cross.</res>
<res label="Q30r3Error">Please select an organization for United Way.</res>
<res label="Q30r4Error">Please select an organization for Susan G. Komen.</res>
<res label="Q30r5Error">Please select an organization for North Texas Food Bank.</res>
<res label="Q30r6Error">Please select an organization for March of Dimes.</res>
<res label="Q30r7Error">Please select an organization for Dallas Area Habitat for Humanity.</res>

<checkbox
  label="Q30"
  grouping="cols"
  shuffle="rows,cols">
  <title>Please indicate your reasons for donating to each of the following organizations.</title>
  <comment>Select all that apply</comment>
<validate>
if Q30.r1.displayed and Q30.r1.count==0:
  error(res.Q30r1Error)
if Q30.r2.displayed and Q30.r2.count==0:
  error(res.Q30r2Error)
if Q30.r3.displayed and Q30.r3.count==0:
  error(res.Q30r3Error)
if Q30.r4.displayed and Q30.r4.count==0:
  error(res.Q30r4Error)
if Q30.r5.displayed and Q30.r5.count==0:
  error(res.Q30r5Error)
if Q30.r6.displayed and Q30.r6.count==0:
  error(res.Q30r6Error)
if Q30.r7.displayed and Q30.r7.count==0:
  error(res.Q30r7Error)
</validate>
<row label="r1" cond="Q28.r2" optional="1">The Salvation Army</row>
<row label="r2" cond="Q28.r1" optional="1">American Red Cross</row>
<row label="r3" cond="Q28.r6" optional="1">United Way</row>
<row label="r4" cond="Q28.r3" optional="1">Susan G. Komen</row>
<row label="r5" cond="Q28.r7" optional="1">North Texas Food Bank</row>
<row label="r6" cond="Q28.r5" optional="1">March of Dimes</row>
<row label="r7" cond="Q28.r4" optional="1">Dallas Area Habitat for Humanity</row>
<col label="c1" >I am passionate about the social issues this organization addresses</col>
<col label="c2" >I am in the habit of regularly donating</col>
<col label="c3" >I visited or volunteered at the organization</col>
<col label="c4" >I received a request for donations in the mail</col>
<col label="c5" >I heard about the organization from a family member or friend</col>
<col label="c6" >I heard about the organization through social media</col>
<col label="c7" >I saw a story in the news or online about the organization and its cause</col>
<col label="c8" >I wanted to receive tax benefits for making a charitable contribution</col>
<col label="c9" >I attended an event sponsored by the organization</col>
<col label="c10" >I or a family member has been impacted by the cause the organization supports</col>
<col label="c11" >I saw a billboard requesting donations</col>
<col label="c12" >The government no longer supports this cause/I’m concerned it won’t in the future</col>
<col label="c13"  randomize="0">None of these</col>

  <style label="CarouselStyling" name="question.after"><![CDATA[
<style>.answers{visibility:hidden;}</style>
    <script type="text/javascript" src="//d2n88fe5uqdqty.cloudfront.net/ssi_js/decipher/ssi_ALLInOne_Confirmit_2.0_groups_decipher.js"></script>

    <script type="text/javascript">
    var lukanka;
    (function (lukanka) {
      if (!lukanka.qDefs)
        lukanka.qDefs = {};
        lukanka.qDefs["${this.label}"] = ${jsexport()};
      $ (document).ready(function(){
        parseJsexportData();
      });
    })(lukanka || (lukanka = {}));

    </script>

    <div class="gridclick" style="margin-bottom:50px"><img class="img-responsive loading-container" style="margin: 40px auto;" src="//d2n88fe5uqdqty.cloudfront.net/rnd/tools/images/loading.gif" /><div class="gridclick-container"></div></div>

    <link rel="stylesheet" type="text/css" href="//d2n88fe5uqdqty.cloudfront.net/rnd/tools/gridclick/gridClick_v2.9.4_d.min.css">
    <link rel="stylesheet" type="text/css" href="//d2n88fe5uqdqty.cloudfront.net/rnd/plugins/ionicons/ionicons-2.0.1/css/ionicons.min.css">
    <link rel="stylesheet" type="text/css" href="//d2n88fe5uqdqty.cloudfront.net/rnd/plugins/fancybox/3.x.x/3.1.20/jquery.fancybox.css">

    <script type="text/javascript" src="//d2n88fe5uqdqty.cloudfront.net/rnd/tools/gridclick/gridClick_v2.9.4_d.min.js"></script>
    <script type="text/javascript" src="//d2n88fe5uqdqty.cloudfront.net/rnd/plugins/fancybox/3.x.x/3.1.20/jquery.fancybox.js"></script>

    <script type="text/javascript">
      $ (function() {
        var config = {

          // =============== DOCUMENTATION ===============> https://confluence.surveysampling.com/x/hq17AQ

          sForm : getFormName(1), // form name of the grid
          sSplitter : '$', // splitter for images
          sOrientation : 'horizontal', // 'horizontal', 'vertical'
          sProgressSepText : ' / ', // separator text between item progress
          sTxtProgress : '', // text after progress text
          sForwardButton : '#btn_continue',  // forward button jQuery selector - used for toggling the next button
          sOeDefaultHolder: '&#xf2bf;........', // default input placeholder when OEs are present
          sHideScaleType : 'keepAlignment', // method to hide the scales - 'keepAlignment', 'newAlignment'
          sDkScaleBgColor : '#E9ECEF', // background color for the DK scale
          iMinItemsRequired : 1, // minimum answered items required to toggle the next button - default is null - all required
          iAnimationTime : 400, // animation time in ms
          iMaxContainerWidth : 750, // maximum tool container width - can be used to enlarge/shrink the tool
          iVertItemContainPerc : 45, // vertical item container percentage width
          iVertItemContainMarginPerc : 5, // vertical item container percentage margin
          iFontSize : null, // font size for the tool container
          aDkScale : [13], // dk codes for scale - for example: [99,999]
          aOtherNotRequired : [], // other not required item codes - for example: [99,999]
          aOtherPlaceHolder : [], // other input custom placeholder - for example [{'98': 'Please specify'}, {'998': 'Specify'}]
          aOtherOpenOptional: [], // other OE input not required - next button will be toggled without the need of OE input - scale can still be chosen - for example: [98, 998]
          aHideScaleCodes: [], // hide scales for specific codes [{98: [1,3]}, {1: [2,4]}]

          oElementConfig : { // element/item config object
            bImages : false, // images as options - using the splitter
            bShowLabel : true, // show labels for the options
            bShowOeImage : false, // if OE - should it show an image for the other option
            bZoomEnabled : false, // is zoom enabled
            sZoomImage : '//d2n88fe5uqdqty.cloudfront.net/rnd/tools/images/zoom_icon2.png', // zoom icon image path
            sZoomPosition : 'br', // position for the zoom icon - 'br', 'bl', 'tl'
            sImagePath : '', // path for the images to be used with the splitter
            sSmallImageExtension : '_S.jpg', // extension for the small image (default shown)
            sLargeImageExtension : '_L.jpg', // extension for the zoomed image
            iMaxImageWidth: 100, // maximum image width - needs to be lower than iWidth
            iMaxImageHeight: 100, // maximum image height - needs to be lower than iHeight
            iWidth : 130, // overall item container width
            iHeight : 100, // overall item container height
            iHorizontalSpacing : 15, // horizontal spacing between items
            iVerticalSpacing : 5, // vertical spacing between items
            iFontSize: null // font size for the item container
          },

          oScaleConfig : { // scale config object
            bImages : false, // images as options - using the splitter
            bShowLabel : true, // show labels for the options
            bZoomEnabled : false, // is zoom enabled
            sZoomImage : '//d2n88fe5uqdqty.cloudfront.net/rnd/tools/images/zoom_icon2.png', // zoom icon image path
            sZoomPosition : 'br', // position for the zoom icon - 'br', 'bl', 'tl'
            sImagePath : '', // path for the images to be used with the splitter
            sSmallImageExtension : '.png', // extension for the small image (default shown)
            sLargeImageExtension : '.png', // extension for the zoomed image
            iMaxImageWidth: 62, // maximum image width - needs to be lower than iWidth
            iMaxImageHeight: 62, // maximum image height - needs to be lower than iHeight
            iWidth : 120, // scale button width
            iHeight : 35, // scale button height
            iHorizontalSpacing : 10, // horizontal scale spacing
            iVerticalSpacing : 10, // vertical scale spacing
            iFontSize: null // font size for the scale container
          },

          oFancyBoxConfig : {}, // config for adding custom fancybox parameters - //fancyapps.com/fancybox/3/docs/
          bInvertItemScale : false, // invert the item/scale containers - top/bottom for horizontal, left/right for vertical
          bHeightAuto : false, // make the items/scales have auto height for horizontal view - should not be used for vertical
          bScaleNewLine: true, // make the scale in horizontal mode render vertically (one below the other) when not enough horizontal space for all scales
          bReverse : true, // reverse the direction of the items/navigation arrows
          bShowProgressText : false, // show the progress text progress
          bShowProgressIndicator :  true, // show the progress indicator
          bDisableNavigation : false, // disable navigation arrows - will only be allowed for multi or when no AutoNext item is false
          bAutoNextItem : true, // automatically go to next item when selected - working on multi only when DK scale is selected
          bAutoSubmit : false, // auto submit page when all items are answered
          bInitialNavigation : false, // initial navigation toggle
          bEnableNavAnswered : false, // Enable navigation for already answered items only. Not applicable when bDisableNavigation or bInitialNavigation is enabled.
          bMultiple : true, // is the grid multiple
          bAutoSizeScales : false, //Automatically re-render scales to fit the width. Not applicable when bScaleNewLine is enabled or when oScaleConfig.iFirstLastWidth is set.
          bIsTest : true, // will make the tool warning appear as JavaScript alerts to make sure they are handled
          onStart : function() {}, // function called before the tool starts generating
          onAnswer : function(e) {}, // function called when an answer is given (click on scale)
          onInput : function(e) {}, // function called on OE input (item)
          onCompleted : function() {}, // function called when all items are answered (unless OE not required codes are defined) before next button is toggled
          onReady : function() {
            $ ('.answers').hide();
          }, // function called after tool is fully loaded
        }
        $ ('body').gridClick(config);


      });
    </script>
]]></style>

</checkbox>

<suspend/>




++MARKETSIGHT MARKET SIGHT
Ask Decipher confe:
hi Team! can someone help me create API for this client?
Emma McAfee
emcafee@longwoods-intl.com

add access to client:
			Permission Level: Custom
				Survey                : View
				Reporting / Crosstabs : Edit
				Data                  : Download // required
				Response Summary      : View
				Campaign Manager      : None
				Research Dashboard    : View
				Theme Editor          : None
				Admin                 : None
				Offline               : None

once created, share with PM:
  Decipher KEY == MarketSight API == Client KEY == API KEY
  project link for MarketSight == Decipher Overview project path

sample:
  Client: Emma McAfee emcafee@longwoods-intl.com
  Decipher KEY: 73yfaucdf3hh9yu9fabsbfv44s7uxuhvw4cz5mbmmhg30hqvqb80y1guja7mmjqd
  Project Link: https://survey-d.dynata.com/apps/portal/#/projects/detail/selfserve/53b/2005224




++HAL PORET: COPY FROM PREVIOUS QUESTION
++HAL PORET: DISABLE PREVIOUS QUESTION
  <radio
   label="dQ330">
    <title>Do you think that the products on the website we showed you are affiliated with, or sponsored or approved by, any other company or brand?  </title>
    <exec>
dQ330.val = Q330.val
    </exec>

    <row label="r1" value="1">Yes, I have</row>
    <row label="r2" value="2">No, I have not</row>
    <row label="r3" value="3">Don't know/No opinion</row>
    <style label="noevent" arg:qLabel="dQ330" name="question.after" wrap="ready"><![CDATA[
$ ('#question_$(qLabel)').css('pointer-events','none');
]]></style>
  </radio>




++CAROUSEL HIDE IF SELECTED IN PREVIOUS ITEM
<style copy="hideElements" cond="not S1[row][col]" name="question.element"/>





++PRINT ASCII CODES TO PROPER TEXT
Q1.unsafe_val




++GRID WITH SHOW UNSHOW OE CAROUSEL


<checkbox
  label="Q1"
  atleast="1">
  <title>Thinking of consumer electronics that you have purchased in the past 12 months or so, which have you purchased for you or someone in your household?</title>
  <comment>(Select all that apply)</comment>
  <row label="r1">Desktop computer/Laptop</row>
  <row label="r2">Tablet</row>
  <row label="r3">Printer</row>
  <row label="r4">TV /Smart TV</row>
  <row label="r5">Gaming console (ex. Xbox, PlayStation, etc.)</row>
  <row label="r6">Camera</row>
  <row label="r7">Mobile phones</row>
  <row label="r8">Bluetooth speakers</row>
  <row label="r9">Wearable devices (ex., FitBit, Apple watch, etc.)</row>
  <row label="r10">Smart Home devices (ex. Echo, Google Home, Nest thermostat, Ring doorbell, etc)</row>
  <row label="r11">High end headphones (ex., AirPods, Beats, Bose, etc.)</row>
  <row label="r12" exclusive="1" randomize="0">None of the above</row>
</checkbox>

<suspend/>


<res label="Q2r11OpenError">Please provide answer for Other retailer for %s</res>

<checkbox
  label="Q2"
  cond="not Q1.r12"
  atleast="1"
  colCond="Q1.rows[col.index]"
  grouping="cols"
  ss:listDisplay="0">
  <title>From which of the following retailers did you purchase these consumer electronics in the past 12 months?</title>
  <comment>SELECT ALL THAT APPLY.</comment>
  <validate>
for eachcol in Q2.cols:
	if eachcol.displayed and eachcol.r12:
		if not Q2_OE.attr("%s" % eachcol.label.replace("c","r")):
			error(res.Q2r11OpenError % eachcol.text)
  </validate>

  <col label="c1">Desktop computer/Laptop</col>
  <col label="c2">Tablet</col>
  <col label="c3">Printer</col>
  <col label="c4">TV /Smart TV</col>
  <col label="c5">Gaming console (ex. Xbox, PlayStation, etc.)</col>
  <col label="c6">Camera</col>
  <col label="c7">Mobile phones</col>
  <col label="c8">Bluetooth speakers</col>
  <col label="c9">Wearable devices (ex., FitBit, Apple watch, etc.)</col>
  <col label="c10">Smart Home devices (ex. Echo, Google Home, Nest thermostat, Ring doorbell, etc)</col>
  <col label="c11">High end headphones (ex., AirPods, Beats, Bose, etc.)</col>
  <row label="r1">Amazon</row>
  <row label="r2">Apple</row>
  <row label="r3">Best Buy</row>
  <row label="r4">Walmart</row>
  <row label="r5">Target</row>
  <row label="r6">Costco</row>
  <row label="r7">Sam's Club</row>
  <row label="r8">New Egg</row>
  <row label="r9">Staples</row>
  <row label="r10">Manufacturer's website like Dell, HP, Sony, etc.</row>
  <row label="r11">Mobile provider retail store/website (ie., Verizon, AT&amp;T, T-Mobile, etc)</row>
  <row label="r12" randomize="0" ss:rowClassNames="otherSpecRow">Other retailer (specify):</row>
  <style name="question.after"><![CDATA[
<script>
      $ ( document ).tooltip();
      $ (document).ready(function () {
         var counter = 0;
         $ ("td.otherSpecRow").each(function () {
             var header = $ (this).attr("headers").split('_');
             //console.log(header)
             //var id = header.slice(-1);
             var id = header[header.length-1];
             console.log("id "+ id+" | "+" header : "+header)

             $ (this).find("span.fir-icon").after($ ("."+id).find("input[type='text']"));
             if (!$ (this).find("input[type='checkbox']").prop("checked")) {

                $ (this).find("input[type='text']").hide();
                $ (this).find("input[type='text']").val("");
             };
             counter = counter + 1;
         });

         $ ("td.otherSpecRow input[type='checkbox']").change(function () {
           if (!$ (this).prop("checked")) {
              $ (this).siblings("input[type='text']").hide();
                $ (this).siblings("input[type='text']").val("");
           }
           else {
              $ (this).siblings("input[type='text']").show();
           }
         });
      });
      </script>
]]></style>
</checkbox>

<text
  label="Q2_OE"
  rowCond="Q1[row]">
  <title>From which of the following retailers did you purchase these consumer electronics in the past 12 months?</title>
  <comment>Please be as specific as possible</comment>
  <row label="r1" ss:rowClassNames="c1">Desktop computer/Laptop</row>
  <row label="r2" ss:rowClassNames="c2">Tablet</row>
  <row label="r3" ss:rowClassNames="c3">Printer</row>
  <row label="r4" ss:rowClassNames="c4">TV /Smart TV</row>
  <row label="r5" ss:rowClassNames="c5">Gaming console (ex. Xbox, PlayStation, etc.)</row>
  <row label="r6" ss:rowClassNames="c6">Camera</row>
  <row label="r7" ss:rowClassNames="c7">Mobile phones</row>
  <row label="r8" ss:rowClassNames="c8">Bluetooth speakers</row>
  <row label="r9" ss:rowClassNames="c9">Wearable devices (ex., FitBit, Apple watch, etc.)</row>
  <row label="r10" ss:rowClassNames="c10">Smart Home devices (ex. Echo, Google Home, Nest thermostat, Ring doorbell, etc)</row>
  <row label="r11" ss:rowClassNames="c11">High end headphones (ex., AirPods, Beats, Bose, etc.)</row>
  <style name="question.after"><![CDATA[
<style>
div#question_Q2_OE {display: none;}
.grid-table-mode input[type="text"], .grid-table-mode textarea {
    padding: .25em .5em;
    width: 90px;
}
</style>
]]></style>
</text>0






++MAXDIFF INDICES METHOD ** USE ME AS DEFAULT **
++MAXDIFF INDICES METHOD ** USE ME AS DEFAULT **
++MAXDIFF INDICES METHOD ** USE ME AS DEFAULT **
++MAXDIFF INDICES METHOD ** USE ME AS DEFAULT **
++MAXDIFF INDICES METHOD ** USE ME AS DEFAULT **
++RECORDS OPTION ACTUAL ROW NUMBER (item number in full list - r5,r23,r55,r2) INSTEAD OF ACTUAL OPTION NUMBER (item number - 1,2,3,4)
files can be found here:
C:\j.a.y\Decipher\maxdiff example indices method

reference project: 140x1 - Decipher 20071350 | ORD-534705-Q1Z9 | Whitman Insight Strategy | FI/IA - Insurance Consumer Mindset Study

<note>!!!!!!!!!!!!!!!!!!!!!!!!! UPDATE BLOCK NAME !!!!!!!!!!!!!!!!!!!!!!!!!</note>
<block label="FI_Maxdiff_block" cond="1">
  <note>MaxDiff Indices Template --Start--</note>
  <exec when="init">
def setupMaxDiffFile(fname, fileDelimiter="\t"):
    try:
        f = open("%s/%s" % (gv.survey.path, fname))
        mdObj = [ line.strip("\r\n").split(fileDelimiter) for line in f.readlines() ]
        d = dict( ("v%s_t%s" % (row[0], row[1]), row[2:]) for row in mdObj )
    except IOError:
        d = {}
    return d

def setupMaxDiffItemsI(d, vt, question):
    item_index = dict( (r.o.label.strip("item"), r.index) for r in question.rows )

    items = d[vt]

    for r in question.rows:
        if r.o.label.strip("item") not in items:
            r.disabled = True

    question.rows.order = [ item_index[i] for i in items ]

    print "*****STAFF ONLY*****"
    print "Version_Task: %s" % vt
    for i in range(len(items)):
        print "Item %s: %s" % (i+1,items[i])
    p.MDitem1 = items[0]
    p.MDitem2 = items[1]
    p.MDitem3 = items[2]
    p.MDitem4 = items[3]
    p.MDitem5 = items[4]
  </exec>

  <note>!!!!!!!!!!!!!!!!!!!!!!!!! UPDATE FILENAME !!!!!!!!!!!!!!!!!!!!!!!!!</note>
  <note>!!!!!!!!!!!!!!!!!!!!!!!!! REPLACE ALL QUESTION NUMBER (currently Q4aFI_md) !!!!!!!!!!!!!!!!!!!!!!!!!</note>
  <exec when="init">
Q4aFI_md = setupMaxDiffFile("Maxdiff_FI.dat")
  </exec>

  <note>!!!!!!!!!!!!!!!!!!!!!!!!! UPDATE QUTOANAME !!!!!!!!!!!!!!!!!!!!!!!!!</note>
  <quota label="Q4aFI_quota" overquota="noqual" sheet="Q4aFI_Maxdiff"/>

  <note>!!!!!!!!!!!!!!!!!!!!!!!!! UPDATE RANGE TO TOTAL MAXDIFF VERSIONS !!!!!!!!!!!!!!!!!!!!!!!!!</note>
  <note>!!!!!!!!!!!!!!!!!!!!!!!!! UPDATE MARKER TO MATCH QUOTAS !!!!!!!!!!!!!!!!!!!!!!!!!</note>
  <number
   label="Q4aFI_Version"
   size="3"
   verify="range(1,50)"
   where="execute,survey,report">
    <title>Q4aFI - MaxDiff Version</title>
    <exec>
print "Q4aFI_md: ", Q4aFI_md

print p.markers
for x in p.markers:
    if "/Q4aFI_Maxdiff/FI_ver_" in x:
        Q4aFI_Version.val = int(x.split("_")[-1])
        break
    </exec>

  </number>

  <suspend/>

  <exec>
p.startTime = timeSpent()
  </exec>

  <note>!!!!!!!!!!!!!!!!!!!!!!!!! UPDATE QUESTION DETAILS TO MATCH Q'RE !!!!!!!!!!!!!!!!!!!!!!!!!</note>
  <note>!!!!!!!!!!!!!!!!!!!!!!!!! UPDATE ROWS FOR EACH STATEMENT !!!!!!!!!!!!!!!!!!!!!!!!!</note>
  <note>!!!!!!!!!!!!!!!!!!!!!!!!! UPDATE LOOPROW FOR EACH SET !!!!!!!!!!!!!!!!!!!!!!!!!</note>
  <loop label="Q4aFI_md_loop" vars="task">
    <title>Q4aFI - MaxDiff Loop</title>
    <block label="Q4aFI_md_block" randomize="1">

      <radio
     label="Q4aFI_[loopvar: task]"
     adim="cols"
     grouping="cols"
     shuffle="rows"
     ss:questionClassNames="Q4aFI_maxdiff"
     unique="1">
        <title>Among the statements below, which one is most important for [pipe: Q1pipe] that is focused on delivering Protection with Extraordinary Care to consumers (i.e., your clients), and which one is the least important?</title>
        <exec>
setupMaxDiffItemsI( Q4aFI_md, "v%d_t%d" % (Q4aFI_Version.val, [loopvar: task]), Q4aFI_[loopvar: task])
p.MDcount = str(Q4aFI_md_loop_expanded.order.index([loopvar: task]-1)+1)
        </exec>

        <col label="worst"><b><u>Least</u></b> Important For A Company Delivering Protection With Extraordinary Care</col>
        <col label="best"><b><u>Most</u></b> Important For A Company Delivering Protection With Extraordinary Care</col>
        <row label="item1"  value="1" >Helps educate you and provides tools to make smarter decisions</row>
        <row label="item2"  value="2" >Has your best interest in mind</row>
        <row label="item3"  value="3" >Offers proactive advice and guidance</row>
        <row label="item4"  value="4" >Listens to you and shows empathy for your situation</row>
        <row label="item5"  value="5" >Is available to you whatever time and whatever way you need</row>
        <row label="item6"  value="6" >Is easy to do business with</row>
        <row label="item7"  value="7" >Is highly responsive and values your time</row>
        <row label="item8"  value="8" >Has clear, accessible resources and tools for solving client’s complex problems</row>
        <row label="item9"  value="9" >Is a company known for good customer service</row>
        <row label="item10" value="10">Protects what you have today and helps you plan for growth</row>
        <row label="item11" value="11">Offers solutions tailored to your unique needs</row>
        <row label="item12" value="12">Appreciates your business and loyalty</row>
        <row label="item13" value="13">Is an innovator in its industry</row>
        <row label="item14" value="14">Offers a committed long-term relationship to grow your business</row>
        <row label="item15" value="15">Is a company you can trust</row>
        <row label="item16" value="16">Is a brand your clients know and like</row>
        <row label="item17" value="17">Is an honest and open company</row>
        <row label="item18" value="18">Has a proven history and track record</row>
        <row label="item19" value="19">Is a financially strong and stable company</row>
        <row label="item20" value="20">Is a good value for the price paid</row>
        <row label="item21" value="21">Has a deep industry knowledge that allows the company to create the best solutions</row>
        <row label="item22" value="22">Is a company that takes extraordinary care of you and your clients</row>
        <row label="item23" value="23">Is a company that makes you feel optimistic about the future</row>
        <row label="item24" value="24">Offers high quality products to fit with client goals and portfolios</row>
        <row label="item25" value="25">Offers a successful track record of product performance</row>
        <row label="item26" value="26">Offers a breadth of financial products for varying client needs</row>
        <row label="item27" value="27">Empowers you to help your clients</row>
        <style mode="before" name="question.header"><![CDATA[
<style type="text/css">
    .Q4aFI_maxdiff tr.maxdiff-header-legend {
        background-color: transparent;
        border-bottom: 2px solid #d9d9d9;
    }
    .Q4aFI_maxdiff tr.maxdiff-header-legend th.legend {
        background-color: transparent;
        border: none;
    }
    .Q4aFI_maxdiff tr.maxdiff-row td.element {
        border-left: none;
        border-right: none;
        border-top: none;
        border-bottom: 1px solid #d9d9d9;
        text-align: center;
    }
    .Q4aFI_maxdiff tr.maxdiff-row th.row-legend {
        background-color: transparent;
        border-left: none;
        border-right: none;
        border-top: none;
        border-bottom: 1px solid #d9d9d9;
        text-align: center;
    }
    </style>
]]></style>
        <style name="question.top-legend"><![CDATA[
\@if ec.simpleList
    $(legends)
\@else
    <$(tag) class="maxdiff-header-legend row row-col-legends row-col-legends-top ${"mobile-top-row-legend " if mobileOnly else ""}${"GtTenColumns " if ec.colCount > 10 else ""}colCount-$(colCount)">
        ${"%s%s" % (legends.split("</th>")[0],"</th>")}
       $(left)
        ${"%s%s" % (legends.split("</th>")[1],"</th>")}
    </$(tag)>
    \@if not simple
  </tbody>
  <tbody>
    \@endif
\@endif
]]></style>
        <style name="question.row"><![CDATA[
\@if ec.simpleList
    $(elements)
\@else
    <$(tag) class="maxdiff-row row row-elements $(style) colCount-$(colCount)">
        ${"%s%s" % (elements.split("</td>")[0],"</td>")}
        $(left)
        ${"%s%s" % (elements.split("</td>")[1],"</td>")}
    </$(tag)>
\@endif
]]></style>
      </radio>


<suspend/>



<text
  label="Q4aFI_TASK_[loopvar: task]"
  size="40"
  optional="1" where="execute,survey,report" translateable="0">
  <title>DUMMY - TASK NUMBER</title>
<exec>
Q4aFI_TASK_[loopvar: task].val = [loopvar: task]
</exec>
</text>

<text
  label="Q4aFI_ITEM_[loopvar: task]"
  size="40"
  optional="1" where="execute,survey,report" translateable="0">
  <title>DUMMY - ITEMS</title>
<exec>
Q4aFI_ITEM_[loopvar: task].r1.val = p.MDitem1
Q4aFI_ITEM_[loopvar: task].r2.val = p.MDitem2
Q4aFI_ITEM_[loopvar: task].r3.val = p.MDitem3
Q4aFI_ITEM_[loopvar: task].r4.val = p.MDitem4
Q4aFI_ITEM_[loopvar: task].r5.val = p.MDitem5
</exec>
  <row label="r1">Item 1</row>
  <row label="r2">Item 2</row>
  <row label="r3">Item 3</row>
  <row label="r4">Item 4</row>
  <row label="r5">Item 5</row>
</text>



<suspend/>


    </block>

    <looprow label="1">
      <loopvar name="task">1</loopvar>
    </looprow>

    <looprow label="2">
      <loopvar name="task">2</loopvar>
    </looprow>

    <looprow label="3">
      <loopvar name="task">3</loopvar>
    </looprow>

    <looprow label="4">
      <loopvar name="task">4</loopvar>
    </looprow>

    <looprow label="5">
      <loopvar name="task">5</loopvar>
    </looprow>

    <looprow label="6">
      <loopvar name="task">6</loopvar>
    </looprow>

    <looprow label="7">
      <loopvar name="task">7</loopvar>
    </looprow>

    <looprow label="8">
      <loopvar name="task">8</loopvar>
    </looprow>

    <looprow label="9">
      <loopvar name="task">9</loopvar>
    </looprow>

    <looprow label="10">
      <loopvar name="task">10</loopvar>
    </looprow>
  </loop>

  <float
   label="Q4aFI_Timer"
   size="15"
   where="execute,survey,report">
    <title>Q4aFI - MaxDiff Timer (Minutes)</title>
    <exec>
Q4aFI_Timer.val = (timeSpent() - p.startTime) / 60.0
    </exec>

  </float>

  <note>MaxDiff Indices Template --End--</note>
</block>

<suspend/>













++MAXDIFF ALTERNATIVES METHOD
++RECORDS ACTUAL OPTION NUMBER (item number - 1,2,3,4) INSTEAD OF OPTION ACTUAL ROW NUMBER (item number in full list - r5,r23,r55,r2)
files can be found here:
C:\j.a.y\Decipher\maxdiff example alternatives method

Reference: Q8
231 - Decipher 53b/2202509 | ORD-700503-X2S1 | Client: Nimbly Insights, Inc. | Sola Bread Elasticity Survey 2022


<note>MaxDiff Alternatives Template --Start--</note>
<note> !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! UPDATE INTRO PAGE </note>

<block label="Q8_MAXDIFF_BLOCK" cond="1">

<html label="Q8_INTRO" where="survey">In the next series of questions, you are going to be shown various statements about foods that are better for you. Please select the one that is most important to you when buying food and the one that is least important on each screen.<br />
<br />
For these questions, your immediate first answer is generally your best and most accurate response, so please try to complete each group of questions as quickly as possible. If you find two descriptors equally desirable, pick the one that first comes to mind.
</html>

<suspend/>


<res label="Q8_mditem1" >Is all-natural</res>
<res label="Q8_mditem2" >Is non-GMO</res>
<res label="Q8_mditem3" >Is organic</res>
<res label="Q8_mditem4" >Is pesticide-free</res>
<res label="Q8_mditem5" >Is locally sourced</res>
<res label="Q8_mditem6" >Is sustainably sourced</res>
<res label="Q8_mditem7" >Has recyclable packaging</res>
<res label="Q8_mditem8" >Tastes good</res>
<res label="Q8_mditem9" >Is a good value for the money / acceptable price</res>
<res label="Q8_mditem10">Is minimally processed / whole food / clean</res>
<res label="Q8_mditem11">Has no artificial ingredients</res>
<res label="Q8_mditem12">Has reduced fat or no saturated fat</res>
<res label="Q8_mditem13">Has reduced sugar or zero/no sugar</res>
<res label="Q8_mditem14">Is low calorie</res>
<res label="Q8_mditem15">Is low carb</res>
<res label="Q8_mditem16">Is high in protein or fiber</res>
<res label="Q8_mditem17">Has low sodium</res>
<res label="Q8_mditem18">Is gluten-free</res>
<res label="Q8_mditem19">Is Keto (or similar)</res>
<res label="Q8_mditem20">Is Paleo</res>


<note> !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! UPDATE RES LABEL IN r.text TO MATCH RES LABELS ABOVE </note>
<exec when="init">
def Q8setupMaxDiffFile(fname, fileDelimiter="\t"):
    try:
        f = open("%s/%s" % (gv.survey.path, fname))
        mdObj = [ line.strip("\r\n").split(fileDelimiter) for line in f.readlines() ]
        d = dict( ("v%s_t%s" % (row[0], row[1]), row[2:]) for row in mdObj )
    except IOError:
        d = {}
    return d

def Q8setupMaxDiffItemsA(d, vt, question, parentLabel):
    items = d[vt]

    print "*****STAFF ONLY*****"
    print "Version_Task: %s" % vt
    for r in question.rows:
        r.text = res[ "%s_mditem%s" % (parentLabel, items[r.index]) ]
        print "Item %s: %s" % (r.index+1, items[r.index])
    p.MDitem1 = items[0]
    p.MDitem2 = items[1]
    p.MDitem3 = items[2]
    p.MDitem4 = items[3]
    p.MDitem5 = items[4]
</exec>

<note> !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! UPDATE .DAT FILENAME </note>
<note> !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! UPDATE _md VARIABLE NAME (REPLACE ALL) </note>
<note>
DO NOT FORGET TO UPLOAD .DATA FILE:
Example:
Version	Set	Item1	Item2	Item3	Item4
1	1	11	6	3	9
1	2	2	8	4	19
1	3	16	17	12	8
1	4	16	11	7	14
</note>
<exec when="init">
Q8_md = Q8setupMaxDiffFile("Q8MD_design.dat")
</exec>

<note> !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! UPDATE QUOTA LABEL </note>
<note> !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! UPDATE QUOTA SHEET (REPLACE ALL) </note>
<note>
DO NOT FORGET TO UPLOAD QUOTA:
Example:
in Defines:
Q8ver_1	1	Q8 - version 1
Q8ver_2	1	Q8 - version 2
Q8ver_3	1	Q8 - version 3
Q8ver_4	1	Q8 - version 4

in QUOTA SHEET:
#= Q8 MaxDiff Versions -- Least fill
ver_1	inf
ver_2	inf
ver_3	inf
ver_4	inf
</note>
<quota label="Q8_MD" overquota="noqual" sheet="Q8MD_version"/>

<note> !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! UPDATE _Version VARIABLE LABEL (REPLACE ALL) </note>
<note> !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! UPDATE MAX-RANGE TO BE MAX VERSION NUMBER </note>
<note> !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! UPDATE TITLE from Q8 TO CURRENT Q# (REPLACE ALL) </note>
<note> !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! UPDATE MARKER TO MATCH QUOTA "/QUOTASHEET/DEFINESNAME_" </note>
<number
  label="Q8_Version"
  size="3"
  verify="range(1,4)"
  where="execute,survey,report">
  <title>Q8 - MaxDiff Version</title>
  <exec>
print p.markers
for x in p.markers:
    if "/Q8MD_version/Q8ver_" in x:
        Q8_Version.val = int(x.split("_")[-1])
        break
  </exec>

</number>

<suspend/>

<exec>
p.startTime = timeSpent()
</exec>

<note> !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! UPDATE QUESTION DETAILS </note>
<note> !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! UPDATE TASK TO MATCH NUMBER OF SET / SCENARIO </note>
<loop label="Q8_md_loop" vars="task">
  <title>Q8 - MaxDiff Loop</title>
  <block label="Q8_md_block" randomize="1">
    <radio
    label="Q8_[loopvar: task]"
    adim="cols"
    grouping="cols"
    ss:questionClassNames="Q8_maxdiff"
    unique="1">
      <title>When buying foods that are healthier for you, which of the following would be most important to you? Which one would be the least important to you?</title>
      <exec>
Q8setupMaxDiffItemsA( Q8_md, "v%d_t%d" % (Q8_Version.val, [loopvar: task]), Q8_[loopvar: task], "Q8")
p.Q8MDcount = str(Q8_md_loop_expanded.order.index([loopvar: task]-1)+1)
      </exec>

      <col label="most">Most Important</col>
      <col label="least">Least Important</col>
      <row label="item1" value="1">Item 1</row>
      <row label="item2" value="2">Item 2</row>
      <row label="item3" value="3">Item 3</row>
      <row label="item4" value="4">Item 4</row>
      <style mode="before" name="question.header"><![CDATA[
<style type="text/css">
    .Q8_maxdiff tr.maxdiff-header-legend {
        background-color: transparent;
        border-bottom: 2px solid #d9d9d9;
    }
    .Q8_maxdiff tr.maxdiff-header-legend th.legend {
        background-color: transparent;
        border: none;
    }
    .Q8_maxdiff tr.maxdiff-row td.element {
        border-left: none;
        border-right: none;
        border-top: none;
        border-bottom: 1px solid #d9d9d9;
        text-align: center;
    }
    .Q8_maxdiff tr.maxdiff-row th.row-legend {
        background-color: transparent;
        border-left: none;
        border-right: none;
        border-top: none;
        border-bottom: 1px solid #d9d9d9;
        text-align: center;
    }
    </style>
]]></style>
      <style name="question.top-legend"><![CDATA[
\@if ec.simpleList
    $(legends)
\@else
    <$(tag) class="maxdiff-header-legend row row-col-legends row-col-legends-top ${"mobile-top-row-legend " if mobileOnly else ""}${"GtTenColumns " if ec.colCount > 10 else ""}colCount-$(colCount)">
        ${"%s%s" % (legends.split("</th>")[0],"</th>")}
       $(left)
        ${"%s%s" % (legends.split("</th>")[1],"</th>")}
    </$(tag)>
    \@if not simple
  </tbody>
  <tbody>
    \@endif
\@endif
]]></style>
      <style name="question.row"><![CDATA[
\@if ec.simpleList
    $(elements)
\@else
    <$(tag) class="maxdiff-row row row-elements $(style) colCount-$(colCount)">
        ${"%s%s" % (elements.split("</td>")[0],"</td>")}
        $(left)
        ${"%s%s" % (elements.split("</td>")[1],"</td>")}
    </$(tag)>
\@endif
]]></style>
    </radio>

<suspend/>
<text
  label="Q8_TASK_[loopvar: task]"
  size="40"
  optional="1" where="execute,survey,report" translateable="0">
  <title>DUMMY - TASK NUMBER</title>
<exec>
Q8_TASK_[loopvar: task].val = [loopvar: task]
</exec>
</text>

<text
  label="Q8_ITEM_[loopvar: task]"
  size="40"
  optional="1" where="execute,survey,report" translateable="0">
  <title>DUMMY - ITEMS</title>
<exec>
Q8_ITEM_[loopvar: task].r1.val = p.MDitem1
Q8_ITEM_[loopvar: task].r2.val = p.MDitem2
Q8_ITEM_[loopvar: task].r3.val = p.MDitem3
Q8_ITEM_[loopvar: task].r4.val = p.MDitem4
Q8_ITEM_[loopvar: task].r5.val = p.MDitem5
</exec>
  <row label="r1">Item 1</row>
  <row label="r2">Item 2</row>
  <row label="r3">Item 3</row>
  <row label="r4">Item 4</row>
  <row label="r5">Item 5</row>
</text>
<suspend/>

  </block>

  <looprow label="1">
    <loopvar name="task">1</loopvar>
  </looprow>

  <looprow label="2">
    <loopvar name="task">2</loopvar>
  </looprow>

  <looprow label="3">
    <loopvar name="task">3</loopvar>
  </looprow>

  <looprow label="4">
    <loopvar name="task">4</loopvar>
  </looprow>

  <looprow label="5">
    <loopvar name="task">5</loopvar>
  </looprow>

  <looprow label="6">
    <loopvar name="task">6</loopvar>
  </looprow>

  <looprow label="7">
    <loopvar name="task">7</loopvar>
  </looprow>

  <looprow label="8">
    <loopvar name="task">8</loopvar>
  </looprow>

  <looprow label="9">
    <loopvar name="task">9</loopvar>
  </looprow>

  <looprow label="10">
    <loopvar name="task">10</loopvar>
  </looprow>
</loop>

<float
  label="Q8_Timer"
  size="15"
  where="execute,survey,report">
  <title>Q8 - MaxDiff Timer (Minutes)</title>
  <exec>
Q8_Timer.val = (timeSpent() - p.startTime) / 60.0
  </exec>

</float>

<suspend/>

</block>

<note>MaxDiff Alternatives Template --End--</note>
































++ZIP FORMAT VALIDATION
<res label="can_ziperror">Please enter a valid zip code.</res>

<text label="Q1_ca" optional="0" mls=’candian’>
  <title>What is your ZIP code?</title>
<validate>
if re.match("^[A-Za-z][0-9][A-Za-z] [0-9][A-Za-z][0-9]$", this.val) == None:
    error(res.can_ziperror)
</validate>
</text>






++OPEN TEXT TEXTBOX TEXTAREA CONSECUTIVE FORCE ORDER
<exec when="init">
def OpenConsecutive(qid):
	count=0
	j=0
	for x in qid.rows:
		if x.val:
			j=x.index +1
			count=count+1
		if count!=j:
			error(res.OpenConsecutive)


def group_rows( question, grouped_rows ):
    first_item_index = None
    shuffle_order = [row.index for row in question.rows.order]

    for index, row in enumerate( shuffle_order ):
        if question.rows[row].label in grouped_rows:
            if first_item_index == None:
                first_item_index = index
            else:
                first_item_index += 1
                shuffle_order.insert( first_item_index, shuffle_order.pop(index) )

    question.rows.order = shuffle_order
</exec>



  <validate>
OpenConsecutive(Q###);
for eR in Q###.rows:
	for eE in Q###.rows:
		if not eR.empty and not eE.empty:
			if not eR.index == eE.index and eR.unsafe_val==eE.unsafe_val:
				error("Please do not enter same response",eE)
  </validate>






++HAL PORET: IMAGE WITH HIDDEN NEXT QUESTION
<note>!!!!!!!!!!!!!!!!!!!!!!!!!!! MAIN SURVEY CELLS 1-2 STYING START !!!!!!!!!!!!!!!!!!!!!!!!!!!</note>
<style label="Q###_disable_continue" arg:timeout="20" mode="after" name="respview.client.js" with="Q###" wrap="ready"><![CDATA[
var $submitButton = $ ("#btn_continue, #btn_finish, #mainQ, .question-error, .instruction-text, .answers-list");
  $submitButton.hide();

  setTimeout( function() {
    $submitButton.show();
    $ ('#subQ').hide()
  }, $(timeout) * 1000);

if ($ ('div.question').hasClass('hasError')) {
    $submitButton.show();
}
]]></style>
<note>!!!!!!!!!!!!!!!!!!!!!!!!!!! MAIN SURVEY CELLS 1-2 STYING END !!!!!!!!!!!!!!!!!!!!!!!!!!!</note>


<radio
  label="Q###">
  <title>Please take your time to review this advertisement.
  &lt;center&gt;<img src="[rel ${Cell.selected.text}.png]" style="width: 85%" />&lt;center/&gt;<br />
  <br />
<span id="mainQ">Before continuing with the survey, please indicate whether or not you were able to view the advertisement clearly.</span></title>
  <comment>Select one</comment>
  <row label="r1">I viewed the advertisement clearly</row>
  <row label="r2">I was unable to view the advertisement clearly</row>
</radio>

<suspend/>

<term label="Q###_term" cond="Q###.r2">Term: Q###: Unable to view the advertisement clearly</term>




++DECIPHER UNIQUE OE TEXTBOX TEXTAREA
<res label="UniqOE">Please do not enter same response</res>
<exec when="init">
def OpenConsecutive(qid):
	count=0
	j=0
	for x in qid.rows:
		if x.val:
			j=x.index +1
			count=count+1
		if count!=j:
			error(res.OpenConsecutive)
</exec>

  <validate>
for eR in Q###.rows:
	for eE in Q###.rows:
		if not eR.empty and not eE.empty:
			if not eR.index == eE.index and eR.unsafe_val==eE.unsafe_val:
				error(res.UniqOE,eE)
  </validate>










++CHECK EXACTLY COLUMN WHERE ERROR OCCURRED
error(this.lget("check-error-exactly-plur-column", count=2, actual=this.count))







++FANCYBOX TEXT
<div id="conceptContainer">TEXT DESCRIPTION HERE</div>
<a data-fancybox="" href="#conceptContainer">Click here to view/read concept again</a>
<style>
    #conceptContainer {
        display: none;
    }



</style>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css">
<script src="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js"></script>






++CLEAR QUESTION; EMPTY QUESTION
Q#.val = None







++VIDEO CAROUSEL

<block label="Q1_2video_block">
<note>========================================================= MX MEDIA PLAYER (VIDEO) START ===================================================</note>
<note>MX Media Player (Video)</note>
<block label="Q1_2bmxplayer" builder:title="MX Media Player">
  <text
   label="Q1_2video_1"
   optional="0">
    <title>Here is a video advertisement. The play button will appear once the file has buffered.</title>
    <comment>Click to play when you are ready.</comment>
    <res label="sys_textNoAnswerSelected">Please make sure to finish the video.</res>
    <row label="r1">Times played</row>
    <row label="r2">Current time</row>
    <style name="page.head"><![CDATA[
<style>
.answers{display:none;}
a[href='https://flowplayer.com/hello/?from=player'] {
    visibility: hidden !important;
}
</style>
]]></style>
    <style name="question.after"><![CDATA[
<div class="mx-stage-container" id= "mx-stage-container-${this.label}"><div class="mx-stage-nav back hidden"><i class="fas fa-chevron-left"></i></div><div class="mx-stage-nav next hidden"><i class="fas fa-chevron-right"></i></div></div>
<div class="mx-stage active" id= "mx-stage-${this.label}" data-current="#mx-stage-Q1_2video_1" data-back="" data-next="#mx-stage-Q1_2video_2"></div>

  <script type="text/javascript" crossorigin="anonymous" src="//${mxDomain}/rnd/rnd-mx-framework/v1.1/loader/application.min.js?cache=${int(random.random() * 1000)}"></script>
  <link rel='stylesheet' type='text/css' href='https://ssiprojects.s3.amazonaws.com/rnd/HelpDesk/ORD-435853-G2V1/5.11.2/css/all.min.css'>

  <script type="text/javascript">
// =============== DOCUMENTATION ===============> https://confluence.dynata.com/x/KRCbAQ
    if (!mx.qDefs)
      mx.qDefs = {};
    if (!mx.toolLoader)
      mx.toolLoader = new mx.Loader({
                                         "baseFileURL": "//${mxDomain}/rnd/rnd-mx-framework/v1.1/",
                                         "scriptDeps": [
                                        "core/libs.min.js",
                                "core/advanced_ui/Player_libs.js",
                                "core/advanced_ui/Player.js"
                              ],
                                         "cssDeps": ["core/style.css", "core/libs.css", "core/advanced_ui/Player.css"],
                                         "coreFile": "core/application.min.js",
                                         "messages": "//surveytools.dynata.com/mx/messages/getMsg.php?callback=window.saveMessages&lang=${decLang}",
                                         "platformInterface": { "js": "platform_interface_decipher/application.min.js", "css": "platform_interface_decipher/style.css" }
                                       });
    mx.qDefs["${this.label}"] = ${jsexport()};

    //SETTINGS AND STUFF GOES HERE
       var toolSettings = {
          "toolJs": "application.min.js",
          "toolName": "MediaPlayer",
          "jsToLoad": [],
          "cssToLoad": ["style.css"],
          "baseToolPath": "//${mxDomain}/rnd/rnd-mx-tools/media_player/1.0/",
          "container": "#mx-stage-${this.label}",
          "qid": "${this.label}",
          "toolCssNames": ["test1","test2"],
          "imageBaseURL": "//${mxDomain}/rnd/demos/images/",


          "width": '100%',
          "height": '937px',
          //"startTime": 20,
          //"endTime": 30,
          "autoPlay": false,

          "videoURLs": {//optional - validate one of this or audioURL are set
               mp4:   "https://ssiprojects.s3.amazonaws.com/ssiCebu/MW_SE_LATAM/ORD-556979-C2V3/Instagram1.mp4",
               webm:  "https://ssiprojects.s3.amazonaws.com/ssiCebu/MW_SE_LATAM/ORD-556979-C2V3/Instagram1.webm",
               ogv:   "https://ssiprojects.s3.amazonaws.com/ssiCebu/MW_SE_LATAM/ORD-556979-C2V3/Instagram1.ogv"
              //mp4:   "https://${rml6Domain}/rnd/rml6/media/media_player/robots-10secs.mp4",
              //webm:  "https://${rml6Domain}/rnd/rml6/media/media_player/robots-10secs.webm",
              //ogv:   "https://${rml6Domain}/rnd/rml6/media/media_player/robots-10secs.ogv"
          },
          //"audioURL": "",//"https://${rml6Domain}/rnd/rml6/media/media_player/audio.mp3", //optional - validate one of this or videoURL are set
          "posterImage": "https://ssiprojects.s3.amazonaws.com/ssiCebu/MW_SE_LATAM/ORD-556979-C2V3/poster.png",
          "volume": 70,
          "preload":true,
          //"loop" : true,
          //maxViews
          //showControls
          //etc

          "showProgressBar": true,
          "qid": getFormName(1),
          //"qid": "q1",
          "time_qid": "",
          "order_qid": "",
          "formNames":{
              "qid": getFormName(1),
              "time_qid": "",
              "order_qid": ""
          },
          "answerItemConfig": {
              "width": "100%",
              "numItemsPerRow": { "small": 2, "medium": 3, "large": 2 }
          },
          "customValidation": function(q){
              console.log("customValidation()");
              return true;
          },
      };

   window.mx.toolSettings = toolSettings;

  </script>
]]></style>
  </text>

  <text
   label="Q1_2video_2"
   optional="0">
    <title>Here is a video advertisement. The play button will appear once the file has buffered.</title>
    <comment>Click to play when you are ready.</comment>
    <res label="sys_textNoAnswerSelected">Please make sure to finish the video.</res>
    <row label="r1">Times played</row>
    <row label="r2">Current time</row>
    <style name="question.after"><![CDATA[
<div class="mx-stage" id= "mx-stage-${this.label}" data-current="#mx-stage-Q1_2video_2" data-back="#mx-stage-Q1_2video_1" data-next="#mx-stage-Q1_2video_3"></div>

  <script type="text/javascript">
// =============== DOCUMENTATION ===============> https://confluence.dynata.com/x/KRCbAQ

    mx.qDefs["${this.label}"] = ${jsexport()};

    //SETTINGS AND STUFF GOES HERE
       var toolSettings2 = {
          "toolJs": "application.min.js",
          "toolName": "MediaPlayer",
          "jsToLoad": [],
          "cssToLoad": ["style.css"],
          "baseToolPath": "//${mxDomain}/rnd/rnd-mx-tools/media_player/1.0/",
          "container": "#mx-stage-${this.label}",
          "qid": "${this.label}",
          "toolCssNames": ["test1","test2"],
          "imageBaseURL": "//${mxDomain}/rnd/demos/images/",


          "width": '100%',
          "height": '937px',
          //"startTime": 20,
          //"endTime": 30,
          "autoPlay": false,

          "videoURLs": { //optional - validate one of this or audioURL are set
               mp4:   "https://ssiprojects.s3.amazonaws.com/ssiCebu/MW_SE_LATAM/ORD-556979-C2V3/Instagram2.mp4",
               webm:  "https://ssiprojects.s3.amazonaws.com/ssiCebu/MW_SE_LATAM/ORD-556979-C2V3/Instagram2.webm",
               ogv:   "https://ssiprojects.s3.amazonaws.com/ssiCebu/MW_SE_LATAM/ORD-556979-C2V3/Instagram2.ogv"
          },
          //"audioURL": "",//"https://${rml6Domain}/rnd/rml6/media/media_player/audio.mp3", //optional - validate one of this or videoURL are set
          "posterImage": "https://ssiprojects.s3.amazonaws.com/ssiCebu/MW_SE_LATAM/ORD-556979-C2V3/poster.png",
          "volume": 70,
          "preload":true,
          //"loop" : true,
          //maxViews
          //showControls
          //etc

          "showProgressBar": true,
          "qid": getFormName(2),
          //"qid": "q1",
          "time_qid": "",
          "order_qid": "",
          "formNames":{
              "qid": getFormName(2),
              "time_qid": "",
              "order_qid": ""
          },
          "answerItemConfig": {
              "width": "100%",
              "numItemsPerRow": { "small": 2, "medium": 3, "large": 2 }
          },
          "customValidation": function(q){
              console.log("customValidation()");
              return true;
          },
      };

   window.mx.toolSettings2 = toolSettings2;

  </script>
]]></style>
  </text>

  <text
   label="Q1_2video_3"
   optional="0">
    <title>Here is a video advertisement. The play button will appear once the file has buffered.</title>
    <comment>Click to play when you are ready.</comment>
    <res label="sys_textNoAnswerSelected">Please make sure to finish the video.</res>
    <row label="r1">Times played</row>
    <row label="r2">Current time</row>
    <style name="question.after"><![CDATA[
<div class="mx-stage" id= "mx-stage-${this.label}" data-current="#mx-stage-Q1_2video_3" data-back="#mx-stage-Q1_2video_2" data-next=""></div>


  <script type="text/javascript">
// =============== DOCUMENTATION ===============> https://confluence.dynata.com/x/KRCbAQ

    mx.qDefs["${this.label}"] = ${jsexport()};
    var isTest = "${gv.isUser() and not gv.debug.respview}" === "True";
    window.firstflow = true;
    //SETTINGS AND STUFF GOES HERE
       var toolSettings3 = {
          "toolJs": "application.min.js",
          "toolName": "MediaPlayer",
          "jsToLoad": [],
          "cssToLoad": ["style.css"],
          "baseToolPath": "//${mxDomain}/rnd/rnd-mx-tools/media_player/1.0/",
          "container": "#mx-stage-${this.label}",
          "qid": "${this.label}",
          "toolCssNames": ["test1","test2"],
          "imageBaseURL": "//${mxDomain}/rnd/demos/images/",


          "width": '100%',
          "height": '937px',
          //"startTime": 20,
          //"endTime": 30,
          "autoPlay": false,

          "videoURLs": { //optional - validate one of this or audioURL are set
              mp4:   "https://ssiprojects.s3.amazonaws.com/ssiCebu/MW_SE_LATAM/ORD-556979-C2V3/Instagram3.mp4",
              webm:  "https://ssiprojects.s3.amazonaws.com/ssiCebu/MW_SE_LATAM/ORD-556979-C2V3/Instagram3.webm",
              ogv:   "https://ssiprojects.s3.amazonaws.com/ssiCebu/MW_SE_LATAM/ORD-556979-C2V3/Instagram3.ogv"
          },
          //"audioURL": "",//"https://${rml6Domain}/rnd/rml6/media/media_player/audio.mp3", //optional - validate one of this or videoURL are set
          "posterImage": "https://ssiprojects.s3.amazonaws.com/ssiCebu/MW_SE_LATAM/ORD-556979-C2V3/poster.png",
          "volume": 70,
           "preload":true,
          //"loop" : true,
          //maxViews
          //showControls
          //etc

          "showProgressBar": true,
          "qid": getFormName(3),
          //"qid": "q1",
          "time_qid": "",
          "order_qid": "",
          "formNames":{
              "qid": getFormName(3),
              "time_qid": "",
              "order_qid": ""
          },
          "answerItemConfig": {
              "width": "100%",
              "numItemsPerRow": { "small": 2, "medium": 3, "large": 2 }
          },
          "customValidation": function(q){
              console.log("customValidation()");
              return true;
          },
      };

      mx.toolLoader.registerSettings(window.mx.toolSettings, function(info){
          console.log("Questions loaded");
          console.log(info.bridge.exportQuestions());
          console.log(info);

          info.instance.on("tool_loaded", function(e){
             console.log("tool_loaded 1", e);

          });
          info.instance.on("video_start", function(e){

          });
          info.instance.on("video_end", function(e){
              jQuery(".mx-stage-nav.next").removeClass("hidden");



          });

          info.instance.on("fullscreen_changed", function(e){
              if (e.detail) {
                console.log('in')
              } else {
                console.log('out')
              }
          });
          info.instance.on("volume_change", function(e){
              $ ('.volume').text(e.detail * 100);
          });
      });

      mx.toolLoader.registerSettings(window.mx.toolSettings2, function(info){
          console.log("Questions loaded");
          console.log(info.bridge.exportQuestions());
          console.log(info);

          info.instance.on("tool_loaded", function(e){
             console.log("tool_loaded 2", e);

          });
          info.instance.on("video_start", function(e){

          });
          info.instance.on("video_end", function(e){
              jQuery(".mx-stage-nav.next").removeClass("hidden");


          });


          info.instance.on("fullscreen_changed", function(e){
              if (e.detail) {
                console.log('in')
              } else {
                console.log('out')
              }
          });
          info.instance.on("volume_change", function(e){
              $ ('.volume').text(e.detail * 100);
          });
      });

      mx.toolLoader.registerSettings(toolSettings3, function(info){
          console.log("Questions loaded");
          console.log(info.bridge.exportQuestions());
          console.log(info);

          info.bridge.setPageValidation(function(){
              console.log("setPageValidation");
              return true;
          });


          info.instance.on("tool_loaded", function(e){
             console.log("tool_loaded 3", e);
             if(isTest){
                 ${initMxDataToggle()}
             }

             jQuery(".mx-stage").appendTo(".mx-stage-container");
             jQuery(".mx-stage").not(':first').addClass("hidden");
             jQuery(".mx-stage-nav").addClass("hidden");


            var vidindex = {
		      "Q1_2video_2":"1",
		      "Q1_2video_3":"2"
		  }

            jQuery(".mx-stage-nav.back").on("click", function(){
                   var eleback = jQuery(".mx-stage.active").data("back");
                   var elecurrent = jQuery(".mx-stage.active").data("current");
                   if ( eleback ){
                      jQuery(eleback).removeClass("hidden").addClass("active");
                      jQuery(".mx-stage-nav").removeClass(elecurrent.replace("#mx-stage-","")).addClass(eleback.replace("#mx-stage-",""));
                      jQuery(elecurrent).removeClass("active").addClass("hidden");
                   }
            });
            jQuery(".mx-stage-nav.next").on("click", function(){
                   var elenext = jQuery(".mx-stage.active").data("next");
                   var elecurrent = jQuery(".mx-stage.active").data("current");
                   if ( elenext ){
                      if ( window.firstflow ){ jQuery(this).addClass("hidden"); jQuery('.flowplayer').eq(vidindex[elenext.replace("#mx-stage-","")]).data('flowplayer').play(); }
                      jQuery(elenext).removeClass("hidden").addClass("active");
                      jQuery(".mx-stage-nav").removeClass(elecurrent.replace("#mx-stage-","")).addClass(elenext.replace("#mx-stage-",""));
                      jQuery(elecurrent).removeClass("active").addClass("hidden");
                   }
            });

          });

          info.instance.on("video_start", function(e){

          });
          info.instance.on("video_end", function(e){
            jQuery(".mx-stage-nav.back,.mx-stage-nav.next").removeClass("hidden")
            window.firstflow = false;
          });

          info.instance.on("fullscreen_changed", function(e){
              if (e.detail) {
                console.log('in')
              } else {
                console.log('out')
              }
          });
          info.instance.on("volume_change", function(e){
              $ ('.volume').text(e.detail * 100);
          });
      });

    //END USER EDITABLE CODE

    $ (document).ready(function(){
      mx.toolLoader.initLoad();

      $.getScript('${MxToolUsageUrl('Q1_2video_1')}');
    });
  </script>
  <style>
  div#mx-stage-container-Q1_2video_1 {
    -webkit-box-shadow: 9px 14px 41px 14px rgba(0,0,0,0.17);
    -moz-box-shadow: 9px 14px 41px 14px rgba(0,0,0,0.17);
    box-shadow: 9px 14px 41px 14px rgba(0,0,0,0.17);
    height: 937px;
	width:375px;
    position: relative;
    margin:0 auto;
}
.hidden {
 display:none;
}
.mx-stage {
    margin-top: -10px;
}
.mx-stage-nav {
    height: 420px;
    width: 8%;
    position: absolute;
    /*border: 1px solid black;*/
    z-index: 5;
    cursor: pointer;
    color: black;
    opacity:0.9;

}
.mx-stage-nav i.fas {
    text-align: center;
    position: absolute;
    bottom: 0;
    color: white;
    font-size: 35pt;
}
.mx-stage-nav.back {
    left: 0;
}
.mx-stage-nav.next {
    right: 0;
}
.jw-state-idle .jw-controls {
  background-color: transparent !important;
}

.mx-stage-nav.next.Q1_2video_3,.mx-stage-nav.back.Q1_2video_1{
  display:none;
}

  </style>
]]></style>
  </text>
</block>

</block>


<suspend/>







++RANDOMIZE BUT FORCE FIRST SELECTION IN LEAST FILL

<quota label="qt_LF_S3_FirstShown" cond="1" overquota="noqual" sheet="LF_S3_FirstShown"/>

<radio
  label="dSection3Order"
  optional="1" shuffle="rows"
  translateable="0"
  where="execute,survey,report">
  <title>DUMMY - SECTION 3 SHOW ORDER</title>
  <exec>
####start picker code

print p.markers

for eachRow in dSection3Order.rows:
    if hasMarker('/LF_S3_FirstShown/LF_dSection3Order_%s' %eachRow.label):
        dSection3Order.val = eachRow.index #single

####end picker code
  </exec>

  <row label="r1" value="1">Reelz / Control is shown first</row>
  <row label="r2" value="2">AMC is shown first</row>
  <row label="r3" value="3">Comet is shown first</row>
</radio>

<suspend/>

<exec>
print "pre: Section3_Loop_expanded.order: ", Section3_Loop_expanded.order

qid = dSection3Order.rows.order
newOrder = []

for ord in qid:
   if ord.label == dSection3Order.selected.label:
     newOrder.insert(0, ord)
   else:
     newOrder.append(ord)




Section3_Loop_expanded.order = newOrder

print "post: Section3_Loop_expanded.order: ", Section3_Loop_expanded.order
print "post: Section3_Loop_expanded.order[0]: ", Section3_Loop_expanded.order[0]
</exec>





++ASURION DEMOGRAPHIC IMAGES
159 - Decipher 53b/2010787 | ORD-556601-K5L9 | Asurion | Simplr Consumer Online Service Neglect Study
folder named images






++DROPDOWN SELECTED LABEL WITH ROW
Q110.choices[Q110.r1.val].label






++QUOTA SHOW IN PROGRESS
update FROM:
  markerTimeout="0"
TO:
  markerTimeout="900"




++NEW CAROUSEL ZOOM BUG FIX
jQuery("body").on("click","button.fancybox-button",function(e){ e.preventDefault();});







++DECIPHER SHORTCUTS
https://confluence.dynata.com/display/EDL/Plugins+and+Shortcuts+-+Sublime+-+Chrome+-+Decipher





++HEATMAP
Confluence for HEATMAP:
https://confluence.dynata.com/pages/viewpage.action?pageId=24886118



++HEATMAP TOOL:
http://speeders.researchnow.com/emPowerv6/toolkit.php




++INSTRUCTION TEXT CSS
    .instruction-text{
      font-style: italic;
    }





++RANKING WITH OTH

<select
  label="Q28"
  minRanks="3"
  optional="1"
  shuffle="rows"
  unique="none,cols"
  uses="ranksort.4">
  <title>If you had to choose THREE, which of the following are you most likely to use for investing new or existing assets in ETFs?</title>
  <comment>Please rank your top 3.</comment>
  <style name="question.after" wrap="ready"><![CDATA[
var textTriggerRow = "r8"
var qn = ${jsexport()};
var qid = qn.rows;
var arrRowText = new Array();
for(var i=0;i<qid.length;i++)
    arrRowText.push(qid[i].label);
var arrRowText1 = new Array();
for(var i=0;i<qid.length;i++)
    arrRowText1.push(qid[i].text);

var textTrigger = arrRowText1[jQuery.inArray( textTriggerRow, arrRowText )];

textTrigger = textTrigger.replace("&#91;", "[");
textTrigger = textTrigger.replace("&#93;", "]");

//alert(textTrigger)

setInterval(function(){
var flag = false;
$ ("#question_Q28Open").hide();
$ ("#question_Q28").find("li[class*='sq-ranksort-card-dropped']").each(function(){
      if($ (this).find("div[class*='sq-ranksort-card-text']").text() == textTrigger)
      {
         $ ("#question_Q28Open").show();
         flag = true;
      }
  });
  if(!flag)
        {
           $ ("#question_Q28Open").hide();
           $ ("#question_Q28Open").find(".input").val("");
        }
  },200);
]]></style>
  <insert source="ProductList"/>
  <row label="r8" randomize="0">Other (Specify)</row>
  <choice label="ch1">Rank 1st</choice>
  <choice label="ch2">Rank 2nd</choice>
  <choice label="ch3">Rank 3rd</choice>
</select>

<textarea
  label="Q28Open">
  <title>Please describe...</title>
  <validate>
if Q28.r8.any and not Q28Open.val:
                error(res.ErrorQ28)
  </validate>

</textarea>

<suspend/>







++LATAM CATEGORICAL
https://dynatallc.sharepoint.com/sites/MWSE/SitePages/LATAM-Categorical.aspx

https://survey-d.dynata.com/apps/portal/#/projects/detail/selfserve/53b/19111304
https://survey-d.dynata.com/apps/portal/#/projects/detail/selfserve/53b/1912299


<exec>
### Start - CATEGORICAL SAVES function
#mainQ = main question
#catQ = Categorical dummy question
#dir = 1 for rows, 2 for columns, 3 for grid per row, 4 for grid per column

def Categorical(mainQ, catQ, dir=1):
  selected = [] #selected answers in main question

  if dir == 1: #row question
    for eachRow in mainQ.rows:
      if eachRow.val == 1:
        selected.append(int(eachRow.label[1:]))
    selected.sort()
    print selected
    for i, eachSel in enumerate(selected):
      catQ.rows[i].val = selected[i]

  if dir == 2: #column question
    for eachCol in mainQ.cols:
      if eachCol.val == 1:
        selected.append(int(eachCol.label[1:]))
    selected.sort()
    for i, eachSel in enumerate(selected):
      catQ.cols[i].val = selected[i]

  if dir == 3:
    selectedCol = []
    for eachRow in mainQ.rows:
      if eachRow.any:
        for eachCol in mainQ.cols:
          if mainQ.attr('%s' % (eachRow.label)).attr('%s' % (eachCol.label)):
            selectedCol.append(int(eachCol.label[1:]))

        selectedCol.sort()
        for i, eachSel in enumerate(selectedCol):
          catQ.attr('%s' % (eachRow.label))[i].val = selectedCol[i]

        selectedCol = []

  if dir == 4:
    selectedRow = []
    for eachCol in mainQ.cols:
      if eachCol.any:
        for eachRow in mainQ.rows:
          if mainQ.attr('%s' % (eachCol.label)).attr('%s' % (eachRow.label)):
            selectedRow.append(int(eachRow.label[1:]))

        selectedRow.sort()
        for i, eachSel in enumerate(selectedRow):
         catQ.attr('%s' % (eachCol.label))[i].val = selectedRow[i]

        selectedRow = []

### Stop - CATEGORICAL SAVES function
</exec>


<note>##### CATEGORICAL FOR CHECKBOX #####</note>
<number
  label="cQ##"
  size="3"
  translateable="0"
  where="execute,survey,report">
  <title>Categorical values for Q##.</title>
  <exec>
Categorical(Q##, cQ##, 1) #3rd parameter = 1 for checkbox
  </exec>

  <row label="r1">1st item</row>
  <row label="r2">2nd item</row>
  <row label="r3">3rd item</row>
  <row label="r4">4th item</row>
  <row label="r5">5th item</row>
  <row label="r6">6th item</row>
  <row label="r7">7th item</row>
  <row label="r8">8th item</row>
  <row label="r9">9th item</row>
  <row label="r10">10th item</row>
  <row label="r11">11th item</row>
</number>
<suspend/>



<note>##### CATEGORICAL FOR GRID #####</note>
<number
 label="cQ##_CAT"
 cond="cQ##.any"
 size="3"
 translateable="0"
 where="execute,survey,report">
  <title>Categorical for cQ##.</title>
  <exec>
Categorical(Q##, cQ##_CAT, 3) #3rd parameter = 3 for grid
  </exec>

  <row label="r1">1</row>
  <row label="r2">2</row>
  <row label="r3">3</row>
  <row label="r4">4</row>
  <row label="r5">5</row>
  <row label="r6">6</row>
  <row label="r7">7</row>
  <row label="r8">8</row>
  <row label="r9">9</row>
  <row label="r10">10</row>
  <row label="r11">11</row>

  <col label="c1">1</col>
  <col label="c2">2</col>
  <col label="c3">3</col>
  <col label="c4">4</col>
  <col label="c5">5</col>
</number>

<suspend/>










++CHECK IF USER CLIENT EXISTS
https://surveytools.dynata.com/empower/apps/decipher-userid-lookup/public/
UserName: fname.lname




++SIGNED LINK ISSUES
https://confluence.dynata.com/x/P3OEAw








++PULL STATIC FILE (.dat) FROM UPLOAD FILES
Run dxtools (Shortcut):
C:\j.a.y\Decipher\dxtools

Click File
	Load Survey
Input survey link
	Example:
		d-53b/2103703
Select the file that you want to download
	Get file
	Click OK
	Click OK
NOTE: If project is already live, it will download the file from the LIVE path and not from the temp-edit-live.







++DOWNLOAD QUOTAS FOR PM/PA
1. In the project’s dashboard, go to Response > Response Summary > Quotas
2. Under Quotas click on the top-left-most icon [ paper ] found at the top right that says “download to excel”








++CONJOINT SIMPLE (from Deepak)
++DCM SIMPLE (from Deepak)
Decipher 53b/2103703 | ORD-602132-F0R8 - MC15 - Limpa cozinha





++CONJOINT DCM EXAMPLE (3x3)
53b/2202650
231 - Decipher 53b/2202509 | ORD-700503-X2S1 | Client: Nimbly Insights, Inc. | Sola Bread Elasticity Survey 2022















++DCM CONJOINT (with Notes)
<block label="FOODandMASS_DCM_Block" cond="dChannelfinal.r1 or dChannelfinal.r2">
<res label="Q18FM_legend1"/>
<res label="Q18FM_legend2">Brand</res>
<res label="Q18FM_legend3">Type</res>
<res label="Q18FM_legend4">Size</res>
<res label="Q18FM_legend5">Price</res>
<res label="Q18FM_att1_level1"><a href='[rel FM_Image1b.jpg]' data-fancybox=""><img style="max-width: 150px; max-height: 150px" src='[rel FM_Image1.jpg]' /></a></res>
<res label="Q18FM_att1_level2"><a href='[rel FM_Image2b.jpg]' data-fancybox=""><img style="max-width: 150px; max-height: 150px" src='[rel FM_Image2.jpg]' /></a></res>
<res label="Q18FM_att1_level3"><a href='[rel FM_Image3b.jpg]' data-fancybox=""><img style="max-width: 150px; max-height: 150px" src='[rel FM_Image3.jpg]' /></a></res>
<res label="Q18FM_att1_level4"><a href='[rel FM_Image4b.jpg]' data-fancybox=""><img style="max-width: 150px; max-height: 150px" src='[rel FM_Image4.jpg]' /></a></res>
<res label="Q18FM_att1_level5"/>
<res label="Q18FM_att1_level6"><a href='[rel FM_Image6b.jpg]' data-fancybox=""><img style="max-width: 150px; max-height: 150px" src='[rel FM_Image6.jpg]' /></a></res>
<res label="Q18FM_att1_level7"><a href='[rel FM_Image7b.jpg]' data-fancybox=""><img style="max-width: 150px; max-height: 150px" src='[rel FM_Image7.jpg]' /></a></res>
<res label="Q18FM_att1_level8"><a href='[rel FM_Image8b.jpg]' data-fancybox=""><img style="max-width: 150px; max-height: 150px" src='[rel FM_Image8.jpg]' /></a></res>
<res label="Q18FM_att1_level9"><a href='[rel FM_Image9b.jpg]' data-fancybox=""><img style="max-width: 150px; max-height: 150px" src='[rel FM_Image9.jpg]' /></a></res>
<res label="Q18FM_att1_level10"><a href='[rel FM_Image10b.jpg]' data-fancybox=""><img style="max-width: 150px; max-height: 150px" src='[rel FM_Image10.jpg]' /></a></res>
<res label="Q18FM_att1_level11"><a href='[rel FM_Image11b.jpg]' data-fancybox=""><img style="max-width: 150px; max-height: 150px" src='[rel FM_Image11.jpg]' /></a></res>
<res label="Q18FM_att1_level12"><a href='[rel FM_Image12b.jpg]' data-fancybox=""><img style="max-width: 150px; max-height: 150px" src='[rel FM_Image12.jpg]' /></a></res>
<res label="Q18FM_att1_level13"><a href='[rel FM_Image13b.jpg]' data-fancybox=""><img style="max-width: 150px; max-height: 150px" src='[rel FM_Image13.jpg]' /></a></res>
<res label="Q18FM_att1_level14"><a href='[rel FM_Image14b.jpg]' data-fancybox=""><img style="max-width: 150px; max-height: 150px" src='[rel FM_Image14.jpg]' /></a></res>
<res label="Q18FM_att1_level15"/>
<res label="Q18FM_att1_level16"><a href='[rel FM_Image16b.jpg]' data-fancybox=""><img style="max-width: 150px; max-height: 150px" src='[rel FM_Image16.jpg]' /></a></res>
<res label="Q18FM_att1_level17"><a href='[rel FM_Image17b.jpg]' data-fancybox=""><img style="max-width: 150px; max-height: 150px" src='[rel FM_Image17.jpg]' /></a></res>
<res label="Q18FM_att1_level18"><a href='[rel FM_Image18b.jpg]' data-fancybox=""><img style="max-width: 150px; max-height: 150px" src='[rel FM_Image18.jpg]' /></a></res>
<res label="Q18FM_att1_level19"><a href='[rel FM_Image19b.jpg]' data-fancybox=""><img style="max-width: 150px; max-height: 150px" src='[rel FM_Image19.jpg]' /></a></res>
<res label="Q18FM_att1_level20"><a href='[rel FM_Image20b.jpg]' data-fancybox=""><img style="max-width: 150px; max-height: 150px" src='[rel FM_Image20.jpg]' /></a></res>
<res label="Q18FM_att1_level21"/>
<res label="Q18FM_att1_level22"><a href='[rel FM_Image22b.jpg]' data-fancybox=""><img style="max-width: 150px; max-height: 150px" src='[rel FM_Image22.jpg]' /></a></res>
<res label="Q18FM_att1_level23"><a href='[rel FM_Image23b.jpg]' data-fancybox=""><img style="max-width: 150px; max-height: 150px" src='[rel FM_Image23.jpg]' /></a></res>
<res label="Q18FM_att1_level24"><a href='[rel FM_Image24b.jpg]' data-fancybox=""><img style="max-width: 150px; max-height: 150px" src='[rel FM_Image24.jpg]' /></a></res>
<res label="Q18FM_att1_level25"><a href='[rel FM_Image25b.jpg]' data-fancybox=""><img style="max-width: 150px; max-height: 150px" src='[rel FM_Image25.jpg]' /></a></res>
<res label="Q18FM_att1_level26"><a href='[rel FM_Image26b.jpg]' data-fancybox=""><img style="max-width: 150px; max-height: 150px" src='[rel FM_Image26.jpg]' /></a></res>
<res label="Q18FM_att1_level27"/>
<res label="Q18FM_att1_level28"><a href='[rel FM_Image28b.jpg]' data-fancybox=""><img style="max-width: 150px; max-height: 150px" src='[rel FM_Image28.jpg]' /></a></res>
<res label="Q18FM_att1_level29"><a href='[rel FM_Image29b.jpg]' data-fancybox=""><img style="max-width: 150px; max-height: 150px" src='[rel FM_Image29.jpg]' /></a></res>
<res label="Q18FM_att1_level30"><a href='[rel FM_Image30b.jpg]' data-fancybox=""><img style="max-width: 150px; max-height: 150px" src='[rel FM_Image30.jpg]' /></a></res>
<res label="Q18FM_att1_level31"><a href='[rel FM_Image31b.jpg]' data-fancybox=""><img style="max-width: 150px; max-height: 150px" src='[rel FM_Image31.jpg]' /></a></res>
<res label="Q18FM_att1_level32"><a href='[rel FM_Image32b.jpg]' data-fancybox=""><img style="max-width: 150px; max-height: 150px" src='[rel FM_Image32.jpg]' /></a></res>
<res label="Q18FM_att1_level33"><a href='[rel FM_Image33b.jpg]' data-fancybox=""><img style="max-width: 150px; max-height: 150px" src='[rel FM_Image33.jpg]' /></a></res>
<res label="Q18FM_att1_level34"><a href='[rel FM_Image34b.jpg]' data-fancybox=""><img style="max-width: 150px; max-height: 150px" src='[rel FM_Image34.jpg]' /></a></res>
<res label="Q18FM_att1_level35"><a href='[rel FM_Image35b.jpg]' data-fancybox=""><img style="max-width: 150px; max-height: 150px" src='[rel FM_Image35.jpg]' /></a></res>
<res label="Q18FM_att2_level1">CHOMPIES</res>
<res label="Q18FM_att2_level2">CHOMPIES</res>
<res label="Q18FM_att2_level3">CHOMPIES</res>
<res label="Q18FM_att2_level4">FOOD FOR LIFE</res>
<res label="Q18FM_att2_level5"/>
<res label="Q18FM_att2_level6">HEALTHY LIFE</res>
<res label="Q18FM_att2_level7">SOLA</res>
<res label="Q18FM_att2_level8">THIN SLIM FOODS</res>
<res label="Q18FM_att2_level9">FRANZ</res>
<res label="Q18FM_att2_level10">HEALTHY LIFE</res>
<res label="Q18FM_att2_level11">HEALTHY LIFE</res>
<res label="Q18FM_att2_level12">HEALTHY LIFE</res>
<res label="Q18FM_att2_level13">HEALTHY LIFE</res>
<res label="Q18FM_att2_level14">KETO CULTURE BAKING</res>
<res label="Q18FM_att2_level15"/>
<res label="Q18FM_att2_level16">SCHMIDT</res>
<res label="Q18FM_att2_level17">SCHMIDT</res>
<res label="Q18FM_att2_level18">SCHMIDT</res>
<res label="Q18FM_att2_level19">SOLA</res>
<res label="Q18FM_att2_level20">SOLA</res>
<res label="Q18FM_att2_level21"/>
<res label="Q18FM_att2_level22">AUNT MILLIES</res>
<res label="Q18FM_att2_level23">BASE CULTURE</res>
<res label="Q18FM_att2_level24">CHOMPIES</res>
<res label="Q18FM_att2_level25">CARBONAUT</res>
<res label="Q18FM_att2_level26">DAVES KILLER BREAD</res>
<res label="Q18FM_att2_level27"/>
<res label="Q18FM_att2_level28">FOOD FOR LIFE</res>
<res label="Q18FM_att2_level29">FRANZ</res>
<res label="Q18FM_att2_level30">HEALTHY LIFE</res>
<res label="Q18FM_att2_level31">NATURAL OVENS</res>
<res label="Q18FM_att2_level32">OROWEAT</res>
<res label="Q18FM_att2_level33">SOLA</res>
<res label="Q18FM_att2_level34">THIN SLIM FOODS</res>
<res label="Q18FM_att2_level35">UDIS</res>
<res label="Q18FM_att3_level1">Bagels</res>
<res label="Q18FM_att3_level2">Bagels</res>
<res label="Q18FM_att3_level3">English Muffins</res>
<res label="Q18FM_att3_level4">English Muffins</res>
<res label="Q18FM_att3_level5"/>
<res label="Q18FM_att3_level6">English Muffins</res>
<res label="Q18FM_att3_level7">Bagels</res>
<res label="Q18FM_att3_level8">Bagels</res>
<res label="Q18FM_att3_level9">Hamburger Buns</res>
<res label="Q18FM_att3_level10">Hamburger Buns</res>
<res label="Q18FM_att3_level11">Hotdog Buns</res>
<res label="Q18FM_att3_level12">Hamburger Buns</res>
<res label="Q18FM_att3_level13">Hotdog Buns</res>
<res label="Q18FM_att3_level14">Hamburger Buns</res>
<res label="Q18FM_att3_level15"/>
<res label="Q18FM_att3_level16">Hotdog Buns</res>
<res label="Q18FM_att3_level17">Hamburger Buns</res>
<res label="Q18FM_att3_level18">Hotdog Buns</res>
<res label="Q18FM_att3_level19">Hamburger Buns</res>
<res label="Q18FM_att3_level20">Hotdog Buns</res>
<res label="Q18FM_att3_level21"/>
<res label="Q18FM_att3_level22">Bread Loaf</res>
<res label="Q18FM_att3_level23">Bread Loaf</res>
<res label="Q18FM_att3_level24">Bread Loaf</res>
<res label="Q18FM_att3_level25">Bread Loaf</res>
<res label="Q18FM_att3_level26">Bread Loaf</res>
<res label="Q18FM_att3_level27"/>
<res label="Q18FM_att3_level28">Bread Loaf</res>
<res label="Q18FM_att3_level29">Bread Loaf</res>
<res label="Q18FM_att3_level30">Bread Loaf</res>
<res label="Q18FM_att3_level31">Bread Loaf</res>
<res label="Q18FM_att3_level32">Bread Loaf</res>
<res label="Q18FM_att3_level33">Bread Loaf</res>
<res label="Q18FM_att3_level34">Bread Loaf</res>
<res label="Q18FM_att3_level35">Bread Loaf</res>
<res label="Q18FM_att4_level1">$24 oz</res>
<res label="Q18FM_att4_level2">$16 oz</res>
<res label="Q18FM_att4_level3">$12 oz</res>
<res label="Q18FM_att4_level4">$16 oz</res>
<res label="Q18FM_att4_level5"/>
<res label="Q18FM_att4_level6">$8 oz</res>
<res label="Q18FM_att4_level7">$12 oz</res>
<res label="Q18FM_att4_level8">$12 oz</res>
<res label="Q18FM_att4_level9">$12 oz</res>
<res label="Q18FM_att4_level10">$12 oz</res>
<res label="Q18FM_att4_level11">$12 oz</res>
<res label="Q18FM_att4_level12">$9 oz</res>
<res label="Q18FM_att4_level13">$8 oz</res>
<res label="Q18FM_att4_level14">$12 oz</res>
<res label="Q18FM_att4_level15"/>
<res label="Q18FM_att4_level16">$15 oz</res>
<res label="Q18FM_att4_level17">$15 oz</res>
<res label="Q18FM_att4_level18">$30 oz</res>
<res label="Q18FM_att4_level19">$9 oz</res>
<res label="Q18FM_att4_level20">$9 oz</res>
<res label="Q18FM_att4_level21"/>
<res label="Q18FM_att4_level22">$14 oz</res>
<res label="Q18FM_att4_level23">$16 oz</res>
<res label="Q18FM_att4_level24">$16 oz</res>
<res label="Q18FM_att4_level25">$19 oz</res>
<res label="Q18FM_att4_level26">$20.5 oz</res>
<res label="Q18FM_att4_level27"/>
<res label="Q18FM_att4_level28">$24 oz</res>
<res label="Q18FM_att4_level29">$18 oz</res>
<res label="Q18FM_att4_level30">$16 oz</res>
<res label="Q18FM_att4_level31">$18 oz</res>
<res label="Q18FM_att4_level32">$20 oz</res>
<res label="Q18FM_att4_level33">$14 oz</res>
<res label="Q18FM_att4_level34">$14 oz</res>
<res label="Q18FM_att4_level35">$12 oz</res>
<res label="Q18FM_att5_level11">$2.54</res>
<res label="Q18FM_att5_level12">$2.78</res>
<res label="Q18FM_att5_level13">$3.03</res>
<res label="Q18FM_att5_level14">$3.27</res>
<res label="Q18FM_att5_level15">$3.52</res>
<res label="Q18FM_att5_level16">$3.77</res>
<res label="Q18FM_att5_level17">$4.01</res>
<res label="Q18FM_att5_level21">$2.62</res>
<res label="Q18FM_att5_level22">$2.88</res>
<res label="Q18FM_att5_level23">$3.13</res>
<res label="Q18FM_att5_level24">$3.39</res>
<res label="Q18FM_att5_level25">$3.64</res>
<res label="Q18FM_att5_level26">$3.9</res>
<res label="Q18FM_att5_level27">$4.16</res>
<res label="Q18FM_att5_level31">$2.15</res>
<res label="Q18FM_att5_level32">$2.36</res>
<res label="Q18FM_att5_level33">$2.57</res>
<res label="Q18FM_att5_level34">$2.78</res>
<res label="Q18FM_att5_level35">$2.99</res>
<res label="Q18FM_att5_level36">$3.2</res>
<res label="Q18FM_att5_level37">$3.41</res>
<res label="Q18FM_att5_level41">$4.6</res>
<res label="Q18FM_att5_level42">$5.04</res>
<res label="Q18FM_att5_level43">$5.49</res>
<res label="Q18FM_att5_level44">$5.94</res>
<res label="Q18FM_att5_level45">$6.39</res>
<res label="Q18FM_att5_level46">$6.83</res>
<res label="Q18FM_att5_level47">$7.28</res>
<res label="Q18FM_att5_level51"/>
<res label="Q18FM_att5_level52"/>
<res label="Q18FM_att5_level53"/>
<res label="Q18FM_att5_level54"/>
<res label="Q18FM_att5_level55"/>
<res label="Q18FM_att5_level56"/>
<res label="Q18FM_att5_level57"/>
<res label="Q18FM_att5_level61">$1.5</res>
<res label="Q18FM_att5_level62">$1.64</res>
<res label="Q18FM_att5_level63">$1.79</res>
<res label="Q18FM_att5_level64">$1.94</res>
<res label="Q18FM_att5_level65">$2.08</res>
<res label="Q18FM_att5_level66">$2.23</res>
<res label="Q18FM_att5_level67">$2.37</res>
<res label="Q18FM_att5_level71">$4.5</res>
<res label="Q18FM_att5_level72">$4.93</res>
<res label="Q18FM_att5_level73">$5.37</res>
<res label="Q18FM_att5_level74">$5.81</res>
<res label="Q18FM_att5_level75">$6.24</res>
<res label="Q18FM_att5_level76">$6.68</res>
<res label="Q18FM_att5_level77">$7.12</res>
<res label="Q18FM_att5_level81">$7.87</res>
<res label="Q18FM_att5_level82">$8.64</res>
<res label="Q18FM_att5_level83">$9.4</res>
<res label="Q18FM_att5_level84">$10.17</res>
<res label="Q18FM_att5_level85">$10.93</res>
<res label="Q18FM_att5_level86">$11.7</res>
<res label="Q18FM_att5_level87">$12.47</res>
<res label="Q18FM_att5_level91">$4.55</res>
<res label="Q18FM_att5_level92">$4.99</res>
<res label="Q18FM_att5_level93">$5.43</res>
<res label="Q18FM_att5_level94">$5.87</res>
<res label="Q18FM_att5_level95">$6.32</res>
<res label="Q18FM_att5_level96">$6.76</res>
<res label="Q18FM_att5_level97">$7.2</res>
<res label="Q18FM_att5_level101">$1.77</res>
<res label="Q18FM_att5_level102">$1.94</res>
<res label="Q18FM_att5_level103">$2.11</res>
<res label="Q18FM_att5_level104">$2.29</res>
<res label="Q18FM_att5_level105">$2.46</res>
<res label="Q18FM_att5_level106">$2.63</res>
<res label="Q18FM_att5_level107">$2.8</res>
<res label="Q18FM_att5_level111">$1.77</res>
<res label="Q18FM_att5_level112">$1.94</res>
<res label="Q18FM_att5_level113">$2.12</res>
<res label="Q18FM_att5_level114">$2.29</res>
<res label="Q18FM_att5_level115">$2.46</res>
<res label="Q18FM_att5_level116">$2.63</res>
<res label="Q18FM_att5_level117">$2.8</res>
<res label="Q18FM_att5_level121">$2.75</res>
<res label="Q18FM_att5_level122">$3.02</res>
<res label="Q18FM_att5_level123">$3.29</res>
<res label="Q18FM_att5_level124">$3.56</res>
<res label="Q18FM_att5_level125">$3.82</res>
<res label="Q18FM_att5_level126">$4.09</res>
<res label="Q18FM_att5_level127">$4.36</res>
<res label="Q18FM_att5_level131">$2.75</res>
<res label="Q18FM_att5_level132">$3.02</res>
<res label="Q18FM_att5_level133">$3.29</res>
<res label="Q18FM_att5_level134">$3.55</res>
<res label="Q18FM_att5_level135">$3.82</res>
<res label="Q18FM_att5_level136">$4.09</res>
<res label="Q18FM_att5_level137">$4.36</res>
<res label="Q18FM_att5_level141">$4.58</res>
<res label="Q18FM_att5_level142">$5.03</res>
<res label="Q18FM_att5_level143">$5.47</res>
<res label="Q18FM_att5_level144">$5.92</res>
<res label="Q18FM_att5_level145">$6.36</res>
<res label="Q18FM_att5_level146">$6.81</res>
<res label="Q18FM_att5_level147">$7.25</res>
<res label="Q18FM_att5_level151"/>
<res label="Q18FM_att5_level152"/>
<res label="Q18FM_att5_level153"/>
<res label="Q18FM_att5_level154"/>
<res label="Q18FM_att5_level155"/>
<res label="Q18FM_att5_level156"/>
<res label="Q18FM_att5_level157"/>
<res label="Q18FM_att5_level161">$1.77</res>
<res label="Q18FM_att5_level162">$1.94</res>
<res label="Q18FM_att5_level163">$2.11</res>
<res label="Q18FM_att5_level164">$2.28</res>
<res label="Q18FM_att5_level165">$2.45</res>
<res label="Q18FM_att5_level166">$2.63</res>
<res label="Q18FM_att5_level167">$2.8</res>
<res label="Q18FM_att5_level171">$1.8</res>
<res label="Q18FM_att5_level172">$1.98</res>
<res label="Q18FM_att5_level173">$2.15</res>
<res label="Q18FM_att5_level174">$2.33</res>
<res label="Q18FM_att5_level175">$2.5</res>
<res label="Q18FM_att5_level176">$2.68</res>
<res label="Q18FM_att5_level177">$2.85</res>
<res label="Q18FM_att5_level181">$2.24</res>
<res label="Q18FM_att5_level182">$2.45</res>
<res label="Q18FM_att5_level183">$2.67</res>
<res label="Q18FM_att5_level184">$2.89</res>
<res label="Q18FM_att5_level185">$3.11</res>
<res label="Q18FM_att5_level186">$3.32</res>
<res label="Q18FM_att5_level187">$3.54</res>
<res label="Q18FM_att5_level191">$3.13</res>
<res label="Q18FM_att5_level192">$3.43</res>
<res label="Q18FM_att5_level193">$3.74</res>
<res label="Q18FM_att5_level194">$4.04</res>
<res label="Q18FM_att5_level195">$4.34</res>
<res label="Q18FM_att5_level196">$4.65</res>
<res label="Q18FM_att5_level197">$4.95</res>
<res label="Q18FM_att5_level201">$3.11</res>
<res label="Q18FM_att5_level202">$3.42</res>
<res label="Q18FM_att5_level203">$3.72</res>
<res label="Q18FM_att5_level204">$4.02</res>
<res label="Q18FM_att5_level205">$4.33</res>
<res label="Q18FM_att5_level206">$4.63</res>
<res label="Q18FM_att5_level207">$4.93</res>
<res label="Q18FM_att5_level211"/>
<res label="Q18FM_att5_level212"/>
<res label="Q18FM_att5_level213"/>
<res label="Q18FM_att5_level214"/>
<res label="Q18FM_att5_level215"/>
<res label="Q18FM_att5_level216"/>
<res label="Q18FM_att5_level217"/>
<res label="Q18FM_att5_level221">$4.13</res>
<res label="Q18FM_att5_level222">$4.53</res>
<res label="Q18FM_att5_level223">$4.93</res>
<res label="Q18FM_att5_level224">$5.34</res>
<res label="Q18FM_att5_level225">$5.74</res>
<res label="Q18FM_att5_level226">$6.14</res>
<res label="Q18FM_att5_level227">$6.54</res>
<res label="Q18FM_att5_level231">$8.22</res>
<res label="Q18FM_att5_level232">$9.02</res>
<res label="Q18FM_att5_level233">$9.82</res>
<res label="Q18FM_att5_level234">$10.62</res>
<res label="Q18FM_att5_level235">$11.42</res>
<res label="Q18FM_att5_level236">$12.22</res>
<res label="Q18FM_att5_level237">$13.02</res>
<res label="Q18FM_att5_level241">$2.75</res>
<res label="Q18FM_att5_level242">$3.02</res>
<res label="Q18FM_att5_level243">$3.29</res>
<res label="Q18FM_att5_level244">$3.55</res>
<res label="Q18FM_att5_level245">$3.82</res>
<res label="Q18FM_att5_level246">$4.09</res>
<res label="Q18FM_att5_level247">$4.36</res>
<res label="Q18FM_att5_level251">$5.58</res>
<res label="Q18FM_att5_level252">$6.12</res>
<res label="Q18FM_att5_level253">$6.67</res>
<res label="Q18FM_att5_level254">$7.21</res>
<res label="Q18FM_att5_level255">$7.75</res>
<res label="Q18FM_att5_level256">$8.29</res>
<res label="Q18FM_att5_level257">$8.84</res>
<res label="Q18FM_att5_level261">$4.54</res>
<res label="Q18FM_att5_level262">$4.98</res>
<res label="Q18FM_att5_level263">$5.42</res>
<res label="Q18FM_att5_level264">$5.86</res>
<res label="Q18FM_att5_level265">$6.3</res>
<res label="Q18FM_att5_level266">$6.74</res>
<res label="Q18FM_att5_level267">$7.18</res>
<res label="Q18FM_att5_level271"/>
<res label="Q18FM_att5_level272"/>
<res label="Q18FM_att5_level273"/>
<res label="Q18FM_att5_level274"/>
<res label="Q18FM_att5_level275"/>
<res label="Q18FM_att5_level276"/>
<res label="Q18FM_att5_level277"/>
<res label="Q18FM_att5_level281">$4.71</res>
<res label="Q18FM_att5_level282">$5.17</res>
<res label="Q18FM_att5_level283">$5.63</res>
<res label="Q18FM_att5_level284">$6.09</res>
<res label="Q18FM_att5_level285">$6.55</res>
<res label="Q18FM_att5_level286">$7.01</res>
<res label="Q18FM_att5_level287">$7.46</res>
<res label="Q18FM_att5_level291">$4.66</res>
<res label="Q18FM_att5_level292">$5.11</res>
<res label="Q18FM_att5_level293">$5.56</res>
<res label="Q18FM_att5_level294">$6.01</res>
<res label="Q18FM_att5_level295">$6.47</res>
<res label="Q18FM_att5_level296">$6.92</res>
<res label="Q18FM_att5_level297">$7.37</res>
<res label="Q18FM_att5_level301">$1.8</res>
<res label="Q18FM_att5_level302">$1.97</res>
<res label="Q18FM_att5_level303">$2.14</res>
<res label="Q18FM_att5_level304">$2.32</res>
<res label="Q18FM_att5_level305">$2.49</res>
<res label="Q18FM_att5_level306">$2.67</res>
<res label="Q18FM_att5_level307">$2.84</res>
<res label="Q18FM_att5_level311">$4.94</res>
<res label="Q18FM_att5_level312">$5.42</res>
<res label="Q18FM_att5_level313">$5.9</res>
<res label="Q18FM_att5_level314">$6.38</res>
<res label="Q18FM_att5_level315">$6.86</res>
<res label="Q18FM_att5_level316">$7.34</res>
<res label="Q18FM_att5_level317">$7.82</res>
<res label="Q18FM_att5_level321">$5.4</res>
<res label="Q18FM_att5_level322">$5.93</res>
<res label="Q18FM_att5_level323">$6.45</res>
<res label="Q18FM_att5_level324">$6.98</res>
<res label="Q18FM_att5_level325">$7.5</res>
<res label="Q18FM_att5_level326">$8.03</res>
<res label="Q18FM_att5_level327">$8.55</res>
<res label="Q18FM_att5_level331">$4.13</res>
<res label="Q18FM_att5_level332">$4.53</res>
<res label="Q18FM_att5_level333">$4.94</res>
<res label="Q18FM_att5_level334">$5.34</res>
<res label="Q18FM_att5_level335">$5.74</res>
<res label="Q18FM_att5_level336">$6.14</res>
<res label="Q18FM_att5_level337">$6.54</res>
<res label="Q18FM_att5_level341">$7.09</res>
<res label="Q18FM_att5_level342">$7.78</res>
<res label="Q18FM_att5_level343">$8.46</res>
<res label="Q18FM_att5_level344">$9.15</res>
<res label="Q18FM_att5_level345">$9.84</res>
<res label="Q18FM_att5_level346">$10.53</res>
<res label="Q18FM_att5_level347">$11.22</res>
<res label="Q18FM_att5_level351">$4.02</res>
<res label="Q18FM_att5_level352">$4.41</res>
<res label="Q18FM_att5_level353">$4.8</res>
<res label="Q18FM_att5_level354">$5.19</res>
<res label="Q18FM_att5_level355">$5.58</res>
<res label="Q18FM_att5_level356">$5.97</res>
<res label="Q18FM_att5_level357">$6.36</res>
<res label="NoneText">I would not buy any of the above</res>
<res label="TopText"/>
<res label="rowText"><i>Select all that apply. If you would not purchase any items, please select "I would not buy any of the above."</i></res>



  <html label="iQ18FM_INTRO" where="survey">For this next section, please assume you are shopping for low-carb/keto packaged bread products at [pipe: dChannelfinal].<br />
<br />
You will be shown several screens with different packaged bread products and will be asked to select the items you would purchase if these were the only low-card/keto bread products available to you at the prices shown.</html>

  <suspend/>

  <exec when="init">
def Q18FM_setupDCMFile(fname, fileDelimiter="\t"):
    f = open("%s/%s" % (gv.survey.path, fname))
    dcmObj = [ line.strip("\r\n").split(fileDelimiter) for line in f.readlines() ]

    d = {}
    dcm_concepts = []

    for i,row in enumerate(dcmObj):
        if i:
            d["v%s_t%s_c%s" % (row[0],row[1],row[2])] = row[3:]
            if row[2] not in dcm_concepts:
                dcm_concepts.append(row[2])

    concepts = [ int(x) for x in dcm_concepts ]
    concepts.sort()
    d["concepts"] = dcm_concepts

    return d

#set persistent items, format: p.concept#_att#
def Q18FM_setupDCMItems(d, vt, prefix="1"):
    print "***** STAFF ONLY *****"
    print "***** DCM Matrix *****"
    print "Version_Task: %s" % vt

    for concept in d.get("concepts"):
        attributes = d[ "%s_c%s" % (vt,concept) ]
        print "Concept %s: %s" % (concept,attributes)

        for i,attr in enumerate(attributes):
            if i+1 != 6:
                p[ "concept%s_att%s" % (concept,i+1) ] = res[ "%s_att%s_level%s" % (prefix,i+1,attr) ]
                p[ "dcmLegend_att%s" % (i+1) ] = res[ "%s_legend%s" % (prefix,i+1) ]
  </exec>

  <suspend/>

  <block label="Q18FM_Conjoint" cond="1">
    <note>!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! UPDATE .DAT FILENAME</note>
    <note>
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! MAKE SURE TO UPLOAD .DAT FILE
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! EXAMPLE:
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! version	task	concept	att1	att2	att3	att4	att5
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! 1	1	1	1	1	1	1	2
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! 1	1	2	8	1	1	1	1
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! 1	1	3	10	1	1	1	1
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! 1	1	4	16	1	1	1	2
</note>
    <exec when="init">
Q18FM_version = Q18FM_setupDCMFile("Q18FM_Design_v1.dat")
    </exec>

    <suspend/>

<note>!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! UPDATE QUOTA SHEET (REPLACE ALL)</note>
<note>
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! MAKE SURE TO UPDATE QUOTAS
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! EXAMPLE:
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! in Defines
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! Q18FMver_1	1	Q18 FM - version 1
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! Q18FMver_2	1	Q18 FM - version 2
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! Q18FMver_3	1	Q18 FM - version 3
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! Q18FMver_4	1	Q18 FM - version 4
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! Q18FMver_5	1	Q18 FM - version 5
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! Q18FMver_6	1	Q18 FM - version 6
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! Q18FMver_7	1	Q18 FM - version 7
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! Q18FMver_8	1	Q18 FM - version 8
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! Q18FMver_9	1	Q18 FM - version 9
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! Q18FMver_10	1	Q18 FM - version 10
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! in QUOTA SHEET:
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! #= Q18 DCM Versions -- Least fill
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! Q18FMver_1	inf
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! Q18FMver_2	inf
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! Q18FMver_3	inf
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! Q18FMver_4	inf
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! Q18FMver_5	inf
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! Q18FMver_6	inf
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! Q18FMver_7	inf
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! Q18FMver_8	inf
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! Q18FMver_9	inf
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! Q18FMver_10	inf
</note>
    <quota label="Q18FM_quota" overquota="noqual" sheet="Q18FM_version"/>

    <suspend/>

    <note>!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! UPDATE MAXRANGE TO MAX VERSION NUMBER</note>
    <note>!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! UPDATE MARKERS TO MATCH QUOTA</note>
    <number
    label="Q18FM_Version"
    size="3"
    verify="range(1,10)"
    where="execute,survey,report">
      <title>Q18FM Version</title>
      <exec>
print p.markers
for x in p.markers:
  if "/Q18FM_version/Q18FMver_" in x:
    Q18FM_Version.val = int(x.split("_")[-1])
    break
      </exec>

    </number>

    <suspend/>

    <exec>
p.startTime = timeSpent()
    </exec>

    <note>!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! UPDATE RANGE TO MAX VERSION NUMBER + 1</note>
    <note>!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! ADD ITEMS DEPENDING ON HOW MANY ITEMS YOU WANT TO BE SHOWN:
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! p.precode
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! p.ver
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! respData
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! FinalConceptQ18FM_ -- columns</note>
    <loop label="Q18FM_loop" vars="task">
      <title>Q18FM - DCM Loop</title>
      <block label="Q18FM_block" randomize="1">
        <exec>
p.version=""
for itr in range (11):
	if Q18FM_Version.val == itr:
		p.version=itr
print "version :"+ str(p.version)
p.task=[loopvar: label]
print p.task
p.precode1= "v"+str(p.version)+"_"+"t"+str(p.task)+"_"+"c"+"1"
p.precode2= "v"+str(p.version)+"_"+"t"+str(p.task)+"_"+"c"+"2"
p.precode3= "v"+str(p.version)+"_"+"t"+str(p.task)+"_"+"c"+"3"
p.precode4= "v"+str(p.version)+"_"+"t"+str(p.task)+"_"+"c"+"4"
p.precode5= "v"+str(p.version)+"_"+"t"+str(p.task)+"_"+"c"+"5"
p.precode6= "v"+str(p.version)+"_"+"t"+str(p.task)+"_"+"c"+"6"
p.precode7= "v"+str(p.version)+"_"+"t"+str(p.task)+"_"+"c"+"7"
p.precode8= "v"+str(p.version)+"_"+"t"+str(p.task)+"_"+"c"+"8"
p.precode9= "v"+str(p.version)+"_"+"t"+str(p.task)+"_"+"c"+"9"

p.ver1=p.precode1
p.ver2=p.precode2
p.ver3=p.precode3
p.ver4=p.precode4
p.ver5=p.precode5
p.ver6=p.precode6
p.ver7=p.precode7
p.ver8=p.precode8
p.ver9=p.precode9

print p.ver1
respData1 = Q18FM_version.get(p.ver1)
respData2 = Q18FM_version.get(p.ver2)
respData3 = Q18FM_version.get(p.ver3)
respData4 = Q18FM_version.get(p.ver4)
respData5 = Q18FM_version.get(p.ver5)
respData6 = Q18FM_version.get(p.ver6)
respData7 = Q18FM_version.get(p.ver7)
respData8 = Q18FM_version.get(p.ver8)
respData9 = Q18FM_version.get(p.ver9)

print respData1
print respData2
print respData3
print respData4
print respData5
print respData6
print respData7
print respData8
print respData9

for itr in range(len(FinalConceptQ18FM_[loopvar:label].rows)):
   if respData1:
       FinalConceptQ18FM_[loopvar:label].rows[itr].c1.val = respData1[itr]
   if respData2:
       FinalConceptQ18FM_[loopvar:label].rows[itr].c2.val = respData2[itr]
   if respData3:
       FinalConceptQ18FM_[loopvar:label].rows[itr].c3.val = respData3[itr]
   if respData4:
       FinalConceptQ18FM_[loopvar:label].rows[itr].c4.val = respData4[itr]
   if respData5:
       FinalConceptQ18FM_[loopvar:label].rows[itr].c5.val = respData5[itr]
   if respData6:
       FinalConceptQ18FM_[loopvar:label].rows[itr].c6.val = respData6[itr]
   if respData7:
       FinalConceptQ18FM_[loopvar:label].rows[itr].c7.val = respData7[itr]
   if respData8:
       FinalConceptQ18FM_[loopvar:label].rows[itr].c8.val = respData8[itr]
   if respData9:
       FinalConceptQ18FM_[loopvar:label].rows[itr].c9.val = respData9[itr]
        </exec>

        <suspend/>

        <text
      label="FinalConceptQ18FM_[loopvar:label]"
      ss:listDisplay="1"
      surveyDisplay="desktop"
      fwidth="3"
      optional="1"
      where="survey,report,execute">
          <title>Hidden : Holds conjoint design codes combination for all columns</title>
          <row label="r1">Att 1 SKU</row>
          <row label="r2">Att 2 Brand</row>
          <row label="r3">Att 3 Type</row>
          <row label="r4">Att 4 Size</row>
          <row label="r5">Att 5 Price</row>
          <col label="c1"><p style="text-align: center;"><strong>Concept 1</strong></p></col>
          <col label="c2"><p style="text-align: center;"><strong>Concept 2</strong></p></col>
          <col label="c3"><p style="text-align: center;"><strong>Concept 3</strong></p></col>
          <col label="c4"><p style="text-align: center;"><strong>Concept 4</strong></p></col>
          <col label="c5"><p style="text-align: center;"><strong>Concept 5</strong></p></col>
          <col label="c6"><p style="text-align: center;"><strong>Concept 6</strong></p></col>
          <col label="c7"><p style="text-align: center;"><strong>Concept 7</strong></p></col>
          <col label="c8"><p style="text-align: center;"><strong>Concept 8</strong></p></col>
          <col label="c9"><p style="text-align: center;"><strong>Concept 9</strong></p></col>
        </text>

        <suspend/>


    <exec>
p.QuestionStartTime = timeSpent()
    </exec>
        <suspend/>

        <note>!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! ADD COLUMNS DEPENDING ON HOW MANY ITEMS ARE SHOWN</note>
        <note>!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! ADD TD DEPENDING ON HOW MANY ITEMS ARE SHOWN</note>
        <note>!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! UPDATE arg:attributes WITH HOW MANY ATTRIBUTES IN DCM FILE</note>
        <note>!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! UPDATE LOOPROW ON HOW MANY TASK PER VERSION</note>
        <checkbox
      label="Q18FM_[loopvar: task]"
      atleast="1"
      optional="0"
      ss:questionClassNames="Q18FM_version"
      surveyDisplay="desktop">
          <title>Please select all items you would actually purchase below. You can hover over the image to view nutrition facts for any item on the screen.</title>
          <comment>Select all that apply. If you would not purchase any items, please select "I would not buy any of the above."</comment>
          <exec>
Q18FM_setupDCMItems( Q18FM_version, "v%s_t%s" % (Q18FM_Version.val,"[loopvar: task]"),"Q18FM" )
p.DCMcount = "%d" % (Q18FM_loop_expanded.order.index([loopvar: task]-1) + 1)
          </exec>

          <alt>DCM Task: [loopvar: task]</alt>
          <col label="c1"><div align="center"></div></col>
          <col label="c2"><div align="center"></div></col>
          <col label="c3"><div align="center"></div></col>
          <col label="c4"><div align="center"></div></col>
          <col label="c5"><div align="center"></div></col>
          <col label="c6"><div align="center"></div></col>
          <col label="c7"><div align="center"></div></col>
          <col label="c8"><div align="center"></div></col>
          <col label="c9"><div align="center"></div></col>
          <col label="c99" alt="${res.NoneText}" exclusive="1" randomize="0"/>
          <style mode="before" name="question.header"><![CDATA[
<style type="text/css">
/* add this only if you have scrollbars in IE7,8
div.Q18FM_version {
    overflow: hidden;
}
*/
.Q18FM_version tr.legend th.legend {
    font-weight: bold;
    width: auto;
}
.Q18FM_version th, .Q18FM_version td {
    padding: 15px;
}
.Q18FM_version tr.dcm_even {
    background-color: #FFFFFF;
}
.Q18FM_version tr.dcm_odd {
    background-color: #EFEFEF;
}
.Q18FM_version td.dcm_legend {
    font-weight: bold;
    text-align: left;
    width: 120px;
}
.Q18FM_version tr.dcm_even td.dcm_item, .Q18FM_version tr.dcm_odd td.dcm_item {
    text-align: center;
    width: 120px;
}
          </style>
]]></style>
          <style arg:addNoneColumn="1" arg:attributes="5" arg:noneText="${res.NoneText}" arg:top="${res.TopText}" arg:yeslegend="0" name="question.top-legend"><![CDATA[
\@if this.styles.ss.colLegendHeight
<tr class="legend top-legend${" GtTenColumns" if ec.colCount > 10 else ""} $(colError)" style="height:${this.styles.ss.colLegendHeight};">
\@else
<tr class="legend top-legend${" GtTenColumns" if ec.colCount > 10 else ""} $(colError)">
\@endif

\@if yeslegend == '1'
    <th class="dcm_legend2">$(top)</th>
\@endif
    $(left)
    $(legends)
    $(right)
</tr>

\@for x in range(1,int(attributes)+1)
  <tr class="${'dcm_%s' % ['odd','even'][x % 2]}">
  \@if yeslegend == '1'
      <td class="dcm_legend">${p.get('dcmLegend_att%d' % x)}</td>
  \@endif
      <td class="dcm_item">${p.get('concept%d_att%d' % ([c.index+1 for c in p.get('shuffle-Col-%d' % this.uid) or this.cols][0],x) )}</td>
      <td class="dcm_item">${p.get('concept%d_att%d' % ([c.index+1 for c in p.get('shuffle-Col-%d' % this.uid) or this.cols][1],x) )}</td>
      <td class="dcm_item">${p.get('concept%d_att%d' % ([c.index+1 for c in p.get('shuffle-Col-%d' % this.uid) or this.cols][2],x) )}</td>
      <td class="dcm_item">${p.get('concept%d_att%d' % ([c.index+1 for c in p.get('shuffle-Col-%d' % this.uid) or this.cols][3],x) )}</td>
      <td class="dcm_item">${p.get('concept%d_att%d' % ([c.index+1 for c in p.get('shuffle-Col-%d' % this.uid) or this.cols][4],x) )}</td>
      <td class="dcm_item">${p.get('concept%d_att%d' % ([c.index+1 for c in p.get('shuffle-Col-%d' % this.uid) or this.cols][5],x) )}</td>
      <td class="dcm_item">${p.get('concept%d_att%d' % ([c.index+1 for c in p.get('shuffle-Col-%d' % this.uid) or this.cols][6],x) )}</td>
      <td class="dcm_item">${p.get('concept%d_att%d' % ([c.index+1 for c in p.get('shuffle-Col-%d' % this.uid) or this.cols][7],x) )}</td>
      <td class="dcm_item">${p.get('concept%d_att%d' % ([c.index+1 for c in p.get('shuffle-Col-%d' % this.uid) or this.cols][8],x) )}</td>

\@if addNoneColumn == '1'
\@if x == 1
     <td rowspan="${int($(attributes))}" style="border-top: none; text-align: center;"><b>$(noneText)</b></td>
\@endif
\@endif

  </tr>
\@end


<tbody>
]]></style>
          <style arg:row="${res.rowText}" arg:yeslegend="0" name="question.row"><![CDATA[
\@if this.styles.ss.rowHeight
    <tr class="$(style) colCount-$(colCount)" style="height:${this.styles.ss.rowHeight};">
\@else
    <tr class="$(style) colCount-$(colCount)">
\@endif

\@if yeslegend == '1'
    <td class="dcm_legend">$(row)</td>
\@endif
$(left)
$(elements)
$(right)
</tr>
]]></style>
          <style arg:addNoneColumn="1" name="question.top-legend-item"><![CDATA[
\@if this.styles.ss.colWidth
    <th id="$(this.label)_$(col.label)" class="dcm_legend legend survey-q-grid-collegend $(col.styles.ss.colClassNames) ${col.group.styles.ss.groupClassNames if col.group else ""}" style="width:${this.styles.ss.colWidth}; min-width:${this.styles.ss.colWidth}">
        $(text)
    </th>
\@else

\@if addNoneColumn == '1' and col.index == (ec.colCount - 1)
    <th id="$(this.label)_$(col.label)" style="border-bottom: none; width: 125px;" >
        $(text)
    </th>
\@else
    <th id="$(this.label)_$(col.label)" class="legend survey-q-grid-collegend $(col.styles.ss.colClassNames) ${col.group.styles.ss.groupClassNames if col.group else ""}">
        $(text)
    </th>
\@endif

\@endif
]]></style>
  <style name="question.after"><![CDATA[
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css">
    <script src="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js"></script>
  ]]></style>

        </checkbox>

        <suspend/>


    <float
    label="Q18FM_[loopvar: task]_Timer"
    size="15"
    where="execute,survey,report">
      <title>Q18FM -  Timer (Minutes)</title>
      <exec>
Q18FM_[loopvar: task]_Timer.val = (timeSpent() - p.QuestionStartTime) / 60.0
      </exec>

    </float>

        <suspend/>
      </block>

      <looprow label="1">
        <loopvar name="task">1</loopvar>
      </looprow>

      <looprow label="2">
        <loopvar name="task">2</loopvar>
      </looprow>

      <looprow label="3">
        <loopvar name="task">3</loopvar>
      </looprow>

      <looprow label="4">
        <loopvar name="task">4</loopvar>
      </looprow>

      <looprow label="5">
        <loopvar name="task">5</loopvar>
      </looprow>

      <looprow label="6">
        <loopvar name="task">6</loopvar>
      </looprow>

      <looprow label="7">
        <loopvar name="task">7</loopvar>
      </looprow>

      <looprow label="8">
        <loopvar name="task">8</loopvar>
      </looprow>

      <looprow label="9">
        <loopvar name="task">9</loopvar>
      </looprow>

      <looprow label="10">
        <loopvar name="task">10</loopvar>
      </looprow>

      <looprow label="11">
        <loopvar name="task">11</loopvar>
      </looprow>

      <looprow label="12">
        <loopvar name="task">12</loopvar>
      </looprow>
    </loop>

    <float
    label="Q18FM_Timer"
    size="15"
    where="execute,survey,report">
      <title>Q18FM -  Timer (Minutes)</title>
      <exec>
Q18FM_Timer.val = (timeSpent() - p.startTime) / 60.0
      </exec>

    </float>

    <suspend/>
  </block>
</block>












++SELECT ALL ITEMS IF r9 IS CHECKED
<checkbox
  label="Q36new"
  cond="Q34new.r1"
  atleast="1">
  <title>Thinking about the NCAA Men’s Basketball March Madness Tournament, which of the following rounds did you watch?</title>
  <comment>Select all that apply</comment>
  <row label="r1" ss:rowClassNames="all">Selection Sunday – Sunday March 14</row>
  <row label="r2" ss:rowClassNames="all">First Four Play-In Games – Tuesday March 16 &amp; Wednesday March 17</row>
  <row label="r3" ss:rowClassNames="all">NCAA Tournament Round 1 – Thursday March 18 &amp; Friday March 29</row>
  <row label="r4" ss:rowClassNames="all">NCAA Tournament Round 2 – Saturday March 20 &amp; Sunday March 21</row>
  <row label="r5" ss:rowClassNames="all">Sweet 16 – Thursday March 25 &amp; Friday March 26</row>
  <row label="r6" ss:rowClassNames="all">Elite 8 – Saturday March 27 &amp; Sunday March 28</row>
  <row label="r7" ss:rowClassNames="all">Final Four – Saturday April 3</row>
  <row label="r8" ss:rowClassNames="all">2020 NCAA Championship game – Monday April 5</row>
  <row label="r9" ss:rowClassNames="r9">I plan on watching at least part of each round</row>
  <style label="exclusive_rows" name="question.after" wrap="ready"><![CDATA[
checkBox1();



function checkBox1(){
$ ('.r9').find('input[type="checkbox"]').each(function (){
    if ($ (this).next().hasClass('selected')){
        console.log("yeah1")
        $ ('input:checkbox').not(this).prop('checked', this.checked);
        $ ('.all').find("span.fir-icon").addClass('selected');
    }
});
}

$ ('.r9').find('input[type="checkbox"]').change(function (){
    checkBox1();

});
]]></style>
</checkbox>

<suspend/>





++RADIO WITH TEXT SELECTOR
  <radio
   label="Q59x1"
   atm1d:showInput="0"
   uses="atm1d.9">
    <title>For each of the following pairs of statements, select the one that best describes you.  In some cases, neither statement may describe you well or both may describe you somewhat.  In those cases, please select the statement that best describes you or that describes you more often.</title>
    <comment>(Select one answer in each group.)</comment>
    <row label="r1" value="1">I enjoy being around people.</row>
    <row label="r2" value="2">I enjoy being by myself.</row>
    <style name="question.after"><![CDATA[
<script>
$ (document).ready(function(){
$ ("input[type='radio']").change(function(){
	$ ('#btn_continue').click();
})

})
  </script>
     <style>
.row-legend-right {text-align: left !important;}
}
   </style>
]]></style>
  </radio>

  <suspend/>








++GET SELECTED FROM CHOICE
S5x1.attr("r%s" %p.rownumber).val





++SELECT CHANGE TEXT
$ ('select:eq(0) option:first').html("HOUR");






++AUX DATABASE
++AUXILIARY DATABASE

<note>!!!!!!!!!!!!!!!!!!!!!!!!! ADDED AT THE START OF THE SURVEY !!!!!!!!!!!!!!!!!!!!!!!!!</note>
<note>!!!!!!!!!!!!!!!!!!!!!!!!! INTERNAL DATABASE CREATE TO CHECK SUCCESSIVE DAYS TAKEN START !!!!!!!!!!!!!!!!!!!!!!!!!</note>
<note>!!!!!!!!!!!!!!!!!!!!!!!!! INTERNAL DATABASE CREATE TO CHECK SUCCESSIVE DAYS TAKEN START !!!!!!!!!!!!!!!!!!!!!!!!!</note>
<note>!!!!!!!!!!!!!!!!!!!!!!!!! INTERNAL DATABASE CREATE TO CHECK SUCCESSIVE DAYS TAKEN START !!!!!!!!!!!!!!!!!!!!!!!!!</note>
<note>!!!!!!!!!!!!!!!!!!!!!!!!! INTERNAL DATABASE CREATE TO CHECK SUCCESSIVE DAYS TAKEN START !!!!!!!!!!!!!!!!!!!!!!!!!</note>
<note>!!!!!!!!!!!!!!!!!!!!!!!!! INTERNAL DATABASE CREATE TO CHECK SUCCESSIVE DAYS TAKEN START !!!!!!!!!!!!!!!!!!!!!!!!!</note>
<note>!!!!!!!!!!!!!!!!!!!!!!!!! INTERNAL DATABASE CREATE TO CHECK SUCCESSIVE DAYS TAKEN START !!!!!!!!!!!!!!!!!!!!!!!!!</note>
<exec when="init">
db=Database(name="respondent_days") # initialize database
</exec>

<suspend/>

<exec>
p.DayTerm = 0
values = {} # initialize values
values["db_realPID"]=hrealPID.val # respondent pid
values["db_day"]=hDay.selected.value # respondent Day value

if not hDay.r1: # code will only run if NOT first day
  if db.has(source): # check if database exists
    print "DB HAS SOURCE"
    dataValue = db.get(source) # get database address location
    print "dataValue['db_realPID']: ", dataValue['db_realPID']
    print "dataValue['db_day']: ", dataValue['db_day']
    print "int(dataValue['db_day']): ", int(dataValue['db_day'])
    print "int(hDay.selected.value)-1: ", int(hDay.selected.value)-1
    if int(dataValue['db_day']) != (int(hDay.selected.value)-1):
      p.DayTerm = 1 # terminate if hDay is not incremental
      # Example: Respondent took Day 1 survey but skipped Day 2 and answered Day 3; they will term
    else:
      db.add(pid,values,replace=True) # replace the respondent data in the aux db
</exec>

<suspend/>

<term label="SkippedDayTerm" cond="p.DayTerm==1">Day : Skipped a day</term>

<note>!!!!!!!!!!!!!!!!!!!!!!!!! INTERNAL DATABASE CREATE TO CHECK SUCCESSIVE DAYS TAKEN END !!!!!!!!!!!!!!!!!!!!!!!!!</note>
<note>!!!!!!!!!!!!!!!!!!!!!!!!! INTERNAL DATABASE CREATE TO CHECK SUCCESSIVE DAYS TAKEN END !!!!!!!!!!!!!!!!!!!!!!!!!</note>
<note>!!!!!!!!!!!!!!!!!!!!!!!!! INTERNAL DATABASE CREATE TO CHECK SUCCESSIVE DAYS TAKEN END !!!!!!!!!!!!!!!!!!!!!!!!!</note>
<note>!!!!!!!!!!!!!!!!!!!!!!!!! INTERNAL DATABASE CREATE TO CHECK SUCCESSIVE DAYS TAKEN END !!!!!!!!!!!!!!!!!!!!!!!!!</note>
<note>!!!!!!!!!!!!!!!!!!!!!!!!! INTERNAL DATABASE CREATE TO CHECK SUCCESSIVE DAYS TAKEN END !!!!!!!!!!!!!!!!!!!!!!!!!</note>
<note>!!!!!!!!!!!!!!!!!!!!!!!!! INTERNAL DATABASE CREATE TO CHECK SUCCESSIVE DAYS TAKEN END !!!!!!!!!!!!!!!!!!!!!!!!!</note>
<note>!!!!!!!!!!!!!!!!!!!!!!!!! INTERNAL DATABASE CREATE TO CHECK SUCCESSIVE DAYS TAKEN END !!!!!!!!!!!!!!!!!!!!!!!!!</note>



<note>!!!!!!!!!!!!!!!!!!!!!!!!! ADDED AT THE END OF THE SURVEY !!!!!!!!!!!!!!!!!!!!!!!!!</note>
<note>!!!!!!!!!!!!!!!!!!!!!!!!! INTERNAL DATABASE CREATE TO CHECK SUCCESSIVE DAYS TAKEN START !!!!!!!!!!!!!!!!!!!!!!!!!</note>
<note>!!!!!!!!!!!!!!!!!!!!!!!!! INTERNAL DATABASE CREATE TO CHECK SUCCESSIVE DAYS TAKEN START !!!!!!!!!!!!!!!!!!!!!!!!!</note>
<note>!!!!!!!!!!!!!!!!!!!!!!!!! INTERNAL DATABASE CREATE TO CHECK SUCCESSIVE DAYS TAKEN START !!!!!!!!!!!!!!!!!!!!!!!!!</note>
<note>!!!!!!!!!!!!!!!!!!!!!!!!! INTERNAL DATABASE CREATE TO CHECK SUCCESSIVE DAYS TAKEN START !!!!!!!!!!!!!!!!!!!!!!!!!</note>
<note>!!!!!!!!!!!!!!!!!!!!!!!!! INTERNAL DATABASE CREATE TO CHECK SUCCESSIVE DAYS TAKEN START !!!!!!!!!!!!!!!!!!!!!!!!!</note>
<note>!!!!!!!!!!!!!!!!!!!!!!!!! INTERNAL DATABASE CREATE TO CHECK SUCCESSIVE DAYS TAKEN START !!!!!!!!!!!!!!!!!!!!!!!!!</note>
<exec>
values = {} # initialize values
values["db_realPID"]=hrealPID.val # respondent pid
values["db_day"]=hDay.selected.value # respondent Day value

if hDay.r1: # code will only run if first Day
  db.add(pid,values) # create initial databse; and add values
  dataValue = db.get(source)
  print "dataValue['db_realPID']: ", dataValue['db_realPID']
  print "dataValue['db_day']: ", dataValue['db_day']
</exec>

<note>!!!!!!!!!!!!!!!!!!!!!!!!! INTERNAL DATABASE CREATE TO CHECK SUCCESSIVE DAYS TAKEN END !!!!!!!!!!!!!!!!!!!!!!!!!</note>
<note>!!!!!!!!!!!!!!!!!!!!!!!!! INTERNAL DATABASE CREATE TO CHECK SUCCESSIVE DAYS TAKEN END !!!!!!!!!!!!!!!!!!!!!!!!!</note>
<note>!!!!!!!!!!!!!!!!!!!!!!!!! INTERNAL DATABASE CREATE TO CHECK SUCCESSIVE DAYS TAKEN END !!!!!!!!!!!!!!!!!!!!!!!!!</note>
<note>!!!!!!!!!!!!!!!!!!!!!!!!! INTERNAL DATABASE CREATE TO CHECK SUCCESSIVE DAYS TAKEN END !!!!!!!!!!!!!!!!!!!!!!!!!</note>
<note>!!!!!!!!!!!!!!!!!!!!!!!!! INTERNAL DATABASE CREATE TO CHECK SUCCESSIVE DAYS TAKEN END !!!!!!!!!!!!!!!!!!!!!!!!!</note>
<note>!!!!!!!!!!!!!!!!!!!!!!!!! INTERNAL DATABASE CREATE TO CHECK SUCCESSIVE DAYS TAKEN END !!!!!!!!!!!!!!!!!!!!!!!!!</note>
<note>!!!!!!!!!!!!!!!!!!!!!!!!! INTERNAL DATABASE CREATE TO CHECK SUCCESSIVE DAYS TAKEN END !!!!!!!!!!!!!!!!!!!!!!!!!</note>










++AUXILIARY DATABASE ** SIMPLE

https://survey-d.dynata.com/apps/lumos/53b/23041063/temp-view:xmledit

















++SAMPLESOURCES SPECIFIC DISABLE BROWSER DUPES
<samplesources ...... disableBrowserDupes="1">





++QUOTAS; MINIMUM AND MAXIMUM
++SOFT QUOTA MINIMUM AND MAXIMUM
++CLICK BALANCING
#205148=Qualified Gender
S3_r1	2037-2163
S3_r2	2813-2987
S3_r3	0-99999
S3_r4	0-99999

205148 = total (inf needs to be coded as 0-99999; and included in total count)
2037 = minimum (soft quota)
2163 = maximum (hard quota)


WORKING BUT NOT TESTED:
#5149 cells:7=Qualified Race
S4_r1	3386-3596
S4_r2	560-594
S4_r3	566-600
S4_r4	55-59
S4_r5	174-184
S4_r6	44-46
S4_r7	66-70






++MX CAROUSEL

Exclusive Column:
{@exclusive::scales@}

Other Specify Row:
 optional="1" and {@other::true||optional::true@}






++LOOP; USE LOOPVAR: LABEL IN COND
cond=" '[loopvar: label]' == '1' "








++BIRTHDATE DROPDOWN
++BIRTHDAY DROPDOWN

    <block label="Q1x4_DOB">
      <html label="introQ1" where="survey">Date of Birth</html>

      <select
     label="Q1x4Month">
        <title>Month</title>
        <validate>
if Q1x4Month.ch2 and (Q1x4Day.ch29 or Q1x4Day.ch30):
  error(res.Q1Error)
elif (Q1x4Month.ch2 or Q1x4Month.ch4 or Q1x4Month.ch6 or Q1x4Month.ch9 or Q1x4Month.ch11) and (Q1x4Day.ch31):
  error(res.Q1Error)
        </validate>

        <choice label="ch1" value="1">January</choice>
        <choice label="ch2" value="2">February</choice>
        <choice label="ch3" value="3">March</choice>
        <choice label="ch4" value="4">April</choice>
        <choice label="ch5" value="5">May</choice>
        <choice label="ch6" value="6">June</choice>
        <choice label="ch7" value="7">July</choice>
        <choice label="ch8" value="8">August</choice>
        <choice label="ch9" value="9">September</choice>
        <choice label="ch10" value="10">October</choice>
        <choice label="ch11" value="11">November</choice>
        <choice label="ch12" value="12">December</choice>
        <style cond="1" name="question.after"><![CDATA[
<style>
  .question, .input{
    font-family: Arial,sans-serif !important;
  }
  </style>

<script>
$ ('#question_text_Q1x4Month').hide();

$ ('select option[value="-1"]').eq(0).text("Month");
$ ('select option[value="-1"]').eq(1).text("Day");
$ ('select option[value="-1"]').eq(2).text("Year");

$ ('td').css('border','0');
</script>
]]></style>
      </select>

      <select
     label="Q1x4Day"
     rightOf="Q1x4Month">
        <title>Day</title>
        <choice label="ch1" value="1">1</choice>
        <choice label="ch2" value="2">2</choice>
        <choice label="ch3" value="3">3</choice>
        <choice label="ch4" value="4">4</choice>
        <choice label="ch5" value="5">5</choice>
        <choice label="ch6" value="6">6</choice>
        <choice label="ch7" value="7">7</choice>
        <choice label="ch8" value="8">8</choice>
        <choice label="ch9" value="9">9</choice>
        <choice label="ch10" value="10">10</choice>
        <choice label="ch11" value="11">11</choice>
        <choice label="ch12" value="12">12</choice>
        <choice label="ch13" value="13">13</choice>
        <choice label="ch14" value="14">14</choice>
        <choice label="ch15" value="15">15</choice>
        <choice label="ch16" value="16">16</choice>
        <choice label="ch17" value="17">17</choice>
        <choice label="ch18" value="18">18</choice>
        <choice label="ch19" value="19">19</choice>
        <choice label="ch20" value="20">20</choice>
        <choice label="ch21" value="21">21</choice>
        <choice label="ch22" value="22">22</choice>
        <choice label="ch23" value="23">23</choice>
        <choice label="ch24" value="24">24</choice>
        <choice label="ch25" value="25">25</choice>
        <choice label="ch26" value="26">26</choice>
        <choice label="ch27" value="27">27</choice>
        <choice label="ch28" value="28">28</choice>
        <choice label="ch29" value="29">29</choice>
        <choice label="ch30" value="30">30</choice>
        <choice label="ch31" value="31">31</choice>
        <style cond="1" name="question.after"><![CDATA[
<style>
  .question, .input{
    font-family: Arial,sans-serif !important;
  }
  </style>
]]></style>
      </select>

      <select
     label="Q1x4Year"
     rightOf="Q1x4Month">
        <title>Year</title>
        <choice label="ch1920" value="1920">1920</choice>
        <choice label="ch1921" value="1921">1921</choice>
        <choice label="ch1922" value="1922">1922</choice>
        <choice label="ch1923" value="1923">1923</choice>
        <choice label="ch1924" value="1924">1924</choice>
        <choice label="ch1925" value="1925">1925</choice>
        <choice label="ch1926" value="1926">1926</choice>
        <choice label="ch1927" value="1927">1927</choice>
        <choice label="ch1928" value="1928">1928</choice>
        <choice label="ch1929" value="1929">1929</choice>
        <choice label="ch1930" value="1930">1930</choice>
        <choice label="ch1931" value="1931">1931</choice>
        <choice label="ch1932" value="1932">1932</choice>
        <choice label="ch1933" value="1933">1933</choice>
        <choice label="ch1934" value="1934">1934</choice>
        <choice label="ch1935" value="1935">1935</choice>
        <choice label="ch1936" value="1936">1936</choice>
        <choice label="ch1937" value="1937">1937</choice>
        <choice label="ch1938" value="1938">1938</choice>
        <choice label="ch1939" value="1939">1939</choice>
        <choice label="ch1940" value="1940">1940</choice>
        <choice label="ch1941" value="1941">1941</choice>
        <choice label="ch1942" value="1942">1942</choice>
        <choice label="ch1943" value="1943">1943</choice>
        <choice label="ch1944" value="1944">1944</choice>
        <choice label="ch1945" value="1945">1945</choice>
        <choice label="ch1946" value="1946">1946</choice>
        <choice label="ch1947" value="1947">1947</choice>
        <choice label="ch1948" value="1948">1948</choice>
        <choice label="ch1949" value="1949">1949</choice>
        <choice label="ch1950" value="1950">1950</choice>
        <choice label="ch1951" value="1951">1951</choice>
        <choice label="ch1952" value="1952">1952</choice>
        <choice label="ch1953" value="1953">1953</choice>
        <choice label="ch1954" value="1954">1954</choice>
        <choice label="ch1955" value="1955">1955</choice>
        <choice label="ch1956" value="1956">1956</choice>
        <choice label="ch1957" value="1957">1957</choice>
        <choice label="ch1958" value="1958">1958</choice>
        <choice label="ch1959" value="1959">1959</choice>
        <choice label="ch1960" value="1960">1960</choice>
        <choice label="ch1961" value="1961">1961</choice>
        <choice label="ch1962" value="1962">1962</choice>
        <choice label="ch1963" value="1963">1963</choice>
        <choice label="ch1964" value="1964">1964</choice>
        <choice label="ch1965" value="1965">1965</choice>
        <choice label="ch1966" value="1966">1966</choice>
        <choice label="ch1967" value="1967">1967</choice>
        <choice label="ch1968" value="1968">1968</choice>
        <choice label="ch1969" value="1969">1969</choice>
        <choice label="ch1970" value="1970">1970</choice>
        <choice label="ch1971" value="1971">1971</choice>
        <choice label="ch1972" value="1972">1972</choice>
        <choice label="ch1973" value="1973">1973</choice>
        <choice label="ch1974" value="1974">1974</choice>
        <choice label="ch1975" value="1975">1975</choice>
        <choice label="ch1976" value="1976">1976</choice>
        <choice label="ch1977" value="1977">1977</choice>
        <choice label="ch1978" value="1978">1978</choice>
        <choice label="ch1979" value="1979">1979</choice>
        <choice label="ch1980" value="1980">1980</choice>
        <choice label="ch1981" value="1981">1981</choice>
        <choice label="ch1982" value="1982">1982</choice>
        <choice label="ch1983" value="1983">1983</choice>
        <choice label="ch1984" value="1984">1984</choice>
        <choice label="ch1985" value="1985">1985</choice>
        <choice label="ch1986" value="1986">1986</choice>
        <choice label="ch1987" value="1987">1987</choice>
        <choice label="ch1988" value="1988">1988</choice>
        <choice label="ch1989" value="1989">1989</choice>
        <choice label="ch1990" value="1990">1990</choice>
        <choice label="ch1991" value="1991">1991</choice>
        <choice label="ch1992" value="1992">1992</choice>
        <choice label="ch1993" value="1993">1993</choice>
        <choice label="ch1994" value="1994">1994</choice>
        <choice label="ch1995" value="1995">1995</choice>
        <choice label="ch1996" value="1996">1996</choice>
        <choice label="ch1997" value="1997">1997</choice>
        <choice label="ch1998" value="1998">1998</choice>
        <choice label="ch1999" value="1999">1999</choice>
        <choice label="ch2000" value="2000">2000</choice>
        <choice label="ch2001" value="2001">2001</choice>
        <choice label="ch2002" value="2002">2002</choice>
        <choice label="ch2003" value="2003">2003</choice>
        <choice label="ch2004" value="2004">2004</choice>
        <choice label="ch2005" value="2005">2005</choice>
        <choice label="ch2006" value="2006">2006</choice>
        <choice label="ch2007" value="2007">2007</choice>
        <choice label="ch2008" value="2008">2008</choice>
        <choice label="ch2009" value="2009">2009</choice>
        <choice label="ch2010" value="2010">2010</choice>
        <choice label="ch2011" value="2011">2011</choice>
        <choice label="ch2012" value="2012">2012</choice>
        <choice label="ch2013" value="2013">2013</choice>
        <choice label="ch2014" value="2014">2014</choice>
        <choice label="ch2015" value="2015">2015</choice>
        <choice label="ch2016" value="2016">2016</choice>
        <choice label="ch2017" value="2017">2017</choice>
        <choice label="ch2018" value="2018">2018</choice>
        <choice label="ch2019" value="2019">2019</choice>
        <choice label="ch2020" value="2020">2020</choice>
        <choice label="ch2021" value="2021">2021</choice>
        <style cond="1" name="question.after"><![CDATA[
<style>
  .question, .input{
    font-family: Arial,sans-serif !important;
  }
  </style>
]]></style>
      </select>

      <suspend/>
    </block>



<number
  label="dAge"
  size="3"
  optional="1" where="execute,survey,report" translateable="0">
  <title>DUMMY - AGE</title>
<exec>
from datetime import date
current_date = date.today()
curryear = current_date.year
currmonth = current_date.month
currday = current_date.day
print "current month: %s; current year: %s" %(currmonth,curryear)

if currmonth lt 1x4Month.selected.value:
  curryear = curryear-1
print "S2x1.value: ", Q1x4Month.selected.value

age = curryear - Q1x4Year.selected.value
print "final age: ", age

dAge.val = age
</exec>
</number>
<suspend/>











++RANKING MX :: USE THIS
++RANKING MX :: USE THIS
++RANKING MX :: USE THIS
++RANKING MX :: USE THIS
++RANKING MX :: USE THIS
<res label="RankingError">Rank all options to proceed.</res>
    <note>========================================================= COLLAPSIBLE (CLICK RANKING) START ==============================================</note>
    <checkbox
    label="RL_Q24" shuffle="rows"
    atleast="1"
    atmost="9"
    fir="off">
      <title>Which services would you most like to see offered by your residence?</title>
      <comment>(Select all that apply, and if selected - rank from most valuable to less valuable)</comment>
      <validate>
if not RL_Q24.r10:
  if not (RL_Q24.r1 and RL_Q24.r2 and RL_Q24.r3 and RL_Q24.r4 and RL_Q24.r5 and RL_Q24.r6 and RL_Q24.r7 and RL_Q24.r8):
    error(res.RankingError)
      </validate>

      <group label="g1" builder:axis="row" builder:default="1">&amp;nbsp;</group>
      <row label="r1" groups="g1">Wash-dry-fold service (someone else does full laundry process for my clothes)</row>
      <row label="r2" groups="g1">Dry cleaning services</row>
      <row label="r3" groups="g1">Food / grocery delivery</row>
      <row label="r4" groups="g1">Better repair services / maintenance</row>
      <row label="r5" groups="g1">Access to a house cleaning service / marketplace</row>
      <row label="r6" groups="g1">Access to a childcare service / marketplace</row>
      <row label="r7" groups="g1">Package management service / concierge</row>
      <row label="r8" groups="g1">Electric vehicle charging</row>
      <row label="r9" groups="g1" open="1" openOptional="1" openSize="25" randomize="0">Something else (please describe)</row>
      <row label="r10" groups="g1" randomize="0">Nothing - I'm totally satisfied{@globalExclusive::true@}</row>
      <style name="page.head"><![CDATA[
<style>.answers{display:none;}#btn_continue{visibility:hidden;}</style>
]]></style>
      <style name="question.after"><![CDATA[
<div class="mx-stage" id="mx-stage-${this.label}"></div>
<script type="text/javascript" crossorigin="anonymous" src="//${mxDomain}/rnd/rnd-mx-framework/v2.2/loader/application.min.js?cache=${int(random.random() * 1000)}"></script>

<script type="text/javascript">
  if (!mx.qDefs)
    mx.qDefs = {};
  if (!mx.toolLoader)
    mx.toolLoader = new mx.Loader({
                                       "baseFileURL": "//${mxDomain}/rnd/rnd-mx-framework/v2.2/",
                                       "scriptDeps": ["core/libs.min.js"],
                                       "cssDeps": ["core/style.css", "core/libs.css", "ionicons/css/ionicons.min.css", "themes/blue.css"],
                                       "coreFile": "core/application.min.js",
                                       "messages": null,
                                       "platformInterface": { "js": "platform_interface_decipher/application.min.js", "css": "platform_interface_decipher/style.css" }
                                     });
  mx.qDefs["${this.label}"] = ${jsexport()};
  var isTest = "${gv.isUser() and not gv.debug.respview}" === "True";

// =============== DOCUMENTATION ===============> https://confluence.dynata.com/x/utB7AQ
  //SETTINGS AND STUFF GOES HERE
  var toolSettings = {
    "toolJs": "collapsible/2.2/application.min.js",
    "toolName": "Collapsible",
    "jsToLoad": [
                ],
    "cssToLoad": [
                   "collapsible/2.2/style.css"
                 ],
    "baseToolPath": "//${mxDomain}/rnd/rnd-mx-tools/",

    "container": "#mx-stage-${this.label}",
    "qid": "${this.label}",
    "time_qid": "${this.label}_Time",
    "order_qid": "${this.label}_Order",
    "imageBaseURL": "//${mxDomain}/rnd/rnd-mx-tools/collapsible/v0.1/images",
    "minRequired": "8",
    "maxAllowed": "9",
    "showControls": false,
    "numDecimalsTimeData": "2",
    "expandButtonImage": "//${mxDomain}/rnd/rnd-mx-tools/collapsible/v0.1/images/expand_2_4.png",
    "collapseButtonImage": "//${mxDomain}/rnd/rnd-mx-tools/collapsible/v0.1/images/collapse_2_3.png",
    "scrollButtonImage": "//${mxDomain}/rnd/rnd-mx-tools/collapsible/v0.1/images/go_up.png",
    "resetButtonImage": "//${mxDomain}/rnd/rnd-mx-tools/collapsible/v0.1/images/reset.png",
    "resetButtonText": "Reset",
    "zoomButtonImage": "//${mxDomain}/rnd/rnd-mx-tools/collapsible/v0.1/images/mag9.png",
    "headerExpandImage": "//${mxDomain}/rnd/rnd-mx-tools/collapsible/v0.1/images/chevron-down-grey.png",
    "expandOnLoad": false,
    "answerOptionShape": "square",
    "isRanking": true,
    "forceCardMode": true,
    "matchHeightByRow":false,
    "keepOtherAnswers":false,
    "showProgressBar": false,
    "maxAllowedError": "<*mxa*>",
    "saveOtherOnDeselect": false,
    "minOtherCharacter":1,
    "customValidation": function(q){
        console.log("customValidation()");
        return true;
    },
    "answerItemConfig": {
        "width": "100%",
        "numItemsPerRow": { "small": 2, "medium": 3, "large": 3 }
    }
  };

  mx.toolLoader.registerSettings(toolSettings, function(info){
    //console.log("Questions loaded",info);
        info.instance.setToolValidation(toolSettings.customValidation);

        info.bridge.setPageValidation(function(){
            console.log("setPageValidation");
            return true;
        });

        info.instance.on("tool_loaded", function(e){
           //console.log("tool_loaded", e);
           if(isTest){
               ${initMxDataToggle()}
           }
        });

        info.instance.on("tool_resize", function(e){
            //console.log("tool_resize", e);
        });

        info.instance.on("tool_error", function(e){
            //console.log("tool_error", e);
        });

        info.instance.on("group_expanded", function(e){
            //console.log("group_expanded", e);
        });

        info.instance.on("group_collapsed", function(e){
            //console.log("group_collapsed", e);
        });

        info.instance.on("item_statechange", function(e){
            //console.log("item_statechange", e);
        });

        info.instance.on("exclusive_change", function(e){
            //console.log("exclusive_change", e);
        });
  });
  //END USER EDITABLE CODE

  $ (document).ready(function(){
    mx.toolLoader.initLoad();

                /*********fix for IE 9*************/
    $ ('.instruction-text:gt(0)').hide();
    $ ('.question-text:gt(0)').hide();

 //countIt({
 // "tool-id": "mxClickRank",
 // "project-id": '${project_id if project_id else "p1019653"}',
 // "order": '${order_id if order_id else "ORD-12345-ABCD"}'
 //});

 $.getScript('${MxToolUsageUrl('mxcollapsible')}');

  });
</script>
<style>
.mx-container.mx-collapsible-container .mx-collapsible-button-holder{
  height:30px;
}
.mx-container.mx-collapsible-container .mx-collapsible-itemholder.no-group {
  box-shadow: none;
}
.mx-container.mx-collapsible-container .mx-collapsible-itemholder {
  border: none;
}
.mx-container.mx-collapsible-container .mx-card .label{
  font-weight: normal;
  transition: all 0.2s ease-in-out;
}

.mx-container.mx-collapsible-container .mx-card .middle .label{
font-size: 16px;
}
</style>
]]></style>
    </checkbox>
    <float label="RL_Q24_Time" shuffle="rows" shuffleBy="RL_Q24" translateable="0">
      <title>Data node for time data. RL_Q24_Time.</title>
      <comment>Please select one.</comment>
      <group label="g1" builder:axis="row" builder:default="1">&amp;nbsp;</group>
      <row label="r1" groups="g1">Wash-dry-fold service (someone else does full laundry process for my clothes)</row>
      <row label="r2" groups="g1">Dry cleaning services</row>
      <row label="r3" groups="g1">Food / grocery delivery</row>
      <row label="r4" groups="g1">Better repair services / maintenance</row>
      <row label="r5" groups="g1">Access to a house cleaning service / marketplace</row>
      <row label="r6" groups="g1">Access to a childcare service / marketplace</row>
      <row label="r7" groups="g1">Package management service / concierge</row>
      <row label="r8" groups="g1">Electric vehicle charging</row>
      <row label="r9" groups="g1" open="1" openOptional="1" openSize="25" randomize="0">Something else (please describe)</row>
      <row label="r10" groups="g1" randomize="0">Nothing - I'm totally satisfied</row>
      <style name="question.after"><![CDATA[
<script type='text/javascript'>
  if (mx.qDefs)
    mx.qDefs["${this.label}"] = ${jsexport()};
</script>
]]></style>
    </float>
    <number label="RL_Q24_Order" shuffle="rows" shuffleBy="RL_Q24" size="2" translateable="0">
      <title>Data node for time data. RL_Q24_Order.</title>
      <comment>Please select one.</comment>
      <group label="g1" builder:axis="row" builder:default="1">&amp;nbsp;</group>
      <row label="r1" groups="g1">Wash-dry-fold service (someone else does full laundry process for my clothes)</row>
      <row label="r2" groups="g1">Dry cleaning services</row>
      <row label="r3" groups="g1">Food / grocery delivery</row>
      <row label="r4" groups="g1">Better repair services / maintenance</row>
      <row label="r5" groups="g1">Access to a house cleaning service / marketplace</row>
      <row label="r6" groups="g1">Access to a childcare service / marketplace</row>
      <row label="r7" groups="g1">Package management service / concierge</row>
      <row label="r8" groups="g1">Electric vehicle charging</row>
      <row label="r9" groups="g1" open="1" openOptional="1" openSize="25" randomize="0">Something else (please describe)</row>
      <row label="r10" groups="g1" randomize="0">Nothing - I'm totally satisfied</row>
      <style name="question.after"><![CDATA[
<script type='text/javascript'>
  if (mx.qDefs)
    mx.qDefs["${this.label}"] = ${jsexport()};
</script>
]]></style>
    </number>
    <note>========================================================= COLLAPSIBLE (CLICK RANKING) END ==============================================</note>

<suspend/>






++CHOICE CHOICES SELECTED TEXT
QID.choices[QID.r{unsa nga row label}.val].text







++ERROR MESSAGE IN SPECIFIC ROW
error(res.Q38err,row=Q38.r14)







++GRID LOGIC
ask if S5.r2 is c6 to c11:
  (int(S5.r2.val) + 1 ) in range(6,11)









++AGE RECODE

<radio
  label="dAge"
  optional="1"
  translateable="0"
  where="execute,survey,report">
  <title>PN: Please create dummy variable to code the respondents' exact age to the below age range</title>
<exec>
if QAGE.check("18-20"):
	dAge.val=dAge.r1.index
elif QAGE.check("21-27"):
	dAge.val=dAge.r2.index
elif QAGE.check("28-36"):
	dAge.val=dAge.r3.index
elif QAGE.check("37-44"):
	dAge.val=dAge.r4.index
elif QAGE.check("45-52"):
	dAge.val=dAge.r5.index
elif QAGE.check("53-61"):
	dAge.val=dAge.r6.index
elif QAGE.check("62-71"):
	dAge.val=dAge.r7.index
elif QAGE.check("ge 72"):
	dAge.val=dAge.r8.index
</exec>
  <row label="r1" value="1">18-20</row>
  <row label="r2" value="2">21-27</row>
  <row label="r3" value="3">28-36</row>
  <row label="r4" value="4">37-44</row>
  <row label="r5" value="5">45-52</row>
  <row label="r6" value="6">53-61</row>
  <row label="r7" value="7">62-71</row>
  <row label="r8" value="8">72 and older</row>
</radio>

<suspend/>









++STANDARD COUNTRY LIST
++STANDARD COUNTRIES LIST
1	UK
2	USA
3	France
4	Italy
5	Germany
6	Spain
7	Sweden
8	Denmark
9	Norway
10	Greece
11	Hungary
12	Czech Republic
13	Poland
14	Russia
15	South Korea
16	Thailand
17	UK (Welsh)
18	Ireland
19	Australia
20	China
21	Japan
22	Austria
23	India
24	Turkey
25	UAE
26	Argentina
27	Brazil
28	Venezuela
29	Columbia
30	Switzerland
31	Portugal
32	Canada
33	Mexico
34	Malaysia
35	South Africa
36	Tunisia
37	Belgium
38	Netherlands
39	Israel
40	Saudi Arabia
41	Finland
42	New Zealand
43	Singapore
44	Chile
45	Taiwan
46	Hong Kong
47	Indonesia






++GRID WITH OPTIONAL OE *** USE ME ***
++GRID WITH OPTIONAL OE *** USE ME ***
++GRID WITH OPTIONAL OE *** USE ME ***
++GRID WITH OPTIONAL OE *** USE ME ***
++GRID WITH OPTIONAL OE *** USE ME ***
++GRID WITH OPTIONAL OE *** USE ME ***
++GRID WITH OPTIONAL OE *** USE ME ***
++GRID WITH OPTIONAL OE *** USE ME ***
++GRID WITH OPTIONAL OE *** USE ME ***
++GRID WITH OPTIONAL OE *** USE ME ***
<res label="OEerr">Please specify the required extra information.</res>

<radio
  label="M2">
  <title>How often do you use each of the following media channels?</title>
  <comment>Select one in each row</comment>
<validate>
if M2.r9.any and M2.r9.open in ['',None]:
  error(res.OEerr,row=M2.r9)
</validate>
  <col label="c7" value="7">Everyday</col>
  <col label="c6" value="6">Several times a week</col>
  <col label="c5" value="5">Once a week</col>
  <col label="c4" value="4">Several times a month</col>
  <col label="c3" value="3">Once a month</col>
  <col label="c2" value="2">Less than once a month</col>
  <col label="c1" value="1">Never</col>
  <row label="r1">LinkedIn</row>
  <row label="r2">Facebook</row>
  <row label="r3">Twitter</row>
  <row label="r4">Streaming music (such as Spotify, Pandora, etc.)</row>
  <row label="r5">Streaming video (such as Netflix, Amazon Prime, etc.)</row>
  <row label="r6">Cable or broadcast television</row>
  <row label="r7">Online business news sites (such as Bloomberg, Business Insider, etc.)</row>
  <row label="r8">Print or online business newspapers or magazines (such as Wall Street Journal, Forbes, etc.)</row>
  <row label="r9" open="1" openSize="25" randomize="0" optional="1" openOptional="1">Others, please specify</row>
</radio>

<suspend/>







++SESSION STATE
<text
  label="hqStateSession"
  optional="0"
  size="200"
  translateable="0"
  where="execute,survey,report">
  <title>Dummy for state</title>
  <exec>
hqStateSession.val = gv.request.get("state")
  </exec>

</text>

<suspend/>







++PLACEHOLDER VIDEO
++DEMO VIDEO
			{ mp4:   "//d2n88fe5uqdqty.cloudfront.net/ssiCebu/fso/2018/ORD-320535-P2K0/small.mp4" },
			{ webm:  "//d2n88fe5uqdqty.cloudfront.net/ssiCebu/fso/2018/ORD-320535-P2K0/small.webm" },
			{ ogg:   "//d2n88fe5uqdqty.cloudfront.net/ssiCebu/fso/2018/ORD-320535-P2K0/small.ogv" },
			{ flash: "//d2n88fe5uqdqty.cloudfront.net/ssiCebu/fso/2018/ORD-320535-P2K0/small.flv" }












++PIPE UPPER
++PIPE LOWER
++PIPE TITLE
++PIPE CAPITALIZE
[pipe: Test_Pipe upper] TEST_PIPE
[pipe: Test_Pipe lower] test_pipe
[pipe: Test_Pipe title] Test_Pipe
[pipe: Test_Pipe capitalize] Test_pipe











++DASHBOARD
++PUBLIC DASHBOARD
++REPORTING LINK
++PUBLIC REPORTING LINK
Go to:
  Report > More Tools > Dashboards
  Select New Dashboard


SETUP INSTRUCTIONS BELOW:

filter qualified
	REQUIRED
table Age
	REQUIRED
	"Age" is for the TITLE
banner.local
  OPTIONAL
  will be added if you have column filters
segment "dSample.r1" Dynata
segment "dSample.r2" MARU
  REQUIRED if YOU ARE USING banner.local
  used as COLUMN FILTER and display
row "dAge.r1" 18-24
row "dAge.r2" 25-34
row "dAge.r3" 35-44
row "dAge.r4" 45-54
row "dAge.r5" 55-64
row "dAge.r6" 65-75
  REQUIRED
  used as ROW FILTER and display


Example Code:

filter qualified

table Age
banner.local
  segment "dSample.r1" Dynata
  segment "dSample.r2" MARU
    row "dAge.r1" 18-24
    row "dAge.r2" 25-34
    row "dAge.r3" 35-44
    row "dAge.r4" 45-54
    row "dAge.r5" 55-64
    row "dAge.r6" 65-75
    row "1" Total

table Gender
banner.local
  segment "dSample.r1" Dynata
  segment "dSample.r2" MARU
    row "Q3.r1" Woman/Female
    row "Q3.r2" Man/Male
    row "Q3.r3" Other
    row "1" Total

table Municipality
banner.local
  segment "dSample.r1" Dynata
  segment "dSample.r2" MARU
    row "dMunicipality.r1" City of Toronto
    row "dMunicipality.r2" City of Hamilton
    row "dMunicipality.r3" Region of Peel
    row "dMunicipality.r4" Region of York
    row "dMunicipality.r5" Region of Durham
    row "dMunicipality.r6" Region of Halton
    row "dMunicipality.r7" Niagara
    row "dMunicipality.r8" Simcoe
    row "dMunicipality.r9" Waterloo
    row "dMunicipality.r10" Wellington
    row "dMunicipality.r11" Peterborough
    row "dMunicipality.r12" Brant
    row "dMunicipality.r13" Dufferin
    row "dMunicipality.r14" Station Areas (L1N, L1S, M1C, L7R, L6L)
    row "1" Total

table Toronto
banner.local
  segment "dSample.r1" Dynata
  segment "dSample.r2" MARU
    row "dTorontoDist.r1" District 1
    row "dTorontoDist.r2" District 2
    row "dTorontoDist.r3" District 3
    row "dTorontoDist.r4" District 4
    row "1" Total







++FANCYBOX for <html>
++FANCYBOX for <html>
++FANCYBOX for <html>
++FANCYBOX for <html>
++FANCYBOX for <html>
++FANCYBOX for STATIC QUESTION
++FANCYBOX for STATIC QUESTION
++FANCYBOX for STATIC QUESTION
++FANCYBOX for STATIC QUESTION
++FANCYBOX for STATIC QUESTION
#Add below xml style and update question
<style name="respview.client.js" with="Q1">
	<![CDATA[
		<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css"/>
		<script src="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js">
	]]>
</style>

#Add element for images, update styles, add links as many images as needed
<a data-fancybox="gallery" href="[rel test1.png]">
<div style="padding: 8px 8px 0px 8px; border: solid 1px black; margin-bottom: 25px;">
<img src="[rel test1.png]" style="width:100%"/>
</div>
</a>








++ADD TO ALL OE's and OTH MOVING FORWARD
if INCLUDED in Quality test calculation:
  ss:rowClassNames="qsraIsBrandQuestion-1"

if EXCLUDED in Quality test calculation:
  ss:rowClassNames="qsraIsExcluded-1"

CAN BE ADDED IN QUESTION
<textarea
  label="Q7" ss:rowClassNames="qsraIsBrandQuestion-1"
  optional="0">
  <title>Why did those three resonate with you more than others?</title>
  <comment>Please be as specific as possible</comment>
</textarea>
<suspend/>

CAN BE ADDED IN ROW
<textarea
  label="Q7"
  optional="0">
  <title>Why did those three resonate with you more than others?</title>
  <comment>Please be as specific as possible</comment>
  <row label="r1" ss:rowClassNames="qsraIsBrandQuestion-1"/>
  <row label="r2" ss:rowClassNames="qsraIsExcluded-1"/>
</textarea>
<suspend/>







++HAL PORET NOT REQUIRED OE
<radio
  label="Q150">
  <title>For quality assurance, please type the word "Survey" in the blank next to the “Other” box below and then click to continue.</title>
  <row label="r1" value="1">Strongly agree</row>
  <row label="r2" value="2">Agree</row>
  <row label="r3" value="3">Neutral</row>
  <row label="r4" value="4">Disagree</row>
  <row label="r5" value="5">Strongly disagree</row>
  <row label="r6" open="1" openOptional="1" openSize="25" randomize="0" value="6">Other</row>
</radio>

<suspend/>

<term label="Q150term" cond="Q150.r6.open in [None,'']" sst="0">Q150: Did not type in an answer for "Other"</term>











++JAVASCRIPT JQUERY DATA CHECK if RESPONDENT ENTERS THE PAGE, AUTOSUBMIT
source: DIARY CORE - 53b/2202297
<style mode="after" name="respview.client.js" with="iNOTAVAILABLE" wrap="ready"><![CDATA[
///var urlGet = "https://survey-d.dynata.com/survey/selfserve/53b/2202297?st=1&sdate=0472022&utcdate=1644987600&pid=30077702&swaveid=0472022&realPID=12000000030077702&day=2#?"
var urlGet = window.location.href
var parms = urlGet.split("&");
var utcdateUpdate = 0
for(var i=0;i<parms.length;i++)
{
	if(parms[i].includes("utcdate") && (parms[i].split("=")).length > 1)
		utcdateUpdate = parms[i].split("=")[1]
}
var date = new Date((parseInt(utcdateUpdate) + (86400 * ${hDay.selected.index})) * 1000);
var curDate = new Date();
var estTime = date.toLocaleString("en-US", { timeZone: "America/New_York" })
var estTimeCur = new Date(curDate.toLocaleString("en-US", { timeZone: "America/New_York" }))
var preTime = new Date(estTime.split(" ")[0] + " 06:00:00 AM")
if(estTimeCur >= preTime)
	$ ("#btn_continue").click();
setTimeout( function() {
  var $submitButton = $ ("#btn_continue");
  $submitButton.hide();
}, 100);
]]></style>
<html label="iNOTAVAILABLE" cond="p.DiaryDayAvailable==False" sst="0" where="survey">You have completed your diaries for today!<br />
<br />
The next diary is not yet available.<br />
<br />
Please come back on or after ${dPipeDay.val} at 6:00 AM.</html>

<suspend/>

<exec when="returning">
vOtherData.r1.val = gv.request.get("realPID")
vOtherData.r2.val = gv.request.get("url")
vOtherData.r3.val = gv.request.get("utcdate")
vOtherData.r4.val = gv.request.get("day")
</exec>

<textarea
  label="vOtherData"
  where="execute,survey,report">
  <title>Hidden Question to store the data after returning to study</title>
  <row label="r1">realPID</row>
  <row label="r2">url</row>
  <row label="r3">utcdate</row>
  <row label="r4">day</row>
</textarea>

<suspend/>









++UTC TIMESTAMP TO NORMAL TIME
++UNIX TIMESTAMP TO NORMAL TIME
++UNICODE TIMESTAMP TO NORMAL TIME
https://www.epochconverter.com/











++DISABLE SELECTION for ROW / COLUMN
  $ ('.clickableCell').eq(0).css('pointer-events','none');











++SHOW / HIDE DIV IN QTEXT USING TOGGLE
<radio
  label="Q5">
  <title>How well does this <u>name</u> <b>Associated Bank Private Wealth</b> <u>fit</u> with the <u>concept</u> you read about these wealth management services?<br />
  <br />
  <a href="#" id="toggle">Review concept</a>
  <div style="border: 1px solid black; margin: 2em; padding: 1em; display:none;" class="target">
<div style="text-align: center; color: green;"><b>Associated Bank Wealth Management Services:<br />
A Personalized Banking Experience that offers tailored and personal attention when it comes to your banking needs.</b></div><br />
<br />
We believe there’s more to banking than simply helping you with your finances. It’s our responsibility to make sure you‘re served well each and every day. That’s why Wealth Management customers enjoy a higher level of customized service and exclusive benefits in recognition of their relationship with Associated Bank.<br />
<br />
Associated Bank Wealth Management teams are committed to providing comprehensive, goal-based financial services for our clients with $200,000 in household income or investable assets with Associated Bank totaling more than $500,000.  As a Wealth Management client, you’ll have a dedicated Private Banker as well as a local team of wealth specialists to assist you with your finances.  <br />
<br />
Associated Bank Wealth Management clients enjoy services such as:
<ul>
	<li>Exclusive Accounts to assist you with all your banking needs: Checking, savings, and money market accounts tailored for our wealth management clients</li>
	<li>Customized lending services that tailor our lending services to you: Lending solutions build around you and your family's financial needs personalized to you, including traditional and custom mortgage lending</li>
	<li>Additional Wealth Management Services:  Local specialists in Comprehensive Financial Planning, Investment Management, Personal Trust, and Estate Planning</li>
</ul>
</div>
  </title>
  <comment>(Select one response)</comment>
  <col label="c1" value="1">Poor fit</col>
  <col label="c2" value="2"/>
  <col label="c3" value="3"/>
  <col label="c4" value="4"/>
  <col label="c5" value="5"/>
  <col label="c6" value="6"/>
  <col label="c7" value="7">Excellent fit</col>
<style name="question.after"><![CDATA[
	<script>
$ (document).ready(function() {
   $ ("#toggle").click(function(){
      $ (".target").toggle( 'fast');
   });
});
  </script>
]]>
</style>
</radio>

<suspend/>









++BASIC KEYS / BASIC SECURITY
MAKE HIGHKEY EMPTY
  CAN WORK IF:
  ENTRY LINK IS FROM PROJECT 1, REDIRECTED TO PROJECT 2, PROJECT 2 IS THE ONE TO REDIRECT TO NEXUS
    basicKey = 17589
    highKey = ''











++ADA COMPLIANCE
https://confluence.dynata.com/display/RT/ADA+Compliance













++SHOW CONTINUE if 10 CHARACTERS INPUTTED
<block label="LATAM_OETRAP">
  <res label="openLengthError">La respuesta debe tener como mínimo %d carácter/caracteres de longitud.</res>
  <textarea
   label="P13"
   optional="0">
    <title>¿Por qué indicas que <b>sample</b>? (abierta).
       <div class="progress">carta(s): <span class="counter" style="font-size: 1.2rem;">0</span></div>
  </title>
    <validate>
min = 15
txt=(P13.val).decode('utf-8','strict')
trimmed = txt.replace(" ", "")
if len(trimmed) lt min:
    error(res.openLengthError % min)
    </validate>
    <style label="fancy_progress" arg:count_ques="countP13" arg:minCount="15" name="question.after"><![CDATA[
<script>
$ (document).ready(function() {
    $ ('.counter').html($ ('textarea').val().length);
    var texts = $ ('textarea').val()
    let textValue = texts.replace(/\s/g, '');
    if (textValue.length >= $(minCount)) {
        $ ('.counter').css('color', 'green');
        $ ('#btn_continue').show();
    } else {
        $ ('.counter').css('color', 'red');
        $ ('#btn_continue').hide();
    }
    $ ("input[type='text']").val(textValue.length);
    $ ('textarea').on('keyup', function() {
        var texts = $ ('textarea').val()
        let textValue = texts.replace(/\s/g, '');
        $ ('.counter').html(textValue.length);
        if (textValue.length >= $(minCount)) {
            $ ('.counter').css('color', 'green');
            $ ('#btn_continue').show();
        } else {
            $ ('.counter').css('color', 'red');
            $ ('#btn_continue').hide();
        }
        $ ("input[type='text']").val(textValue.length);
    });
    $ ('#question_$(count_ques)').hide();
    $ ('.progress').insertAfter($ ('textarea').parent());
});
  </script>
]]></style>
  </textarea>
  <number
   label="countP13"
   size="3"
   translateable="0">
    <title>Number of characters of P13. (Programming purposes)</title>
    <row label="r1"/>
  </number>
  <suspend/>
</block>














++LONGWOODS ADS :: INTRO AND MASTER BLOCK ************************************* NEW 2022
++LONGWOODS ADS :: INTRO AND MASTER BLOCK ************************************* NEW 2022
++LONGWOODS ADS :: INTRO AND MASTER BLOCK ************************************* NEW 2022
++LONGWOODS ADS :: INTRO AND MASTER BLOCK ************************************* NEW 2022
++LONGWOODS ADS :: INTRO AND MASTER BLOCK ************************************* NEW 2022
++LONGWOODS ADS :: INTRO AND MASTER BLOCK ************************************* NEW 2022
++LONGWOODS ADS :: INTRO AND MASTER BLOCK ************************************* NEW 2022
++LONGWOODS ADS :: INTRO AND MASTER BLOCK ************************************* NEW 2022
++LONGWOODS ADS :: INTRO AND MASTER BLOCK ************************************* NEW 2022
++LONGWOODS ADS :: INTRO AND MASTER BLOCK ************************************* NEW 2022

<html label="iAd_Section" where="survey">
In the following questions, we will ask you to look at some examples of advertising for the state of Arkansas which you may have seen in 2022.
</html>
<suspend/>


<radio
  label="order_flow"
  optional="1"
  shuffle="rows"
  translateable="0"
  where="execute,survey,report">
  <title>Question Order Flow Programming purpose only</title>
  <exec>
q_order = []
ord_flow = order_flow.rows.order
for xrow in ord_flow:
    if order_flow[xrow].displayed:
        q_order.append(xrow.text)
    else:
        pass

question_Order.val = "\n".join(q_order)
  </exec>

  <row label="r1"  cond="1">15</row>
  <row label="r2"  cond="1">16</row>
  <row label="r3"  cond="1">17</row>
</radio>

<suspend/>

<textarea
  label="question_Order"
  optional="0"
  size="40"
  ss:rowClassNames="qsraIsExcluded-1"
  where="execute,survey,report">
  <title>QUESTION ORDER</title>
  <row label="r1"/>
</textarea>

<suspend/>

<exec>
Q15_Q17_block.order = order_flow.rows.order
</exec>



<block label="Q15_Q17_block" randomizeChildren="1">







</block>























++LONGWOODS ROI ADS :: IMAGE :: ********************************** NEW 2022
++LONGWOODS ROI ADS :: IMAGE :: ********************************** NEW 2022
++LONGWOODS ROI ADS :: IMAGE :: ********************************** NEW 2022
++LONGWOODS ROI ADS :: IMAGE :: ********************************** NEW 2022
++LONGWOODS ROI ADS :: IMAGE :: ********************************** NEW 2022
++LONGWOODS ROI ADS :: IMAGE :: ********************************** NEW 2022
<res label="errAnswer">Please answer every question on this page.</res>
<res label="dumSeen">(# of times seen)</res>


      <block label="Q18_block" cond="1" randomize="1">
        <radio
      label="adQ18_flow"
      optional="1"
      shuffle="rows"
      translateable="0"
      where="execute,survey,report">
          <title>Q18 Ad Order Flow Programming purpose only</title>
          <exec>
print "adQ18_flow.rows.order: ", adQ18_flow.rows.order
          </exec>
<row label="r1" value="1">J-	Flipboard Content Compilation 1</row>
<row label="r2" value="2">K-	Flipboard Content Compilation 2</row>
        </radio>

        <suspend/>

        <exec>
adQ18_orderx = []

for xrow in adQ18_flow.rows.order:
  adQ18_orderx.append(xrow.text)

adQ18_order.val = '\n'.join(adQ18_orderx)
        </exec>

        <textarea
      label="adQ18_order"
      size="40"
      where="execute,survey,report">
          <title>AD ORDER - Q18</title>
        </textarea>

        <suspend/>

        <exec>
Q18_loop_expanded.order = adQ18_flow.rows.order
        </exec>

        <loop label="Q18_loop" randomizeChildren="1" vars="adname,imglbl">
          <block label="Q18a_Q18b_block">
            <radio
        label="Q18a_[loopvar:label]">
              <title>The following ads appeared on Flipboard during 2022.
            <br /><br />
  <div style="text-align:center"><a data-fancybox="gallery" href="[rel [loopvar:imglbl].png]"><img src="[rel [loopvar:imglbl].png]" style="max-width: 100%; width: 500px;" /></a></div>
  <br /><br />Do you recall having seen these ads or one(s) similar during 2022?</title>
              <validate>
if Q18a_[loopvar:label].r1:
  if not Q18b_[loopvar:label].val:
    error(res.errAnswer)
              </validate>

              <row label="r1" value="1">Yes</row>
              <row label="r2" value="2">No</row>
              <style label="showhideQ" name="question.after"><![CDATA[
<script>
$ ( document ).ready(function() {
$ (':text').attr('maxlength',2);
$ (':text').bind('keyup paste', function(){
this.value = this.value.replace(/[^0-9]/g, '');
});

if( $ ('input[type=radio]:checked').val()!="0" ){
$ ('div.question:last').hide();
}

$ ('.cell-sub-column').change(function () {
if( $ ('input[type=radio]:checked').val()=="0" ){
    $ ('div.question:last').show();
}else{
$ ('div.question:last').find('.fir-icon').each(function () {
       if ($ (this).hasClass('selected')) {
         $ (this).removeClass('selected');
         $ (this).parent().children('input[type="checkbox"]').prop('checked', false);
         $ (this).parents('td').next().find('input[type="text"]').hide();
       }
   });
$ ('div.question:last').find('input[type="text"]').val('');
$ ('div.question:last').hide();
}
});
});
</script>
]]></style>
            </radio>

            <number
        label="Q18b_[loopvar:label]"
        optional="1"
        size="2"
        ss:postText="${res.dumSeen}"
        verify="range(1,99)">
              <title>How many times do you recall seeing these ads or one(s) similar?</title>
            </number>

            <suspend/>

            <exec>
if Q18a_[loopvar:label].r2: Q18b_[loopvar:label].val = 0
if Q18a_[loopvar:label].r1: setMarker('YES TO Q18')
            </exec>

            <suspend/>
<radio
  label="dQ18b_flag_[loopvar:label]"
  optional="1" where="execute,survey,report" translateable="0">
  <title>FLAG IF Q18B = 21 OR MORE</title>
<exec>
dQ18b_flag_[loopvar:label].val = dQ18b_flag_[loopvar:label].r2.index

if Q18b_[loopvar:label].ival ge 21:
  dQ18b_flag_[loopvar:label].val = dQ18b_flag_[loopvar:label].r1.index
</exec>
  <row label="r1" value="1">Flagged</row>
  <row label="r2" value="2">not Flagged</row>
</radio>

<number
  label="dQ18b_recode_[loopvar:label]"
  size="3"
  optional="1" where="execute,survey,report" translateable="0">
  <title>RECODED VALUE FOR Q18b</title>
<exec>
if Q18b_[loopvar:label].ival ge 21:
  dQ18b_recode_[loopvar:label].val = 20
else:
  dQ18b_recode_[loopvar:label].val = Q18b_[loopvar:label].val
</exec>
</number>
<suspend/>



          </block>

          <looprow label="1" cond="1">
            <loopvar name="adname">J-	Flipboard Content Compilation 1</loopvar>
            <loopvar name="imglbl">J_-_Flipboard_Content_Compilation_1</loopvar>
          </looprow>

          <looprow label="2" cond="1">
            <loopvar name="adname">K-	Flipboard Content Compilation 2</loopvar>
            <loopvar name="imglbl">K_-_Flipboard_Content_Compilation_2</loopvar>
          </looprow>
        </loop>
      </block>







++LONGWOODS ROI ADS :: IMAGE STYLE : CLICK AND ZOOM : FANCYBOX :: ********************************** NEW 2022
++LONGWOODS ROI ADS :: IMAGE STYLE : CLICK AND ZOOM : FANCYBOX :: ********************************** NEW 2022
++LONGWOODS ROI ADS :: IMAGE STYLE : CLICK AND ZOOM : FANCYBOX :: ********************************** NEW 2022
++LONGWOODS ROI ADS :: IMAGE STYLE : CLICK AND ZOOM : FANCYBOX :: ********************************** NEW 2022
++LONGWOODS ROI ADS :: IMAGE STYLE : CLICK AND ZOOM : FANCYBOX :: ********************************** NEW 2022
++LONGWOODS ROI ADS :: IMAGE STYLE : CLICK AND ZOOM : FANCYBOX :: ********************************** NEW 2022
<note>------------------- click and zoom --------------------------------------</note>
<style name="survey.header" with="Q18a_1,Q18a_2"><![CDATA[
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css" />
<script src="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js"></script>
]]></style>








++LONGWOODS ROI ADS :: VIDEO :: ********************************** NEW 2022
++LONGWOODS ROI ADS :: VIDEO :: ********************************** NEW 2022
++LONGWOODS ROI ADS :: VIDEO :: ********************************** NEW 2022
++LONGWOODS ROI ADS :: VIDEO :: ********************************** NEW 2022
++LONGWOODS ROI ADS :: VIDEO :: ********************************** NEW 2022
++LONGWOODS ROI ADS :: VIDEO :: ********************************** NEW 2022
<res label="errAnswer">Please answer every question on this page.</res>
<res label="dumSeen">(# of times seen)</res>


      <block label="Q14_block" cond="1" randomize="1">
        <radio
      label="adQ14_flow"
      optional="1"
      shuffle="rows"
      translateable="0"
      where="execute,survey,report">
          <title>Q14 Ad Order Flow Programming purpose only</title>
          <exec>
print "adQ14_flow.rows.order: ", adQ14_flow.rows.order
          </exec>

          <row label="r1" value="1">E-	NBC Pre-Roll Video</row>
          <row label="r2" value="2">F-	Being Well Video</row>
        </radio>

        <suspend/>

        <exec>
adQ14_orderx = []

for xrow in adQ14_flow.rows.order:
  adQ14_orderx.append(xrow.text)

adQ14_order.val = '\n'.join(adQ14_orderx)
        </exec>

        <textarea
      label="adQ14_order"
      size="40"
      where="execute,survey,report">
          <title>AD ORDER - Q14</title>
        </textarea>

        <suspend/>

        <exec>
Q14_loop_expanded.order = adQ14_flow.rows.order
        </exec>

        <loop label="Q14_loop" randomizeChildren="1" vars="adname,vidlbl">
          <block label="Q14a_Q14b_block">
            <text
        label="Q14avideo_[loopvar:label]"
        optional="0"
        size="25"
        sst="0"
        uses="videoplayer.1"
        videoplayer:autostart="1"
        videoplayer:video_id="[loopvar:vidlbl]">
              <title>The following video aired on various websites during 2022.</title>
            </text>

            <radio
        label="Q14a_[loopvar:label]">
              <title>Do you recall having seen this video during 2022?</title>
              <validate>
if Q14a_[loopvar:label].r1:
  if not Q14b_[loopvar:label].val:
    error(res.errAnswer)
              </validate>

              <row label="r1" value="1">Yes</row>
              <row label="r2" value="2">No</row>
              <style label="showhideQ" name="question.after"><![CDATA[
<script>
$ ( document ).ready(function() {
$ (':text').attr('maxlength',2);
$ (':text').bind('keyup paste', function(){
this.value = this.value.replace(/[^0-9]/g, '');
});

if( $ ('input[type=radio]:checked').val()!="0" ){
$ ('div.question:last').hide();
}

$ ('.cell-sub-column').change(function () {
if( $ ('input[type=radio]:checked').val()=="0" ){
    $ ('div.question:last').show();
}else{
$ ('div.question:last').find('.fir-icon').each(function () {
       if ($ (this).hasClass('selected')) {
         $ (this).removeClass('selected');
         $ (this).parent().children('input[type="checkbox"]').prop('checked', false);
         $ (this).parents('td').next().find('input[type="text"]').hide();
       }
   });
$ ('div.question:last').find('input[type="text"]').val('');
$ ('div.question:last').hide();
}
});
});
</script>
]]></style>
            </radio>

            <number
        label="Q14b_[loopvar:label]"
        optional="1"
        size="2"
        ss:postText="${res.dumSeen}"
        verify="range(1,99)">
              <title>How many times do you recall seeing this commercial?</title>
            </number>

            <suspend/>

            <exec>
if Q14a_[loopvar:label].r2: Q14b_[loopvar:label].val = 0
if Q14a_[loopvar:label].r1: setMarker('YES TO Q14')
            </exec>

            <suspend/>


<radio
  label="dQ14b_flag_[loopvar:label]"
  optional="1" where="execute,survey,report" translateable="0">
  <title>FLAG IF Q14B = 21 OR MORE</title>
<exec>
dQ14b_flag_[loopvar:label].val = dQ14b_flag_[loopvar:label].r2.index

if Q14b_[loopvar:label].ival ge 21:
  dQ14b_flag_[loopvar:label].val = dQ14b_flag_[loopvar:label].r1.index
</exec>
  <row label="r1" value="1">Flagged</row>
  <row label="r2" value="2">not Flagged</row>
</radio>

<number
  label="dQ14b_recode_[loopvar:label]"
  size="3"
  optional="1" where="execute,survey,report" translateable="0">
  <title>RECODED VALUE FOR Q14b</title>
<exec>
if Q14b_[loopvar:label].ival ge 21:
  dQ14b_recode_[loopvar:label].val = 20
else:
  dQ14b_recode_[loopvar:label].val = Q14b_[loopvar:label].val
</exec>
</number>
<suspend/>

          </block>

          <looprow label="1" cond="1">
            <loopvar name="adname">E-	NBC Pre-Roll Video</loopvar>
            <loopvar name="vidlbl">6309398708112</loopvar>
          </looprow>

          <looprow label="2" cond="1">
            <loopvar name="adname">F-	Being Well Video</loopvar>
            <loopvar name="vidlbl">6309399108112</loopvar>
          </looprow>
        </loop>
      </block>





++LONGWOODS ROI ADS :: VIDEO : SHOW NEXT BUTTON 8 SECONDS :: ********************************** NEW 2022
++LONGWOODS ROI ADS :: VIDEO : SHOW NEXT BUTTON 8 SECONDS :: ********************************** NEW 2022
++LONGWOODS ROI ADS :: VIDEO : SHOW NEXT BUTTON 8 SECONDS :: ********************************** NEW 2022
++LONGWOODS ROI ADS :: VIDEO : SHOW NEXT BUTTON 8 SECONDS :: ********************************** NEW 2022
++LONGWOODS ROI ADS :: VIDEO : SHOW NEXT BUTTON 8 SECONDS :: ********************************** NEW 2022
++LONGWOODS ROI ADS :: VIDEO : SHOW NEXT BUTTON 8 SECONDS :: ********************************** NEW 2022
<note>---------------------------HIDE BUTTON SHOW video AFTER 8 seconds---------------------------------</note>
<style name="respview.client.js" with="Q14a_1,Q14a_2" wrap="ready"><![CDATA[
var continueButton = $ ("#btn_continue")
if ($ ('video').length > 0) {
  $ (continueButton).hide();
  $ ('video').on('timeupdate', function (e) {
      console.log(this.currentTime);

     if ($ ('div.question').hasClass('hasError')) {
         $ (continueButton).show().removeAttr('disabled');
     }

     if ((this.currentTime) >= 8) {
         console.log('show')
         $ (continueButton).show().removeAttr('disabled');
     }

  });
  }

//if ($ ('video').length > 0) {
  $ (continueButton).hide();
    console.log('initial');

$ ('.question').bind( "click touchstart", function(){
    console.log('click');
 setTimeout(function(){
    if ($ ('div.video-js').hasClass('vjs-has-started')) {
        console.log('playing');
          setTimeout(function(){ $ (continueButton).show().removeAttr('disabled'); }, 8000);
   }
 }, 1000);
});

  $ ('video').on('timeupdate', function (e) {
     if ($ ('div.question').hasClass('hasError')) {
         $ (continueButton).show().removeAttr('disabled');
     }

  });
 // }
]]></style>
<note>--------------------------- HIDE BUTTON SHOW video AFTER 8 seconds END ---------------------------------</note>








++LONGWOODS ROI ADS :: VIDEO : SHOW NEXT BUTTON 15 SECONDS :: ********************************** NEW 2022
++LONGWOODS ROI ADS :: VIDEO : SHOW NEXT BUTTON 15 SECONDS :: ********************************** NEW 2022
++LONGWOODS ROI ADS :: VIDEO : SHOW NEXT BUTTON 15 SECONDS :: ********************************** NEW 2022
++LONGWOODS ROI ADS :: VIDEO : SHOW NEXT BUTTON 15 SECONDS :: ********************************** NEW 2022
++LONGWOODS ROI ADS :: VIDEO : SHOW NEXT BUTTON 15 SECONDS :: ********************************** NEW 2022
++LONGWOODS ROI ADS :: VIDEO : SHOW NEXT BUTTON 15 SECONDS :: ********************************** NEW 2022
<note>---------------------------HIDE BUTTON SHOW video AFTER 15 seconds---------------------------------</note>
<style name="respview.client.js" with="Q19a_1" wrap="ready"><![CDATA[
var continueButton = $ ("#btn_continue")
if ($ ('video').length > 0) {
  $ (continueButton).hide();
  $ ('video').on('timeupdate', function (e) {
      console.log(this.currentTime);

     if ($ ('div.question').hasClass('hasError')) {
         $ (continueButton).show().removeAttr('disabled');
     }

     if ((this.currentTime) >= 15) {
         console.log('show')
         $ (continueButton).show().removeAttr('disabled');
     }

  });
  }

//if ($ ('video').length > 0) {
  $ (continueButton).hide();
    console.log('initial');

$ ('.question').bind( "click touchstart", function(){
    console.log('click');
 setTimeout(function(){
    if ($ ('div.video-js').hasClass('vjs-has-started')) {
        console.log('playing');
          setTimeout(function(){ $ (continueButton).show().removeAttr('disabled'); }, 15000);
   }
 }, 1000);
});

  $ ('video').on('timeupdate', function (e) {
     if ($ ('div.question').hasClass('hasError')) {
         $ (continueButton).show().removeAttr('disabled');
     }

  });
 // }
]]></style>
<suspend/>

<note>--------------------------- HIDE BUTTON SHOW video AFTER 15 seconds END ---------------------------------</note>






++LONGWOODS ROI ADS :: AUDIO : SHOW NEXT BUTTON 15 SECONDS :: ********************************** NEW 2022
++LONGWOODS ROI ADS :: AUDIO : SHOW NEXT BUTTON 15 SECONDS :: ********************************** NEW 2022
++LONGWOODS ROI ADS :: AUDIO : SHOW NEXT BUTTON 15 SECONDS :: ********************************** NEW 2022
++LONGWOODS ROI ADS :: AUDIO : SHOW NEXT BUTTON 15 SECONDS :: ********************************** NEW 2022
++LONGWOODS ROI ADS :: AUDIO : SHOW NEXT BUTTON 15 SECONDS :: ********************************** NEW 2022
++LONGWOODS ROI ADS :: AUDIO : SHOW NEXT BUTTON 15 SECONDS :: ********************************** NEW 2022
<note>---------------------------HIDE BUTTON SHOW delay audio AFTER 15 seconds---------------------------------</note>
<style name="respview.client.js" with="Q20a_1" wrap="ready"><![CDATA[
var continueButton = $ ("#btn_continue")
if ($ ('audio').length > 0) {
  $ (continueButton).hide();

  $ ('audio').on('timeupdate', function (e) {
      console.log(this.currentTime);

     if ($ ('div.question').hasClass('hasError')) {
         $ (continueButton).show().removeAttr('disabled');
     }

     if ((this.currentTime) >= 15) { // update time here
         console.log('show')
         $ (continueButton).show().removeAttr('disabled');
     }

  });
  }
]]></style>
<note>---------------------------HIDE BUTTON SHOW delay audio AFTER 15 seconds : END---------------------------------</note>












++DECIPHER HELP AND PRIVACY POLICY
<res label="privacy">Privacy Policy </res>
<res label="helpTxt">Help </res>
<style name="survey.respview.footer.support" cond="condition">
<![CDATA[
    <a href="link" target="_blank">${res.privacy}</a> - <a
 href="/support" target="_blank">${res.helpTxt}</a>]]>
</style>

















++GRID HIDE SPECIFIC CHOICES
++GRID HIDE ELEMENTS

++NORMAL GRID
https://forstasurveys.zendesk.com/hc/en-us/articles/4409461375771-XML-Style-System-Examples

<style name='question.element' label="hideElements">
 <![CDATA[
\@if ec.simpleList
<div class="element $(rowStyle) $(levels) $(extraClasses)
${col.group.styles.ss.groupClassNames
if col.group
else
 (row.group.styles.ss.groupClassNames if row.group else "")}
 $(col.styles.ss.colClassNames) $(row.styles.ss.rowClassNames)
${"clickableCell" if isClickable else ""}"$(extra)>
    ${v2_insertStyle('el.label.start')}
${v2_insertStyle('el.label.end')}
</div>
\@else
<$(tag) $(headers) class="cell nonempty element $(levels)
${"desktop" if this.grouping.cols else "mobile"} border-collapse $(extraClasses)
${col.group.styles.ss.groupClassNames
if col.group
else
 (row.group.styles.ss.groupClassNames if row.group else "")}
$(col.styles.ss.colClassNames) $(row.styles.ss.rowClassNames)
 ${"clickableCell" if isClickable else ""}"$(extra)>
   ${v2_insertStyle('el.label.start')}
    ${v2_insertStyle('el.label.end')}
</$(tag)>
\@endif
]]></style>


<style copy="hideElements" cols="c2" rows="r7,r8" name="question.element"/>


++for MX CAROUSEL
{@hiddenForItems::r1,r2@}
{@disbledForItems::r1,r2@}






++REAL-TIME FEEDBACK
++OE WITH FEEDBACK (NOT THERE YET, GETTING CLOSE, GREAT!)
<res label="less">Please provide a bit more detail</res>
<res label="enough">This is very good information</res>
<res label="more">Oh wow! This is great!</res>

<textarea label="Q1" size="40" arg:less_length="10" arg:enough_length="20">
   <title>Please provide your input</title>
   <style name="question.after" wrap="ready">
      <![CDATA[
      $ ('.answers div.element').prepend("<div id='top-err' style='margin-bottom: 10px; font-weight: bold;'></div>");
      $ ('.answers div.element').append("<div id='bot-err' style='height: 6px; width: 0%; transition: width 2s;'></div>");
      $ ('.answers textarea').css('width','100%');
      $ ('.answers textarea').on('change keydown keyup', function() {
      var val = $ (this).val();
      if (val.length < $(less_length)) {
         $ ('#top-err').text("${res.less}").css('color', 'red');
         $ ('#bot-err').css({'backgroundColor':'red', 'width':'33%'});
      } else if (val.length < $(enough_length)) {
         $ ('#top-err').text("${res.enough}").css('color', 'orange');
         $ ('#bot-err').css({'backgroundColor':'orange', 'width':'66%'});
     } else {
        $ ('#top-err').text("${res.more}").css('color', 'green');
        $ ('#bot-err').css({'backgroundColor':'green', 'width':'100%'});
     }
     });
     ]]>
   </style>
</textarea>








++MX CAROUSEL RADIO :: USE THIS
++MX CAROUSEL RADIO :: USE THIS
++MX CAROUSEL RADIO :: USE THIS
++MX CAROUSEL RADIO :: USE THIS
++MX CAROUSEL RADIO :: USE THIS
++MX CAROUSEL RADIO :: USE THIS
++MX CAROUSEL RADIO :: USE THIS
++MX CAROUSEL RADIO :: USE THIS
++MX CAROUSEL RADIO :: USE THIS
++MX CAROUSEL RADIO :: USE THIS

      <style name="page.head"><![CDATA[
<style>.answers{display:none;}#btn_continue {visibility: hidden;}</style>
]]></style>
      <style name="question.after"><![CDATA[
<div class="mx-stage" id ="mx-stage-${this.label}" style="margin: 0 auto;"></div>
<link rel="stylesheet" href="//code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css" />
<script type="text/javascript" src="//${mxDomain}/rnd/rnd-mx-framework/v2.3/loader/application.min.js?cache=${int(random.random() * 1000)}"></script> <style> .mx-stage {
    padding-bottom: 60px;
}

.mx-carouselapp-scaleholder-inner {
    text-align: center;
}

</style>
<script type="text/javascript">
// =============== DOCUMENTATION ===============> https://confluence.dynata.com/x/rSSbAQ
  var platforms= {
    decipher: "decipher", confirmit: "confirmit"
  }

var currentPlatform=platforms.decipher;
if (!mx.qDefs) mx.qDefs= {}

if (!mx.toolLoader) {
    mx.toolLoader=new mx.Loader( {
        baseFileURL: "//${mxDomain}/rnd/rnd-mx-framework/v2.3/",
        scriptDeps: [ "core/libs.min.js", "core/advanced_ui/Carousel_libs.js", "core/advanced_ui/Carousel.js"],
        cssDeps: [ "//code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css", "core/style.css", "core/libs.css", "core/advanced_ui/Carousel.css", "themes/blue.css", "core/advanced_ui/Carousel_libs.css"],
        coreFile: "core/application.min.js", messages: null, // "//speeders.dynata.com/mx/messages/getMsg.php?callback=window.saveMessages&lang=9",
        platformInterface: {
            js: "platform_interface_" + currentPlatform + "/application.min.js", css: "platform_interface_" + currentPlatform + "/style.css"
        }
    });
    mx.qDefs["${this.label}"]=${jsexport()}
    var isTest = "${gv.isUser() and not gv.debug.respview}" === "True";

    var toolSettings= {
        //standard tool params
        toolJs: "//${mxDomain}/rnd/rnd-mx-tools/carousel/1.8.0/application.min.js",
        toolName: "CarouselApp",
        orientation: "horizontal",
        itemWidth: "130px",
        itemHeight: "100px",
        itemMargin: 35,
        scaleWidth: "120px",
        scaleHeight: "60px",
        jsToLoad: [],
        cssToLoad: ["//${mxDomain}/rnd/rnd-mx-tools/carousel/1.8.0/style.css"],
        baseToolPath: "",
        container: "#mx-stage-${this.label}",
        toolCssNames: ["carouselapp-1"],
        qid: getFormName(1),
        // time_qid: getFormName(2),
        // order_qid: getFormName(3),
        // scale_other_qid: getFormName(n),
        timeInterval: 100,
         minRequired: 1,
         maxAllowed: 1,
         //end standard tool params
         answerItemShape: "triangle",
         answerScaleShape: "triangle",
         showItemTick: true,
         showScaleTick: false,
         componentOrder: "items,scales",
         zoomPosition: "BOTTOM_RIGHT",
         zoomIcon: "//${mxDomain}/rnd/tools/images/zoom_icon2.png",
         imageBaseURL: "empty",
         scaleNewLine: true,
        autoNextItem: true,
         autoNext: false,
         navigation: "answered",
         showCounter: false,
         counterPreText: "",
         counterSepText: "/",
         counterPostText: "",
         lazyLoadLargeImg: false,
         showIndicator: true,
         lazyLoadLargeImg: false,
         countAnswered: false,
        showZoom: true,
        animationSpeed: 500
  }
    //END USER EDITABLE CODE
    mx.toolLoader.registerSettings(toolSettings, function(info) {
        info.bridge.setPageValidation(function () {
                // console.log("setPageValidation");
                return true;
              });
        info.instance.on("tool_loaded", function(e){
           //console.log("tool_loaded", e);
           if(isTest){
               ${initMxDataToggle()}
           }
        });
    });
}

$ (document).ready(function () {
    mx.toolLoader.initLoad();

    $.getScript('${MxToolUsageUrl('mxcarousel')}');
});

</script>
]]></style>





++MX CAROUSEL CHECKBOX :: USE THIS
++MX CAROUSEL CHECKBOX :: USE THIS
++MX CAROUSEL CHECKBOX :: USE THIS
++MX CAROUSEL CHECKBOX :: USE THIS
++MX CAROUSEL CHECKBOX :: USE THIS
++MX CAROUSEL CHECKBOX :: USE THIS
++MX CAROUSEL CHECKBOX :: USE THIS
++MX CAROUSEL CHECKBOX :: USE THIS
++MX CAROUSEL CHECKBOX :: USE THIS
++MX CAROUSEL CHECKBOX :: USE THIS

ADD for OPEN END: optional="1" and {@other::true||optional::true@}
ADD for EXCLUSIVE: {@exclusive::scales@}



      <style name="page.head"><![CDATA[
<style>.answers{display:none;}#btn_continue {visibility: hidden;}</style>
]]></style>
      <style name="question.after"><![CDATA[
<div class="mx-stage" id ="mx-stage-${this.label}" style="margin: 0 auto;"></div> <link rel="stylesheet" href="//code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css" /> <script type="text/javascript" src="//${mxDomain}/rnd/rnd-mx-framework/v2.3/loader/application.min.js?cache=${int(random.random() * 1000)}"></script> <style> .mx-stage {
        padding-bottom: 60px;
    }

    .mx-carouselapp-scaleholder-inner {
        text-align: center;
    }

    </style>
    <script type="text/javascript">
// =============== DOCUMENTATION ===============> https://confluence.dynata.com/x/rSSbAQ
      var platforms= {
        decipher: "decipher", confirmit: "confirmit"
      }

    var currentPlatform=platforms.decipher;
    if (!mx.qDefs) mx.qDefs= {}

    if (!mx.toolLoader) {
        mx.toolLoader=new mx.Loader( {
            baseFileURL: "//${mxDomain}/rnd/rnd-mx-framework/v2.3/", scriptDeps: [ "core/libs.min.js", "core/advanced_ui/Carousel_libs.js", "core/advanced_ui/Carousel.js"], cssDeps: [ "//code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css", "core/style.css", "core/libs.css", "core/advanced_ui/Carousel.css", "themes/blue.css", "core/advanced_ui/Carousel_libs.css"], coreFile: "core/application.min.js", messages: null, // "//speeders.dynata.com/mx/messages/getMsg.php?callback=window.saveMessages&lang=9",
            platformInterface: {
                js: "platform_interface_" + currentPlatform + "/application.min.js", css: "platform_interface_" + currentPlatform + "/style.css"
            }
        });
        mx.qDefs["${this.label}"]=${jsexport()}
        var isTest = "${gv.isUser() and not gv.debug.respview}" === "True";

        var toolSettings= {
            //standard tool params
            toolJs: "//${mxDomain}/rnd/rnd-mx-tools/carousel/1.8.0/application.min.js",
            toolName: "CarouselApp",
            orientation: "horizontal",
            itemWidth: "130px",
            itemHeight: "100px",
            itemMargin: 35,
            scaleWidth: "120px",
            scaleHeight: "60px",
            jsToLoad: [],
            cssToLoad: ["//${mxDomain}/rnd/rnd-mx-tools/carousel/1.8.0/style.css"],
            baseToolPath: "",
            container: "#mx-stage-${this.label}",
            toolCssNames: ["carouselapp-1"],
            qid: getFormName(1),
            // time_qid: getFormName(2),
            // order_qid: getFormName(3),
            // scale_other_qid: getFormName(n),
            timeInterval: 100,
             minRequired: 1,
             maxAllowed: 99,
             //end standard tool params
             answerItemShape: "triangle",
             answerScaleShape: "triangle",
             showItemTick: true,
             showScaleTick: false,
             componentOrder: "items,scales",
             zoomPosition: "BOTTOM_RIGHT",
             zoomIcon: "https://${mxDomain}/rnd/rnd-mx-tools/collapsible/images/mag9.png",
             imageBaseURL: "empty",
             scaleNewLine: true,
            autoNextItem: false,
             autoNext: false,
             navigation: "answered",
             showCounter: false,
             counterPreText: "",
             counterSepText: "/",
             counterPostText: "",
             lazyLoadLargeImg: false,
             showIndicator: true,
             lazyLoadLargeImg: false,
             countAnswered: false,
            showZoom: true,
            animationSpeed: 500
        }
        //END USER EDITABLE CODE
        mx.toolLoader.registerSettings(toolSettings, function(info) {
            info.bridge.setPageValidation(function () {
                    // console.log("setPageValidation");
                    return true;
                  });
            info.instance.on("tool_loaded", function(e){
               //console.log("tool_loaded", e);
               if(isTest){
                   ${initMxDataToggle()}
               }
            });
        });
    }

    $ (document).ready(function () {
        mx.toolLoader.initLoad();

        $.getScript('${MxToolUsageUrl('mxcarousel')}');
    });

    </script>
]]></style>











++LONGWOODS SPECIAL CAROUSEL :: ********************************** NEW 2022
++LONGWOODS SPECIAL CAROUSEL :: ********************************** NEW 2022
++LONGWOODS SPECIAL CAROUSEL :: ********************************** NEW 2022
++LONGWOODS SPECIAL CAROUSEL :: ********************************** NEW 2022
++LONGWOODS SPECIAL CAROUSEL :: ********************************** NEW 2022
++LONGWOODS SPECIAL CAROUSEL :: ********************************** NEW 2022

UPDATE QUESTION: Q4

UPDATE QUOTA:
  ADD SHEET QuotaQ4
#cells:3 = Q4 destination least fill
dumQ4_r1	inf:999
dumQ4_r2	inf
dumQ4_r3	inf
dumQ4_r4	inf
dumQ4_r5	inf
dumQ4_r6	inf

WITH DEFINITION
dumQ4_r1	dumQ4.r1	Sonoma County, CA
dumQ4_r2	dumQ4.r2	Napa County, CA
dumQ4_r3	dumQ4.r3	Monterey Peninsula, CA
dumQ4_r4	dumQ4.r4	Paso Robles – San Luis Obispo, CA
dumQ4_r5	dumQ4.r5	Willamette Valley, OR
dumQ4_r6	dumQ4.r6	Lake Tahoe, CA/NV








<note>----------------------------------------------- Q4 Styling Start ---------------------------------------------------------------------</note>
<style name="question.after" with="qCarousel1"><![CDATA[
<style type="text/css">
.question{
    margin-bottom:0;
}
</style>
]]></style>
<note>----------------------------------------------- Q4 Styling End ---------------------------------------------------------------------</note>
<note>-------------------------------------------------------Q4 Mobile Style Start ---------------------------------------------------------------------</note>
<style cond="device.isMobileDevice()" name="question.after" with="qCarousel1"><![CDATA[
<style>
.label_qCategories1 .sq-atm1d-tiled .sq-atm1d-buttons {
    width: 70%!important;
    text-align:center;
}
.sq-atm1d .sq-atm1d-buttons{
  text-align:center;
}

#question_qButtons1 .sq-atm1d-buttons {
    display: inline-block;
    text-align:center;
    width: 90%;
}

.sq-atm1d-vertical .sq-atm1d-td, .sq-atm1d-vertical .oe {
    text-align: center;
}

.sq-atm1d-block {
  text-align:center;
}

</style>
]]></style>
<note>----------------------- long carousel Q4 start-----------------------------------------------</note>
<block label="dumDestinations_block" cond="0">
  <note>dumDestinations1 and dumDestinations2 should have the same number of items and same text</note>
  <radio
   label="dumDestinations1"
   where="execute,survey,notdp">
    <title>LIST OF DESTINATION for rows (FOR PROGRAMMING PURPOSES ONLY)</title>
    <row label="r1" alt="Sonoma County, CA">Sonoma County, CA</row>
    <row label="r2" alt="Napa County, CA">Napa County, CA</row>
    <row label="r3" alt="Monterey Peninsula, CA">Monterey Peninsula, CA</row>
    <row label="r4" alt="Paso Robles – San Luis Obispo, CA">Paso Robles – San Luis Obispo, CA</row>
    <row label="r5" alt="Willamette Valley, OR">Willamette Valley, OR</row>
    <row label="r6" alt="Lake Tahoe, CA/NV">Lake Tahoe, CA/NV</row>
  </radio>

  <radio
   label="dumDestinations2"
   where="execute,survey,notdp">
    <title>LIST OF DESTINATION for columns (FOR PROGRAMMING PURPOSES ONLY)</title>
    <col label="c1">Sonoma County, CA</col>
    <col label="c2">Napa County, CA</col>
    <col label="c3">Monterey Peninsula, CA</col>
    <col label="c4">Paso Robles – San Luis Obispo, CA</col>
    <col label="c5">Willamette Valley, OR</col>
    <col label="c6">Lake Tahoe, CA/NV</col>
  </radio>
</block>

<note>*******************************Q4 Custom Grid Start************************************</note>
<block label="grid_Comparison" cond="1">
  <checkbox
   label="dumQ4"
   onLoad="copy('dumDestinations1', rows=True)"
   optional="1"
   translateable="0"
   where="execute,survey,report">
    <title>QUALIFIED DESTINATIONS for least fill</title>
    <exec>
for eachRow in dumQ4.rows:
  eachRow.val = None

#Sonoma
dumQ4.r1.val = 1

#Napa County
if hcountycode.ival != 2:
    dumQ4.r2.val = 1

#Monterey
if hcountycode.ival != 6053:
    dumQ4.r3.val = 1

#Paso
if hcountycode.ival != 6079:
    dumQ4.r4.val = 1

#Willamette Valley
if not(hDMA.r820):
    dumQ4.r5.val = 1

#Lake Tahoe
if hcountycode.ival != 6:
    dumQ4.r6.val = 1
    </exec>

  </checkbox>

  <suspend/>

 <!-- <quota label="QuotaQ4" cond="1" overquota="noqual" sheet="QuotaQ4"/> -->

  <suspend/>

  <exec>
print p.markers

for x in hidQ4.rows:
    if hasMarker('/QuotaQ4/dumQ4_%s' % x.label):
        x.val = 1
  </exec>

  <checkbox
   label="hidQ4"
   onLoad="copy('dumQ4', rows=True)"
   shuffle="rows"
   translateable="0"
   where="execute,survey,report">
    <title>FINAL QUALIFIED DESTINATIONS (West Virginia + 	TWO randomly-picked competitive destinations)</title>
  </checkbox>

  <suspend/>

  <exec>
textDestinations = [iRow.text for iRow in hidQ4.rows.order if iRow]
indexDestinations = [iRow.index for iRow in hidQ4.rows.order if iRow]
p.tDestinations = textDestinations
p.destIndex = indexDestinations

print textDestinations

for eachRow in qRandomDest.rows:
    if len(textDestinations) gt eachRow.index:
        eachRow.val = textDestinations[eachRow.index]
  </exec>

  <text
   label="qRandomDest"
   size="40"
   ss:rowClassNames="qsraIsExcluded-1"
   where="execute,survey,report">
    <title>Randomization order of Destinations</title>
    <row label="r1">1st</row>
    <row label="r2">2nd</row>
    <row label="r3">3rd</row><!-- row label="r4">4th</row -->
  </text>

  <suspend/>

  <radio
   label="qCarousel1"
   cardrating:lrg_maxwidth="30%"
   cardrating:navigation="1"
   optional="1"
   shuffle="rows"
   sst="0"
   uses="cardrating.1"
   where="survey,report,notdp">
    <title><div style="border:1px dashed black;padding:5px 5px;"><p>In this question, please provide your personal impressions of the following places as travel destinations:</p>
        <br />
  <ul>
    <li style="list-style-type: none;" /><i> <b>${p.tDestinations[0]}</b></i>
    <li style="list-style-type: none;" /><i> <b>${p.tDestinations[1]}</b></i>
    <li style="list-style-type: none;" /><i> <b>${p.tDestinations[2]}</b></i>
  </ul>
  <p>To do this, please indicate how much you agree or disagree that each of the following
  statements applies to each destination. Use a 10-point scale, where "1" means you
  <b>do not agree at all</b> that the place has that characteristic and "10" means you <b>agree completely</b>.</p><br />
  <p>Even though you may not have visited these places, it is your <b>impressions</b>
  we are interested in. <b>So please use what you have seen and read in advertising, the Internet, books, or magazines,
   or heard from friends or relatives as well as your own experience to answer the following questions.</b>
   Select "0" only when you have no impression at all of a destination on a particular dimension.</p>
  </div>
  </title>
    <row label="r1">Easy to get to by air</row>
    <row label="r2">Easy to get to by road</row>
    <row label="r3">Not too far away</row>
    <row label="r4">Affordable to get to</row>
    <row label="r5">Excellent climate overall</row>
    <row label="r6">Truly beautiful scenery</row>
    <row label="r7">Unique scenery</row>
    <row label="r8">Elegant, sophisticated restaurants</row>
    <row label="r9">First-class hotels/resorts</row>
    <row label="r10">Noted for innovative, unique cuisine</row>
    <row label="r11">Great for outdoor sports/recreational activities (e.g., hiking, cycling, camping)</row>
    <row label="r12">Great for golfers</row>
    <row label="r13">Interesting place</row>
    <row label="r14">Lots of things to see and do</row>
    <row label="r15">Well-known landmarks</row>
    <row label="r16">Interesting wineries/breweries/distilleries</row>
    <row label="r17">Noted for its history</row>
    <row label="r18">Interesting festivals/fairs/events</row>
    <row label="r19">Exciting nightlife/entertainment/shows</row>
    <row label="r20">Popular with vacationers</row>
    <row label="r21">A fun place for a vacation</row>
    <row label="r22">Good place to relax</row>
    <row label="r23">A unique vacation experience</row>
    <row label="r24">A place I would feel welcome</row>
    <row label="r25">Good place for families to visit</row>
    <row label="r26">Good for an adult vacation</row>
    <row label="r27">Great for wellness and spa experiences</row>
    <row label="r28">Great for renewal of body and soul</row>
    <row label="r29">Unique and luxurious spas</row>
    <row label="r30">A good place to live</row>
    <row label="r31">A good place to start a career</row>
    <row label="r32">A good place to start a business</row>
    <row label="r33">A good place to attend college</row>
    <row label="r34">A good place to purchase a vacation home</row>
    <row label="r35">A good place to retire</row>
    <row label="r36">A place I’d really enjoy visiting</row>
    <col label="c1" value="1">hiddencol1</col>
    <col label="c2" value="2">hiddencol2</col>
    <style name="question.after"><![CDATA[
<style>

#question_qCarousel1{
    margin-bottom:-5%;

}

#question_qCarousel1 .sq-cardrating-widget, #question_qCarousel1 .sq-cardrating-center{
    font-size:15px;
    word-wrap:break-word;

}

#question_qCarousel1 .sq-cardrating-buttons{
    display:none;
}

#question_qCategories1 .sq-atm1d-block {
  text-align: center;
}

.question-text{
  font-size:1.0rem;
  margin:auto;
  text-align:center;
}

.sq-atm1d .sq-atm1d-button {
  height: 70px !important;
  margin-left: 3px !important;
  margin-right: 3px !important;
}
.sq-atm1d .sq-atm1d-button.hasError {
  background-color: lightcoral !important;
}

.sq-atm1d .sq-atm1d-content {
  font-size: 12px !important;
  text-align: center !important;
}

.sq-atm1d .sq-atm1d-button.hasError .sq-atm1d-content {
  color: #fff !important;
}
.cust-msg{font-weight:bold;color:cc0000;font-size:20px;background-color:lightgray;}

</style>

<script>
  $ (function() {
    var settings = {
      categoryId: "qCategories1",
      rateId: "qButtons1",
      hiddenDataId: "qPICKED1",
      showBackendData: false
    };
    var categoryQ =  $ ('#question_'+settings.categoryId);
    var rateQ = $ ('#question_'+settings.rateId);
    var selectedClass = "sq-atm1d-selected";

    var numberPattern = /\d+/g;
    var categorieButtons = categoryQ.find('.sq-atm1d-button');
    var rateButtons = rateQ.find('.sq-atm1d-button');
    var prevButton = $ ('.sq-cardrating-prev')
    var nextButton = $ ('.sq-cardrating-next')
    var hiddenData = $ ('#question_'+settings.hiddenDataId+' .row-elements')

    settings.showBackendData && $ (".answers, #question_"+settings.hiddenDataId).show();

    var readyInterval = setInterval(function() {
      if( $ ('.sq-atm1d-button').length ) {
        if( $ ('.question-error').length ) {
          console.log("here has error");
          var attributeElement = $ (".sq-cardrating-card[data-position='0']")

          hiddenData.eq(attributeElement.attr('data-label').match(numberPattern) - 1).find('td.hasError').each(function (index, el) {
            //categorieButtons.eq($ (el).index() - 1).addClass('hasError')
            console.log(el, $ (el).index())
          });
        }
        else {
          console.log("here no error");
          if ($ ('.sq-cardrating-itable').length) {
            categorieButtons.eq(0).click();
          }
        }
        clearInterval(readyInterval);
      }
    }, 300);

    categorieButtons.unbind().click(function(event) {
      console.log("event", event);

      categorieButtons.removeClass('categorieSelected');

      $ (this).addClass('categorieSelected');

      try {
        var currentValue = getCurrentValue();

        console.log({currentValue});

        !event.isTrigger && clearRate();

        currentValue!='' && restoreRate(currentValue);

        console.log({currentValue})
        console.log("current", $ (".sq-cardrating-card[data-position='0']").data("label"))
        $ (".cust-msg").addClass("hidden")
        if($ (".sq-cardrating-card[data-position='0']").data("ordinal")==24) $ (".cust-msg1").removeClass("hidden")	//25th
        if($ (".sq-cardrating-card[data-position='0']").data("ordinal")==59) $ (".cust-msg2").removeClass("hidden")	//60th
      } catch(e) {
        // statements
        console.log("");
      }
    });

    rateButtons.unbind().click(function(event) {
      var thisElem = $ (this);

      setTimeout(function() {
          var isSelected = thisElem.hasClass(selectedClass);

          console.log({thisElem, isSelected});

          if ( isSelected ) {
            try {
              var currentValue = thisElem.attr('data-label').match(numberPattern) - 1
              var currentAttribute = $ ( ".sq-cardrating-card[data-position='0']" ).attr('data-label').match(numberPattern)
              var selectedCategory = $ ('#question_'+settings.categoryId+' .categorieSelected');
              var currentCategories = selectedCategory.length ? selectedCategory.attr('data-label').match(numberPattern) : categorieButtons.eq(0).addClass('categorieSelected').attr('data-label').match(numberPattern);
              var lastCategorie = categorieButtons.last().attr('data-label').match(numberPattern)[0] == currentCategories[0]

              console.log({currentValue, currentAttribute, currentCategories, lastCategorie, selectedCategory});

              if (currentCategories!=null){
                var treeRow = $ ('#question_'+settings.hiddenDataId+' .row-elements').eq(currentAttribute-1).find('span.cell-input input')
                treeRow.eq(currentCategories-1).val(currentValue)
                var checkTreeIndex=[];
                var checkTree = treeRow.filter(function(index) {
                        if (this.value === ""){
                            checkTreeIndex += index
                        }
                        return this.value === "";
                });

                console.log({checkTreeIndex, checkTree});

                if (!checkTree.length && lastCategorie){
                  $ ('.sq-cardrating-button').eq(0).trigger('click',false)

                  !isFirstCatSelected() && clickCatButton(categorieButtons.first());
                }
                else if (!categorieButtons.find('hasError').length && !checkTree.length){
                  console.log("move to next item after going back");
                  $ ('.sq-cardrating-button').eq(0).trigger('click',false)

                  !isFirstCatSelected() && clickCatButton(categorieButtons.first());
                }
                else if(checkTree.length && lastCategorie){
                  clickCatButton(categorieButtons.eq(checkTreeIndex[0]));
                }
                else{
                  console.log("here else");
                  clickCatButton(categorieButtons.eq(currentCategories[0]));
                }

                // Unselect after transitioning to next item
                setTimeout(function() {
                  rateButtons.filter("."+selectedClass).click();
                }, 500);
              }
              if ($ ('.sq-cardrating-card').last().attr('data-position') <= 0 && (!checkTree.length)){
                setTimeout(function() {
                  $ ('#btn_continue').click()
                }, 300);
              }
            } catch(e) {
              console.log(e);
            }

          }
      }, 100)

    });

    prevButton.add(nextButton).click(onCarouselNavClick);

    function restoreRate(currentValue) {
      rateButtons
        .eq(currentValue)
          .addClass(selectedClass)
          .find("input:radio")
            .prop("checked", true);;

      rateQ.find(".answers input:radio").eq(currentValue).prop("checked", true);
    }

    function clearRate() {
      rateButtons
        .removeClass(selectedClass)
        .find("input:radio")
          .prop("checked", false);

      rateQ.find(".answers input:radio").prop("checked", false);
    }

    function getCurrentValue() {
      //var currentCategories = $ (this).attr('data-label').match(numberPattern)
      var currentCategories = categorieButtons.filter('.categorieSelected').attr('data-label').match(numberPattern)
      var currentAttribute = $ (".sq-cardrating-card[data-position='0']").attr('data-label').match(numberPattern)
      var currentValue = $ ('#question_qPICKED1 .row-elements').eq(currentAttribute-1).find('span.cell-input input')
                          .eq(currentCategories-1).val()

      return currentValue;
    }

    function clickCatButton(whichCat) {
      setTimeout(function() {
        whichCat.trigger('click',false)
      }, 500);
    }

    function isFirstCatSelected() {
      return categorieButtons.first().hasClass("sq-atm1d-selected");
      //return categorieButtons.first().hasClass("sq-atm1d-selected") || categorieButtons.first().hasClass("categorieSelected");
    }

    function onCarouselNavClick() {
      if( !$ (this).attr("data-disabled") ) {
        setTimeout(function() {
          console.log("firstCat selected?", isFirstCatSelected());

          clearRate();

          var currentValue = getCurrentValue();

          if( !isFirstCatSelected() ) {
            categorieButtons.first().trigger('click',false)
          }
          else {
            console.log("currentValue", currentValue);
            currentValue!='' && restoreRate(currentValue);
          }
        }, 1000);
      }
    }
  });
</script>
]]></style>
  </radio>

  <radio
   label="qCategories1"
   atm1d:large_buttonAlign="center"
   atm1d:large_contentAlign="center"
   atm1d:showInput="0"
   atm1d:viewMode="tiled"
   optional="1"
   sst="0"
   uses="atm1d.9"
   where="survey,report,notdp">
    <title><p></p></title>
    <row label="r1">${p.tDestinations[0]}</row>
    <row label="r2">${p.tDestinations[1]}</row>
    <row label="r3">${p.tDestinations[2]}</row><!-- row label="r4">${p.tDestinations[3]}</row -->
  </radio>

  <radio
   label="qButtons1"
   atm1d:large_buttonAlign="center"
   atm1d:large_contentAlign="center"
   atm1d:numCols="3"
   atm1d:showInput="0"
   atm1d:viewMode="tiled"
   fir="off"
   optional="1"
   uses="atm1d.9"
   where="survey,report,notdp">
    <title><p></p></title>
    <row label="r1" value="1"><u><b>Do Not <br />Agree</b></u> <br /><br />1</row>
    <row label="r2" value="2">2</row>
    <row label="r3" value="3">3</row>
    <row label="r4" value="4">4</row>
    <row label="r5" value="5">5</row>
    <row label="r6" value="6">6</row>
    <row label="r7" value="7">7</row>
    <row label="r8" value="8">8</row>
    <row label="r9" value="9">9</row>
    <row label="r10" value="10"><u><b>Agree <br />Completely</b></u><br /><br />10</row>
    <row label="r0" value="0"><u><b>No<br /> Impression</b></u><br /><br />0</row>
    <style name="question.after"><![CDATA[
<style type="text/css">
        #question_text_qButtons1{
                display:none;
        }
        #question_qButtons1 .sq-atm1d-button{
          background-color: #eee;
          color: black;
          border-radius: 10px;
          height: 70px;
          font-size:12px;
        }
        #question_qButtons1 .sq-atm1d-button:hover{
          box-shadow: 2px 2px;
        }

\@if device.smartphone
        #question_qButtons1 .sq-atm1d-buttons{
          width:90%;
        }
\@endif device.desktop
        #question_qButtons1 .sq-atm1d-buttons{
          width:65%;
        }
   </style>
]]></style>
  </radio>

  <text
   label="qPICKED1"
   onLoad="copy('qCarousel1', rows=True)"
   optional="0"
   size="5"
   ss:rowClassNames="qsraIsExcluded-1"
   sst="0">
    <title>Picked row selected</title>
    <col label="c1">${p.tDestinations[0]}</col>
    <col label="c2">${p.tDestinations[1]}</col>
    <col label="c3">${p.tDestinations[2]}</col><!-- col label="c4">${p.tDestinations[3]}</col -->
    <style name="question.after" wrap="ready"><![CDATA[
$ ('.question-error-text').text('Please provide an answer for each of the highlighted options')
$ ('.label_qCarousel1 .question-text').after($ ('.question-error'))
]]></style>
    <style name="question.after"><![CDATA[
<style>
#question_qPICKED1{
    display:none;
}

 </style>
]]></style>
  </text>

  <suspend/>

  <exec>
for iRow in qPICKED1.rows:
   if iRow.any:

      Q4[p.destIndex[0]][iRow.index].val = int(iRow.c1.val)+1
      Q4[p.destIndex[1]][iRow.index].val = int(iRow.c2.val)+1
      Q4[p.destIndex[2]][iRow.index].val = int(iRow.c3.val)+1
      #Q4[p.destIndex[3]][iRow.index].val = int(iRow.c4.val)+1

Q4.cols.order= hidQ4.rows.order
  </exec>

  <number
   label="Q4"
   colCond="hidQ4.rows[col.index]"
   onLoad="copy('dumDestinations2', cols=True), copy('qCarousel1', rows=True)"
   optional="0"
   shuffle="cols"
   size="3"
   sst="0"
   verify="range(0,10)"
   where="execute,survey,report">
    <title><p>In this question, please provide your personal impressions of the following as places to visit:</p>
        <br />
  <ul>
    <li style="list-style-type: none;" /><i> <b>${p.tDestinations[0]}</b></i>
    <li style="list-style-type: none;" /><i> <b>${p.tDestinations[1]}</b></i>
    <li style="list-style-type: none;" /><i> <b>${p.tDestinations[2]}</b></i>
  </ul>
<p>To do this, please indicate how much you agree or disagree that each of the following
  statements applies to each destination. Use a 10-point scale, where "1" means you
  <b>do not agree at all</b> that the place has that characteristic and "10" means you <b>agree completely</b>.</p><br />
  <p>Even though you may not have visited these places, it is your <b>impressions</b>
  we are interested in. <b>So please use what you have seen and read in advertising, the Internet, books, or magazines,
   or heard from friends or relatives as well as your own experience to answer the following questions.</b>
   Select "0" only when you have no impression at all of a destination on a particular dimension.</p>
   </title>
  </number>

  <suspend/>

  <exec>
#del p.tDestinations
slCntrPerColumn = 0
overallList = []


for c in Q4.cols:
    if c.any:
        nList = []
        for x in c.values:
            if x not in nList:
                nList.append(x)
            if x not in overallList:
                overallList.append(x)
        print nList
        if len(nList) == 1 and nList[0] != 0L:
            slCntrPerColumn = slCntrPerColumn+1

print slCntrPerColumn
print overallList
#if len(overallList)==1:
if len(overallList) == 1 and overallList[0] != 0L:
    hidQ4slcheck.val = hidQ4slcheck.r1.index
else:
    hidQ4slcheck.val = hidQ4slcheck.r2.index
  </exec>

  <radio
   label="hidQ4slcheck"
   translateable="0"
   where="execute,survey,report">
    <title>Q4 SL check (TERMINATE IF RESPONDENT GAVE SAME RATING FOR ALL DESTINATIONS, NOT INCLUDING 0)</title>
    <row label="r1" value="1">Straightliner - Yes</row>
    <row label="r2" value="2">Straightliner - No</row>
  </radio>

  <suspend/>

  <html label="ScreenOut3" cond="hidQ4slcheck.r1 and 0" where="survey">Thank you for your interest. However, at this time, we are looking for survey respondents who fit a different profile. Please do not be discouraged, as there may be future studies to which you will be invited to participate.</html>

  <term label="Q4term" cond="hidQ4slcheck.r1">Q4 term: straightlined at Q4</term>
</block>

<note>========== end of Q4 ===============</note>










++DQC BIG NUMBER OF RECORDS
REPORT > MORE TOOLS
	Click edit Data at the top right










++EXEC for DUMMY ONLY
cond="not gv.isSST()"













++CONJOINT RADIO *** WITH NOTES ***
++CONJOINT RADIO *** WITH NOTES ***
++CONJOINT RADIO *** WITH NOTES ***
++CONJOINT RADIO *** WITH NOTES ***
++CONJOINT RADIO *** WITH NOTES ***
++CONJOINT RADIO *** WITH NOTES ***
++CONJOINT RADIO *** WITH NOTES ***
++CONJOINT RADIO *** WITH NOTES ***


<res label="opt1">Package 1</res>
<res label="opt2">Package 2</res>
<res label="opt3">Package 3</res>
<res label="opt4">None of these</res>

<res label="hoverR1text">Client Success:  Ongoing support to help your team use the software to manage processes and achieve desired outcomes

      Basic:  60 minutes of DFIN Subject Matter Expert (SME) time for how-to demonstrations, user trainings, reviews, etc.

      Enhanced: Basic package plus:
          •	90 minutes of DFIN SME time
          •	DFIN review 1 week before filing
          •	DFIN review 2 days before filing

      Premium: Enhanced package plus:
          •	XBRL consultant assigned for filing
          •	Initial project creation session
          •	XBRL roll-forward reminder
          •	Day of filing review
          •	Post project follow up
</res>

<res label="hoverR2text">Document Change Requests: Requests to update or revise document formats.  Requests beyond the specified maximum will be charged separately</res>

<res label="hoverR3text">Late-cycle Change Requests: requests for DFIN to update or revise formatting or tagging within 2 days of the filing / reporting deadline</res>

<res label="hoverR4text">XBRL Tagging: DFIN will implement the number of tags indicated each quarter.   Additional tags over the package limit will be charged on per tag basis.  This also includes roll-forward.</res>

<res label="hoverR5text">Dedicated XBRL Consultant: DFIN will provide a dedicated consultant that is familiar with your business to support XBRL tagging</res>

<res label="hoverR6text">Regulatory Education: mechanisms that DFIN might use to inform clients about changes in SEC disclosure regulations.  The potential mechanisms are:
      a)	Email
      b)	Phone
      c)	Webcasts
      d)	Online training
</res>

<res label="Conjoint_attr1txt">Client Success</res>
<res label="Conjoint_attr2txt">Document Change Requests (per quarter)</res>
<res label="Conjoint_attr3txt">Late Cycle Change Requests (per quarter)</res>
<res label="Conjoint_attr4txt">XBRL Tagging (tags per quarter)</res>
<res label="Conjoint_attr5txt">Dedicated XBRL consultant</res>
<res label="Conjoint_attr6txt">Regulatory Education</res>
<res label="Conjoint_attr7txt">Annual Price</res>




<note> !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! UPDATE BLOCK NAME !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! </note>
  <block label="CONJOINT_BLOCK">


  <html label="Conjoint_TEST" cond="0" translateable="0">CONJOINT TESTING JUMP</html>

  <suspend/>

<note>
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! UPLOAD AND UPDATE .dat FILE WITH AN EXAMPLE below !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
cjid	version	task	concept	product	att1	att2	att3	att4	att5	att6	att7	att8
v1t1c1	1	1	1	1	2	1	3	3	2	1	4	6
v1t1c2	1	1	2	1	1	3	1	2	2	1	2	8
v1t1c3	1	1	3	1	1	2	2	1	1	2	1	1
v1t2c1	1	2	1	1	2	2	2	3	1	2	2	9

cjid is a concatenated id for version, task, and concept
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! UPLOAD AND UPDATE .dat FILE WITH AN EXAMPLE below !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
</note>

    <exec when="init">
QConjoint = File("qconjoint.dat","cjid")
    </exec>


<note> !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! UPDATE QUOTA LABEL AND SHEET NAME !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! </note>

    <quota label="qtCONJOINT_version" overquota="noqual" sheet="CONJOINT_version"/>


<note> !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! UPDATE _Version LABEL !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! </note>
<note> !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! UPDATE MARKERS !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! </note>

    <number
    label="QCONJOINT_Version"
    size="3"
    translateable="0"
    where="execute,survey,report">
      <title>QCONJOINT - Conjoint Version</title>
      <exec>
print p.markers
for x in p.markers:
  if "/CONJOINT_version/CONJOINTver_" in x:
    QCONJOINT_Version.val = int(x.split("_")[-1])
    break
      </exec>

    </number>

    <suspend/>


<note> !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! UPDATE ATTRIBUTES !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! </note>

    <block label="QCONJOINT_Attributes" cond="0">
      <radio
     label="dConjointAtt1txt"
     where="execute,survey,notdp,none">
        <title>Client Success</title>
        <row label="r1" value="1">Basic</row>
        <row label="r2" value="2">Enhanced</row>
        <row label="r3" value="3">Premium</row>
      </radio>

      <radio
     label="dConjointAtt2txt"
     where="execute,survey,notdp,none">
        <title>Document Change Requests (per quarter)</title>
        <row label="r1" value="1">--</row>
        <row label="r2" value="2">3</row>
        <row label="r3" value="3">6</row>
      </radio>

      <radio
     label="dConjointAtt3txt"
     where="execute,survey,notdp,none">
        <title>Late Cycle Change Requests (per quarter)</title>
        <row label="r1" value="1">--</row>
        <row label="r2" value="2">1</row>
        <row label="r3" value="3">3</row>
      </radio>

      <radio
     label="dConjointAtt4txt"
     where="execute,survey,notdp,none">
        <title>XBRL Tagging (tags per quarter)</title>
        <row label="r1" value="1">Self-tagging</row>
        <row label="r2" value="2">Up to 750</row>
        <row label="r3" value="3">Up to 1,000</row>
      </radio>

      <radio
     label="dConjointAtt5txt"
     where="execute,survey,notdp,none">
        <title>Dedicated XBRL consultant</title>
        <row label="r1" value="1">–</row>
        <row label="r2" value="2">✓</row>
      </radio>

      <radio
     label="dConjointAtt6txt"
     where="execute,survey,notdp,none">
        <title>Regulatory Education</title>
        <row label="r1" value="1">--</row>
        <row label="r2" value="2">Email / webcasts</row>
        <row label="r3" value="3">Phone / webcasts</row>
        <row label="r4" value="4">Phone / webcasts / training</row>
      </radio>

      <radio
     label="dConjointAtt7txt"
     where="execute,survey,notdp,none">
        <title>Annual Price</title>
        <row label="r1" value="1">$15,000</row>
        <row label="r2" value="2">$20,000</row>
        <row label="r3" value="3">$25,000</row>
        <row label="r4" value="4">$30,000</row>
        <row label="r5" value="5">$40,000</row>
        <row label="r6" value="6">$50,000</row>
        <row label="r7" value="7">$60,000</row>
      </radio>

      <suspend/>
    </block>




<note> !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! UPDATE QConjointInfo_ LABEL (Replace all: QConjointInfo_ ) !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! </note>
<note> !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! UPDATE respInfo DEPENDING ON HOW MANY ATTRIBUTES ABOVE !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! </note>

    <loop label="QCONJOINT_Loop" vars="task">
      <block label="QCONJOINT_LoopBlock">
        <exec>
for col in QConjointInfo_[loopvar: label].cols:
    uVal = "v%st%sc%s"%(QCONJOINT_Version.val,[loopvar: label],col.label[1:])
    print uVal

    respInfo = QConjoint.get(uVal)

    if respInfo:
        QConjointInfo_[loopvar: label].r1.attr(col.label).val = respInfo["att1"]
        QConjointInfo_[loopvar: label].r2.attr(col.label).val = respInfo["att2"]
        QConjointInfo_[loopvar: label].r3.attr(col.label).val = respInfo["att3"]
        QConjointInfo_[loopvar: label].r4.attr(col.label).val = respInfo["att4"]
        QConjointInfo_[loopvar: label].r5.attr(col.label).val = respInfo["att5"]
        QConjointInfo_[loopvar: label].r6.attr(col.label).val = respInfo["att6"]
        QConjointInfo_[loopvar: label].r7.attr(col.label).val = respInfo["att7"]
        </exec>

        <text
      label="QConjointInfo_[loopvar: label]"
      optional="1"
      translateable="0"
      where="execute">
          <title>Conjoint Info</title>
          <col label="c1">Package 1</col>
          <col label="c2">Package 2</col>
          <col label="c3">Package 3</col>
          <row label="r1">Attribute 1</row>
          <row label="r2">Attribute 2</row>
          <row label="r3">Attribute 3</row>
          <row label="r4">Attribute 4</row>
          <row label="r5">Attribute 5</row>
          <row label="r6">Attribute 6</row>
          <row label="r7">Attribute 7</row>
        </text>

        <suspend/>


<note> !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! UPDATE QUESTION DETAILS !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! </note>
<note> !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! UPDATE NUMBER OF TASKS !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! </note>
<note> !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! UPDATE rowspan="7" !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! </note>

        <radio
      label="QCONJOINT_[loopvar: label]"
      translateable="0">
          <title><span style="font-weight: bold; font-color: #0F4C75;">Which service package would you most prefer?</span><br />
            <br />
            Note: The definition of each feature can be viewed by hovering the cursor over the feature name<br />
            <br />
        		<br />
        		<br />
          <div style="text-align:center;">[loopvar: label] / 8</div> <br />
        <div id="conjoint_container">
  <table id="conjoint_tbl">
    <tbody>
    <tr>
      <td width="10%" class="con_head"></td>
      <td width="10%" class="con_head"><b>${res.opt1}</b></td>
      <td width="10%" style="border-left: none;" class="con_head"><b>${res.opt2}</b></td>
      <td width="10%" style="border-left: none;" class="con_head"><b>${res.opt3}</b></td>
      <td width="10%" style="border-left: none;" class="con_head"></td>
    </tr>
      <tr>
        <td class="attr_label"><span title="${res.hoverR1text}">${res.Conjoint_attr1txt}</span></td>
        <td class="attr_text">${dConjointAtt1txt.attr('r%s'%QConjointInfo_[loopvar: label].r1.c1.val).text}</td>
        <td class="attr_text">${dConjointAtt1txt.attr('r%s'%QConjointInfo_[loopvar: label].r1.c2.val).text}</td>
        <td class="attr_text">${dConjointAtt1txt.attr('r%s'%QConjointInfo_[loopvar: label].r1.c3.val).text}</td>
        <td style="text-align: center" rowspan="7" class="attr_none">${res.opt4}</td>
        </tr>
      <tr>
        <td style="border-top: none;" class="attr_label"><span title="${res.hoverR2text}">${res.Conjoint_attr2txt}</span></td>
        <td style="border-top: none;" class="attr_text">${dConjointAtt2txt.attr('r%s'%QConjointInfo_[loopvar: label].r2.c1.val).text}</td>
        <td style="border-top: none;" class="attr_text">${dConjointAtt2txt.attr('r%s'%QConjointInfo_[loopvar: label].r2.c2.val).text}</td>
        <td style="border-top: none;" class="attr_text">${dConjointAtt2txt.attr('r%s'%QConjointInfo_[loopvar: label].r2.c3.val).text}</td>
      </tr>
      <tr>
        <td style="border-top: none;" class="attr_label"><span title="${res.hoverR3text}">${res.Conjoint_attr3txt}</span></td>
        <td style="border-top: none;" class="attr_text">${dConjointAtt3txt.attr('r%s'%QConjointInfo_[loopvar: label].r3.c1.val).text}</td>
        <td style="border-top: none;" class="attr_text">${dConjointAtt3txt.attr('r%s'%QConjointInfo_[loopvar: label].r3.c2.val).text}</td>
        <td style="border-top: none;" class="attr_text">${dConjointAtt3txt.attr('r%s'%QConjointInfo_[loopvar: label].r3.c3.val).text}</td>
      </tr>
      <tr>
        <td style="border-top: none;" class="attr_label"><span title="${res.hoverR4text}">${res.Conjoint_attr4txt}</span></td>
        <td style="border-top: none;" class="attr_text">${dConjointAtt4txt.attr('r%s'%QConjointInfo_[loopvar: label].r4.c1.val).text}</td>
        <td style="border-top: none;" class="attr_text">${dConjointAtt4txt.attr('r%s'%QConjointInfo_[loopvar: label].r4.c2.val).text}</td>
        <td style="border-top: none;" class="attr_text">${dConjointAtt4txt.attr('r%s'%QConjointInfo_[loopvar: label].r4.c3.val).text}</td>
      </tr>
      <tr>
        <td style="border-top: none;" class="attr_label"><span title="${res.hoverR5text}">${res.Conjoint_attr5txt}</span></td>
        <td style="border-top: none;" class="attr_text">${dConjointAtt5txt.attr('r%s'%QConjointInfo_[loopvar: label].r5.c1.val).text}</td>
        <td style="border-top: none;" class="attr_text">${dConjointAtt5txt.attr('r%s'%QConjointInfo_[loopvar: label].r5.c2.val).text}</td>
        <td style="border-top: none;" class="attr_text">${dConjointAtt5txt.attr('r%s'%QConjointInfo_[loopvar: label].r5.c3.val).text}</td>
      </tr>
      <tr>
        <td style="border-top: none;" class="attr_label"><span title="${res.hoverR6text}">${res.Conjoint_attr6txt}</span></td>
        <td style="border-top: none;" class="attr_text">${dConjointAtt6txt.attr('r%s'%QConjointInfo_[loopvar: label].r6.c1.val).text}</td>
        <td style="border-top: none;" class="attr_text">${dConjointAtt6txt.attr('r%s'%QConjointInfo_[loopvar: label].r6.c2.val).text}</td>
        <td style="border-top: none;" class="attr_text">${dConjointAtt6txt.attr('r%s'%QConjointInfo_[loopvar: label].r6.c3.val).text}</td>
      </tr>
      <tr>
        <td style="border-top: none;" class="attr_label">${res.Conjoint_attr7txt}</td>
        <td style="border-top: none;" class="attr_text">${dConjointAtt7txt.attr('r%s'%QConjointInfo_[loopvar: label].r7.c1.val).text}</td>
        <td style="border-top: none;" class="attr_text">${dConjointAtt7txt.attr('r%s'%QConjointInfo_[loopvar: label].r7.c2.val).text}</td>
        <td style="border-top: none;" class="attr_text">${dConjointAtt7txt.attr('r%s'%QConjointInfo_[loopvar: label].r7.c3.val).text}</td>
      </tr>
      <tr>
        <td style="border-top: none;" class="attr_label"></td>
        <td class="attr_input"><span class="itemList"></span></td>
        <td class="attr_input"><span class="itemList"></span></td>
        <td class="attr_input"><span class="itemList"></span></td>
        <td class="attr_input"><span class="itemList"></span></td>
        </tr>
    </tbody>
  </table>
</div></title>
          <row label="r1" alt="Package 1" value="1">${res.opt1}</row>
          <row label="r2" alt="Package 2" value="2">${res.opt2}</row>
          <row label="r3" alt="Package 3" value="3">${res.opt3}</row>
          <row label="r4" alt="None of these" value="4">${res.opt4}</row>
<!--row label="r4" value="4">Would seek a competing solution</row>
          <row label="r5" value="5">Would deploy on-premises</row-->
          <style name="question.after"><![CDATA[
<script>
  $ ('.question-text').removeAttr('title');

  $ ( document ).tooltip();
</script>
]]></style>
          <style label="conjoint_style1" name="question.after"><![CDATA[
<style type="text/css">
.ui-tooltip {
    white-space: break-spaces;
}

#conjoint_tbl {
  width: 100%;
}
#conjoint_tbl, td {
  border: 3px solid #0f4c75;
  border-collapse: collapse;
  padding: 5px;
  font-size: 1.3rem;
}
.con_head, .attr_text {
  text-align: center;

}
.con_head, .attr_label {
  background-color: #0f4c75;

  color: white;
}
.clickableCell {
  text-align: center ;
text-align: -webkit-center;
  display: grid;
}
 .attr_text:nth-child(even), .attr_input:nth-child(even) {
  background-color: #bbe1fa;
}
.attr_input:last-child{
  background-color: white; !important;
}
.con_head {
  border-style: solid;
  border-color: #0f4c75;
  border-right-style: dotted;
  border-right-color: white;
  border-right-width: thin;
}
.attr_label {
  font-weight: bold;
  border-style: solid;
  border-color: #0f4c75;
  border-bottom-style: dotted;
  border-bottom-color: white;
  border-bottom-width: thin;
}
.attr_text {
  border-style: solid;
  border-color: #0f4c75;
  border-bottom-style: dotted;
  border-bottom-width: thin;
}

.attr_text
{
      padding: 5px;
}

.attr_none{
padding-left: 5px;
padding-right: 5px;
  font-weight:bold;
}

#comment_T_conjoint_footer_[loopvar: label], #comment_B_conjoint_footer_[loopvar: label] {
  margin-top: -65px;
  padding-bottom: 0px;
}

</style>

<script>
$ (document).ready(function() {

$ ('.answers:first .clickableCell').each(function(index){
  $ (this).insertAfter($ ('.itemList').eq(index));
});
$ ('span.cell-text').remove();

});
</script>
]]></style>
        </radio>

        <suspend/>
      </block>

      <looprow label="1">
        <loopvar name="task">Task 1</loopvar>
      </looprow>

      <looprow label="2">
        <loopvar name="task">Task 2</loopvar>
      </looprow>

      <looprow label="3">
        <loopvar name="task">Task 3</loopvar>
      </looprow>

      <looprow label="4">
        <loopvar name="task">Task 4</loopvar>
      </looprow>

      <looprow label="5">
        <loopvar name="task">Task 5</loopvar>
      </looprow>

      <looprow label="6">
        <loopvar name="task">Task 6</loopvar>
      </looprow>

      <looprow label="7">
        <loopvar name="task">Task 7</loopvar>
      </looprow>

      <looprow label="8">
        <loopvar name="task">Task 8</loopvar>
      </looprow>
    </loop>


  <suspend/>

<note> !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! UPDATE NUMBER OF TASKS !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! </note>

  <exec>
dConjointSL.val = dConjointSL.r2.index
num_tasks = 8
cnt = 0

for i in range(1,num_tasks+1):
	if allQuestions["QCONJOINT_%s" % str(i)].r4:
		cnt+=1

if cnt == num_tasks:
	dConjointSL.val = dConjointSL.r1.index
  </exec>

  <radio
   label="dConjointSL"
   translateable="0"
   where="execute,survey,report">
    <title>HIDDEN: None of these selected for all Conjoint tasks</title>
    <row label="r1" value="1">Yes</row>
    <row label="r2" value="2">No</row>
  </radio>

  <suspend/>


  </block>

  <suspend/>
</block>












++DROPDOWN WITH OTH CHOICE
++DROPDOWN WITH OTH CHOICE
++DROPDOWN WITH OTH CHOICE
++DROPDOWN WITH OTH CHOICE
++DROPDOWN WITH OTH CHOICE
++DROPDOWN WITH OTH CHOICE
++DROPDOWN WITH OTH CHOICE
++DROPDOWN WITH OTH CHOICE
++DROPDOWN WITH OTH CHOICE
++DROPDOWN WITH OTH CHOICE
<select
  label="Q5x1"
  cond="Q4.r1">
<title>Marque abaixo a cidade em que mora:</title>
<choice label="ch1">Acrelândia</choice>
<choice label="ch2">Assis Brasil</choice>
<choice label="ch3">Brasiléia</choice>
<choice label="ch4">Bujari</choice>
<choice label="ch5">Capixaba</choice>
<choice label="ch6">Cruzeiro do Sul</choice>
<choice label="ch7">Epitaciolândia</choice>
<choice label="ch8">Feijó</choice>
<choice label="ch9">Jordão</choice>
<choice label="ch10">Mâncio Lima</choice>
<choice label="ch11">Manoel Urbano</choice>
<choice label="ch12">Marechal Thaumaturgo</choice>
<choice label="ch13">Plácido de Castro</choice>
<choice label="ch14">Porto Walter</choice>
<choice label="ch15">Rio Branco</choice>
<choice label="ch16">Rodrigues Alves</choice>
<choice label="ch17">Santa Rosa do Purus</choice>
<choice label="ch18">Senador Guiomard</choice>
<choice label="ch19">Sena Madureira</choice>
<choice label="ch20">Tarauacá</choice>
<choice label="ch21">Xapuri</choice>
<choice label="ch22">Porto Acre</choice>
<choice label="ch99">OUTRO</choice>
<style name="question.after" wrap="ready"><![CDATA[
qid = "Q5x1" // Base Question
textList = ["[ch99] OUTRO","OUTRO"] //oth punch for othbox to show textList[0]=dev,textList[1]=live
triggerQuestion="Q5x1OE" //question to show



showOpen(qid,textList,triggerQuestion);
$ ("#question_" + qid).click(function(){
                showOpen(qid,textList,triggerQuestion);
});
function showOpen(qid,textList,triggerQuestion){
var interval;
interval = setInterval(function(){
                var flag = false;
                $ ("#question_" + triggerQuestion).hide();
                $ ("select.dropdown").each(function(){
                      if($ ('.dropdown :selected').text() == textList[0] || $ ('.dropdown :selected').text() == textList[1])
                      {
                         $ ("#question_" + triggerQuestion).show();
                         flag = true;
                      }
                  });
                if(!flag){
                           $ ("#question_" + triggerQuestion).hide();
                           $ ("#question_" + triggerQuestion).find(".input").val("");
                        }
  clearInterval(interval)
},10);
};
]]></style>
</select>
<text
  label="Q5x1OE"
  size="40"
  optional="1"
    cond="Q4.r1">
<title>OE</title>
<comment>Please be as specific as possible</comment>
<row label="r1"></row>
</text>
<suspend/>











++UNARCHIVE
https://rnd-empower-decipher-unarchive.prod.eks.dynata.com/portal/












++GRID WITH OE IN COLUMN

<res label="Q25Error">Please specify an answer.</res>

<checkbox
  label="Q25"
  atleast="1"
  grouping="cols"
  shuffle="rows">
  <title>If you were to purchase furniture or home furnishings and accessories at a <u>physical store location</u>, how would you most likely transport the items home?</title>
  <comment>Select all that apply</comment>
  <row label="r1">Hire someone through a service to take it home for me (e.g. TaskRabbit)</row>
  <row label="r2">My own vehicle</row>
  <row label="r3">Cab/taxi</row>
  <row label="r4">Uber/Lyft</row>
  <row label="r5">Rent a car/van/truck</row>
  <row label="r6">Public transit (e.g., Bus)</row>
  <row label="r7">Walk</row>
  <row label="r8">Carpool with friends/family</row>
  <row label="r9">Ride a bicycle</row>
  <row label="r10" optional="1" randomize="0" ss:rowClassNames="Q25_other">Other (Specify)</row>
  <col label="c1">When transporting <u>Furniture</u> home from a physical store I would use…</col>
  <col label="c2">When transporting <u>home furnishings and accessories</u> home from a physical store I would use…</col>
  <style name="question.after" wrap="ready"><![CDATA[
  $ ("td[headers='Q25_c1']").last().find("span.cell-sub-wrapper").after($ (".Q25_otherc1"));
  $ ("td[headers='Q25_c2']").last().find("span.cell-sub-wrapper").after($ (".Q25_otherc2"));
  $ ("#question_Q25xr10").hide();
]]></style>
<validate>
if (Q25.r10.c1 and Q25xr10.r10xc1.val in ['',None]) or (not Q25.r10.c1 and Q25xr10.r10xc1.val not in ['',None]):
  error(res.Q25Error,row=Q25.r10,col=Q25.c1)
if (Q25.r10.c2 and Q25xr10.r10xc2.val in ['',None]) or (not Q25.r10.c2 and Q25xr10.r10xc2.val not in ['',None]):
  error(res.Q25Error,row=Q25.r10,col=Q25.c2)
</validate>

</checkbox>

<text
  label="Q25xr10"  optional="1"
  size="25"
  sortCols="asc,survey"
  verify="len(3,300)">
  <title>&amp;nbsp;</title>
  <row label="r10xc1" ss:rowClassNames="Q25_otherc1"/>
  <row label="r10xc2" ss:rowClassNames="Q25_otherc2"/>

</text>

<suspend/>













++MX CAROUSEL WITH NUMERIC ONLY OTH

  <block label="C2_BLOCK">
    <checkbox 
    label="C2"
    atleast="1"
    fir="off"
    randomize="0"
    rowCond="C1[row]"
    shuffle="rows"
    sst="0">
      <title>Of these retailers, please indicate <u><b>how many times in the past 12 months you have shopped</b></u> for furniture or home furnishing accessories in their physical store, on their website, or on their mobile app.</title>
      <validate>
for eachRow in C2.rows:
  itemSum = 0
  if C1.attr('%s' %(eachRow.label) ) and not eachRow.c4:
    if C2_c1.attr('%s' %(eachRow.label) ).val not in ['',None]:
      itemSum = itemSum + int(C2_c1.attr('%s' %(eachRow.label) ).val)
    if C2_c2.attr('%s' %(eachRow.label) ).val not in ['',None]:
      itemSum = itemSum + int(C2_c2.attr('%s' %(eachRow.label) ).val)
    if C2_c3.attr('%s' %(eachRow.label) ).val not in ['',None]:
      itemSum = itemSum + int(C2_c3.attr('%s' %(eachRow.label) ).val)
    if itemSum == 0:
      error(res.C2Error %(eachRow.text))
      
      
for eachRow in C2.rows:
    if C2_c1.attr('%s' %(eachRow.label)).val not in ['',None]:
        if int(C2_c1.attr('%s' %(eachRow.label) ).val) gt 9999:
            error(res.C2range)
    elif C2_c2.attr('%s' %(eachRow.label) ).val not in ['',None]:
        if int(C2_c2.attr('%s' %(eachRow.label) ).val) gt 9999:
            error(res.C2range)
    elif C2_c3.attr('%s' %(eachRow.label) ).val not in ['',None]:
        if int(C2_c3.attr('%s' %(eachRow.label) ).val) gt 9999:
            error(res.C2range)
      </validate>

      <row label="r1">Ashley HomeStore</row>
      <row label="r2">Bed Bath &amp; Beyond</row>
      <row label="r3">IKEA</row>
      <row label="r4">Walmart</row>
      <row label="r5">Target</row>
      <row label="r6">Amazon</row>
      <row label="r7">Wayfair</row>
      <row label="r8">Pottery Barn</row>
      <row label="r9">West Elm</row>
      <row label="r10">Costco</row>
      <row label="r11">Rooms to Go</row>
      <row label="r12">Bob's Discount Furniture</row>
      <row label="r13">Crate &amp; Barrel</row>
      <row label="r14">Nebraska Furniture Mart</row>
      <row label="r15">At Home</row>
      <row label="r16">Big Lots</row>
      <row label="r17">Lowe's</row>
      <row label="r18">Overstock</row>
      <row label="r19">Macy’s</row>
      <row label="r20">HomeGoods</row>
      <row label="r21">Kohl's</row>
      <row label="r22">Parachute</row>
      <row label="r23">JC Penney</row>
      <row label="r24">Marshalls</row>
      <row label="r25">Brooklinen</row>
      <row label="r26">TJ Maxx</row>
      <row label="r27">Home Depot</row>
      <col label="c1"># of times shopped in-store{@other::true@}</col>
      <col label="c2"># of times shopped on website{@other::true@}</col>
      <col label="c3"># of times shopped on mobile app{@other::true@}</col>
      <col label="c4">Have not shopped in past 12 months{@exclusive::scales@}</col>
      <style name="page.head"><![CDATA[
<style>.answers{display:none;}#btn_continue {visibility: hidden;}</style>
]]></style>
      <style name="question.after"><![CDATA[
<div class="mx-stage" id ="mx-stage-${this.label}" style="margin: 0 auto;"></div> <link rel="stylesheet" href="//${mxDomain}/rnd/plugins/ionicons/ionicons-2.0.1/css/ionicons.min.css" /> <script type="text/javascript" src="//${mxDomain}/rnd/rnd-mx-framework/v2.3/loader/application.min.js?cache=${int(random.random() * 1000)}"></script> <style> .mx-stage {
        padding-bottom: 60px;
    }

    .mx-carouselapp-scaleholder-inner {
        text-align: center;
    }

    </style>
    <script type="text/javascript">
// =============== DOCUMENTATION ===============> https://dynatacorp.atlassian.net/wiki/spaces/RT/pages/49156549
      var platforms= {
        decipher: "decipher", confirmit: "confirmit"
      }

    var currentPlatform=platforms.decipher;
    if (!mx.qDefs) mx.qDefs= {}

    if (!mx.toolLoader) {
        mx.toolLoader=new mx.Loader( {
            baseFileURL: "//${mxDomain}/rnd/rnd-mx-framework/v2.3/", scriptDeps: [ "core/libs.min.js", "core/advanced_ui/Carousel_libs.js", "core/advanced_ui/Carousel.js"], cssDeps: [ "https://${mxDomain}/rnd/plugins/ionicons/ionicons-2.0.1/css/ionicons.min.css", "core/style.css", "core/libs.css", "core/advanced_ui/Carousel.css", "themes/blue.css", "core/advanced_ui/Carousel_libs.css"], coreFile: "core/application.min.js", messages: null, // "//speeders.dynata.com/mx/messages/getMsg.php?callback=window.saveMessages&lang=9",
            platformInterface: {
                js: "platform_interface_" + currentPlatform + "/application.min.js", css: "platform_interface_" + currentPlatform + "/style.css"
            }
        });
        mx.qDefs["${this.label}"]=${jsexport()}
        var isTest = "${gv.isUser() and not gv.debug.respview}" === "True";

        var toolSettings= {
            //standard tool params
            toolJs: "//${mxDomain}/rnd/rnd-mx-tools/carousel/1.8.0/application.min.js",
            toolName: "CarouselApp",
            orientation: "horizontal",
            itemWidth: "130px",
            itemHeight: "100px",
            itemMargin: 35,
            scaleWidth: "120px",
            scaleHeight: "60px",
            jsToLoad: [],
            cssToLoad: ["//${mxDomain}/rnd/rnd-mx-tools/carousel/1.8.0/style.css"],
            baseToolPath: "",
            container: "#mx-stage-${this.label}",
            toolCssNames: ["carouselapp-1"],
            qid: getFormName(1),
            // time_qid: getFormName(2),
            // order_qid: getFormName(3),
            scale_other_qid: "C2_c1,C2_c2,C2_c3",
            timeInterval: 100,
             minRequired: 1,
             maxAllowed: 99,
             //end standard tool params
             answerItemShape: "triangle",
             answerScaleShape: "triangle",
             showItemTick: true,
             showScaleTick: false,
             componentOrder: "items,scales",
             zoomPosition: "BOTTOM_RIGHT",
             zoomIcon: "https://${mxDomain}/rnd/rnd-mx-tools/collapsible/images/mag9.png",
             imageBaseURL: "empty",
             scaleNewLine: true,
            autoNextItem: false,
             autoNext: false,
             navigation: "answered",
             showCounter: false,
             counterPreText: "",
             counterSepText: "/",
             counterPostText: "",
             lazyLoadLargeImg: false,
             showIndicator: true,
             lazyLoadLargeImg: false,
             countAnswered: false,
            showZoom: true,
            animationSpeed: 500
        }
        //END USER EDITABLE CODE
        mx.toolLoader.registerSettings(toolSettings, function(info) {
            info.bridge.setPageValidation(function () {
                    // console.log("setPageValidation");
                    return true;
                  });
            info.instance.on("tool_loaded", function(e){
               //console.log("tool_loaded", e);
               if(isTest){
                   ${initMxDataToggle()}
               }
            });
        });
    }





$ (document).ready(function () {
  mx.toolLoader.initLoad();        

  $.getScript('${MxToolUsageUrl('mxcarousel')}');
    
  $ (':text').attr('maxlength',4);

// ONLY ALLOW NUMERIC INPUT
  setTimeout( function() { 
    $ (':text').on('keydown',function(e){
      
      var code = (e.keyCode ? e.keyCode : e.which);
      
      if (e.keyCode == 46 || e.keyCode == 8 || e.keyCode == 9 
      || e.keyCode == 27 || e.keyCode == 13 
      || (e.keyCode == 65 && e.ctrlKey === true) 
      || (e.keyCode >= 35 && e.keyCode <= 39)){
        return;
      }else {
        // IF IT'S NOT A NUMBER STOP THE KEYPRESS
        if (e.shiftKey || (e.keyCode < 48 || e.keyCode > 57) && (e.keyCode < 96 || e.keyCode > 105 )) {
          e.preventDefault(); 
        }
      }
    }); 
  }, 500);	    


});



    </script>
]]></style>
    </checkbox>

    <text 
    label="C2_c1"
    rowCond="C1[row]"
    shuffle="rows"
    shuffleBy="C2"
    ss:rowClassNames="qsraIsExcluded-1">
      <title>Hidden: Data node for storing other specify in scale C2_c1</title>
      <row label="r1">Ashley HomeStore</row>
      <row label="r2">Bed Bath &amp; Beyond</row>
      <row label="r3">IKEA</row>
      <row label="r4">Walmart</row>
      <row label="r5">Target</row>
      <row label="r6">Amazon</row>
      <row label="r7">Wayfair</row>
      <row label="r8">Pottery Barn</row>
      <row label="r9">West Elm</row>
      <row label="r10">Costco</row>
      <row label="r11">Rooms to Go</row>
      <row label="r12">Bob's Discount Furniture</row>
      <row label="r13">Crate &amp; Barrel</row>
      <row label="r14">Nebraska Furniture Mart</row>
      <row label="r15">At Home</row>
      <row label="r16">Big Lots</row>
      <row label="r17">Lowe's</row>
      <row label="r18">Overstock</row>
      <row label="r19">Macy’s</row>
      <row label="r20">HomeGoods</row>
      <row label="r21">Kohl's</row>
      <row label="r22">Parachute</row>
      <row label="r23">JC Penney</row>
      <row label="r24">Marshalls</row>
      <row label="r25">Brooklinen</row>
      <row label="r26">TJ Maxx</row>
      <row label="r27">Home Depot</row>
      <style name="question.after"><![CDATA[
<script type='text/javascript'>
        if (mx.qDefs) mx.qDefs["${this.label}"] = ${jsexport()}
    </script>
]]></style>
    </text>

    <text 
    label="C2_c2"
    rowCond="C1[row]"
    shuffle="rows"
    shuffleBy="C2">
      <title>Hidden: Data node for storing other specify in scale C2_c2</title>
      <row label="r1">Ashley HomeStore</row>
      <row label="r2">Bed Bath &amp; Beyond</row>
      <row label="r3">IKEA</row>
      <row label="r4">Walmart</row>
      <row label="r5">Target</row>
      <row label="r6">Amazon</row>
      <row label="r7">Wayfair</row>
      <row label="r8">Pottery Barn</row>
      <row label="r9">West Elm</row>
      <row label="r10">Costco</row>
      <row label="r11">Rooms to Go</row>
      <row label="r12">Bob's Discount Furniture</row>
      <row label="r13">Crate &amp; Barrel</row>
      <row label="r14">Nebraska Furniture Mart</row>
      <row label="r15">At Home</row>
      <row label="r16">Big Lots</row>
      <row label="r17">Lowe's</row>
      <row label="r18">Overstock</row>
      <row label="r19">Macy’s</row>
      <row label="r20">HomeGoods</row>
      <row label="r21">Kohl's</row>
      <row label="r22">Parachute</row>
      <row label="r23">JC Penney</row>
      <row label="r24">Marshalls</row>
      <row label="r25">Brooklinen</row>
      <row label="r26">TJ Maxx</row>
      <row label="r27">Home Depot</row>
      <style name="question.after"><![CDATA[
<script type='text/javascript'>
        if (mx.qDefs) mx.qDefs["${this.label}"] = ${jsexport()}
    </script>
]]></style>
    </text>

    <text 
    label="C2_c3"
    rowCond="C1[row]"
    shuffle="rows"
    shuffleBy="C2">
      <title>Hidden: Data node for storing other specify in scale C2_c3</title>
      <row label="r1">Ashley HomeStore</row>
      <row label="r2">Bed Bath &amp; Beyond</row>
      <row label="r3">IKEA</row>
      <row label="r4">Walmart</row>
      <row label="r5">Target</row>
      <row label="r6">Amazon</row>
      <row label="r7">Wayfair</row>
      <row label="r8">Pottery Barn</row>
      <row label="r9">West Elm</row>
      <row label="r10">Costco</row>
      <row label="r11">Rooms to Go</row>
      <row label="r12">Bob's Discount Furniture</row>
      <row label="r13">Crate &amp; Barrel</row>
      <row label="r14">Nebraska Furniture Mart</row>
      <row label="r15">At Home</row>
      <row label="r16">Big Lots</row>
      <row label="r17">Lowe's</row>
      <row label="r18">Overstock</row>
      <row label="r19">Macy’s</row>
      <row label="r20">HomeGoods</row>
      <row label="r21">Kohl's</row>
      <row label="r22">Parachute</row>
      <row label="r23">JC Penney</row>
      <row label="r24">Marshalls</row>
      <row label="r25">Brooklinen</row>
      <row label="r26">TJ Maxx</row>
      <row label="r27">Home Depot</row>
      <style name="question.after"><![CDATA[
<script type='text/javascript'>
        if (mx.qDefs) mx.qDefs["${this.label}"] = ${jsexport()}
    </script>
]]></style>
    </text>

    <note>========================================================= jMGTT001_1 END =========================================================</note>  </block>

  <suspend/>














++MX CAROUSEL WITH COND AND DYNAMIC OE
      <checkbox 
     label="Q10"
     atleast="1"
     grouping="cols"
     ss:rowClassNames="qsraEngagedLength-1">
        <title>Please select what type of <strong>bed frame</strong> you <strong>currently </strong>have in each bedroom. If you have multiple rooms and they have different types of bed frames, please select all that apply to each type of room. </title>
        <comment><em>Select all that apply.</em></comment>
        <validate>
if (Q10.r9.c1 and not(Q10xr9.r10xc1)) or (not(Q10.r9.c1) and Q10xr9.r10xc1):
    error(res.OEColError,row=Q10.r9,col=Q10.c1)

if (Q10.r9.c2 and not(Q10xr9.r10xc2)) or (not(Q10.r9.c2) and Q10xr9.r10xc2):
    error(res.OEColError,row=Q10.r9,col=Q10.c2)

if (Q10.r9.c3 and not(Q10xr9.r10xc3)) or (not(Q10.r9.c3) and Q10xr9.r10xc3):
    error(res.OEColError,row=Q10.r9,col=Q10.c3)

if (Q10.r9.c4 and not(Q10xr9.r10xc4)) or (not(Q10.r9.c4) and Q10xr9.r10xc4):
    error(res.OEColError,row=Q10.r9,col=Q10.c4)
        </validate>

        <row label="r1">Non-upholstered bed frame</row>
        <row label="r2">Upholstered bed frame</row>
        <row label="r3">Trundle bed frame</row>
        <row label="r4">Futon</row>
        <row label="r5">Bunk bed</row>
        <row label="r6">Murphy bed</row>
        <row label="r7">Daybed</row>
        <row label="r8">Crib/ Bassinet</row>
        <row label="r9" optional="1" randomize="0">Other (Specify)</row>
        <col label="c1" cond="S9.r1.val ge 1">Primary Adult Bedroom</col>
        <col label="c2" cond="S9.r2.val ge 1">Guest Bedroom</col>
        <col label="c3" cond="S9.r3.val ge 1">Children's Bedroom</col>
        <col label="c4" cond="S9.r4.val ge 1">College Student Bedroom</col>
        <style name="question.after" wrap="ready"><![CDATA[
  $ ("td[headers='Q10_c1']").last().find("span.cell-sub-wrapper").after($ (".Q10_otherc1"));
  $ ("td[headers='Q10_c2']").last().find("span.cell-sub-wrapper").after($ (".Q10_otherc2"));
  $ ("td[headers='Q10_c3']").last().find("span.cell-sub-wrapper").after($ (".Q10_otherc3"));
  $ ("td[headers='Q10_c4']").last().find("span.cell-sub-wrapper").after($ (".Q10_otherc4"));
  $ ("#question_Q10xr9").hide();
]]></style>
      </checkbox>

      <text 
     label="Q10xr9"
     size="25"
     sortCols="asc,survey"
     ss:rowClassNames="qsraEngagedLength-1"
     verify="len(1,300)">
        <title>&amp;nbsp;</title>
        <row label="r10xc1" cond="S9.r1.val ge 1" ss:rowClassNames="Q10_otherc1"/>
        <row label="r10xc2" cond="S9.r2.val ge 1" ss:rowClassNames="Q10_otherc2"/>
        <row label="r10xc3" cond="S9.r3.val ge 1" ss:rowClassNames="Q10_otherc3"/>
        <row label="r10xc4" cond="S9.r4.val ge 1" ss:rowClassNames="Q10_otherc4"/>
      </text>

      <suspend/>






++LOOP DISPLAY QUESTION ON SPECIFIC ITEMS ONLY
looprows="1,4,5,6,7,8,9,11"








++SOUND/VIDEO AUDIO/VIDEO VIDEO/AUDIO VIDEO AUDIO SCREENER CHECK
<note>Start Block - Audio/Video Test Screener</note>
    <block label="bAudioVideoScreener" cond="not gv.isSST()" builder:title="Audio/Video Screener - Media Player">
      <suspend/>
      <html label="AudioVideoScrIntro" where="survey">On the next screen you will be shown a video of an animal and asked to identify which animal you see.
&lt;br /&gt;&lt;br /&gt;
Please ensure your speakers are turned on, or you can use your headphones, as you also need to listen and identify the sound of an animal.</html>
      <suspend/>
      <exec sst="0">
x = [0,1,2,3,4,5]
x = ishuffle(x)
hAudVidScr.val = x[0]
hAudVidScr1.val = x[0]
hAudVidScr2.val = x[0]
    </exec>
      <suspend/>
      <select label="hAudVidScr" randomize="0" sst="0" translateable="0" where="execute,survey">
        <title>hAudVidScr (do not edit)</title>
        <style name="page.head"><![CDATA[
<style>.devContainer{margin-bottom: 0;}.devContainer .question {margin-bottom: 0;margin-top: 0;padding-top: 0;padding-bottom: 0;}</style>
]]></style>
        <choice label="r1">//${mxDomain}/rnd/demos/audio_video/MLN</choice>
        <choice label="r2">//${mxDomain}/rnd/demos/audio_video/YOB</choice>
        <choice label="r3">//${mxDomain}/rnd/demos/audio_video/KGT</choice>
        <choice label="r4">//${mxDomain}/rnd/demos/audio_video/YCT</choice>
        <choice label="r5">//${mxDomain}/rnd/demos/audio_video/VVL</choice>
        <choice label="r6">//${mxDomain}/rnd/demos/audio_video/MSC</choice>
      </select>
      <select label="hAudVidScr1" randomize="0" sst="0" translateable="0" where="execute,survey">
        <title>hAudVidScr (do not edit)</title>
        <choice label="r2">bird</choice>
        <choice label="r3">cat</choice>
        <choice label="r4">chicken</choice>
        <choice label="r5">cow</choice>
        <choice label="r6">dog</choice>
        <choice label="r9">horse</choice>
      </select>
      <select label="hAudVidScr2" randomize="0" sst="0" translateable="0" where="execute,survey">
        <title>hAudVidScr (do not edit)</title>
        <choice label="r3">cat</choice>
        <choice label="r4">chicken</choice>
        <choice label="r5">cow</choice>
        <choice label="r6">dog</choice>
        <choice label="r9">horse</choice>
        <choice label="r2">bird</choice>
      </select>
      <suspend/>
      <text label="hAudioVideoScrPlayer" optional="0">
        <title>&lt;span style="display:none;"&gt;no&lt;/span&gt;</title>
        <res label="sys_textNoAnswerSelected">Please make sure to finish the video.</res>
        <row label="r1">Times played</row>
        <row label="r2">Current time</row>
        <style name="page.head"><![CDATA[
<style>.answers{display:none;}</style>
]]></style>
        <style name="question.after"><![CDATA[
<div class="mx-stage" id= "mx-stage-${this.label}"></div>
<script type="text/javascript" crossorigin="anonymous" src="//${mxSfDomain}/rnd/rnd-mx/rnd-mx-framework/v3.1/loader/application.min.js?cache=${int(random.random() * 1000)}"></script>
<script type="text/javascript">
// =============== DOCUMENTATION ===============> https://confluence.dynata.com/x/KRCbAQ
if (!mx.qDefs) mx.qDefs = {};
if (!mx.toolLoader) mx.toolLoader = new mx.Loader({
	"baseFileURL": "//${mxSfDomain}/rnd/rnd-mx/rnd-mx-framework/v3.1/",
	"scriptDeps": [
		"core/libs.min.js",
		"core/advanced_ui/Player_libs.js",
		"core/advanced_ui/Player.js"
	],
	"cssDeps": [
		"core/style.css",
		"core/libs.css",
		"core/advanced_ui/Player.css",
		"core/advanced_ui/Player_libs.css"
	],
	"coreFile": "core/application.min.js",
	"messages": null,
	"platformInterface": {
		"js": "platform_interface_decipher/application.min.js",
		"css": "platform_interface_decipher/style.css"
	}
});
mx.qDefs["${this.label}"] = ${jsexport()};
var isTest = "${gv.isUser() and not gv.debug.respview}" === "True";

//SETTINGS AND STUFF GOES HERE
var toolSettings = {
	"toolJs": "application.min.js",
	"toolName": "MediaPlayer",
	"jsToLoad": [],
	"cssToLoad": ["style.css"],
	"baseToolPath": "//${mxSfDomain}/rnd/rnd-mx/rnd-mx-tools/media_player/1.4/",
	"container": "#mx-stage-${this.label}",
	"qid": "${this.label}",
	"toolCssNames": [],

	"autoPlay": true,
	"allowSeek": false,
	"showControls" : true,
	"loop" : false,

	"videoURLs": { //optional - validate one of this or audioURL are set
		mp4: "${hAudVidScr.selected.text}.mp4",
		webm: "${hAudVidScr.selected.text}.webm",
		ogv: "${hAudVidScr.selected.text}.ogv"
	},
	"volume": 100,

	"customValidation": function(q) {
		//console.log("customValidation()");
		return true;
	},
};

mx.toolLoader.registerSettings(toolSettings, function(info) {
	info.bridge.setPageValidation(function() {
		//console.log("setPageValidation");
		return true;
	});
	info.instance.on("tool_loaded", function(e) {
		//console.log("tool_loaded", e);
		info.bridge.platformInterface._questions[toolSettings.qid].rows[0].items.forEach(function(item) {
			if (info.bridge.platformInterface.getQuestionAnswer(toolSettings.qid, item.precode).val == '') info.bridge.platformInterface.setQuestionAnswer(toolSettings.qid, item.precode, {val: '0'})
		})
		jQuery("#btn_continue").addClass("showNext")

		if (isTest) {
			${initMxDataToggle()}
			jQuery(".mx-stage").before(jQuery(".dataToggle"))
		}
	});

	info.instance.on("fullscreen_changed", function(e) {
		if (e.detail) {
			//console.log('in')
		} else {
			//console.log('out')
		}
	});
	info.instance.on("volume_change", function(e) {
		$ ('.volume').text(e.detail * 100);
	});
});
//END USER EDITABLE CODE
    
$ (document).ready(function() {
	mx.toolLoader.initLoad();
	$.getScript('${MxToolUsageUrl('mxmediaplayer')}');
});
</script>
<style>
div#question_hAudioVideoScrPlayer {padding-top: 0;padding-bottom: 0;margin-bottom: 0;}
.mx-stage {margin-top: 0;margin-bottom: 0;}
h1#question_text_AudioVideoScreener1, div#question_AudioVideoScreener1 .answers, div#question_AudioVideoScreener1 .instruction-text {display: block !important;}
h1#question_text_AudioVideoScreener2, div#question_AudioVideoScreener2 .answers, div#question_AudioVideoScreener2 .instruction-text {display: block !important;}
.fp-player a[href='https://flowplayer.com/hello/?from=player'] {visibility: hidden;}
.dataToggle{margin-top: 0 !important;margin-bottom: 20px;}
a.fp-share.fp-icon {display: none;}
</style>
]]></style>
      </text>
      <radio label="AudioVideoScreener1" randomize="0" sst="0">
        <title>What animal can you see in the video above?</title>
        <row label="r1">Ape</row>
        <row label="r2">Bird</row>
        <row label="r3">Cat</row>
        <row label="r4">Chicken</row>
        <row label="r5">Cow</row>
        <row label="r6">Dog</row>
        <row label="r7">Elephant</row>
        <row label="r8">Frog</row>
        <row label="r9">Horse</row>
        <row label="r10">I could not see the animal</row>
      </radio>
      <radio label="AudioVideoScreener2" randomize="0" sst="0">
        <title>Please identify the animal you just heard.</title>
        <row label="r1">Ape</row>
        <row label="r2">Bird</row>
        <row label="r3">Cat</row>
        <row label="r4">Chicken</row>
        <row label="r5">Cow</row>
        <row label="r6">Dog</row>
        <row label="r7">Elephant</row>
        <row label="r8">Frog</row>
        <row label="r9">Horse</row>
        <row label="r10">I could not hear the animal</row>
      </radio>
      <suspend/>
      <term label="AudioVideoScreenerTerm1" cond="hAudVidScr1.selected.label != AudioVideoScreener1.selected.label" sst="0">Video Screener</term>
      <term label="AudioVideoScreenerTerm2" cond="hAudVidScr2.selected.label != AudioVideoScreener2.selected.label" sst="0">Audio Screener</term>
    </block>
    <note>End Block - Audio/Video Test Screener</note>
<suspend/>





++CHECK EXACT ERROR
https://survey-d.dynata.com/apps/projectwarnings#/exceptions














T WITH "SPECIAL" NOTES:
7 - B5 - File() function
p: Ziplist from file
5 - INTERNAL Fruit Survey
tom CSS: Back and Continue Buttons
plesource list="3": Redirect links changed
: Autopopulate Autocode
17 - INTERNAL Project 1 - Boxer Study
ileDevices: smartphone only
 Upload Video; Record Video with limit
 Show/Hide/Trigger OE text
 Image Upload; required; No answer (TBD)
: Single page validations
: Group; Custom Page CSS
47 - INTERNAL Project 2 - Dog Chew Study
 STATE input convert to REGION; Matching from file
 Rotated Rows rowShuffle="rotate"
ncepts exec: Rotated order in LOOP
 simple lightbox (like fancybox)
_Q18_loop: LOOP example
xt: text pipe in LOOP
: ranksort with customization; image pipe with lighbox
5 | DECIPHER | ORD-382257-W4Q2 | Longwoods | Mock Study
 carousel / slider setup :: esp. Longwoods

60 - 22270006 | Decipher 1903846 | ORD-393446-W7S5 | Kewpie Positioning & Packaging: Mayo and Dressing
	- dummobile: check device used
	- QS3: DMA from zip code
	- QK1 K5: Maxdiff
	- QK1 K5 QK2 K6: Lightbox optimized; images [CSS]
	- QPM3 QPD3: Freeze tabel headers; sticky column headers [CSS]
63 - 33348002 | Decipher 190496 | ORD-397083-C9G8 | CMI
	- dQPath Q9: usage of <goto>, SPECIAL COMPLEX skip logic
	- after Q8: Sawtooth Conjoint
	- after_conjoint dQ10_holder: where="none"
66 - 22272014 | Decipher 1904489 | ORD-400808-T7P2 | Flo Technologies Consumer Research
	- A1: State to Region
	- F10: Zip to Region
	- C17: ranksort with custom css
68 - 22592018  Decipher 19041174  Wave 1 Residential Brand Health Tracker  ORD-404265-G4S4  Protobrand
	- Q106: Zip code from file
	- dCompany: quota prioritization
1904750 22218329 Auto Intenders Location-Internal Project ORD-402180-X2V0 - from Arlene
	- Q3: conjoint
71 - 33214003 | 1905282 | ORD-394763-R6N7 | NYC DMA
	- C1: Conjoint - see OneNote for notes
73 - 33597001 | p5616230 | ORD-395913-B9Y6 | Brand Awareness Tracker Study W1
	- Q1: pageQwithDK, Open Text List Grid w/ DK
	- Q4: MultiGrid Straightliner SL check w/ masking question
	- Q5: pageQwithDK, numeric list with sum with DK
79 - 33594002 | 1906611 | ORD-415431-S4S1 | Skincare Project 1| ISDIN
	- dvid: video player
	- dummobile + PRODDESC1 / d10img1: optimized lightbox for mobile
80 - 33130012 | 1906706 | New project Mullen: Scout AUS | ORD-418454-W7Y6
	- Q16: grid with left and right text legend
	- Q39: autosum percentage
	- Q45: cardsort - checkbox grid with too many options
82 - 33616001 | 1906944 | ORD-418304-W0T5 | Finance Executives
	- Q1002: ranksort.4 with two columns for RANK BOX
83 - 22118457 | 19061051 | ORD-421405-V1T5 | Longwoods | Sonoma
	- qZip: zip code from file; other values from file
	- Q5: Longwoods special format: Q3 - 22118440 ORD-391078-K2M6 1903418 Hawaii ROI 2018 Longwoods International
		- update <exec> before dumq5; <exec> after grid_Comparisonx5_1 block; and Q3Quota for least fill; see folder for notes
  - WHEN GOING LIVE WITH Q5 SETUP: set to cond=0  <theme cond="list == '2'" name="frozen:company/theme_dk"/></themes>
      <theme cond="list == '2'" name="frozen:company/theme_dk"/></themes>
      TO
      <theme cond="0" name="frozen:company/theme_dk"/></themes>
 	- order_flow: capture order of randomization
	- Q17: audioplayer inside <loop>
	- Q8: showhideQ style; uidialogQ style; uidialogbox mobile optimized
85 - 22118458 | 1907361 | ORD-424283-D8Z3 | Longwoods | Airport Hassle Impact
	- DDR2 DDR3: USE THIS FOR LONGWOODS MOVING FORWARD
		- RECODE FORMULA IS IN FOLDER \ DATA
	- backup before hard delete 07/11/2019: https://survey-d.dynata.com/apps/portal#/projects/detail/selfserve/53b/1907525?q=1907525
89 - 22150053  1908446  ORD-430739-Z9H4  BrandSpark International (CA)  EU Off Road Vehicle Study
	- hSampType.r3: Google Tag Manager (GTM) - see <style> inside <themes>
	- Q6: checkbox with grouping; with 2 separate columns per group
	- Q16: Dropdown grid; rows and columns
	- Q16: Dropdown initial assignment of select
	- Q16: Dropdown freeze selection
	- Q17: Single grid with Dropdown pipe ins (answer from Q16)

